const Pp=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}};Pp();function ul(e,t){const i=Object.create(null),s=e.split(",");for(let r=0;r<s.length;r++)i[s[r]]=!0;return t?r=>!!i[r.toLowerCase()]:r=>!!i[r]}const Ip="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sp=ul(Ip);function Ru(e){return!!e||e===""}function lr(e){if(Q(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],r=Xt(s)?Ap(s):lr(s);if(r)for(const a in r)t[a]=r[a]}return t}else{if(Xt(e))return e;if($t(e))return e}}const kp=/;(?![^(]*\))/g,Lp=/:(.+)/;function Ap(e){const t={};return e.split(kp).forEach(i=>{if(i){const s=i.split(Lp);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function $e(e){let t="";if(Xt(e))t=e;else if(Q(e))for(let i=0;i<e.length;i++){const s=$e(e[i]);s&&(t+=s+" ")}else if($t(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function Mp(e,t){if(e.length!==t.length)return!1;let i=!0;for(let s=0;i&&s<e.length;s++)i=cr(e[s],t[s]);return i}function cr(e,t){if(e===t)return!0;let i=hh(e),s=hh(t);if(i||s)return i&&s?e.getTime()===t.getTime():!1;if(i=Q(e),s=Q(t),i||s)return i&&s?Mp(e,t):!1;if(i=$t(e),s=$t(t),i||s){if(!i||!s)return!1;const r=Object.keys(e).length,a=Object.keys(t).length;if(r!==a)return!1;for(const c in e){const u=e.hasOwnProperty(c),f=t.hasOwnProperty(c);if(u&&!f||!u&&f||!cr(e[c],t[c]))return!1}}return String(e)===String(t)}function Np(e,t){return e.findIndex(i=>cr(i,t))}const bo=e=>Xt(e)?e:e==null?"":Q(e)||$t(e)&&(e.toString===Bu||!nt(e.toString))?JSON.stringify(e,Ou,2):String(e),Ou=(e,t)=>t&&t.__v_isRef?Ou(e,t.value):Ai(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,r])=>(i[`${s} =>`]=r,i),{})}:ur(t)?{[`Set(${t.size})`]:[...t.values()]}:$t(t)&&!Q(t)&&!Fu(t)?String(t):t,Tt={},Li=[],Ae=()=>{},Rp=()=>!1,Op=/^on[^a-z]/,hr=e=>Op.test(e),dl=e=>e.startsWith("onUpdate:"),ie=Object.assign,fl=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Dp=Object.prototype.hasOwnProperty,_t=(e,t)=>Dp.call(e,t),Q=Array.isArray,Ai=e=>dr(e)==="[object Map]",ur=e=>dr(e)==="[object Set]",hh=e=>e instanceof Date,nt=e=>typeof e=="function",Xt=e=>typeof e=="string",_l=e=>typeof e=="symbol",$t=e=>e!==null&&typeof e=="object",Du=e=>$t(e)&&nt(e.then)&&nt(e.catch),Bu=Object.prototype.toString,dr=e=>Bu.call(e),Bp=e=>dr(e).slice(8,-1),Fu=e=>dr(e)==="[object Object]",pl=e=>Xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ao=ul(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fr=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Fp=/-(\w)/g,Oi=fr(e=>e.replace(Fp,(t,i)=>i?i.toUpperCase():"")),zp=/\B([A-Z])/g,ji=fr(e=>e.replace(zp,"-$1").toLowerCase()),zu=fr(e=>e.charAt(0).toUpperCase()+e.slice(1)),_a=fr(e=>e?`on${zu(e)}`:""),Ms=(e,t)=>!Object.is(e,t),Mo=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},Oo=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Do=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let uh;const Wp=()=>uh||(uh=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let an;class Hp{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&an&&(this.parent=an,this.index=(an.scopes||(an.scopes=[])).push(this)-1)}run(t){if(this.active)try{return an=this,t()}finally{an=this.parent}}on(){an=this}off(){an=this.parent}stop(t){if(this.active){let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.scopes)for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function Up(e,t=an){t&&t.active&&t.effects.push(e)}const ml=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Wu=e=>(e.w&Nn)>0,Hu=e=>(e.n&Nn)>0,Zp=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Nn},$p=e=>{const{deps:t}=e;if(t.length){let i=0;for(let s=0;s<t.length;s++){const r=t[s];Wu(r)&&!Hu(r)?r.delete(e):t[i++]=r,r.w&=~Nn,r.n&=~Nn}t.length=i}},Sa=new WeakMap;let bs=0,Nn=1;const ka=30;let Ve;const Jn=Symbol(""),La=Symbol("");class gl{constructor(t,i=null,s){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Up(this,s)}run(){if(!this.active)return this.fn();let t=Ve,i=Sn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ve,Ve=this,Sn=!0,Nn=1<<++bs,bs<=ka?Zp(this):dh(this),this.fn()}finally{bs<=ka&&$p(this),Nn=1<<--bs,Ve=this.parent,Sn=i,this.parent=void 0}}stop(){this.active&&(dh(this),this.onStop&&this.onStop(),this.active=!1)}}function dh(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Sn=!0;const Uu=[];function qi(){Uu.push(Sn),Sn=!1}function Gi(){const e=Uu.pop();Sn=e===void 0?!0:e}function pe(e,t,i){if(Sn&&Ve){let s=Sa.get(e);s||Sa.set(e,s=new Map);let r=s.get(i);r||s.set(i,r=ml()),Zu(r)}}function Zu(e,t){let i=!1;bs<=ka?Hu(e)||(e.n|=Nn,i=!Wu(e)):i=!e.has(Ve),i&&(e.add(Ve),Ve.deps.push(e))}function fn(e,t,i,s,r,a){const c=Sa.get(e);if(!c)return;let u=[];if(t==="clear")u=[...c.values()];else if(i==="length"&&Q(e))c.forEach((f,_)=>{(_==="length"||_>=s)&&u.push(f)});else switch(i!==void 0&&u.push(c.get(i)),t){case"add":Q(e)?pl(i)&&u.push(c.get("length")):(u.push(c.get(Jn)),Ai(e)&&u.push(c.get(La)));break;case"delete":Q(e)||(u.push(c.get(Jn)),Ai(e)&&u.push(c.get(La)));break;case"set":Ai(e)&&u.push(c.get(Jn));break}if(u.length===1)u[0]&&Aa(u[0]);else{const f=[];for(const _ of u)_&&f.push(..._);Aa(ml(f))}}function Aa(e,t){for(const i of Q(e)?e:[...e])(i!==Ve||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const Vp=ul("__proto__,__v_isRef,__isVue"),$u=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(_l)),jp=vl(),qp=vl(!1,!0),Gp=vl(!0),fh=Kp();function Kp(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const s=mt(this);for(let a=0,c=this.length;a<c;a++)pe(s,"get",a+"");const r=s[t](...i);return r===-1||r===!1?s[t](...i.map(mt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){qi();const s=mt(this)[t].apply(this,i);return Gi(),s}}),e}function vl(e=!1,t=!1){return function(s,r,a){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&a===(e?t?um:Ku:t?Gu:qu).get(s))return s;const c=Q(s);if(!e&&c&&_t(fh,r))return Reflect.get(fh,r,a);const u=Reflect.get(s,r,a);return(_l(r)?$u.has(r):Vp(r))||(e||pe(s,"get",r),t)?u:Gt(u)?!c||!pl(r)?u.value:u:$t(u)?e?Yu(u):bl(u):u}}const Yp=Vu(),Qp=Vu(!0);function Vu(e=!1){return function(i,s,r,a){let c=i[s];if(Ns(c)&&Gt(c)&&!Gt(r))return!1;if(!e&&!Ns(r)&&(Qu(r)||(r=mt(r),c=mt(c)),!Q(i)&&Gt(c)&&!Gt(r)))return c.value=r,!0;const u=Q(i)&&pl(s)?Number(s)<i.length:_t(i,s),f=Reflect.set(i,s,r,a);return i===mt(a)&&(u?Ms(r,c)&&fn(i,"set",s,r):fn(i,"add",s,r)),f}}function Xp(e,t){const i=_t(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&fn(e,"delete",t,void 0),s}function Jp(e,t){const i=Reflect.has(e,t);return(!_l(t)||!$u.has(t))&&pe(e,"has",t),i}function tm(e){return pe(e,"iterate",Q(e)?"length":Jn),Reflect.ownKeys(e)}const ju={get:jp,set:Yp,deleteProperty:Xp,has:Jp,ownKeys:tm},em={get:Gp,set(e,t){return!0},deleteProperty(e,t){return!0}},nm=ie({},ju,{get:qp,set:Qp}),yl=e=>e,_r=e=>Reflect.getPrototypeOf(e);function Co(e,t,i=!1,s=!1){e=e.__v_raw;const r=mt(e),a=mt(t);t!==a&&!i&&pe(r,"get",t),!i&&pe(r,"get",a);const{has:c}=_r(r),u=s?yl:i?xl:Rs;if(c.call(r,t))return u(e.get(t));if(c.call(r,a))return u(e.get(a));e!==r&&e.get(t)}function xo(e,t=!1){const i=this.__v_raw,s=mt(i),r=mt(e);return e!==r&&!t&&pe(s,"has",e),!t&&pe(s,"has",r),e===r?i.has(e):i.has(e)||i.has(r)}function Eo(e,t=!1){return e=e.__v_raw,!t&&pe(mt(e),"iterate",Jn),Reflect.get(e,"size",e)}function _h(e){e=mt(e);const t=mt(this);return _r(t).has.call(t,e)||(t.add(e),fn(t,"add",e,e)),this}function ph(e,t){t=mt(t);const i=mt(this),{has:s,get:r}=_r(i);let a=s.call(i,e);a||(e=mt(e),a=s.call(i,e));const c=r.call(i,e);return i.set(e,t),a?Ms(t,c)&&fn(i,"set",e,t):fn(i,"add",e,t),this}function mh(e){const t=mt(this),{has:i,get:s}=_r(t);let r=i.call(t,e);r||(e=mt(e),r=i.call(t,e)),s&&s.call(t,e);const a=t.delete(e);return r&&fn(t,"delete",e,void 0),a}function gh(){const e=mt(this),t=e.size!==0,i=e.clear();return t&&fn(e,"clear",void 0,void 0),i}function To(e,t){return function(s,r){const a=this,c=a.__v_raw,u=mt(c),f=t?yl:e?xl:Rs;return!e&&pe(u,"iterate",Jn),c.forEach((_,g)=>s.call(r,f(_),f(g),a))}}function Po(e,t,i){return function(...s){const r=this.__v_raw,a=mt(r),c=Ai(a),u=e==="entries"||e===Symbol.iterator&&c,f=e==="keys"&&c,_=r[e](...s),g=i?yl:t?xl:Rs;return!t&&pe(a,"iterate",f?La:Jn),{next(){const{value:m,done:w}=_.next();return w?{value:m,done:w}:{value:u?[g(m[0]),g(m[1])]:g(m),done:w}},[Symbol.iterator](){return this}}}}function xn(e){return function(...t){return e==="delete"?!1:this}}function im(){const e={get(a){return Co(this,a)},get size(){return Eo(this)},has:xo,add:_h,set:ph,delete:mh,clear:gh,forEach:To(!1,!1)},t={get(a){return Co(this,a,!1,!0)},get size(){return Eo(this)},has:xo,add:_h,set:ph,delete:mh,clear:gh,forEach:To(!1,!0)},i={get(a){return Co(this,a,!0)},get size(){return Eo(this,!0)},has(a){return xo.call(this,a,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:To(!0,!1)},s={get(a){return Co(this,a,!0,!0)},get size(){return Eo(this,!0)},has(a){return xo.call(this,a,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:To(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Po(a,!1,!1),i[a]=Po(a,!0,!1),t[a]=Po(a,!1,!0),s[a]=Po(a,!0,!0)}),[e,i,t,s]}const[sm,om,rm,am]=im();function wl(e,t){const i=t?e?am:rm:e?om:sm;return(s,r,a)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(_t(i,r)&&r in s?i:s,r,a)}const lm={get:wl(!1,!1)},cm={get:wl(!1,!0)},hm={get:wl(!0,!1)},qu=new WeakMap,Gu=new WeakMap,Ku=new WeakMap,um=new WeakMap;function dm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fm(e){return e.__v_skip||!Object.isExtensible(e)?0:dm(Bp(e))}function bl(e){return Ns(e)?e:Cl(e,!1,ju,lm,qu)}function _m(e){return Cl(e,!1,nm,cm,Gu)}function Yu(e){return Cl(e,!0,em,hm,Ku)}function Cl(e,t,i,s,r){if(!$t(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=r.get(e);if(a)return a;const c=fm(e);if(c===0)return e;const u=new Proxy(e,c===2?s:i);return r.set(e,u),u}function Mi(e){return Ns(e)?Mi(e.__v_raw):!!(e&&e.__v_isReactive)}function Ns(e){return!!(e&&e.__v_isReadonly)}function Qu(e){return!!(e&&e.__v_isShallow)}function Xu(e){return Mi(e)||Ns(e)}function mt(e){const t=e&&e.__v_raw;return t?mt(t):e}function Ju(e){return Oo(e,"__v_skip",!0),e}const Rs=e=>$t(e)?bl(e):e,xl=e=>$t(e)?Yu(e):e;function td(e){Sn&&Ve&&(e=mt(e),Zu(e.dep||(e.dep=ml())))}function ed(e,t){e=mt(e),e.dep&&Aa(e.dep)}function Gt(e){return!!(e&&e.__v_isRef===!0)}function cn(e){return pm(e,!1)}function pm(e,t){return Gt(e)?e:new mm(e,t)}class mm{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:mt(t),this._value=i?t:Rs(t)}get value(){return td(this),this._value}set value(t){t=this.__v_isShallow?t:mt(t),Ms(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Rs(t),ed(this))}}function ct(e){return Gt(e)?e.value:e}const gm={get:(e,t,i)=>ct(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const r=e[t];return Gt(r)&&!Gt(i)?(r.value=i,!0):Reflect.set(e,t,i,s)}};function nd(e){return Mi(e)?e:new Proxy(e,gm)}class vm{constructor(t,i,s,r){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new gl(t,()=>{this._dirty||(this._dirty=!0,ed(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const t=mt(this);return td(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function ym(e,t,i=!1){let s,r;const a=nt(e);return a?(s=e,r=Ae):(s=e.get,r=e.set),new vm(s,r,a||!r,i)}Promise.resolve();function kn(e,t,i,s){let r;try{r=s?e(...s):e()}catch(a){pr(a,t,i)}return r}function xe(e,t,i,s){if(nt(e)){const a=kn(e,t,i,s);return a&&Du(a)&&a.catch(c=>{pr(c,t,i)}),a}const r=[];for(let a=0;a<e.length;a++)r.push(xe(e[a],t,i,s));return r}function pr(e,t,i,s=!0){const r=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,u=i;for(;a;){const _=a.ec;if(_){for(let g=0;g<_.length;g++)if(_[g](e,c,u)===!1)return}a=a.parent}const f=t.appContext.config.errorHandler;if(f){kn(f,null,10,[e,c,u]);return}}wm(e,i,r,s)}function wm(e,t,i,s=!0){console.error(e)}let Bo=!1,Ma=!1;const fe=[];let hn=0;const Ts=[];let Cs=null,Ii=0;const Ps=[];let En=null,Si=0;const id=Promise.resolve();let El=null,Na=null;function bm(e){const t=El||id;return e?t.then(this?e.bind(this):e):t}function Cm(e){let t=hn+1,i=fe.length;for(;t<i;){const s=t+i>>>1;Os(fe[s])<e?t=s+1:i=s}return t}function sd(e){(!fe.length||!fe.includes(e,Bo&&e.allowRecurse?hn+1:hn))&&e!==Na&&(e.id==null?fe.push(e):fe.splice(Cm(e.id),0,e),od())}function od(){!Bo&&!Ma&&(Ma=!0,El=id.then(ld))}function xm(e){const t=fe.indexOf(e);t>hn&&fe.splice(t,1)}function rd(e,t,i,s){Q(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&i.push(e),od()}function Em(e){rd(e,Cs,Ts,Ii)}function Tm(e){rd(e,En,Ps,Si)}function Tl(e,t=null){if(Ts.length){for(Na=t,Cs=[...new Set(Ts)],Ts.length=0,Ii=0;Ii<Cs.length;Ii++)Cs[Ii]();Cs=null,Ii=0,Na=null,Tl(e,t)}}function ad(e){if(Ps.length){const t=[...new Set(Ps)];if(Ps.length=0,En){En.push(...t);return}for(En=t,En.sort((i,s)=>Os(i)-Os(s)),Si=0;Si<En.length;Si++)En[Si]();En=null,Si=0}}const Os=e=>e.id==null?1/0:e.id;function ld(e){Ma=!1,Bo=!0,Tl(e),fe.sort((i,s)=>Os(i)-Os(s));const t=Ae;try{for(hn=0;hn<fe.length;hn++){const i=fe[hn];i&&i.active!==!1&&kn(i,null,14)}}finally{hn=0,fe.length=0,ad(),Bo=!1,El=null,(fe.length||Ts.length||Ps.length)&&ld(e)}}function Pm(e,t,...i){const s=e.vnode.props||Tt;let r=i;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:m,trim:w}=s[g]||Tt;w?r=i.map(T=>T.trim()):m&&(r=i.map(Do))}let u,f=s[u=_a(t)]||s[u=_a(Oi(t))];!f&&a&&(f=s[u=_a(ji(t))]),f&&xe(f,e,6,r);const _=s[u+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,xe(_,e,6,r)}}function cd(e,t,i=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const a=e.emits;let c={},u=!1;if(!nt(e)){const f=_=>{const g=cd(_,t,!0);g&&(u=!0,ie(c,g))};!i&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!a&&!u?(s.set(e,null),null):(Q(a)?a.forEach(f=>c[f]=null):ie(c,a),s.set(e,c),c)}function Pl(e,t){return!e||!hr(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,ji(t))||_t(e,t))}let ke=null,hd=null;function Fo(e){const t=ke;return ke=e,hd=e&&e.type.__scopeId||null,t}function Im(e,t=ke,i){if(!t||e._n)return e;const s=(...r)=>{s._d&&Ih(-1);const a=Fo(t),c=e(...r);return Fo(a),s._d&&Ih(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function pa(e){const{type:t,vnode:i,proxy:s,withProxy:r,props:a,propsOptions:[c],slots:u,attrs:f,emit:_,render:g,renderCache:m,data:w,setupState:T,ctx:A,inheritAttrs:D}=e;let Z,X;const At=Fo(e);try{if(i.shapeFlag&4){const $=r||s;Z=Ze(g.call($,$,m,a,T,w,A)),X=f}else{const $=t;Z=Ze($.length>1?$(a,{attrs:f,slots:u,emit:_}):$(a,null)),X=t.props?f:Sm(f)}}catch($){Is.length=0,pr($,e,1),Z=je(qe)}let j=Z;if(X&&D!==!1){const $=Object.keys(X),{shapeFlag:M}=j;$.length&&M&7&&(c&&$.some(dl)&&(X=km(X,c)),j=Di(j,X))}return i.dirs&&(j.dirs=j.dirs?j.dirs.concat(i.dirs):i.dirs),i.transition&&(j.transition=i.transition),Z=j,Fo(At),Z}const Sm=e=>{let t;for(const i in e)(i==="class"||i==="style"||hr(i))&&((t||(t={}))[i]=e[i]);return t},km=(e,t)=>{const i={};for(const s in e)(!dl(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function Lm(e,t,i){const{props:s,children:r,component:a}=e,{props:c,children:u,patchFlag:f}=t,_=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&f>=0){if(f&1024)return!0;if(f&16)return s?vh(s,c,_):!!c;if(f&8){const g=t.dynamicProps;for(let m=0;m<g.length;m++){const w=g[m];if(c[w]!==s[w]&&!Pl(_,w))return!0}}}else return(r||u)&&(!u||!u.$stable)?!0:s===c?!1:s?c?vh(s,c,_):!0:!!c;return!1}function vh(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const a=s[r];if(t[a]!==e[a]&&!Pl(i,a))return!0}return!1}function Am({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Mm=e=>e.__isSuspense;function Nm(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):Tm(e)}function Rm(e,t){if(ee){let i=ee.provides;const s=ee.parent&&ee.parent.provides;s===i&&(i=ee.provides=Object.create(s)),i[e]=t}}function ma(e,t,i=!1){const s=ee||ke;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return i&&nt(t)?t.call(s.proxy):t}}const yh={};function ga(e,t,i){return ud(e,t,i)}function ud(e,t,{immediate:i,deep:s,flush:r,onTrack:a,onTrigger:c}=Tt){const u=ee;let f,_=!1,g=!1;if(Gt(e)?(f=()=>e.value,_=Qu(e)):Mi(e)?(f=()=>e,s=!0):Q(e)?(g=!0,_=e.some(Mi),f=()=>e.map(X=>{if(Gt(X))return X.value;if(Mi(X))return Qn(X);if(nt(X))return kn(X,u,2)})):nt(e)?t?f=()=>kn(e,u,2):f=()=>{if(!(u&&u.isUnmounted))return m&&m(),xe(e,u,3,[w])}:f=Ae,t&&s){const X=f;f=()=>Qn(X())}let m,w=X=>{m=Z.onStop=()=>{kn(X,u,4)}};if(Ds)return w=Ae,t?i&&xe(t,u,3,[f(),g?[]:void 0,w]):f(),Ae;let T=g?[]:yh;const A=()=>{if(!!Z.active)if(t){const X=Z.run();(s||_||(g?X.some((At,j)=>Ms(At,T[j])):Ms(X,T)))&&(m&&m(),xe(t,u,3,[X,T===yh?void 0:T,w]),T=X)}else Z.run()};A.allowRecurse=!!t;let D;r==="sync"?D=A:r==="post"?D=()=>he(A,u&&u.suspense):D=()=>{!u||u.isMounted?Em(A):A()};const Z=new gl(f,D);return t?i?A():T=Z.run():r==="post"?he(Z.run.bind(Z),u&&u.suspense):Z.run(),()=>{Z.stop(),u&&u.scope&&fl(u.scope.effects,Z)}}function Om(e,t,i){const s=this.proxy,r=Xt(e)?e.includes(".")?dd(s,e):()=>s[e]:e.bind(s,s);let a;nt(t)?a=t:(a=t.handler,i=t);const c=ee;Bi(this);const u=ud(r,a.bind(s),i);return c?Bi(c):ei(),u}function dd(e,t){const i=t.split(".");return()=>{let s=e;for(let r=0;r<i.length&&s;r++)s=s[i[r]];return s}}function Qn(e,t){if(!$t(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Gt(e))Qn(e.value,t);else if(Q(e))for(let i=0;i<e.length;i++)Qn(e[i],t);else if(ur(e)||Ai(e))e.forEach(i=>{Qn(i,t)});else if(Fu(e))for(const i in e)Qn(e[i],t);return e}function Dm(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ki(()=>{e.isMounted=!0}),md(()=>{e.isUnmounting=!0}),e}const we=[Function,Array],Bm={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:we,onEnter:we,onAfterEnter:we,onEnterCancelled:we,onBeforeLeave:we,onLeave:we,onAfterLeave:we,onLeaveCancelled:we,onBeforeAppear:we,onAppear:we,onAfterAppear:we,onAppearCancelled:we},setup(e,{slots:t}){const i=Tg(),s=Dm();let r;return()=>{const a=t.default&&_d(t.default(),!0);if(!a||!a.length)return;const c=mt(e),{mode:u}=c,f=a[0];if(s.isLeaving)return va(f);const _=wh(f);if(!_)return va(f);const g=Ra(_,c,s,i);Oa(_,g);const m=i.subTree,w=m&&wh(m);let T=!1;const{getTransitionKey:A}=_.type;if(A){const D=A();r===void 0?r=D:D!==r&&(r=D,T=!0)}if(w&&w.type!==qe&&(!Gn(_,w)||T)){const D=Ra(w,c,s,i);if(Oa(w,D),u==="out-in")return s.isLeaving=!0,D.afterLeave=()=>{s.isLeaving=!1,i.update()},va(f);u==="in-out"&&_.type!==qe&&(D.delayLeave=(Z,X,At)=>{const j=fd(s,w);j[String(w.key)]=w,Z._leaveCb=()=>{X(),Z._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=At})}return f}}},Fm=Bm;function fd(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function Ra(e,t,i,s){const{appear:r,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:_,onEnterCancelled:g,onBeforeLeave:m,onLeave:w,onAfterLeave:T,onLeaveCancelled:A,onBeforeAppear:D,onAppear:Z,onAfterAppear:X,onAppearCancelled:At}=t,j=String(e.key),$=fd(i,e),M=(st,Dt)=>{st&&xe(st,s,9,Dt)},tt={mode:a,persisted:c,beforeEnter(st){let Dt=u;if(!i.isMounted)if(r)Dt=D||u;else return;st._leaveCb&&st._leaveCb(!0);const Nt=$[j];Nt&&Gn(e,Nt)&&Nt.el._leaveCb&&Nt.el._leaveCb(),M(Dt,[st])},enter(st){let Dt=f,Nt=_,le=g;if(!i.isMounted)if(r)Dt=Z||f,Nt=X||_,le=At||g;else return;let gt=!1;const Pt=st._enterCb=gn=>{gt||(gt=!0,gn?M(le,[st]):M(Nt,[st]),tt.delayedLeave&&tt.delayedLeave(),st._enterCb=void 0)};Dt?(Dt(st,Pt),Dt.length<=1&&Pt()):Pt()},leave(st,Dt){const Nt=String(e.key);if(st._enterCb&&st._enterCb(!0),i.isUnmounting)return Dt();M(m,[st]);let le=!1;const gt=st._leaveCb=Pt=>{le||(le=!0,Dt(),Pt?M(A,[st]):M(T,[st]),st._leaveCb=void 0,$[Nt]===e&&delete $[Nt])};$[Nt]=e,w?(w(st,gt),w.length<=1&&gt()):gt()},clone(st){return Ra(st,t,i,s)}};return tt}function va(e){if(mr(e))return e=Di(e),e.children=null,e}function wh(e){return mr(e)?e.children?e.children[0]:void 0:e}function Oa(e,t){e.shapeFlag&6&&e.component?Oa(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function _d(e,t=!1){let i=[],s=0;for(let r=0;r<e.length;r++){const a=e[r];a.type===Ie?(a.patchFlag&128&&s++,i=i.concat(_d(a.children,t))):(t||a.type!==qe)&&i.push(a)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}const Da=e=>!!e.type.__asyncLoader,mr=e=>e.type.__isKeepAlive;function zm(e,t){pd(e,"a",t)}function Wm(e,t){pd(e,"da",t)}function pd(e,t,i=ee){const s=e.__wdc||(e.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(gr(t,s,i),i){let r=i.parent;for(;r&&r.parent;)mr(r.parent.vnode)&&Hm(s,t,i,r),r=r.parent}}function Hm(e,t,i,s){const r=gr(t,e,s,!0);gd(()=>{fl(s[t],r)},i)}function gr(e,t,i=ee,s=!1){if(i){const r=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...c)=>{if(i.isUnmounted)return;qi(),Bi(i);const u=xe(t,i,e,c);return ei(),Gi(),u});return s?r.unshift(a):r.push(a),a}}const mn=e=>(t,i=ee)=>(!Ds||e==="sp")&&gr(e,t,i),Um=mn("bm"),Ki=mn("m"),Zm=mn("bu"),$m=mn("u"),md=mn("bum"),gd=mn("um"),Vm=mn("sp"),jm=mn("rtg"),qm=mn("rtc");function Gm(e,t=ee){gr("ec",e,t)}let Ba=!0;function Km(e){const t=yd(e),i=e.proxy,s=e.ctx;Ba=!1,t.beforeCreate&&bh(t.beforeCreate,e,"bc");const{data:r,computed:a,methods:c,watch:u,provide:f,inject:_,created:g,beforeMount:m,mounted:w,beforeUpdate:T,updated:A,activated:D,deactivated:Z,beforeDestroy:X,beforeUnmount:At,destroyed:j,unmounted:$,render:M,renderTracked:tt,renderTriggered:st,errorCaptured:Dt,serverPrefetch:Nt,expose:le,inheritAttrs:gt,components:Pt,directives:gn,filters:me}=t;if(_&&Ym(_,s,null,e.appContext.config.unwrapInjectedRef),c)for(const bt in c){const H=c[bt];nt(H)&&(s[bt]=H.bind(i))}if(r){const bt=r.call(i,i);$t(bt)&&(e.data=bl(bt))}if(Ba=!0,a)for(const bt in a){const H=a[bt],ge=nt(H)?H.bind(i,i):nt(H.get)?H.get.bind(i,i):Ae,ot=!nt(H)&&nt(H.set)?H.set.bind(i):Ae,vt=Ag({get:ge,set:ot});Object.defineProperty(s,bt,{enumerable:!0,configurable:!0,get:()=>vt.value,set:Kt=>vt.value=Kt})}if(u)for(const bt in u)vd(u[bt],s,i,bt);if(f){const bt=nt(f)?f.call(i):f;Reflect.ownKeys(bt).forEach(H=>{Rm(H,bt[H])})}g&&bh(g,e,"c");function wt(bt,H){Q(H)?H.forEach(ge=>bt(ge.bind(i))):H&&bt(H.bind(i))}if(wt(Um,m),wt(Ki,w),wt(Zm,T),wt($m,A),wt(zm,D),wt(Wm,Z),wt(Gm,Dt),wt(qm,tt),wt(jm,st),wt(md,At),wt(gd,$),wt(Vm,Nt),Q(le))if(le.length){const bt=e.exposed||(e.exposed={});le.forEach(H=>{Object.defineProperty(bt,H,{get:()=>i[H],set:ge=>i[H]=ge})})}else e.exposed||(e.exposed={});M&&e.render===Ae&&(e.render=M),gt!=null&&(e.inheritAttrs=gt),Pt&&(e.components=Pt),gn&&(e.directives=gn)}function Ym(e,t,i=Ae,s=!1){Q(e)&&(e=Fa(e));for(const r in e){const a=e[r];let c;$t(a)?"default"in a?c=ma(a.from||r,a.default,!0):c=ma(a.from||r):c=ma(a),Gt(c)&&s?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:u=>c.value=u}):t[r]=c}}function bh(e,t,i){xe(Q(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function vd(e,t,i,s){const r=s.includes(".")?dd(i,s):()=>i[s];if(Xt(e)){const a=t[e];nt(a)&&ga(r,a)}else if(nt(e))ga(r,e.bind(i));else if($t(e))if(Q(e))e.forEach(a=>vd(a,t,i,s));else{const a=nt(e.handler)?e.handler.bind(i):t[e.handler];nt(a)&&ga(r,a,e)}}function yd(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,u=a.get(t);let f;return u?f=u:!r.length&&!i&&!s?f=t:(f={},r.length&&r.forEach(_=>zo(f,_,c,!0)),zo(f,t,c)),a.set(t,f),f}function zo(e,t,i,s=!1){const{mixins:r,extends:a}=t;a&&zo(e,a,i,!0),r&&r.forEach(c=>zo(e,c,i,!0));for(const c in t)if(!(s&&c==="expose")){const u=Qm[c]||i&&i[c];e[c]=u?u(e[c],t[c]):t[c]}return e}const Qm={data:Ch,props:Vn,emits:Vn,methods:Vn,computed:Vn,beforeCreate:oe,created:oe,beforeMount:oe,mounted:oe,beforeUpdate:oe,updated:oe,beforeDestroy:oe,beforeUnmount:oe,destroyed:oe,unmounted:oe,activated:oe,deactivated:oe,errorCaptured:oe,serverPrefetch:oe,components:Vn,directives:Vn,watch:Jm,provide:Ch,inject:Xm};function Ch(e,t){return t?e?function(){return ie(nt(e)?e.call(this,this):e,nt(t)?t.call(this,this):t)}:t:e}function Xm(e,t){return Vn(Fa(e),Fa(t))}function Fa(e){if(Q(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function oe(e,t){return e?[...new Set([].concat(e,t))]:t}function Vn(e,t){return e?ie(ie(Object.create(null),e),t):t}function Jm(e,t){if(!e)return t;if(!t)return e;const i=ie(Object.create(null),e);for(const s in t)i[s]=oe(e[s],t[s]);return i}function tg(e,t,i,s=!1){const r={},a={};Oo(a,vr,1),e.propsDefaults=Object.create(null),wd(e,t,r,a);for(const c in e.propsOptions[0])c in r||(r[c]=void 0);i?e.props=s?r:_m(r):e.type.props?e.props=r:e.props=a,e.attrs=a}function eg(e,t,i,s){const{props:r,attrs:a,vnode:{patchFlag:c}}=e,u=mt(r),[f]=e.propsOptions;let _=!1;if((s||c>0)&&!(c&16)){if(c&8){const g=e.vnode.dynamicProps;for(let m=0;m<g.length;m++){let w=g[m];const T=t[w];if(f)if(_t(a,w))T!==a[w]&&(a[w]=T,_=!0);else{const A=Oi(w);r[A]=za(f,u,A,T,e,!1)}else T!==a[w]&&(a[w]=T,_=!0)}}}else{wd(e,t,r,a)&&(_=!0);let g;for(const m in u)(!t||!_t(t,m)&&((g=ji(m))===m||!_t(t,g)))&&(f?i&&(i[m]!==void 0||i[g]!==void 0)&&(r[m]=za(f,u,m,void 0,e,!0)):delete r[m]);if(a!==u)for(const m in a)(!t||!_t(t,m)&&!0)&&(delete a[m],_=!0)}_&&fn(e,"set","$attrs")}function wd(e,t,i,s){const[r,a]=e.propsOptions;let c=!1,u;if(t)for(let f in t){if(Ao(f))continue;const _=t[f];let g;r&&_t(r,g=Oi(f))?!a||!a.includes(g)?i[g]=_:(u||(u={}))[g]=_:Pl(e.emitsOptions,f)||(!(f in s)||_!==s[f])&&(s[f]=_,c=!0)}if(a){const f=mt(i),_=u||Tt;for(let g=0;g<a.length;g++){const m=a[g];i[m]=za(r,f,m,_[m],e,!_t(_,m))}}return c}function za(e,t,i,s,r,a){const c=e[i];if(c!=null){const u=_t(c,"default");if(u&&s===void 0){const f=c.default;if(c.type!==Function&&nt(f)){const{propsDefaults:_}=r;i in _?s=_[i]:(Bi(r),s=_[i]=f.call(null,t),ei())}else s=f}c[0]&&(a&&!u?s=!1:c[1]&&(s===""||s===ji(i))&&(s=!0))}return s}function bd(e,t,i=!1){const s=t.propsCache,r=s.get(e);if(r)return r;const a=e.props,c={},u=[];let f=!1;if(!nt(e)){const g=m=>{f=!0;const[w,T]=bd(m,t,!0);ie(c,w),T&&u.push(...T)};!i&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!f)return s.set(e,Li),Li;if(Q(a))for(let g=0;g<a.length;g++){const m=Oi(a[g]);xh(m)&&(c[m]=Tt)}else if(a)for(const g in a){const m=Oi(g);if(xh(m)){const w=a[g],T=c[m]=Q(w)||nt(w)?{type:w}:w;if(T){const A=Ph(Boolean,T.type),D=Ph(String,T.type);T[0]=A>-1,T[1]=D<0||A<D,(A>-1||_t(T,"default"))&&u.push(m)}}}const _=[c,u];return s.set(e,_),_}function xh(e){return e[0]!=="$"}function Eh(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Th(e,t){return Eh(e)===Eh(t)}function Ph(e,t){return Q(t)?t.findIndex(i=>Th(i,e)):nt(t)&&Th(t,e)?0:-1}const Cd=e=>e[0]==="_"||e==="$stable",Il=e=>Q(e)?e.map(Ze):[Ze(e)],ng=(e,t,i)=>{const s=Im((...r)=>Il(t(...r)),i);return s._c=!1,s},xd=(e,t,i)=>{const s=e._ctx;for(const r in e){if(Cd(r))continue;const a=e[r];if(nt(a))t[r]=ng(r,a,s);else if(a!=null){const c=Il(a);t[r]=()=>c}}},Ed=(e,t)=>{const i=Il(t);e.slots.default=()=>i},ig=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=mt(t),Oo(t,"_",i)):xd(t,e.slots={})}else e.slots={},t&&Ed(e,t);Oo(e.slots,vr,1)},sg=(e,t,i)=>{const{vnode:s,slots:r}=e;let a=!0,c=Tt;if(s.shapeFlag&32){const u=t._;u?i&&u===1?a=!1:(ie(r,t),!i&&u===1&&delete r._):(a=!t.$stable,xd(t,r)),c=t}else t&&(Ed(e,t),c={default:1});if(a)for(const u in r)!Cd(u)&&!(u in c)&&delete r[u]};function be(e,t){const i=ke;if(i===null)return e;const s=i.proxy,r=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[c,u,f,_=Tt]=t[a];nt(c)&&(c={mounted:c,updated:c}),c.deep&&Qn(u),r.push({dir:c,instance:s,value:u,oldValue:void 0,arg:f,modifiers:_})}return e}function Zn(e,t,i,s){const r=e.dirs,a=t&&t.dirs;for(let c=0;c<r.length;c++){const u=r[c];a&&(u.oldValue=a[c].value);let f=u.dir[s];f&&(qi(),xe(f,i,8,[e.el,u,e,t]),Gi())}}function Td(){return{app:null,config:{isNativeTag:Rp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let og=0;function rg(e,t){return function(s,r=null){r!=null&&!$t(r)&&(r=null);const a=Td(),c=new Set;let u=!1;const f=a.app={_uid:og++,_component:s,_props:r,_container:null,_context:a,_instance:null,version:Mg,get config(){return a.config},set config(_){},use(_,...g){return c.has(_)||(_&&nt(_.install)?(c.add(_),_.install(f,...g)):nt(_)&&(c.add(_),_(f,...g))),f},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),f},component(_,g){return g?(a.components[_]=g,f):a.components[_]},directive(_,g){return g?(a.directives[_]=g,f):a.directives[_]},mount(_,g,m){if(!u){const w=je(s,r);return w.appContext=a,g&&t?t(w,_):e(w,_,m),u=!0,f._container=_,_.__vue_app__=f,Ll(w.component)||w.component.proxy}},unmount(){u&&(e(null,f._container),delete f._container.__vue_app__)},provide(_,g){return a.provides[_]=g,f}};return f}}function Wa(e,t,i,s,r=!1){if(Q(e)){e.forEach((w,T)=>Wa(w,t&&(Q(t)?t[T]:t),i,s,r));return}if(Da(s)&&!r)return;const a=s.shapeFlag&4?Ll(s.component)||s.component.proxy:s.el,c=r?null:a,{i:u,r:f}=e,_=t&&t.r,g=u.refs===Tt?u.refs={}:u.refs,m=u.setupState;if(_!=null&&_!==f&&(Xt(_)?(g[_]=null,_t(m,_)&&(m[_]=null)):Gt(_)&&(_.value=null)),nt(f))kn(f,u,12,[c,g]);else{const w=Xt(f),T=Gt(f);if(w||T){const A=()=>{if(e.f){const D=w?g[f]:f.value;r?Q(D)&&fl(D,a):Q(D)?D.includes(a)||D.push(a):w?g[f]=[a]:(f.value=[a],e.k&&(g[e.k]=f.value))}else w?(g[f]=c,_t(m,f)&&(m[f]=c)):Gt(f)&&(f.value=c,e.k&&(g[e.k]=c))};c?(A.id=-1,he(A,i)):A()}}}const he=Nm;function ag(e){return lg(e)}function lg(e,t){const i=Wp();i.__VUE__=!0;const{insert:s,remove:r,patchProp:a,createElement:c,createText:u,createComment:f,setText:_,setElementText:g,parentNode:m,nextSibling:w,setScopeId:T=Ae,cloneNode:A,insertStaticContent:D}=e,Z=(v,b,E,S=null,I=null,R=null,F=!1,N=null,B=!!b.dynamicChildren)=>{if(v===b)return;v&&!Gn(v,b)&&(S=de(v),Rt(v,I,R,!0),v=null),b.patchFlag===-2&&(B=!1,b.dynamicChildren=null);const{type:k,ref:V,shapeFlag:U}=b;switch(k){case Sl:X(v,b,E,S);break;case qe:At(v,b,E,S);break;case No:v==null&&j(b,E,S,F);break;case Ie:gn(v,b,E,S,I,R,F,N,B);break;default:U&1?tt(v,b,E,S,I,R,F,N,B):U&6?me(v,b,E,S,I,R,F,N,B):(U&64||U&128)&&k.process(v,b,E,S,I,R,F,N,B,Re)}V!=null&&I&&Wa(V,v&&v.ref,R,b||v,!b)},X=(v,b,E,S)=>{if(v==null)s(b.el=u(b.children),E,S);else{const I=b.el=v.el;b.children!==v.children&&_(I,b.children)}},At=(v,b,E,S)=>{v==null?s(b.el=f(b.children||""),E,S):b.el=v.el},j=(v,b,E,S)=>{[v.el,v.anchor]=D(v.children,b,E,S,v.el,v.anchor)},$=({el:v,anchor:b},E,S)=>{let I;for(;v&&v!==b;)I=w(v),s(v,E,S),v=I;s(b,E,S)},M=({el:v,anchor:b})=>{let E;for(;v&&v!==b;)E=w(v),r(v),v=E;r(b)},tt=(v,b,E,S,I,R,F,N,B)=>{F=F||b.type==="svg",v==null?st(b,E,S,I,R,F,N,B):le(v,b,I,R,F,N,B)},st=(v,b,E,S,I,R,F,N)=>{let B,k;const{type:V,props:U,shapeFlag:q,transition:Y,patchFlag:rt,dirs:Ct}=v;if(v.el&&A!==void 0&&rt===-1)B=v.el=A(v.el);else{if(B=v.el=c(v.type,R,U&&U.is,U),q&8?g(B,v.children):q&16&&Nt(v.children,B,null,S,I,R&&V!=="foreignObject",F,N),Ct&&Zn(v,null,S,"created"),U){for(const xt in U)xt!=="value"&&!Ao(xt)&&a(B,xt,null,U[xt],R,v.children,S,I,Vt);"value"in U&&a(B,"value",null,U.value),(k=U.onVnodeBeforeMount)&&We(k,S,v)}Dt(B,v,v.scopeId,F,S)}Ct&&Zn(v,null,S,"beforeMount");const ut=(!I||I&&!I.pendingBranch)&&Y&&!Y.persisted;ut&&Y.beforeEnter(B),s(B,b,E),((k=U&&U.onVnodeMounted)||ut||Ct)&&he(()=>{k&&We(k,S,v),ut&&Y.enter(B),Ct&&Zn(v,null,S,"mounted")},I)},Dt=(v,b,E,S,I)=>{if(E&&T(v,E),S)for(let R=0;R<S.length;R++)T(v,S[R]);if(I){let R=I.subTree;if(b===R){const F=I.vnode;Dt(v,F,F.scopeId,F.slotScopeIds,I.parent)}}},Nt=(v,b,E,S,I,R,F,N,B=0)=>{for(let k=B;k<v.length;k++){const V=v[k]=N?Tn(v[k]):Ze(v[k]);Z(null,V,b,E,S,I,R,F,N)}},le=(v,b,E,S,I,R,F)=>{const N=b.el=v.el;let{patchFlag:B,dynamicChildren:k,dirs:V}=b;B|=v.patchFlag&16;const U=v.props||Tt,q=b.props||Tt;let Y;E&&$n(E,!1),(Y=q.onVnodeBeforeUpdate)&&We(Y,E,b,v),V&&Zn(b,v,E,"beforeUpdate"),E&&$n(E,!0);const rt=I&&b.type!=="foreignObject";if(k?gt(v.dynamicChildren,k,N,E,S,rt,R):F||ge(v,b,N,null,E,S,rt,R,!1),B>0){if(B&16)Pt(N,b,U,q,E,S,I);else if(B&2&&U.class!==q.class&&a(N,"class",null,q.class,I),B&4&&a(N,"style",U.style,q.style,I),B&8){const Ct=b.dynamicProps;for(let ut=0;ut<Ct.length;ut++){const xt=Ct[ut],ce=U[xt],Qe=q[xt];(Qe!==ce||xt==="value")&&a(N,xt,ce,Qe,I,v.children,E,S,Vt)}}B&1&&v.children!==b.children&&g(N,b.children)}else!F&&k==null&&Pt(N,b,U,q,E,S,I);((Y=q.onVnodeUpdated)||V)&&he(()=>{Y&&We(Y,E,b,v),V&&Zn(b,v,E,"updated")},S)},gt=(v,b,E,S,I,R,F)=>{for(let N=0;N<b.length;N++){const B=v[N],k=b[N],V=B.el&&(B.type===Ie||!Gn(B,k)||B.shapeFlag&70)?m(B.el):E;Z(B,k,V,null,S,I,R,F,!0)}},Pt=(v,b,E,S,I,R,F)=>{if(E!==S){for(const N in S){if(Ao(N))continue;const B=S[N],k=E[N];B!==k&&N!=="value"&&a(v,N,k,B,F,b.children,I,R,Vt)}if(E!==Tt)for(const N in E)!Ao(N)&&!(N in S)&&a(v,N,E[N],null,F,b.children,I,R,Vt);"value"in S&&a(v,"value",E.value,S.value)}},gn=(v,b,E,S,I,R,F,N,B)=>{const k=b.el=v?v.el:u(""),V=b.anchor=v?v.anchor:u("");let{patchFlag:U,dynamicChildren:q,slotScopeIds:Y}=b;Y&&(N=N?N.concat(Y):Y),v==null?(s(k,E,S),s(V,E,S),Nt(b.children,E,V,I,R,F,N,B)):U>0&&U&64&&q&&v.dynamicChildren?(gt(v.dynamicChildren,q,E,I,R,F,N),(b.key!=null||I&&b===I.subTree)&&Pd(v,b,!0)):ge(v,b,E,V,I,R,F,N,B)},me=(v,b,E,S,I,R,F,N,B)=>{b.slotScopeIds=N,v==null?b.shapeFlag&512?I.ctx.activate(b,E,S,F,B):es(b,E,S,I,R,F,B):wt(v,b,B)},es=(v,b,E,S,I,R,F)=>{const N=v.component=Eg(v,S,I);if(mr(v)&&(N.ctx.renderer=Re),Pg(N),N.asyncDep){if(I&&I.registerDep(N,bt),!v.el){const B=N.subTree=je(qe);At(null,B,b,E)}return}bt(N,v,b,E,I,R,F)},wt=(v,b,E)=>{const S=b.component=v.component;if(Lm(v,b,E))if(S.asyncDep&&!S.asyncResolved){H(S,b,E);return}else S.next=b,xm(S.update),S.update();else b.component=v.component,b.el=v.el,S.vnode=b},bt=(v,b,E,S,I,R,F)=>{const N=()=>{if(v.isMounted){let{next:V,bu:U,u:q,parent:Y,vnode:rt}=v,Ct=V,ut;$n(v,!1),V?(V.el=rt.el,H(v,V,F)):V=rt,U&&Mo(U),(ut=V.props&&V.props.onVnodeBeforeUpdate)&&We(ut,Y,V,rt),$n(v,!0);const xt=pa(v),ce=v.subTree;v.subTree=xt,Z(ce,xt,m(ce.el),de(ce),v,I,R),V.el=xt.el,Ct===null&&Am(v,xt.el),q&&he(q,I),(ut=V.props&&V.props.onVnodeUpdated)&&he(()=>We(ut,Y,V,rt),I)}else{let V;const{el:U,props:q}=b,{bm:Y,m:rt,parent:Ct}=v,ut=Da(b);if($n(v,!1),Y&&Mo(Y),!ut&&(V=q&&q.onVnodeBeforeMount)&&We(V,Ct,b),$n(v,!0),U&&Ye){const xt=()=>{v.subTree=pa(v),Ye(U,v.subTree,v,I,null)};ut?b.type.__asyncLoader().then(()=>!v.isUnmounted&&xt()):xt()}else{const xt=v.subTree=pa(v);Z(null,xt,E,S,v,I,R),b.el=xt.el}if(rt&&he(rt,I),!ut&&(V=q&&q.onVnodeMounted)){const xt=b;he(()=>We(V,Ct,xt),I)}b.shapeFlag&256&&v.a&&he(v.a,I),v.isMounted=!0,b=E=S=null}},B=v.effect=new gl(N,()=>sd(v.update),v.scope),k=v.update=B.run.bind(B);k.id=v.uid,$n(v,!0),k()},H=(v,b,E)=>{b.component=v;const S=v.vnode.props;v.vnode=b,v.next=null,eg(v,b.props,S,E),sg(v,b.children,E),qi(),Tl(void 0,v.update),Gi()},ge=(v,b,E,S,I,R,F,N,B=!1)=>{const k=v&&v.children,V=v?v.shapeFlag:0,U=b.children,{patchFlag:q,shapeFlag:Y}=b;if(q>0){if(q&128){vt(k,U,E,S,I,R,F,N,B);return}else if(q&256){ot(k,U,E,S,I,R,F,N,B);return}}Y&8?(V&16&&Vt(k,I,R),U!==k&&g(E,U)):V&16?Y&16?vt(k,U,E,S,I,R,F,N,B):Vt(k,I,R,!0):(V&8&&g(E,""),Y&16&&Nt(U,E,S,I,R,F,N,B))},ot=(v,b,E,S,I,R,F,N,B)=>{v=v||Li,b=b||Li;const k=v.length,V=b.length,U=Math.min(k,V);let q;for(q=0;q<U;q++){const Y=b[q]=B?Tn(b[q]):Ze(b[q]);Z(v[q],Y,E,null,I,R,F,N,B)}k>V?Vt(v,I,R,!0,!1,U):Nt(b,E,S,I,R,F,N,B,U)},vt=(v,b,E,S,I,R,F,N,B)=>{let k=0;const V=b.length;let U=v.length-1,q=V-1;for(;k<=U&&k<=q;){const Y=v[k],rt=b[k]=B?Tn(b[k]):Ze(b[k]);if(Gn(Y,rt))Z(Y,rt,E,null,I,R,F,N,B);else break;k++}for(;k<=U&&k<=q;){const Y=v[U],rt=b[q]=B?Tn(b[q]):Ze(b[q]);if(Gn(Y,rt))Z(Y,rt,E,null,I,R,F,N,B);else break;U--,q--}if(k>U){if(k<=q){const Y=q+1,rt=Y<V?b[Y].el:S;for(;k<=q;)Z(null,b[k]=B?Tn(b[k]):Ze(b[k]),E,rt,I,R,F,N,B),k++}}else if(k>q)for(;k<=U;)Rt(v[k],I,R,!0),k++;else{const Y=k,rt=k,Ct=new Map;for(k=rt;k<=q;k++){const It=b[k]=B?Tn(b[k]):Ze(b[k]);It.key!=null&&Ct.set(It.key,k)}let ut,xt=0;const ce=q-rt+1;let Qe=!1,di=0;const Xe=new Array(ce);for(k=0;k<ce;k++)Xe[k]=0;for(k=Y;k<=U;k++){const It=v[k];if(xt>=ce){Rt(It,I,R,!0);continue}let Jt;if(It.key!=null)Jt=Ct.get(It.key);else for(ut=rt;ut<=q;ut++)if(Xe[ut-rt]===0&&Gn(It,b[ut])){Jt=ut;break}Jt===void 0?Rt(It,I,R,!0):(Xe[Jt-rt]=k+1,Jt>=di?di=Jt:Qe=!0,Z(It,b[Jt],E,null,I,R,F,N,B),xt++)}const is=Qe?cg(Xe):Li;for(ut=is.length-1,k=ce-1;k>=0;k--){const It=rt+k,Jt=b[It],Xs=It+1<V?b[It+1].el:S;Xe[k]===0?Z(null,Jt,E,Xs,I,R,F,N,B):Qe&&(ut<0||k!==is[ut]?Kt(Jt,E,Xs,2):ut--)}}},Kt=(v,b,E,S,I=null)=>{const{el:R,type:F,transition:N,children:B,shapeFlag:k}=v;if(k&6){Kt(v.component.subTree,b,E,S);return}if(k&128){v.suspense.move(b,E,S);return}if(k&64){F.move(v,b,E,Re);return}if(F===Ie){s(R,b,E);for(let U=0;U<B.length;U++)Kt(B[U],b,E,S);s(v.anchor,b,E);return}if(F===No){$(v,b,E);return}if(S!==2&&k&1&&N)if(S===0)N.beforeEnter(R),s(R,b,E),he(()=>N.enter(R),I);else{const{leave:U,delayLeave:q,afterLeave:Y}=N,rt=()=>s(R,b,E),Ct=()=>{U(R,()=>{rt(),Y&&Y()})};q?q(R,rt,Ct):Ct()}else s(R,b,E)},Rt=(v,b,E,S=!1,I=!1)=>{const{type:R,props:F,ref:N,children:B,dynamicChildren:k,shapeFlag:V,patchFlag:U,dirs:q}=v;if(N!=null&&Wa(N,null,E,v,!0),V&256){b.ctx.deactivate(v);return}const Y=V&1&&q,rt=!Da(v);let Ct;if(rt&&(Ct=F&&F.onVnodeBeforeUnmount)&&We(Ct,b,v),V&6)Mt(v.component,E,S);else{if(V&128){v.suspense.unmount(E,S);return}Y&&Zn(v,null,b,"beforeUnmount"),V&64?v.type.remove(v,b,E,I,Re,S):k&&(R!==Ie||U>0&&U&64)?Vt(k,b,E,!1,!0):(R===Ie&&U&384||!I&&V&16)&&Vt(B,b,E),S&&Wt(v)}(rt&&(Ct=F&&F.onVnodeUnmounted)||Y)&&he(()=>{Ct&&We(Ct,b,v),Y&&Zn(v,null,b,"unmounted")},E)},Wt=v=>{const{type:b,el:E,anchor:S,transition:I}=v;if(b===Ie){yt(E,S);return}if(b===No){M(v);return}const R=()=>{r(E),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(v.shapeFlag&1&&I&&!I.persisted){const{leave:F,delayLeave:N}=I,B=()=>F(E,R);N?N(v.el,R,B):B()}else R()},yt=(v,b)=>{let E;for(;v!==b;)E=w(v),r(v),v=E;r(b)},Mt=(v,b,E)=>{const{bum:S,scope:I,update:R,subTree:F,um:N}=v;S&&Mo(S),I.stop(),R&&(R.active=!1,Rt(F,v,b,E)),N&&he(N,b),he(()=>{v.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},Vt=(v,b,E,S=!1,I=!1,R=0)=>{for(let F=R;F<v.length;F++)Rt(v[F],b,E,S,I)},de=v=>v.shapeFlag&6?de(v.component.subTree):v.shapeFlag&128?v.suspense.next():w(v.anchor||v.el),ns=(v,b,E)=>{v==null?b._vnode&&Rt(b._vnode,null,null,!0):Z(b._vnode||null,v,b,null,null,null,E),ad(),b._vnode=v},Re={p:Z,um:Rt,m:Kt,r:Wt,mt:es,mc:Nt,pc:ge,pbc:gt,n:de,o:e};let Bn,Ye;return t&&([Bn,Ye]=t(Re)),{render:ns,hydrate:Bn,createApp:rg(ns,Bn)}}function $n({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function Pd(e,t,i=!1){const s=e.children,r=t.children;if(Q(s)&&Q(r))for(let a=0;a<s.length;a++){const c=s[a];let u=r[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=r[a]=Tn(r[a]),u.el=c.el),i||Pd(c,u))}}function cg(e){const t=e.slice(),i=[0];let s,r,a,c,u;const f=e.length;for(s=0;s<f;s++){const _=e[s];if(_!==0){if(r=i[i.length-1],e[r]<_){t[s]=r,i.push(s);continue}for(a=0,c=i.length-1;a<c;)u=a+c>>1,e[i[u]]<_?a=u+1:c=u;_<e[i[a]]&&(a>0&&(t[s]=i[a-1]),i[a]=s)}}for(a=i.length,c=i[a-1];a-- >0;)i[a]=c,c=t[c];return i}const hg=e=>e.__isTeleport,ug=Symbol(),Ie=Symbol(void 0),Sl=Symbol(void 0),qe=Symbol(void 0),No=Symbol(void 0),Is=[];let ti=null;function Ue(e=!1){Is.push(ti=e?null:[])}function dg(){Is.pop(),ti=Is[Is.length-1]||null}let Wo=1;function Ih(e){Wo+=e}function Id(e){return e.dynamicChildren=Wo>0?ti||Li:null,dg(),Wo>0&&ti&&ti.push(e),e}function ln(e,t,i,s,r,a){return Id(W(e,t,i,s,r,a,!0))}function fg(e,t,i,s,r){return Id(je(e,t,i,s,r,!0))}function _g(e){return e?e.__v_isVNode===!0:!1}function Gn(e,t){return e.type===t.type&&e.key===t.key}const vr="__vInternal",Sd=({key:e})=>e!=null?e:null,Ro=({ref:e,ref_key:t,ref_for:i})=>e!=null?Xt(e)||Gt(e)||nt(e)?{i:ke,r:e,k:t,f:!!i}:e:null;function W(e,t=null,i=null,s=0,r=null,a=e===Ie?0:1,c=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sd(t),ref:t&&Ro(t),scopeId:hd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return u?(kl(f,i),a&128&&e.normalize(f)):i&&(f.shapeFlag|=Xt(i)?8:16),Wo>0&&!c&&ti&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&ti.push(f),f}const je=pg;function pg(e,t=null,i=null,s=0,r=null,a=!1){if((!e||e===ug)&&(e=qe),_g(e)){const u=Di(e,t,!0);return i&&kl(u,i),u}if(Lg(e)&&(e=e.__vccOpts),t){t=mg(t);let{class:u,style:f}=t;u&&!Xt(u)&&(t.class=$e(u)),$t(f)&&(Xu(f)&&!Q(f)&&(f=ie({},f)),t.style=lr(f))}const c=Xt(e)?1:Mm(e)?128:hg(e)?64:$t(e)?4:nt(e)?2:0;return W(e,t,i,s,r,c,a,!0)}function mg(e){return e?Xu(e)||vr in e?ie({},e):e:null}function Di(e,t,i=!1){const{props:s,ref:r,patchFlag:a,children:c}=e,u=t?yg(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Sd(u),ref:t&&t.ref?i&&r?Q(r)?r.concat(Ro(t)):[r,Ro(t)]:Ro(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ie?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Di(e.ssContent),ssFallback:e.ssFallback&&Di(e.ssFallback),el:e.el,anchor:e.anchor}}function gg(e=" ",t=0){return je(Sl,null,e,t)}function vg(e,t){const i=je(No,null,e);return i.staticCount=t,i}function xs(e="",t=!1){return t?(Ue(),fg(qe,null,e)):je(qe,null,e)}function Ze(e){return e==null||typeof e=="boolean"?je(qe):Q(e)?je(Ie,null,e.slice()):typeof e=="object"?Tn(e):je(Sl,null,String(e))}function Tn(e){return e.el===null||e.memo?e:Di(e)}function kl(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Q(t))i=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),kl(e,r()),r._c&&(r._d=!0));return}else{i=32;const r=t._;!r&&!(vr in t)?t._ctx=ke:r===3&&ke&&(ke.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else nt(t)?(t={default:t,_ctx:ke},i=32):(t=String(t),s&64?(i=16,t=[gg(t)]):i=8);e.children=t,e.shapeFlag|=i}function yg(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=$e([t.class,s.class]));else if(r==="style")t.style=lr([t.style,s.style]);else if(hr(r)){const a=t[r],c=s[r];c&&a!==c&&!(Q(a)&&a.includes(c))&&(t[r]=a?[].concat(a,c):c)}else r!==""&&(t[r]=s[r])}return t}function We(e,t,i,s=null){xe(e,t,7,[i,s])}function wg(e,t,i,s){let r;const a=i&&i[s];if(Q(e)||Xt(e)){r=new Array(e.length);for(let c=0,u=e.length;c<u;c++)r[c]=t(e[c],c,void 0,a&&a[c])}else if(typeof e=="number"){r=new Array(e);for(let c=0;c<e;c++)r[c]=t(c+1,c,void 0,a&&a[c])}else if($t(e))if(e[Symbol.iterator])r=Array.from(e,(c,u)=>t(c,u,void 0,a&&a[u]));else{const c=Object.keys(e);r=new Array(c.length);for(let u=0,f=c.length;u<f;u++){const _=c[u];r[u]=t(e[_],_,u,a&&a[u])}}else r=[];return i&&(i[s]=r),r}const Ha=e=>e?kd(e)?Ll(e)||e.proxy:Ha(e.parent):null,Ho=ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ha(e.parent),$root:e=>Ha(e.root),$emit:e=>e.emit,$options:e=>yd(e),$forceUpdate:e=>()=>sd(e.update),$nextTick:e=>bm.bind(e.proxy),$watch:e=>Om.bind(e)}),bg={get({_:e},t){const{ctx:i,setupState:s,data:r,props:a,accessCache:c,type:u,appContext:f}=e;let _;if(t[0]!=="$"){const T=c[t];if(T!==void 0)switch(T){case 1:return s[t];case 2:return r[t];case 4:return i[t];case 3:return a[t]}else{if(s!==Tt&&_t(s,t))return c[t]=1,s[t];if(r!==Tt&&_t(r,t))return c[t]=2,r[t];if((_=e.propsOptions[0])&&_t(_,t))return c[t]=3,a[t];if(i!==Tt&&_t(i,t))return c[t]=4,i[t];Ba&&(c[t]=0)}}const g=Ho[t];let m,w;if(g)return t==="$attrs"&&pe(e,"get",t),g(e);if((m=u.__cssModules)&&(m=m[t]))return m;if(i!==Tt&&_t(i,t))return c[t]=4,i[t];if(w=f.config.globalProperties,_t(w,t))return w[t]},set({_:e},t,i){const{data:s,setupState:r,ctx:a}=e;return r!==Tt&&_t(r,t)?(r[t]=i,!0):s!==Tt&&_t(s,t)?(s[t]=i,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:r,propsOptions:a}},c){let u;return!!i[c]||e!==Tt&&_t(e,c)||t!==Tt&&_t(t,c)||(u=a[0])&&_t(u,c)||_t(s,c)||_t(Ho,c)||_t(r.config.globalProperties,c)},defineProperty(e,t,i){return i.get!=null?this.set(e,t,i.get(),null):i.value!=null&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},Cg=Td();let xg=0;function Eg(e,t,i){const s=e.type,r=(t?t.appContext:e.appContext)||Cg,a={uid:xg++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bd(s,r),emitsOptions:cd(s,r),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:s.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Pm.bind(null,a),e.ce&&e.ce(a),a}let ee=null;const Tg=()=>ee||ke,Bi=e=>{ee=e,e.scope.on()},ei=()=>{ee&&ee.scope.off(),ee=null};function kd(e){return e.vnode.shapeFlag&4}let Ds=!1;function Pg(e,t=!1){Ds=t;const{props:i,children:s}=e.vnode,r=kd(e);tg(e,i,r,t),ig(e,s);const a=r?Ig(e,t):void 0;return Ds=!1,a}function Ig(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=Ju(new Proxy(e.ctx,bg));const{setup:s}=i;if(s){const r=e.setupContext=s.length>1?kg(e):null;Bi(e),qi();const a=kn(s,e,0,[e.props,r]);if(Gi(),ei(),Du(a)){if(a.then(ei,ei),t)return a.then(c=>{Sh(e,c,t)}).catch(c=>{pr(c,e,0)});e.asyncDep=a}else Sh(e,a,t)}else Ld(e,t)}function Sh(e,t,i){nt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$t(t)&&(e.setupState=nd(t)),Ld(e,i)}let kh;function Ld(e,t,i){const s=e.type;if(!e.render){if(!t&&kh&&!s.render){const r=s.template;if(r){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:u,compilerOptions:f}=s,_=ie(ie({isCustomElement:a,delimiters:u},c),f);s.render=kh(r,_)}}e.render=s.render||Ae}Bi(e),qi(),Km(e),Gi(),ei()}function Sg(e){return new Proxy(e.attrs,{get(t,i){return pe(e,"get","$attrs"),t[i]}})}function kg(e){const t=s=>{e.exposed=s||{}};let i;return{get attrs(){return i||(i=Sg(e))},slots:e.slots,emit:e.emit,expose:t}}function Ll(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(nd(Ju(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Ho)return Ho[i](e)}}))}function Lg(e){return nt(e)&&"__vccOpts"in e}const Ag=(e,t)=>ym(e,t,Ds),Mg="3.2.31",Ng="http://www.w3.org/2000/svg",Kn=typeof document!="undefined"?document:null,Lh=Kn&&Kn.createElement("template"),Rg={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const r=t?Kn.createElementNS(Ng,e):Kn.createElement(e,i?{is:i}:void 0);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>Kn.createTextNode(e),createComment:e=>Kn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Kn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,s,r,a){const c=i?i.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),i),!(r===a||!(r=r.nextSibling)););else{Lh.innerHTML=s?`<svg>${e}</svg>`:e;const u=Lh.content;if(s){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}t.insertBefore(u,i)}return[c?c.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Og(e,t,i){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Dg(e,t,i){const s=e.style,r=Xt(i);if(i&&!r){for(const a in i)Ua(s,a,i[a]);if(t&&!Xt(t))for(const a in t)i[a]==null&&Ua(s,a,"")}else{const a=s.display;r?t!==i&&(s.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=a)}}const Ah=/\s*!important$/;function Ua(e,t,i){if(Q(i))i.forEach(s=>Ua(e,t,s));else if(t.startsWith("--"))e.setProperty(t,i);else{const s=Bg(e,t);Ah.test(i)?e.setProperty(ji(s),i.replace(Ah,""),"important"):e[s]=i}}const Mh=["Webkit","Moz","ms"],ya={};function Bg(e,t){const i=ya[t];if(i)return i;let s=Oi(t);if(s!=="filter"&&s in e)return ya[t]=s;s=zu(s);for(let r=0;r<Mh.length;r++){const a=Mh[r]+s;if(a in e)return ya[t]=a}return t}const Nh="http://www.w3.org/1999/xlink";function Fg(e,t,i,s,r){if(s&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Nh,t.slice(6,t.length)):e.setAttributeNS(Nh,t,i);else{const a=Sp(t);i==null||a&&!Ru(i)?e.removeAttribute(t):e.setAttribute(t,a?"":i)}}function zg(e,t,i,s,r,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,r,a),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const u=i==null?"":i;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const u=typeof e[t];if(u==="boolean"){e[t]=Ru(i);return}else if(i==null&&u==="string"){e[t]="",e.removeAttribute(t);return}else if(u==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let Uo=Date.now,Ad=!1;if(typeof window!="undefined"){Uo()>document.createEvent("Event").timeStamp&&(Uo=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Ad=!!(e&&Number(e[1])<=53)}let Za=0;const Wg=Promise.resolve(),Hg=()=>{Za=0},Ug=()=>Za||(Wg.then(Hg),Za=Uo());function Yn(e,t,i,s){e.addEventListener(t,i,s)}function Zg(e,t,i,s){e.removeEventListener(t,i,s)}function $g(e,t,i,s,r=null){const a=e._vei||(e._vei={}),c=a[t];if(s&&c)c.value=s;else{const[u,f]=Vg(t);if(s){const _=a[t]=jg(s,r);Yn(e,u,_,f)}else c&&(Zg(e,u,c,f),a[t]=void 0)}}const Rh=/(?:Once|Passive|Capture)$/;function Vg(e){let t;if(Rh.test(e)){t={};let i;for(;i=e.match(Rh);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[ji(e.slice(2)),t]}function jg(e,t){const i=s=>{const r=s.timeStamp||Uo();(Ad||r>=i.attached-1)&&xe(qg(s,i.value),t,5,[s])};return i.value=e,i.attached=Ug(),i}function qg(e,t){if(Q(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Oh=/^on[a-z]/,Gg=(e,t,i,s,r=!1,a,c,u,f)=>{t==="class"?Og(e,s,r):t==="style"?Dg(e,i,s):hr(t)?dl(t)||$g(e,t,i,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Kg(e,t,s,r))?zg(e,t,s,a,c,u,f):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Fg(e,t,s,r))};function Kg(e,t,i,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&Oh.test(t)&&nt(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Oh.test(t)&&Xt(i)?!1:t in e}const Yg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Fm.props;const Zo=e=>{const t=e.props["onUpdate:modelValue"];return Q(t)?i=>Mo(t,i):t};function Qg(e){e.target.composing=!0}function Dh(e){const t=e.target;t.composing&&(t.composing=!1,Xg(t,"input"))}function Xg(e,t){const i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}const He={created(e,{modifiers:{lazy:t,trim:i,number:s}},r){e._assign=Zo(r);const a=s||r.props&&r.props.type==="number";Yn(e,t?"change":"input",c=>{if(c.target.composing)return;let u=e.value;i?u=u.trim():a&&(u=Do(u)),e._assign(u)}),i&&Yn(e,"change",()=>{e.value=e.value.trim()}),t||(Yn(e,"compositionstart",Qg),Yn(e,"compositionend",Dh),Yn(e,"change",Dh))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:s,number:r}},a){if(e._assign=Zo(a),e.composing||document.activeElement===e&&(i||s&&e.value.trim()===t||(r||e.type==="number")&&Do(e.value)===t))return;const c=t==null?"":t;e.value!==c&&(e.value=c)}},Jg={deep:!0,created(e,{value:t,modifiers:{number:i}},s){const r=ur(t);Yn(e,"change",()=>{const a=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>i?Do($o(c)):$o(c));e._assign(e.multiple?r?new Set(a):a:a[0])}),e._assign=Zo(s)},mounted(e,{value:t}){Bh(e,t)},beforeUpdate(e,t,i){e._assign=Zo(i)},updated(e,{value:t}){Bh(e,t)}};function Bh(e,t){const i=e.multiple;if(!(i&&!Q(t)&&!ur(t))){for(let s=0,r=e.options.length;s<r;s++){const a=e.options[s],c=$o(a);if(i)Q(t)?a.selected=Np(t,c)>-1:a.selected=t.has(c);else if(cr($o(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function $o(e){return"_value"in e?e._value:e.value}const tv={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):ms(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:s}){!t!=!i&&(s?t?(s.beforeEnter(e),ms(e,!0),s.enter(e)):s.leave(e,()=>{ms(e,!1)}):ms(e,t))},beforeUnmount(e,{value:t}){ms(e,t)}};function ms(e,t){e.style.display=t?e._vod:"none"}const ev=ie({patchProp:Gg},Rg);let Fh;function nv(){return Fh||(Fh=ag(ev))}const yr=(...e)=>{const t=nv().createApp(...e),{mount:i}=t;return t.mount=s=>{const r=iv(s);if(!r)return;const a=t._component;!nt(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.innerHTML="";const c=i(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),c},t};function iv(e){return Xt(e)?document.querySelector(e):e}const Ln=cn({show_map:!1,show_about:!1,show_msg:!1});const sv={class:"container-fluid d-flex pe-0 navtxt"},ov=W("div",{class:"col-4 align-self-center text-light"},"Finding SanBau",-1),rv=W("input",{class:"col-6 px-3 py-2 border border-secondary rounded bg-dark text-light",type:"text",placeholder:"Plate/Nickname",maxlength:"20"},null,-1),av={setup(e){let t=cn({map:"",about:"",msg:""});function i(f){for(let _ in Ln.value)Ln.value[_]=!1;for(let _ in t.value)t.value[_]="";Ln.value[`show_${f}`]=!0,t.value[f]="text-warning"}function s(){i("map")}function r(){i("about")}function a(){i("msg")}function c(){window.open("https://github.com/OGC-Fever")}function u(){}return Ki(()=>{s()}),(f,_)=>(Ue(),ln("div",sv,[W("div",{class:"navbar-brand text-light",type:"button",onClick:s},"Cyber Butchers"),W("div",{class:$e(["navbar-brand fs-6",ct(t).map]),type:"button",onClick:s},"SanBau Map",2),W("div",{class:$e(["navbar-brand fs-6",ct(t).about]),type:"button",onClick:r},"About",2),W("div",{class:$e(["navbar-brand fs-6",ct(t).msg]),type:"button",onClick:a},"Message Board",2),W("div",{class:"navbar-brand fs-6",type:"button",onClick:c},"GitHub"),W("div",{class:"d-flex col-4 my-1 ms-auto"},[ov,rv,W("div",{class:"col fs-4 px-0 badge align-self-center text-warning",type:"button",onClick:u},"Go")])]))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=function(e,t){if(!e)throw Yi(t)},Yi=function(e){return new Error("Firebase Database ("+Md.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=r&63|128):(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=r&63|128)}return t},lv=function(e){const t=[];let i=0,s=0;for(;i<e.length;){const r=e[i++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[i++];t[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=e[i++],c=e[i++],u=e[i++],f=((r&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;t[s++]=String.fromCharCode(55296+(f>>10)),t[s++]=String.fromCharCode(56320+(f&1023))}else{const a=e[i++],c=e[i++];t[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return t.join("")},wr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const a=e[r],c=r+1<e.length,u=c?e[r+1]:0,f=r+2<e.length,_=f?e[r+2]:0,g=a>>2,m=(a&3)<<4|u>>4;let w=(u&15)<<2|_>>6,T=_&63;f||(T=64,c||(w=64)),s.push(i[g],i[m],i[w],i[T])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Nd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lv(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const a=i[e.charAt(r++)],u=r<e.length?i[e.charAt(r)]:0;++r;const _=r<e.length?i[e.charAt(r)]:64;++r;const m=r<e.length?i[e.charAt(r)]:64;if(++r,a==null||u==null||_==null||m==null)throw Error();const w=a<<2|u>>4;if(s.push(w),_!==64){const T=u<<4&240|_>>2;if(s.push(T),m!==64){const A=_<<6&192|m;s.push(A)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Rd=function(e){const t=Nd(e);return wr.encodeByteArray(t,!0)},Od=function(e){return Rd(e).replace(/\./g,"")},zh=function(e){try{return wr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){return Dd(void 0,e)}function Dd(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!hv(i)||(e[i]=Dd(e[i],t[i]));return e}function hv(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bd(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(uv())}function dv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fd(){return Md.NODE_ADMIN===!0}function Al(){return typeof indexedDB=="object"}function fv(){return new Promise((e,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),i||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{i=!1},r.onerror=()=>{var a;t(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(i){t(i)}})}function _v(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="FirebaseError";class Ml extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=pv,Object.setPrototypeOf(this,Ml.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},r=`${this.service}/${t}`,a=this.errors[t],c=a?mv(a,s):"Error",u=`${this.serviceName}: ${c} (${r}).`;return new Ml(r,u,s)}}function mv(e,t){return e.replace(gv,(i,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const gv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e){return JSON.parse(e)}function qt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=function(e){let t={},i={},s={},r="";try{const a=e.split(".");t=Bs(zh(a[0])||""),i=Bs(zh(a[1])||""),r=a[2],s=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:s,signature:r}},vv=function(e){const t=zd(e),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},yv=function(e){const t=zd(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Wh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vo(e,t,i){const s={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=t.call(i,e[r],r,e));return s}function $a(e,t){if(e===t)return!0;const i=Object.keys(e),s=Object.keys(t);for(const r of i){if(!s.includes(r))return!1;const a=e[r],c=t[r];if(Hh(a)&&Hh(c)){if(!$a(a,c))return!1}else if(a!==c)return!1}for(const r of s)if(!i.includes(r))return!1;return!0}function Hh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(e){const t=[];for(const[i,s]of Object.entries(e))Array.isArray(s)?s.forEach(r=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const s=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)s[m]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let m=0;m<16;m++)s[m]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let m=16;m<80;m++){const w=s[m-3]^s[m-8]^s[m-14]^s[m-16];s[m]=(w<<1|w>>>31)&4294967295}let r=this.chain_[0],a=this.chain_[1],c=this.chain_[2],u=this.chain_[3],f=this.chain_[4],_,g;for(let m=0;m<80;m++){m<40?m<20?(_=u^a&(c^u),g=1518500249):(_=a^c^u,g=1859775393):m<60?(_=a&c|u&(a|c),g=2400959708):(_=a^c^u,g=3395469782);const w=(r<<5|r>>>27)+_+f+g+s[m]&4294967295;f=u,u=c,c=(a<<30|a>>>2)&4294967295,a=r,r=w}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const s=i-this.blockSize;let r=0;const a=this.buf_;let c=this.inbuf_;for(;r<i;){if(c===0)for(;r<=s;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<i;)if(a[c]=t.charCodeAt(r),++c,++r,c===this.blockSize){this.compress_(a),c=0;break}}else for(;r<i;)if(a[c]=t[r],++c,++r,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=i&255,i/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let a=24;a>=0;a-=8)t[s]=this.chain_[r]>>a&255,++s;return t}}function br(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);if(r>=55296&&r<=56319){const a=r-55296;s++,O(s<e.length,"Surrogate pair missing trail surrogate.");const c=e.charCodeAt(s)-56320;r=65536+(a<<10)+c}r<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=r&63|128):r<65536?(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=r&63|128):(t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=r&63|128)}return t},Cr=function(e){let t=0;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=1e3,Ev=2,Tv=4*60*60*1e3,Pv=.5;function Iv(e,t=xv,i=Ev){const s=t*Math.pow(i,e),r=Math.round(Pv*s*(Math.random()-.5)*2);return Math.min(Tv,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e,t){return new Promise((i,s)=>{e.onsuccess=r=>{i(r.target.result)},e.onerror=r=>{var a;s(`${t}: ${(a=r.target.error)===null||a===void 0?void 0:a.message}`)}})}class Uh{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,i){return new Wd(this._db.transaction.call(this._db,t,i))}createObjectStore(t,i){return new Hd(this._db.createObjectStore(t,i))}close(){this._db.close()}}class Wd{constructor(t){this._transaction=t,this.complete=new Promise((i,s)=>{this._transaction.oncomplete=function(){i()},this._transaction.onerror=()=>{s(this._transaction.error)},this._transaction.onabort=()=>{s(this._transaction.error)}})}objectStore(t){return new Hd(this._transaction.objectStore(t))}}class Hd{constructor(t){this._store=t}index(t){return new Zh(this._store.index(t))}createIndex(t,i,s){return new Zh(this._store.createIndex(t,i,s))}get(t){const i=this._store.get(t);return Es(i,"Error reading from IndexedDB")}put(t,i){const s=this._store.put(t,i);return Es(s,"Error writing to IndexedDB")}delete(t){const i=this._store.delete(t);return Es(i,"Error deleting from IndexedDB")}clear(){const t=this._store.clear();return Es(t,"Error clearing IndexedDB object store")}}class Zh{constructor(t){this._index=t}get(t){const i=this._index.get(t);return Es(i,"Error reading from IndexedDB")}}function Sv(e,t,i){return new Promise((s,r)=>{try{const a=indexedDB.open(e,t);a.onsuccess=c=>{s(new Uh(c.target.result))},a.onerror=c=>{var u;r(`Error opening indexedDB: ${(u=c.target.error)===null||u===void 0?void 0:u.message}`)},a.onupgradeneeded=c=>{i(new Uh(a.result),c.oldVersion,c.newVersion,new Wd(a.transaction))}}catch(a){r(`Error opening indexedDB: ${a.message}`)}})}class si{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new _n;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:i});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Av(t))try{this.getOrInitializeService({instanceIdentifier:jn})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(i);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(t=jn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=jn){return this.instances.has(t)}getOptions(t=jn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);s===u&&c.resolve(r)}return r}onInit(t,i){var s;const r=this.normalizeInstanceIdentifier(i),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&t(c,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(!!s)for(const r of s)try{r(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Lv(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=jn){return this.component?this.component.multipleInstances?t:jn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lv(e){return e===jn?void 0:e}function Av(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new kv(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(kt||(kt={}));const Nv={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},Rv=kt.INFO,Ov={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},Dv=(e,t,...i)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),r=Ov[t];if(r)console[r](`[${s}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Rl{constructor(t){this.name=t,this._logLevel=Rv,this._logHandler=Dv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Nv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(Fv(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function Fv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Va="@firebase/app",$h="0.7.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Rl("@firebase/app"),zv="@firebase/app-compat",Wv="@firebase/analytics-compat",Hv="@firebase/analytics",Uv="@firebase/app-check-compat",Zv="@firebase/app-check",$v="@firebase/auth",Vv="@firebase/auth-compat",jv="@firebase/database",qv="@firebase/database-compat",Gv="@firebase/functions",Kv="@firebase/functions-compat",Yv="@firebase/installations",Qv="@firebase/installations-compat",Xv="@firebase/messaging",Jv="@firebase/messaging-compat",ty="@firebase/performance",ey="@firebase/performance-compat",ny="@firebase/remote-config",iy="@firebase/remote-config-compat",sy="@firebase/storage",oy="@firebase/storage-compat",ry="@firebase/firestore",ay="@firebase/firestore-compat",ly="firebase",cy="9.6.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="[DEFAULT]",hy={[Va]:"fire-core",[zv]:"fire-core-compat",[Hv]:"fire-analytics",[Wv]:"fire-analytics-compat",[Zv]:"fire-app-check",[Uv]:"fire-app-check-compat",[$v]:"fire-auth",[Vv]:"fire-auth-compat",[jv]:"fire-rtdb",[qv]:"fire-rtdb-compat",[Gv]:"fire-fn",[Kv]:"fire-fn-compat",[Yv]:"fire-iid",[Qv]:"fire-iid-compat",[Xv]:"fire-fcm",[Jv]:"fire-fcm-compat",[ty]:"fire-perf",[ey]:"fire-perf-compat",[ny]:"fire-rc",[iy]:"fire-rc-compat",[sy]:"fire-gcs",[oy]:"fire-gcs-compat",[ry]:"fire-fst",[ay]:"fire-fst-compat","fire-js":"fire-js",[ly]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=new Map,ja=new Map;function uy(e,t){try{e.container.addComponent(t)}catch(i){Ol.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function zi(e){const t=e.name;if(ja.has(t))return Ol.debug(`There were multiple attempts to register component ${t}.`),!1;ja.set(t,e);for(const i of jo.values())uy(i,e);return!0}function Dl(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},oi=new Nl("app","Firebase",dy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t,i,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=cy;function Zd(e,t={}){typeof t!="object"&&(t={name:t});const i=Object.assign({name:Ud,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw oi.create("bad-app-name",{appName:String(s)});const r=jo.get(s);if(r){if($a(e,r.options)&&$a(i,r.config))return r;throw oi.create("duplicate-app",{appName:s})}const a=new Mv(s);for(const u of ja.values())a.addComponent(u);const c=new fy(e,i,a);return jo.set(s,c),c}function $d(e=Ud){const t=jo.get(e);if(!t)throw oi.create("no-app",{appName:e});return t}function ni(e,t,i){var s;let r=(s=hy[e])!==null&&s!==void 0?s:e;i&&(r+=`-${i}`);const a=r.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const u=[`Unable to register library "${r}" with version "${t}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ol.warn(u.join(" "));return}zi(new si(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="firebase-heartbeat-database",my=1,Fs="firebase-heartbeat-store";let wa=null;function Vd(){return wa||(wa=Sv(py,my,(e,t)=>{switch(t){case 0:e.createObjectStore(Fs)}}).catch(e=>{throw oi.create("storage-open",{originalErrorMessage:e.message})})),wa}async function gy(e){try{return(await Vd()).transaction(Fs).objectStore(Fs).get(jd(e))}catch(t){throw oi.create("storage-get",{originalErrorMessage:t.message})}}async function Vh(e,t){try{const s=(await Vd()).transaction(Fs,"readwrite");return await s.objectStore(Fs).put(t,jd(e)),s.complete}catch(i){throw oi.create("storage-set",{originalErrorMessage:i.message})}}function jd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=1024,yy=30*24*60*60*1e3;class wy{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Cy(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jh();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const a=new Date(r.date).valueOf();return Date.now()-a<=yy}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jh(),{heartbeatsToSend:i,unsentEntries:s}=by(this._heartbeatsCache.heartbeats),r=Od(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function jh(){return new Date().toISOString().substring(0,10)}function by(e,t=vy){const i=[];let s=e.slice();for(const r of e){const a=i.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),qh(i)>t){a.dates.pop();break}}else if(i.push({agent:r.agent,dates:[r.date]}),qh(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class Cy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Al()?fv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await gy(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const r=await this.read();return Vh(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const r=await this.read();return Vh(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function qh(e){return Od(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(e){zi(new si("platform-logger",t=>new Bv(t),"PRIVATE")),zi(new si("heartbeat",t=>new wy(t),"PRIVATE")),ni(Va,$h,e),ni(Va,$h,"esm2017"),ni("fire-js","")}xy("");var Ey="firebase",Ty="9.6.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(Ey,Ty,"app");const Gh="@firebase/database",Kh="0.12.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd="";function Py(e){qd=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),qt(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Bs(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return Ge(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=function(e){try{if(typeof window!="undefined"&&typeof window[e]!="undefined"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Iy(t)}}catch{}return new Sy},Xn=Gd("localStorage"),qa=Gd("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new Rl("@firebase/database"),ky=function(){let e=1;return function(){return e++}}(),Kd=function(e){const t=Cv(e),i=new bv;i.update(t);const s=i.digest();return wr.encodeByteArray(s)},js=function(...e){let t="";for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=js.apply(null,s):typeof s=="object"?t+=qt(s):t+=s,t+=" "}return t};let ii=null,Yh=!0;const Ly=function(e,t){O(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Ni.logLevel=kt.VERBOSE,ii=Ni.log.bind(Ni),t&&qa.set("logging_enabled",!0)):typeof e=="function"?ii=e:(ii=null,qa.remove("logging_enabled"))},te=function(...e){if(Yh===!0&&(Yh=!1,ii===null&&qa.get("logging_enabled")===!0&&Ly(!0)),ii){const t=js.apply(null,e);ii(t)}},qs=function(e){return function(...t){te(e,...t)}},Ga=function(...e){const t="FIREBASE INTERNAL ERROR: "+js(...e);Ni.error(t)},ri=function(...e){const t=`FIREBASE FATAL ERROR: ${js(...e)}`;throw Ni.error(t),new Error(t)},ae=function(...e){const t="FIREBASE WARNING: "+js(...e);Ni.warn(t)},Ay=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ae("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Bl=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},My=function(e){if(document.readyState==="complete")e();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Wi="[MIN_NAME]",ai="[MAX_NAME]",hi=function(e,t){if(e===t)return 0;if(e===Wi||t===ai)return-1;if(t===Wi||e===ai)return 1;{const i=Qh(e),s=Qh(t);return i!==null?s!==null?i-s===0?e.length-t.length:i-s:-1:s!==null?1:e<t?-1:1}},Ny=function(e,t){return e===t?0:e<t?-1:1},gs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+qt(t))},Fl=function(e){if(typeof e!="object"||e===null)return qt(e);const t=[];for(const s in e)t.push(s);t.sort();let i="{";for(let s=0;s<t.length;s++)s!==0&&(i+=","),i+=qt(t[s]),i+=":",i+=Fl(e[t[s]]);return i+="}",i},Yd=function(e,t){const i=e.length;if(i<=t)return[e];const s=[];for(let r=0;r<i;r+=t)r+t>i?s.push(e.substring(r,i)):s.push(e.substring(r,r+t));return s};function ne(e,t){for(const i in e)e.hasOwnProperty(i)&&t(i,e[i])}const Qd=function(e){O(!Bl(e),"Invalid JSON number");const t=11,i=52,s=(1<<t-1)-1;let r,a,c,u,f;e===0?(a=0,c=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-s)?(u=Math.min(Math.floor(Math.log(e)/Math.LN2),s),a=u+s,c=Math.round(e*Math.pow(2,i-u)-Math.pow(2,i))):(a=0,c=Math.round(e/Math.pow(2,1-s-i))));const _=[];for(f=i;f;f-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(f=t;f;f-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(r?1:0),_.reverse();const g=_.join("");let m="";for(f=0;f<64;f+=8){let w=parseInt(g.substr(f,8),2).toString(16);w.length===1&&(w="0"+w),m=m+w}return m.toLowerCase()},Ry=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Oy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Dy(e,t){let i="Unknown Error";e==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?i="Client doesn't have permission to access the desired data.":e==="unavailable"&&(i="The service is unavailable");const s=new Error(e+" at "+t._path.toString()+": "+i);return s.code=e.toUpperCase(),s}const By=new RegExp("^-?(0*)\\d{1,10}$"),Fy=-2147483648,zy=2147483647,Qh=function(e){if(By.test(e)){const t=Number(e);if(t>=Fy&&t<=zy)return t}return null},Xi=function(e){try{e()}catch(t){setTimeout(()=>{const i=t.stack||"";throw ae("Exception was thrown by user callback.",i),t},Math.floor(0))}},Wy=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ss=function(e,t){const i=setTimeout(e,t);return typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){ae(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,i,s){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(te("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ae(t)}}class Ka{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Ka.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="5",Xd="v",Jd="s",tf="r",ef="f",nf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sf="ls",Zy="p",Ya="ac",of="websocket",rf="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(t,i,s,r,a=!1,c="",u=!1){this.secure=i,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Xn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function Vy(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function af(e,t,i){O(typeof t=="string","typeof type must == string"),O(typeof i=="object","typeof params must == object");let s;if(t===of)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===rf)s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Vy(e)&&(i.ns=e.namespace);const r=[];return ne(i,(a,c)=>{r.push(a+"="+c)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.counters_={}}incrementCounter(t,i=1){Ge(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return cv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba={},Ca={};function Wl(e){const t=e.toString();return ba[t]||(ba[t]=new jy),ba[t]}function qy(e,t){const i=e.toString();return Ca[i]||(Ca[i]=t()),Ca[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&Xi(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="start",Ky="close",Yy="pLPCommand",Qy="pRTLPCB",lf="id",cf="pw",hf="ser",Xy="cb",Jy="seg",tw="ts",ew="d",nw="dframe",uf=1870,df=30,iw=uf-df,sw=25e3,ow=3e4;class ki{constructor(t,i,s,r,a,c,u){this.connId=t,this.repoInfo=i,this.applicationId=s,this.appCheckToken=r,this.authToken=a,this.transportSessionId=c,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qs(t),this.stats_=Wl(i),this.urlFn=f=>(this.appCheckToken&&(f[Ya]=this.appCheckToken),af(i,rf,f))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new Gy(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ow)),My(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Hl((...a)=>{const[c,u,f,_,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Xh)this.id=u,this.password=f;else if(c===Ky)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,u)},()=>{this.onClosed_()},this.urlFn);const s={};s[Xh]="t",s[hf]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Xy]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Xd]=zl,this.transportSessionId&&(s[Jd]=this.transportSessionId),this.lastSessionId&&(s[sf]=this.lastSessionId),this.applicationId&&(s[Zy]=this.applicationId),this.appCheckToken&&(s[Ya]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&nf.test(location.hostname)&&(s[tf]=ef);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ki.forceAllow_=!0}static forceDisallow(){ki.forceDisallow_=!0}static isAvailable(){return ki.forceAllow_?!0:!ki.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Ry()&&!Oy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=qt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Rd(i),r=Yd(s,iw);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const s={};s[nw]="t",s[lf]=t,s[cf]=i,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=qt(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Hl{constructor(t,i,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ky(),window[Yy+this.uniqueCallbackIdentifier]=t,window[Qy+this.uniqueCallbackIdentifier]=i,this.myIFrame=Hl.createIFrame_();let a="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const u=document.domain;a='<script>document.domain="'+u+'";<\/script>'}const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(u){te("frame writing exception"),u.stack&&te(u.stack),te(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||te("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[lf]=this.myID,t[cf]=this.myPW,t[hf]=this.currentSerial;let i=this.urlFn(t),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+df+s.length<=uf;){const c=this.pendingSegs.shift();s=s+"&"+Jy+r+"="+c.seg+"&"+tw+r+"="+c.ts+"&"+ew+r+"="+c.d,r++}return i=i+s,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,s){this.pendingSegs.push({seg:t,ts:i,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const s=()=>{this.outstandingRequests.delete(i),this.newRequest_()},r=setTimeout(s,Math.floor(sw)),a=()=>{clearTimeout(r),s()};this.addTag(t,a)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),i())},s.onerror=()=>{te("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=16384,aw=45e3;let qo=null;typeof MozWebSocket!="undefined"?qo=MozWebSocket:typeof WebSocket!="undefined"&&(qo=WebSocket);class Se{constructor(t,i,s,r,a,c,u){this.connId=t,this.applicationId=s,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qs(this.connId),this.stats_=Wl(i),this.connURL=Se.connectionURL_(i,c,u,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,r){const a={};return a[Xd]=zl,typeof location!="undefined"&&location.hostname&&nf.test(location.hostname)&&(a[tf]=ef),i&&(a[Jd]=i),s&&(a[sf]=s),r&&(a[Ya]=r),af(t,of,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xn.set("previous_websocket_failure",!0);try{if(!Fd()){const s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new qo(this.connURL,[],s)}}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Se.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&qo!==null&&!Se.forceDisallow_}static previouslyFailed(){return Xn.isInMemoryStorage||Xn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Xn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=Bs(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(O(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=qt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Yd(i,rw);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aw))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Se.responsesRequiredToBeHealthy=2;Se.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ki,Se]}initTransports_(t){const i=Se&&Se.isAvailable();let s=i&&!Se.previouslyFailed();if(t.webSocketOnly&&(i||ae("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Se];else{const r=this.transports_=[];for(const a of Ul.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=6e4,cw=5e3,hw=10*1024,uw=100*1024,xa="t",Jh="d",dw="s",tu="r",fw="e",eu="o",nu="a",iu="n",su="p",_w="h";class pw{constructor(t,i,s,r,a,c,u,f,_,g){this.id=t,this.repoInfo_=i,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=c,this.onReady_=u,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qs("c:"+this.id+":"),this.transportManager_=new Ul(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,s)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ss(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(xa in t){const i=t[xa];i===nu?this.upgradeIfSecondaryHealthy_():i===tu?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===eu&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=gs("t",t),s=gs("d",t);if(i==="c")this.onSecondaryControl_(s);else if(i==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:su,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:nu,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:iu,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=gs("t",t),s=gs("d",t);i==="c"?this.onControl_(s):i==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=gs(xa,t);if(Jh in t){const s=t[Jh];if(i===_w)this.onHandshake_(s);else if(i===iu){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===dw?this.onConnectionShutdown_(s):i===tu?this.onReset_(s):i===fw?Ga("Server Error: "+s):i===eu?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ga("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,s=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),zl!==s&&ae("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,s),Ss(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ss(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(cw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:su,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{put(t,i,s,r){}merge(t,i,s,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,s){}onDisconnectMerge(t,i,s){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(t){this.allowedEvents_=t,this.listeners_={},O(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,i)}}on(t,i,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:s});const r=this.getInitialEvent(t);r&&i.apply(s,r)}off(t,i,s){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let a=0;a<r.length;a++)if(r[a].callback===i&&(!s||s===r[a].context)){r.splice(a,1);return}}validateEventType_(t){O(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends _f{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Bd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Go}getInitialEvent(t){return O(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=32,ru=768;class Et{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function pt(){return new Et("")}function et(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Rn(e){return e.pieces_.length-e.pieceNum_}function Lt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Et(e.pieces_,t)}function Zl(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function mw(e){let t="";for(let i=e.pieceNum_;i<e.pieces_.length;i++)e.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[i])));return t||"/"}function zs(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function pf(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let i=e.pieceNum_;i<e.pieces_.length-1;i++)t.push(e.pieces_[i]);return new Et(t,0)}function Ft(e,t){const i=[];for(let s=e.pieceNum_;s<e.pieces_.length;s++)i.push(e.pieces_[s]);if(t instanceof Et)for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);else{const s=t.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&i.push(s[r])}return new Et(i,0)}function lt(e){return e.pieceNum_>=e.pieces_.length}function re(e,t){const i=et(e),s=et(t);if(i===null)return t;if(i===s)return re(Lt(e),Lt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function gw(e,t){const i=zs(e,0),s=zs(t,0);for(let r=0;r<i.length&&r<s.length;r++){const a=hi(i[r],s[r]);if(a!==0)return a}return i.length===s.length?0:i.length<s.length?-1:1}function $l(e,t){if(Rn(e)!==Rn(t))return!1;for(let i=e.pieceNum_,s=t.pieceNum_;i<=e.pieces_.length;i++,s++)if(e.pieces_[i]!==t.pieces_[s])return!1;return!0}function Ce(e,t){let i=e.pieceNum_,s=t.pieceNum_;if(Rn(e)>Rn(t))return!1;for(;i<e.pieces_.length;){if(e.pieces_[i]!==t.pieces_[s])return!1;++i,++s}return!0}class vw{constructor(t,i){this.errorPrefix_=i,this.parts_=zs(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Cr(this.parts_[s]);mf(this)}}function yw(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Cr(t),mf(e)}function ww(e){const t=e.parts_.pop();e.byteLength_-=Cr(t),e.parts_.length>0&&(e.byteLength_-=1)}function mf(e){if(e.byteLength_>ru)throw new Error(e.errorPrefix_+"has a key path longer than "+ru+" bytes ("+e.byteLength_+").");if(e.parts_.length>ou)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ou+") or object contains a cycle "+qn(e))}function qn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends _f{constructor(){super(["visible"]);let t,i;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(i="visibilitychange",t="hidden"):typeof document.mozHidden!="undefined"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden!="undefined"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden!="undefined"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Vl}getInitialEvent(t){return O(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=1e3,bw=60*5*1e3,Cw=3*1e3,au=30*1e3,xw=1.3,Ew=3e4,Tw="server_kill",lu=3;class dn extends ff{constructor(t,i,s,r,a,c,u,f){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=u,this.authOverride_=f,this.id=dn.nextPersistentConnectionId_++,this.log_=qs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vs,this.maxReconnectDelay_=bw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!Fd())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vl.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Go.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const r=++this.requestNumber_,a={r,a:t,b:i};this.log_(qt(a)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[r]=s)}get(t){this.initConnection_();const i=new _n,s={p:t._path.toString(),q:t._queryObject},r={action:"g",request:s,onComplete:c=>{const u=c.d;c.s==="ok"?(this.onDataUpdate_(s.p,u,!1,null),i.resolve(u)):i.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const c=this.outstandingGets_[a];c===void 0||r!==c||(delete this.outstandingGets_[a],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+a+" timed out on connection"),i.reject(new Error("Client is offline.")))},Cw),this.connected_&&this.sendGet_(a),i.promise}listen(t,i,s,r){this.initConnection_();const a=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:i,query:t,tag:s};this.listens.get(c).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);const a={p:s},c="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(c,a,u=>{const f=u.d,_=u.s;dn.warnOnListenWarnings_(f,i),(this.listens.get(s)&&this.listens.get(s).get(r))===t&&(this.log_("listen response",u),_!=="ok"&&this.removeListen_(s,r),t.onComplete&&t.onComplete(_,f))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Ge(t,"w")){const s=Fi(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();ae(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||yv(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=au)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=vv(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{const a=r.s,c=r.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,t._queryObject,i)}sendUnlisten_(t,i,s,r){this.log_("Unlisten on "+t+" for "+i);const a={p:t},c="n";r&&(a.q=s,a.t=r),this.sendRequest(c,a)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,r){const a={p:i,d:s};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,c=>{r&&setTimeout(()=>{r(c.s,c.d)},Math.floor(0))})}put(t,i,s,r){this.putInternal("p",t,i,s,r)}merge(t,i,s,r){this.putInternal("m",t,i,s,r)}putInternal(t,i,s,r,a){this.initConnection_();const c={p:i,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:t,request:c,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+qt(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Ga("Unrecognized action received from server: "+qt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ew&&(this.reconnectDelay_=vs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*xw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+dn.nextConnectionId_++,a=this.lastSessionId;let c=!1,u=null;const f=function(){u?u.close():(c=!0,s())},_=function(m){O(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:f,sendRequest:_};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,w]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);c?te("getToken() completed but was canceled"):(te("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=w&&w.token,u=new pw(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,s,T=>{ae(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(Tw)},a))}catch(m){this.log_("Failed to get token: "+m),c||(this.repoInfo_.nodeAdmin&&ae(m),f())}}}interrupt(t){te("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){te("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Wh(this.interruptReasons_)&&(this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;i?s=i.map(a=>Fl(a)).join("$"):s="default";const r=this.removeListen_(t,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,i){const s=new Et(t).toString();let r;if(this.listens.has(s)){const a=this.listens.get(s);r=a.get(i),a.delete(i),a.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(t,i){te("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=lu&&(this.reconnectDelay_=au,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){te("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=lu&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+qd.replace(/\./g,"-")]=1,Bd()?t["framework.cordova"]=1:dv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Go.getInstance().currentlyOnline();return Wh(this.interruptReasons_)&&t}}dn.nextPersistentConnectionId_=0;dn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new it(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const s=new it(Wi,t),r=new it(Wi,i);return this.compare(s,r)!==0}minPost(){return it.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io;class gf extends xr{static get __EMPTY_NODE(){return Io}static set __EMPTY_NODE(t){Io=t}compare(t,i){return hi(t.name,i.name)}isDefinedOn(t){throw Yi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return it.MIN}maxPost(){return new it(ai,Io)}makePost(t,i){return O(typeof t=="string","KeyIndex indexValue must always be a string."),new it(t,Io)}toString(){return".key"}}const Ri=new gf;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(t,i,s,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=i?s(t.key,i):1,r&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Qt{constructor(t,i,s,r,a){this.key=t,this.value=i,this.color=s!=null?s:Qt.RED,this.left=r!=null?r:ue.EMPTY_NODE,this.right=a!=null?a:ue.EMPTY_NODE}copy(t,i,s,r,a){return new Qt(t!=null?t:this.key,i!=null?i:this.value,s!=null?s:this.color,r!=null?r:this.left,a!=null?a:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let r=this;const a=s(t,r.key);return a<0?r=r.copy(null,null,null,r.left.insert(t,i,s),null):a===0?r=r.copy(null,i,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ue.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,r;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(t,s.key)===0){if(s.right.isEmpty())return ue.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Qt.RED=!0;Qt.BLACK=!1;class Pw{copy(t,i,s,r,a){return this}insert(t,i,s){return new Qt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ue{constructor(t,i=ue.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new ue(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,Qt.BLACK,null,null))}remove(t){return new ue(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Qt.BLACK,null,null))}get(t){let i,s=this.root_;for(;!s.isEmpty();){if(i=this.comparator_(t,s.key),i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}getPredecessorKey(t){let i,s=this.root_,r=null;for(;!s.isEmpty();)if(i=this.comparator_(t,s.key),i===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else i<0?s=s.left:i>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new So(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new So(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new So(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new So(this.root_,null,this.comparator_,!0,t)}}ue.EMPTY_NODE=new Pw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(e,t){return hi(e.name,t.name)}function jl(e,t){return hi(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa;function Sw(e){Qa=e}const vf=function(e){return typeof e=="number"?"number:"+Qd(e):"string:"+e},yf=function(e){if(e.isLeafNode()){const t=e.val();O(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ge(t,".sv"),"Priority must be a string or number.")}else O(e===Qa||e.isEmpty(),"priority of unexpected type.");O(e===Qa||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu;class Yt{constructor(t,i=Yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yf(this.priorityNode_)}static set __childrenNodeConstructor(t){cu=t}static get __childrenNodeConstructor(){return cu}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Yt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return lt(t)?this:et(t)===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:Yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=et(t);return s===null?i:i.isEmpty()&&s!==".priority"?this:(O(s!==".priority"||Rn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Lt(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+vf(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=Qd(this.value_):t+=this.value_,this.lazyHash_=Kd(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Yt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Yt.__childrenNodeConstructor?-1:(O(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,r=Yt.VALUE_TYPE_ORDER.indexOf(i),a=Yt.VALUE_TYPE_ORDER.indexOf(s);return O(r>=0,"Unknown leaf type: "+i),O(a>=0,"Unknown leaf type: "+s),r===a?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}Yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf,bf;function kw(e){wf=e}function Lw(e){bf=e}class Aw extends xr{compare(t,i){const s=t.node.getPriority(),r=i.node.getPriority(),a=s.compareTo(r);return a===0?hi(t.name,i.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return it.MIN}maxPost(){return new it(ai,new Yt("[PRIORITY-POST]",bf))}makePost(t,i){const s=wf(t);return new it(i,new Yt("[PRIORITY-POST]",s))}toString(){return".priority"}}const zt=new Aw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=Math.log(2);class Nw{constructor(t){const i=a=>parseInt(Math.log(a)/Mw,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const r=s(this.count);this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Ko=function(e,t,i,s){e.sort(t);const r=function(f,_){const g=_-f;let m,w;if(g===0)return null;if(g===1)return m=e[f],w=i?i(m):m,new Qt(w,m.node,Qt.BLACK,null,null);{const T=parseInt(g/2,10)+f,A=r(f,T),D=r(T+1,_);return m=e[T],w=i?i(m):m,new Qt(w,m.node,Qt.BLACK,A,D)}},a=function(f){let _=null,g=null,m=e.length;const w=function(A,D){const Z=m-A,X=m;m-=A;const At=r(Z+1,X),j=e[Z],$=i?i(j):j;T(new Qt($,j.node,D,null,At))},T=function(A){_?(_.left=A,_=A):(g=A,_=A)};for(let A=0;A<f.count;++A){const D=f.nextBitIsOne(),Z=Math.pow(2,f.count-(A+1));D?w(Z,Qt.BLACK):(w(Z,Qt.BLACK),w(Z,Qt.RED))}return g},c=new Nw(e.length),u=a(c);return new ue(s||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea;const Pi={};class un{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return O(Pi&&zt,"ChildrenNode.ts has not been loaded"),Ea=Ea||new un({".priority":Pi},{".priority":zt}),Ea}get(t){const i=Fi(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof ue?i:null}hasIndex(t){return Ge(this.indexSet_,t.toString())}addIndex(t,i){O(t!==Ri,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const a=i.getIterator(it.Wrap);let c=a.getNext();for(;c;)r=r||t.isDefinedOn(c.node),s.push(c),c=a.getNext();let u;r?u=Ko(s,t.getCompare()):u=Pi;const f=t.toString(),_=Object.assign({},this.indexSet_);_[f]=t;const g=Object.assign({},this.indexes_);return g[f]=u,new un(g,_)}addToIndexes(t,i){const s=Vo(this.indexes_,(r,a)=>{const c=Fi(this.indexSet_,a);if(O(c,"Missing index implementation for "+a),r===Pi)if(c.isDefinedOn(t.node)){const u=[],f=i.getIterator(it.Wrap);let _=f.getNext();for(;_;)_.name!==t.name&&u.push(_),_=f.getNext();return u.push(t),Ko(u,c.getCompare())}else return Pi;else{const u=i.get(t.name);let f=r;return u&&(f=f.remove(new it(t.name,u))),f.insert(t,t.node)}});return new un(s,this.indexSet_)}removeFromIndexes(t,i){const s=Vo(this.indexes_,r=>{if(r===Pi)return r;{const a=i.get(t.name);return a?r.remove(new it(t.name,a)):r}});return new un(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys;class K{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&yf(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ys||(ys=new K(new ue(jl),null,un.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ys}updatePriority(t){return this.children_.isEmpty()?this:new K(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?ys:i}}getChild(t){const i=et(t);return i===null?this:this.getImmediateChild(i).getChild(Lt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(O(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const s=new it(t,i);let r,a;i.isEmpty()?(r=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(s,this.children_));const c=r.isEmpty()?ys:this.priorityNode_;return new K(r,c,a)}}updateChild(t,i){const s=et(t);if(s===null)return i;{O(et(t)!==".priority"||Rn(t)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(Lt(t),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,r=0,a=!0;if(this.forEachChild(zt,(c,u)=>{i[c]=u.val(t),s++,a&&K.INTEGER_REGEXP_.test(c)?r=Math.max(r,Number(c)):a=!1}),!t&&a&&r<2*s){const c=[];for(const u in i)c[u]=i[u];return c}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+vf(this.getPriority().val())+":"),this.forEachChild(zt,(i,s)=>{const r=s.hash();r!==""&&(t+=":"+i+":"+r)}),this.lazyHash_=t===""?"":Kd(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const r=this.resolveIndex_(s);if(r){const a=r.getPredecessorKey(new it(t,i));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new it(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new it(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,it.Wrap);let a=r.peek();for(;a!=null&&i.compare(a,t)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,it.Wrap);let a=r.peek();for(;a!=null&&i.compare(a,t)>0;)r.getNext(),a=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gs?-1:0}withIndex(t){if(t===Ri||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new K(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ri||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const s=this.getIterator(zt),r=i.getIterator(zt);let a=s.getNext(),c=r.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=r.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===Ri?null:this.indexMap_.get(t.toString())}}K.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Rw extends K{constructor(){super(new ue(jl),K.EMPTY_NODE,un.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return K.EMPTY_NODE}isEmpty(){return!1}}const Gs=new Rw;Object.defineProperties(it,{MIN:{value:new it(Wi,K.EMPTY_NODE)},MAX:{value:new it(ai,Gs)}});gf.__EMPTY_NODE=K.EMPTY_NODE;Yt.__childrenNodeConstructor=K;Sw(Gs);Lw(Gs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=!0;function jt(e,t=null){if(e===null)return K.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),O(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const i=e;return new Yt(i,jt(t))}if(!(e instanceof Array)&&Ow){const i=[];let s=!1;if(ne(e,(c,u)=>{if(c.substring(0,1)!=="."){const f=jt(u);f.isEmpty()||(s=s||!f.getPriority().isEmpty(),i.push(new it(c,f)))}}),i.length===0)return K.EMPTY_NODE;const a=Ko(i,Iw,c=>c.name,jl);if(s){const c=Ko(i,zt.getCompare());return new K(a,jt(t),new un({".priority":c},{".priority":zt}))}else return new K(a,jt(t),un.Default)}else{let i=K.EMPTY_NODE;return ne(e,(s,r)=>{if(Ge(e,s)&&s.substring(0,1)!=="."){const a=jt(r);(a.isLeafNode()||!a.isEmpty())&&(i=i.updateImmediateChild(s,a))}}),i.updatePriority(jt(t))}}kw(jt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends xr{constructor(t){super(),this.indexPath_=t,O(!lt(t)&&et(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const s=this.extractChild(t.node),r=this.extractChild(i.node),a=s.compareTo(r);return a===0?hi(t.name,i.name):a}makePost(t,i){const s=jt(t),r=K.EMPTY_NODE.updateChild(this.indexPath_,s);return new it(i,r)}maxPost(){const t=K.EMPTY_NODE.updateChild(this.indexPath_,Gs);return new it(ai,t)}toString(){return zs(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends xr{compare(t,i){const s=t.node.compareTo(i.node);return s===0?hi(t.name,i.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return it.MIN}maxPost(){return it.MAX}makePost(t,i){const s=jt(t);return new it(i,s)}toString(){return".value"}}const Fw=new Bw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(e){return{type:"value",snapshotNode:e}}function Hi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ws(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Hs(e,t,i){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:i}}function zw(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t){this.index_=t}updateChild(t,i,s,r,a,c){O(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(i);return u.getChild(r).equals(s.getChild(r))&&u.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?t.hasChild(i)?c.trackChildChange(Ws(i,u)):O(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?c.trackChildChange(Hi(i,s)):c.trackChildChange(Hs(i,s,u))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(i,s).withIndex(this.index_)}updateFullNode(t,i,s){return s!=null&&(t.isLeafNode()||t.forEachChild(zt,(r,a)=>{i.hasChild(r)||s.trackChildChange(Ws(r,a))}),i.isLeafNode()||i.forEachChild(zt,(r,a)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(a)||s.trackChildChange(Hs(r,a,c))}else s.trackChildChange(Hi(r,a))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?K.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t){this.indexedFilter_=new ql(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Us.getStartPost_(t),this.endPost_=Us.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,i,s,r,a,c){return this.matches(new it(i,s))||(s=K.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,s,r,a,c)}updateFullNode(t,i,s){i.isLeafNode()&&(i=K.EMPTY_NODE);let r=i.withIndex(this.index_);r=r.updatePriority(K.EMPTY_NODE);const a=this;return i.forEachChild(zt,(c,u)=>{a.matches(new it(c,u))||(r=r.updateImmediateChild(c,K.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t){this.rangedFilter_=new Us(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,i,s,r,a,c){return this.rangedFilter_.matches(new it(i,s))||(s=K.EMPTY_NODE),t.getImmediateChild(i).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,s,r,a,c):this.fullLimitUpdateChild_(t,i,s,a,c)}updateFullNode(t,i,s){let r;if(i.isLeafNode()||i.isEmpty())r=K.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){r=K.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const u=a.getNext();let f;if(this.reverse_?f=this.index_.compare(this.rangedFilter_.getStartPost(),u)<=0:f=this.index_.compare(u,this.rangedFilter_.getEndPost())<=0,f)r=r.updateImmediateChild(u.name,u.node),c++;else break}}else{r=i.withIndex(this.index_),r=r.updatePriority(K.EMPTY_NODE);let a,c,u,f;if(this.reverse_){f=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const m=this.index_.getCompare();u=(w,T)=>m(T,w)}else f=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();let _=0,g=!1;for(;f.hasNext();){const m=f.getNext();!g&&u(a,m)<=0&&(g=!0),g&&_<this.limit_&&u(m,c)<=0?_++:r=r.updateImmediateChild(m.name,K.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,s,r,a){let c;if(this.reverse_){const m=this.index_.getCompare();c=(w,T)=>m(T,w)}else c=this.index_.getCompare();const u=t;O(u.numChildren()===this.limit_,"");const f=new it(i,s),_=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(u.hasChild(i)){const m=u.getImmediateChild(i);let w=r.getChildAfterChild(this.index_,_,this.reverse_);for(;w!=null&&(w.name===i||u.hasChild(w.name));)w=r.getChildAfterChild(this.index_,w,this.reverse_);const T=w==null?1:c(w,f);if(g&&!s.isEmpty()&&T>=0)return a!=null&&a.trackChildChange(Hs(i,s,m)),u.updateImmediateChild(i,s);{a!=null&&a.trackChildChange(Ws(i,m));const D=u.updateImmediateChild(i,K.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(a!=null&&a.trackChildChange(Hi(w.name,w.node)),D.updateImmediateChild(w.name,w.node)):D}}else return s.isEmpty()?t:g&&c(_,f)>=0?(a!=null&&(a.trackChildChange(Ws(_.name,_.node)),a.trackChildChange(Hi(i,s))),u.updateImmediateChild(i,s).updateImmediateChild(_.name,K.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wi}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ai}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zt}copy(){const t=new Gl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Hw(e){return e.loadsAllData()?new ql(e.getIndex()):e.hasLimit()?new Ww(e):new Us(e)}function hu(e){const t={};if(e.isDefault())return t;let i;return e.index_===zt?i="$priority":e.index_===Fw?i="$value":e.index_===Ri?i="$key":(O(e.index_ instanceof Dw,"Unrecognized index type!"),i=e.index_.toString()),t.orderBy=qt(i),e.startSet_&&(t.startAt=qt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+qt(e.indexStartName_))),e.endSet_&&(t.endAt=qt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+qt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function uu(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let i=e.viewFrom_;i===""&&(e.isViewFromLeft()?i="l":i="r"),t.vf=i}return e.index_!==zt&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends ff{constructor(t,i,s,r){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=qs("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(O(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,s,r){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const c=Yo.getListenId_(t,s),u={};this.listens_[c]=u;const f=hu(t._queryParams);this.restRequest_(a+".json",f,(_,g)=>{let m=g;if(_===404&&(m=null,_=null),_===null&&this.onDataUpdate_(a,m,!1,s),Fi(this.listens_,c)===u){let w;_?_===401?w="permission_denied":w="rest_error:"+_:w="ok",r(w,null)}})}unlisten(t,i){const s=Yo.getListenId_(t,i);delete this.listens_[s]}get(t){const i=hu(t._queryParams),s=t._path.toString(),r=new _n;return this.restRequest_(s+".json",i,(a,c)=>{let u=c;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(s,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(t){}restRequest_(t,i={},s){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(i.auth=r.accessToken),a&&a.token&&(i.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+wv(i);this.log_("Sending REST request for "+c);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(s&&u.readyState===4){this.log_("REST Response for "+c+" received. status:",u.status,"response:",u.responseText);let f=null;if(u.status>=200&&u.status<300){try{f=Bs(u.responseText)}catch{ae("Failed to parse JSON response for "+c+": "+u.responseText)}s(null,f)}else u.status!==401&&u.status!==404&&ae("Got unsuccessful REST response for "+c+" Status: "+u.status),s(u.status);s=null}},u.open("GET",c,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.rootNode_=K.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(){return{value:null,children:new Map}}function xf(e,t,i){if(lt(t))e.value=i,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,i);else{const s=et(t);e.children.has(s)||e.children.set(s,Qo());const r=e.children.get(s);t=Lt(t),xf(r,t,i)}}function Xa(e,t,i){e.value!==null?i(t,e.value):Zw(e,(s,r)=>{const a=new Et(t.toString()+"/"+s);Xa(r,a,i)})}function Zw(e,t){e.children.forEach((i,s)=>{t(s,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&ne(this.last_,(s,r)=>{i[s]=i[s]-r}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=10*1e3,Vw=30*1e3,jw=5*60*1e3;class qw{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new $w(t);const s=du+(Vw-du)*Math.random();Ss(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),i={};let s=!1;ne(t,(r,a)=>{a>0&&Ge(this.statsToReport_,r)&&(i[r]=a,s=!0)}),s&&this.server_.reportStats(i),Ss(this.reportStats_.bind(this),Math.floor(Math.random()*2*jw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Le||(Le={}));function Kl(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ql(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,i,s){this.path=t,this.affectedTree=i,this.revert=s,this.type=Le.ACK_USER_WRITE,this.source=Kl()}operationForChild(t){if(lt(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Et(t));return new Xo(pt(),i,this.revert)}}else return O(et(this.path)===t,"operationForChild called for unrelated child."),new Xo(Lt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,i){this.source=t,this.path=i,this.type=Le.LISTEN_COMPLETE}operationForChild(t){return lt(this.path)?new Zs(this.source,pt()):new Zs(this.source,Lt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t,i,s){this.source=t,this.path=i,this.snap=s,this.type=Le.OVERWRITE}operationForChild(t){return lt(this.path)?new li(this.source,pt(),this.snap.getImmediateChild(t)):new li(this.source,Lt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,i,s){this.source=t,this.path=i,this.children=s,this.type=Le.MERGE}operationForChild(t){if(lt(this.path)){const i=this.children.subtree(new Et(t));return i.isEmpty()?null:i.value?new li(this.source,pt(),i.value):new Ui(this.source,pt(),i)}else return O(et(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ui(this.source,Lt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t,i,s){this.node_=t,this.fullyInitialized_=i,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(lt(t))return this.isFullyInitialized()&&!this.filtered_;const i=et(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Kw(e,t,i,s){const r=[],a=[];return t.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(zw(c.childName,c.snapshotNode))}),ws(e,r,"child_removed",t,s,i),ws(e,r,"child_added",t,s,i),ws(e,r,"child_moved",a,s,i),ws(e,r,"child_changed",t,s,i),ws(e,r,"value",t,s,i),r}function ws(e,t,i,s,r,a){const c=s.filter(u=>u.type===i);c.sort((u,f)=>Qw(e,u,f)),c.forEach(u=>{const f=Yw(e,u,a);r.forEach(_=>{_.respondsTo(u.type)&&t.push(_.createEvent(f,e.query_))})})}function Yw(e,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Qw(e,t,i){if(t.childName==null||i.childName==null)throw Yi("Should only compare child_ events.");const s=new it(t.childName,t.snapshotNode),r=new it(i.childName,i.snapshotNode);return e.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(e,t){return{eventCache:e,serverCache:t}}function ks(e,t,i,s){return Er(new On(t,i,s),e.serverCache)}function Ef(e,t,i,s){return Er(e.eventCache,new On(t,i,s))}function Jo(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ci(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta;const Xw=()=>(Ta||(Ta=new ue(Ny)),Ta);class St{constructor(t,i=Xw()){this.value=t,this.children=i}static fromObject(t){let i=new St(null);return ne(t,(s,r)=>{i=i.set(new Et(s),r)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:pt(),value:this.value};if(lt(t))return null;{const s=et(t),r=this.children.get(s);if(r!==null){const a=r.findRootMostMatchingPathAndValue(Lt(t),i);return a!=null?{path:Ft(new Et(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(lt(t))return this;{const i=et(t),s=this.children.get(i);return s!==null?s.subtree(Lt(t)):new St(null)}}set(t,i){if(lt(t))return new St(i,this.children);{const s=et(t),a=(this.children.get(s)||new St(null)).set(Lt(t),i),c=this.children.insert(s,a);return new St(this.value,c)}}remove(t){if(lt(t))return this.children.isEmpty()?new St(null):new St(null,this.children);{const i=et(t),s=this.children.get(i);if(s){const r=s.remove(Lt(t));let a;return r.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,r),this.value===null&&a.isEmpty()?new St(null):new St(this.value,a)}else return this}}get(t){if(lt(t))return this.value;{const i=et(t),s=this.children.get(i);return s?s.get(Lt(t)):null}}setTree(t,i){if(lt(t))return i;{const s=et(t),a=(this.children.get(s)||new St(null)).setTree(Lt(t),i);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new St(this.value,c)}}fold(t){return this.fold_(pt(),t)}fold_(t,i){const s={};return this.children.inorderTraversal((r,a)=>{s[r]=a.fold_(Ft(t,r),i)}),i(t,this.value,s)}findOnPath(t,i){return this.findOnPath_(t,pt(),i)}findOnPath_(t,i,s){const r=this.value?s(i,this.value):!1;if(r)return r;if(lt(t))return null;{const a=et(t),c=this.children.get(a);return c?c.findOnPath_(Lt(t),Ft(i,a),s):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,pt(),i)}foreachOnPath_(t,i,s){if(lt(t))return this;{this.value&&s(i,this.value);const r=et(t),a=this.children.get(r);return a?a.foreachOnPath_(Lt(t),Ft(i,r),s):new St(null)}}foreach(t){this.foreach_(pt(),t)}foreach_(t,i){this.children.inorderTraversal((s,r)=>{r.foreach_(Ft(t,s),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,s)=>{s.value&&t(i,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.writeTree_=t}static empty(){return new Me(new St(null))}}function Ls(e,t,i){if(lt(t))return new Me(new St(i));{const s=e.writeTree_.findRootMostValueAndPath(t);if(s!=null){const r=s.path;let a=s.value;const c=re(r,t);return a=a.updateChild(c,i),new Me(e.writeTree_.set(r,a))}else{const r=new St(i),a=e.writeTree_.setTree(t,r);return new Me(a)}}}function Ja(e,t,i){let s=e;return ne(i,(r,a)=>{s=Ls(s,Ft(t,r),a)}),s}function fu(e,t){if(lt(t))return Me.empty();{const i=e.writeTree_.setTree(t,new St(null));return new Me(i)}}function tl(e,t){return ui(e,t)!=null}function ui(e,t){const i=e.writeTree_.findRootMostValueAndPath(t);return i!=null?e.writeTree_.get(i.path).getChild(re(i.path,t)):null}function _u(e){const t=[],i=e.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(zt,(s,r)=>{t.push(new it(s,r))}):e.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&t.push(new it(s,r.value))}),t}function An(e,t){if(lt(t))return e;{const i=ui(e,t);return i!=null?new Me(new St(i)):new Me(e.writeTree_.subtree(t))}}function el(e){return e.writeTree_.isEmpty()}function Zi(e,t){return Tf(pt(),e.writeTree_,t)}function Tf(e,t,i){if(t.value!=null)return i.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal((r,a)=>{r===".priority"?(O(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):i=Tf(Ft(e,r),a,i)}),!i.getChild(e).isEmpty()&&s!==null&&(i=i.updateChild(Ft(e,".priority"),s)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(e,t){return kf(t,e)}function Jw(e,t,i,s,r){O(s>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:i,writeId:s,visible:r}),r&&(e.visibleWrites=Ls(e.visibleWrites,t,i)),e.lastWriteId=s}function tb(e,t,i,s){O(s>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:i,writeId:s,visible:!0}),e.visibleWrites=Ja(e.visibleWrites,t,i),e.lastWriteId=s}function eb(e,t){for(let i=0;i<e.allWrites.length;i++){const s=e.allWrites[i];if(s.writeId===t)return s}return null}function nb(e,t){const i=e.allWrites.findIndex(u=>u.writeId===t);O(i>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[i];e.allWrites.splice(i,1);let r=s.visible,a=!1,c=e.allWrites.length-1;for(;r&&c>=0;){const u=e.allWrites[c];u.visible&&(c>=i&&ib(u,s.path)?r=!1:Ce(s.path,u.path)&&(a=!0)),c--}if(r){if(a)return sb(e),!0;if(s.snap)e.visibleWrites=fu(e.visibleWrites,s.path);else{const u=s.children;ne(u,f=>{e.visibleWrites=fu(e.visibleWrites,Ft(s.path,f))})}return!0}else return!1}function ib(e,t){if(e.snap)return Ce(e.path,t);for(const i in e.children)if(e.children.hasOwnProperty(i)&&Ce(Ft(e.path,i),t))return!0;return!1}function sb(e){e.visibleWrites=Pf(e.allWrites,ob,pt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function ob(e){return e.visible}function Pf(e,t,i){let s=Me.empty();for(let r=0;r<e.length;++r){const a=e[r];if(t(a)){const c=a.path;let u;if(a.snap)Ce(i,c)?(u=re(i,c),s=Ls(s,u,a.snap)):Ce(c,i)&&(u=re(c,i),s=Ls(s,pt(),a.snap.getChild(u)));else if(a.children){if(Ce(i,c))u=re(i,c),s=Ja(s,u,a.children);else if(Ce(c,i))if(u=re(c,i),lt(u))s=Ja(s,pt(),a.children);else{const f=Fi(a.children,et(u));if(f){const _=f.getChild(Lt(u));s=Ls(s,pt(),_)}}}else throw Yi("WriteRecord should have .snap or .children")}}return s}function If(e,t,i,s,r){if(!s&&!r){const a=ui(e.visibleWrites,t);if(a!=null)return a;{const c=An(e.visibleWrites,t);if(el(c))return i;if(i==null&&!tl(c,pt()))return null;{const u=i||K.EMPTY_NODE;return Zi(c,u)}}}else{const a=An(e.visibleWrites,t);if(!r&&el(a))return i;if(!r&&i==null&&!tl(a,pt()))return null;{const c=function(_){return(_.visible||r)&&(!s||!~s.indexOf(_.writeId))&&(Ce(_.path,t)||Ce(t,_.path))},u=Pf(e.allWrites,c,t),f=i||K.EMPTY_NODE;return Zi(u,f)}}}function rb(e,t,i){let s=K.EMPTY_NODE;const r=ui(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(zt,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(i){const a=An(e.visibleWrites,t);return i.forEachChild(zt,(c,u)=>{const f=Zi(An(a,new Et(c)),u);s=s.updateImmediateChild(c,f)}),_u(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=An(e.visibleWrites,t);return _u(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function ab(e,t,i,s,r){O(s||r,"Either existingEventSnap or existingServerSnap must exist");const a=Ft(t,i);if(tl(e.visibleWrites,a))return null;{const c=An(e.visibleWrites,a);return el(c)?r.getChild(i):Zi(c,r.getChild(i))}}function lb(e,t,i,s){const r=Ft(t,i),a=ui(e.visibleWrites,r);if(a!=null)return a;if(s.isCompleteForChild(i)){const c=An(e.visibleWrites,r);return Zi(c,s.getNode().getImmediateChild(i))}else return null}function cb(e,t){return ui(e.visibleWrites,t)}function hb(e,t,i,s,r,a,c){let u;const f=An(e.visibleWrites,t),_=ui(f,pt());if(_!=null)u=_;else if(i!=null)u=Zi(f,i);else return[];if(u=u.withIndex(c),!u.isEmpty()&&!u.isLeafNode()){const g=[],m=c.getCompare(),w=a?u.getReverseIteratorFrom(s,c):u.getIteratorFrom(s,c);let T=w.getNext();for(;T&&g.length<r;)m(T,s)!==0&&g.push(T),T=w.getNext();return g}else return[]}function ub(){return{visibleWrites:Me.empty(),allWrites:[],lastWriteId:-1}}function tr(e,t,i,s){return If(e.writeTree,e.treePath,t,i,s)}function Xl(e,t){return rb(e.writeTree,e.treePath,t)}function pu(e,t,i,s){return ab(e.writeTree,e.treePath,t,i,s)}function er(e,t){return cb(e.writeTree,Ft(e.treePath,t))}function db(e,t,i,s,r,a){return hb(e.writeTree,e.treePath,t,i,s,r,a)}function Jl(e,t,i){return lb(e.writeTree,e.treePath,t,i)}function Sf(e,t){return kf(Ft(e.treePath,t),e.writeTree)}function kf(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,s=t.childName;O(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),O(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const a=r.type;if(i==="child_added"&&a==="child_removed")this.changeMap.set(s,Hs(s,t.snapshotNode,r.snapshotNode));else if(i==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(i==="child_removed"&&a==="child_changed")this.changeMap.set(s,Ws(s,r.oldSnap));else if(i==="child_changed"&&a==="child_added")this.changeMap.set(s,Hi(s,t.snapshotNode));else if(i==="child_changed"&&a==="child_changed")this.changeMap.set(s,Hs(s,t.snapshotNode,r.oldSnap));else throw Yi("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{getCompleteChild(t){return null}getChildAfterChild(t,i,s){return null}}const Lf=new _b;class tc{constructor(t,i,s=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=s}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new On(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Jl(this.writes_,t,s)}}getChildAfterChild(t,i,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ci(this.viewCache_),a=db(this.writes_,r,i,1,s,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(e){return{filter:e}}function mb(e,t){O(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),O(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function gb(e,t,i,s,r){const a=new fb;let c,u;if(i.type===Le.OVERWRITE){const _=i;_.source.fromUser?c=nl(e,t,_.path,_.snap,s,r,a):(O(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered()&&!lt(_.path),c=nr(e,t,_.path,_.snap,s,r,u,a))}else if(i.type===Le.MERGE){const _=i;_.source.fromUser?c=yb(e,t,_.path,_.children,s,r,a):(O(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered(),c=il(e,t,_.path,_.children,s,r,u,a))}else if(i.type===Le.ACK_USER_WRITE){const _=i;_.revert?c=Cb(e,t,_.path,s,r,a):c=wb(e,t,_.path,_.affectedTree,s,r,a)}else if(i.type===Le.LISTEN_COMPLETE)c=bb(e,t,i.path,s,a);else throw Yi("Unknown operation type: "+i.type);const f=a.getChanges();return vb(t,c,f),{viewCache:c,changes:f}}function vb(e,t,i){const s=t.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=Jo(e);(i.length>0||!e.eventCache.isFullyInitialized()||r&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&i.push(Cf(Jo(t)))}}function Af(e,t,i,s,r,a){const c=t.eventCache;if(er(s,i)!=null)return t;{let u,f;if(lt(i))if(O(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=ci(t),g=_ instanceof K?_:K.EMPTY_NODE,m=Xl(s,g);u=e.filter.updateFullNode(t.eventCache.getNode(),m,a)}else{const _=tr(s,ci(t));u=e.filter.updateFullNode(t.eventCache.getNode(),_,a)}else{const _=et(i);if(_===".priority"){O(Rn(i)===1,"Can't have a priority with additional path components");const g=c.getNode();f=t.serverCache.getNode();const m=pu(s,i,g,f);m!=null?u=e.filter.updatePriority(g,m):u=c.getNode()}else{const g=Lt(i);let m;if(c.isCompleteForChild(_)){f=t.serverCache.getNode();const w=pu(s,i,c.getNode(),f);w!=null?m=c.getNode().getImmediateChild(_).updateChild(g,w):m=c.getNode().getImmediateChild(_)}else m=Jl(s,_,t.serverCache);m!=null?u=e.filter.updateChild(c.getNode(),_,m,g,r,a):u=c.getNode()}}return ks(t,u,c.isFullyInitialized()||lt(i),e.filter.filtersNodes())}}function nr(e,t,i,s,r,a,c,u){const f=t.serverCache;let _;const g=c?e.filter:e.filter.getIndexedFilter();if(lt(i))_=g.updateFullNode(f.getNode(),s,null);else if(g.filtersNodes()&&!f.isFiltered()){const T=f.getNode().updateChild(i,s);_=g.updateFullNode(f.getNode(),T,null)}else{const T=et(i);if(!f.isCompleteForPath(i)&&Rn(i)>1)return t;const A=Lt(i),Z=f.getNode().getImmediateChild(T).updateChild(A,s);T===".priority"?_=g.updatePriority(f.getNode(),Z):_=g.updateChild(f.getNode(),T,Z,A,Lf,null)}const m=Ef(t,_,f.isFullyInitialized()||lt(i),g.filtersNodes()),w=new tc(r,m,a);return Af(e,m,i,r,w,u)}function nl(e,t,i,s,r,a,c){const u=t.eventCache;let f,_;const g=new tc(r,t,a);if(lt(i))_=e.filter.updateFullNode(t.eventCache.getNode(),s,c),f=ks(t,_,!0,e.filter.filtersNodes());else{const m=et(i);if(m===".priority")_=e.filter.updatePriority(t.eventCache.getNode(),s),f=ks(t,_,u.isFullyInitialized(),u.isFiltered());else{const w=Lt(i),T=u.getNode().getImmediateChild(m);let A;if(lt(w))A=s;else{const D=g.getCompleteChild(m);D!=null?Zl(w)===".priority"&&D.getChild(pf(w)).isEmpty()?A=D:A=D.updateChild(w,s):A=K.EMPTY_NODE}if(T.equals(A))f=t;else{const D=e.filter.updateChild(u.getNode(),m,A,w,g,c);f=ks(t,D,u.isFullyInitialized(),e.filter.filtersNodes())}}}return f}function mu(e,t){return e.eventCache.isCompleteForChild(t)}function yb(e,t,i,s,r,a,c){let u=t;return s.foreach((f,_)=>{const g=Ft(i,f);mu(t,et(g))&&(u=nl(e,u,g,_,r,a,c))}),s.foreach((f,_)=>{const g=Ft(i,f);mu(t,et(g))||(u=nl(e,u,g,_,r,a,c))}),u}function gu(e,t,i){return i.foreach((s,r)=>{t=t.updateChild(s,r)}),t}function il(e,t,i,s,r,a,c,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let f=t,_;lt(i)?_=s:_=new St(null).setTree(i,s);const g=t.serverCache.getNode();return _.children.inorderTraversal((m,w)=>{if(g.hasChild(m)){const T=t.serverCache.getNode().getImmediateChild(m),A=gu(e,T,w);f=nr(e,f,new Et(m),A,r,a,c,u)}}),_.children.inorderTraversal((m,w)=>{const T=!t.serverCache.isCompleteForChild(m)&&w.value===void 0;if(!g.hasChild(m)&&!T){const A=t.serverCache.getNode().getImmediateChild(m),D=gu(e,A,w);f=nr(e,f,new Et(m),D,r,a,c,u)}}),f}function wb(e,t,i,s,r,a,c){if(er(r,i)!=null)return t;const u=t.serverCache.isFiltered(),f=t.serverCache;if(s.value!=null){if(lt(i)&&f.isFullyInitialized()||f.isCompleteForPath(i))return nr(e,t,i,f.getNode().getChild(i),r,a,u,c);if(lt(i)){let _=new St(null);return f.getNode().forEachChild(Ri,(g,m)=>{_=_.set(new Et(g),m)}),il(e,t,i,_,r,a,u,c)}else return t}else{let _=new St(null);return s.foreach((g,m)=>{const w=Ft(i,g);f.isCompleteForPath(w)&&(_=_.set(g,f.getNode().getChild(w)))}),il(e,t,i,_,r,a,u,c)}}function bb(e,t,i,s,r){const a=t.serverCache,c=Ef(t,a.getNode(),a.isFullyInitialized()||lt(i),a.isFiltered());return Af(e,c,i,s,Lf,r)}function Cb(e,t,i,s,r,a){let c;if(er(s,i)!=null)return t;{const u=new tc(s,t,r),f=t.eventCache.getNode();let _;if(lt(i)||et(i)===".priority"){let g;if(t.serverCache.isFullyInitialized())g=tr(s,ci(t));else{const m=t.serverCache.getNode();O(m instanceof K,"serverChildren would be complete if leaf node"),g=Xl(s,m)}g=g,_=e.filter.updateFullNode(f,g,a)}else{const g=et(i);let m=Jl(s,g,t.serverCache);m==null&&t.serverCache.isCompleteForChild(g)&&(m=f.getImmediateChild(g)),m!=null?_=e.filter.updateChild(f,g,m,Lt(i),u,a):t.eventCache.getNode().hasChild(g)?_=e.filter.updateChild(f,g,K.EMPTY_NODE,Lt(i),u,a):_=f,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=tr(s,ci(t)),c.isLeafNode()&&(_=e.filter.updateFullNode(_,c,a)))}return c=t.serverCache.isFullyInitialized()||er(s,pt())!=null,ks(t,_,c,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new ql(s.getIndex()),a=Hw(s);this.processor_=pb(a);const c=i.serverCache,u=i.eventCache,f=r.updateFullNode(K.EMPTY_NODE,c.getNode(),null),_=a.updateFullNode(K.EMPTY_NODE,u.getNode(),null),g=new On(f,c.isFullyInitialized(),r.filtersNodes()),m=new On(_,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=Er(m,g),this.eventGenerator_=new Gw(this.query_)}get query(){return this.query_}}function Eb(e){return e.viewCache_.serverCache.getNode()}function Tb(e){return Jo(e.viewCache_)}function Pb(e,t){const i=ci(e.viewCache_);return i&&(e.query._queryParams.loadsAllData()||!lt(t)&&!i.getImmediateChild(et(t)).isEmpty())?i.getChild(t):null}function vu(e){return e.eventRegistrations_.length===0}function Ib(e,t){e.eventRegistrations_.push(t)}function yu(e,t,i){const s=[];if(i){O(t==null,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(i,r);c&&s.push(c)})}if(t){let r=[];for(let a=0;a<e.eventRegistrations_.length;++a){const c=e.eventRegistrations_[a];if(!c.matches(t))r.push(c);else if(t.hasAnyCallback()){r=r.concat(e.eventRegistrations_.slice(a+1));break}}e.eventRegistrations_=r}else e.eventRegistrations_=[];return s}function wu(e,t,i,s){t.type===Le.MERGE&&t.source.queryId!==null&&(O(ci(e.viewCache_),"We should always have a full cache before handling merges"),O(Jo(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,a=gb(e.processor_,r,t,i,s);return mb(e.processor_,a.viewCache),O(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Mf(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Sb(e,t){const i=e.viewCache_.eventCache,s=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(zt,(a,c)=>{s.push(Hi(a,c))}),i.isFullyInitialized()&&s.push(Cf(i.getNode())),Mf(e,s,i.getNode(),t)}function Mf(e,t,i,s){const r=s?[s]:e.eventRegistrations_;return Kw(e.eventGenerator_,t,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ir;class Nf{constructor(){this.views=new Map}}function kb(e){O(!ir,"__referenceConstructor has already been defined"),ir=e}function Lb(){return O(ir,"Reference.ts has not been loaded"),ir}function Ab(e){return e.views.size===0}function ec(e,t,i,s){const r=t.source.queryId;if(r!==null){const a=e.views.get(r);return O(a!=null,"SyncTree gave us an op for an invalid query."),wu(a,t,i,s)}else{let a=[];for(const c of e.views.values())a=a.concat(wu(c,t,i,s));return a}}function Rf(e,t,i,s,r){const a=t._queryIdentifier,c=e.views.get(a);if(!c){let u=tr(i,r?s:null),f=!1;u?f=!0:s instanceof K?(u=Xl(i,s),f=!1):(u=K.EMPTY_NODE,f=!1);const _=Er(new On(u,f,!1),new On(s,r,!1));return new xb(t,_)}return c}function Mb(e,t,i,s,r,a){const c=Rf(e,t,s,r,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,c),Ib(c,i),Sb(c,i)}function Nb(e,t,i,s){const r=t._queryIdentifier,a=[];let c=[];const u=Dn(e);if(r==="default")for(const[f,_]of e.views.entries())c=c.concat(yu(_,i,s)),vu(_)&&(e.views.delete(f),_.query._queryParams.loadsAllData()||a.push(_.query));else{const f=e.views.get(r);f&&(c=c.concat(yu(f,i,s)),vu(f)&&(e.views.delete(r),f.query._queryParams.loadsAllData()||a.push(f.query)))}return u&&!Dn(e)&&a.push(new(Lb())(t._repo,t._path)),{removed:a,events:c}}function Of(e){const t=[];for(const i of e.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function Mn(e,t){let i=null;for(const s of e.views.values())i=i||Pb(s,t);return i}function Df(e,t){if(t._queryParams.loadsAllData())return Pr(e);{const s=t._queryIdentifier;return e.views.get(s)}}function Bf(e,t){return Df(e,t)!=null}function Dn(e){return Pr(e)!=null}function Pr(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sr;function Rb(e){O(!sr,"__referenceConstructor has already been defined"),sr=e}function Ob(){return O(sr,"Reference.ts has not been loaded"),sr}let Db=1;class bu{constructor(t){this.listenProvider_=t,this.syncPointTree_=new St(null),this.pendingWriteTree_=ub(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ff(e,t,i,s,r){return Jw(e.pendingWriteTree_,t,i,s,r),r?Ji(e,new li(Kl(),t,i)):[]}function Bb(e,t,i,s){tb(e.pendingWriteTree_,t,i,s);const r=St.fromObject(i);return Ji(e,new Ui(Kl(),t,r))}function In(e,t,i=!1){const s=eb(e.pendingWriteTree_,t);if(nb(e.pendingWriteTree_,t)){let a=new St(null);return s.snap!=null?a=a.set(pt(),!0):ne(s.children,c=>{a=a.set(new Et(c),!0)}),Ji(e,new Xo(s.path,a,i))}else return[]}function Ks(e,t,i){return Ji(e,new li(Yl(),t,i))}function Fb(e,t,i){const s=St.fromObject(i);return Ji(e,new Ui(Yl(),t,s))}function zb(e,t){return Ji(e,new Zs(Yl(),t))}function Wb(e,t,i){const s=ic(e,i);if(s){const r=sc(s),a=r.path,c=r.queryId,u=re(a,t),f=new Zs(Ql(c),u);return oc(e,a,f)}else return[]}function sl(e,t,i,s){const r=t._path,a=e.syncPointTree_.get(r);let c=[];if(a&&(t._queryIdentifier==="default"||Bf(a,t))){const u=Nb(a,t,i,s);Ab(a)&&(e.syncPointTree_=e.syncPointTree_.remove(r));const f=u.removed;c=u.events;const _=f.findIndex(m=>m._queryParams.loadsAllData())!==-1,g=e.syncPointTree_.findOnPath(r,(m,w)=>Dn(w));if(_&&!g){const m=e.syncPointTree_.subtree(r);if(!m.isEmpty()){const w=$b(m);for(let T=0;T<w.length;++T){const A=w[T],D=A.query,Z=Hf(e,A);e.listenProvider_.startListening(As(D),or(e,D),Z.hashFn,Z.onComplete)}}}!g&&f.length>0&&!s&&(_?e.listenProvider_.stopListening(As(t),null):f.forEach(m=>{const w=e.queryToTagMap.get(Ir(m));e.listenProvider_.stopListening(As(m),w)})),Vb(e,f)}return c}function Hb(e,t,i,s){const r=ic(e,s);if(r!=null){const a=sc(r),c=a.path,u=a.queryId,f=re(c,t),_=new li(Ql(u),f,i);return oc(e,c,_)}else return[]}function Ub(e,t,i,s){const r=ic(e,s);if(r){const a=sc(r),c=a.path,u=a.queryId,f=re(c,t),_=St.fromObject(i),g=new Ui(Ql(u),f,_);return oc(e,c,g)}else return[]}function Cu(e,t,i){const s=t._path;let r=null,a=!1;e.syncPointTree_.foreachOnPath(s,(m,w)=>{const T=re(m,s);r=r||Mn(w,T),a=a||Dn(w)});let c=e.syncPointTree_.get(s);c?(a=a||Dn(c),r=r||Mn(c,pt())):(c=new Nf,e.syncPointTree_=e.syncPointTree_.set(s,c));let u;r!=null?u=!0:(u=!1,r=K.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((w,T)=>{const A=Mn(T,pt());A&&(r=r.updateImmediateChild(w,A))}));const f=Bf(c,t);if(!f&&!t._queryParams.loadsAllData()){const m=Ir(t);O(!e.queryToTagMap.has(m),"View does not exist, but we have a tag");const w=jb();e.queryToTagMap.set(m,w),e.tagToQueryMap.set(w,m)}const _=Tr(e.pendingWriteTree_,s);let g=Mb(c,t,i,_,r,u);if(!f&&!a){const m=Df(c,t);g=g.concat(qb(e,t,m))}return g}function nc(e,t,i){const r=e.pendingWriteTree_,a=e.syncPointTree_.findOnPath(t,(c,u)=>{const f=re(c,t),_=Mn(u,f);if(_)return _});return If(r,t,a,i,!0)}function Zb(e,t){const i=t._path;let s=null;e.syncPointTree_.foreachOnPath(i,(_,g)=>{const m=re(_,i);s=s||Mn(g,m)});let r=e.syncPointTree_.get(i);r?s=s||Mn(r,pt()):(r=new Nf,e.syncPointTree_=e.syncPointTree_.set(i,r));const a=s!=null,c=a?new On(s,!0,!1):null,u=Tr(e.pendingWriteTree_,t._path),f=Rf(r,t,u,a?c.getNode():K.EMPTY_NODE,a);return Tb(f)}function Ji(e,t){return zf(t,e.syncPointTree_,null,Tr(e.pendingWriteTree_,pt()))}function zf(e,t,i,s){if(lt(e.path))return Wf(e,t,i,s);{const r=t.get(pt());i==null&&r!=null&&(i=Mn(r,pt()));let a=[];const c=et(e.path),u=e.operationForChild(c),f=t.children.get(c);if(f&&u){const _=i?i.getImmediateChild(c):null,g=Sf(s,c);a=a.concat(zf(u,f,_,g))}return r&&(a=a.concat(ec(r,e,s,i))),a}}function Wf(e,t,i,s){const r=t.get(pt());i==null&&r!=null&&(i=Mn(r,pt()));let a=[];return t.children.inorderTraversal((c,u)=>{const f=i?i.getImmediateChild(c):null,_=Sf(s,c),g=e.operationForChild(c);g&&(a=a.concat(Wf(g,u,f,_)))}),r&&(a=a.concat(ec(r,e,s,i))),a}function Hf(e,t){const i=t.query,s=or(e,i);return{hashFn:()=>(Eb(t)||K.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?Wb(e,i._path,s):zb(e,i._path);{const a=Dy(r,i);return sl(e,i,null,a)}}}}function or(e,t){const i=Ir(t);return e.queryToTagMap.get(i)}function Ir(e){return e._path.toString()+"$"+e._queryIdentifier}function ic(e,t){return e.tagToQueryMap.get(t)}function sc(e){const t=e.indexOf("$");return O(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Et(e.substr(0,t))}}function oc(e,t,i){const s=e.syncPointTree_.get(t);O(s,"Missing sync point for query tag that we're tracking");const r=Tr(e.pendingWriteTree_,t);return ec(s,i,r,null)}function $b(e){return e.fold((t,i,s)=>{if(i&&Dn(i))return[Pr(i)];{let r=[];return i&&(r=Of(i)),ne(s,(a,c)=>{r=r.concat(c)}),r}})}function As(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ob())(e._repo,e._path):e}function Vb(e,t){for(let i=0;i<t.length;++i){const s=t[i];if(!s._queryParams.loadsAllData()){const r=Ir(s),a=e.queryToTagMap.get(r);e.queryToTagMap.delete(r),e.tagToQueryMap.delete(a)}}}function jb(){return Db++}function qb(e,t,i){const s=t._path,r=or(e,t),a=Hf(e,i),c=e.listenProvider_.startListening(As(t),r,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(s);if(r)O(!Dn(u.value),"If we're adding a query, it shouldn't be shadowed");else{const f=u.fold((_,g,m)=>{if(!lt(_)&&g&&Dn(g))return[Pr(g).query];{let w=[];return g&&(w=w.concat(Of(g).map(T=>T.query))),ne(m,(T,A)=>{w=w.concat(A)}),w}});for(let _=0;_<f.length;++_){const g=f[_];e.listenProvider_.stopListening(As(g),or(e,g))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new rc(i)}node(){return this.node_}}class ac{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=Ft(this.path_,t);return new ac(this.syncTree_,i)}node(){return nc(this.syncTree_,this.path_)}}const Gb=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},xu=function(e,t,i){if(!e||typeof e!="object")return e;if(O(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Kb(e[".sv"],t,i);if(typeof e[".sv"]=="object")return Yb(e[".sv"],t);O(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Kb=function(e,t,i){switch(e){case"timestamp":return i.timestamp;default:O(!1,"Unexpected server value: "+e)}},Yb=function(e,t,i){e.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;typeof s!="number"&&O(!1,"Unexpected increment value: "+s);const r=t.node();if(O(r!==null&&typeof r!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const c=r.getValue();return typeof c!="number"?s:c+s},Uf=function(e,t,i,s){return lc(t,new ac(i,e),s)},Zf=function(e,t,i){return lc(e,new rc(t),i)};function lc(e,t,i){const s=e.getPriority().val(),r=xu(s,t.getImmediateChild(".priority"),i);let a;if(e.isLeafNode()){const c=e,u=xu(c.getValue(),t,i);return u!==c.getValue()||r!==c.getPriority().val()?new Yt(u,jt(r)):e}else{const c=e;return a=c,r!==c.getPriority().val()&&(a=a.updatePriority(new Yt(r))),c.forEachChild(zt,(u,f)=>{const _=lc(f,t.getImmediateChild(u),i);_!==f&&(a=a.updateImmediateChild(u,_))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(t="",i=null,s={children:{},childCount:0}){this.name=t,this.parent=i,this.node=s}}function hc(e,t){let i=t instanceof Et?t:new Et(t),s=e,r=et(i);for(;r!==null;){const a=Fi(s.node.children,r)||{children:{},childCount:0};s=new cc(r,s,a),i=Lt(i),r=et(i)}return s}function ts(e){return e.node.value}function $f(e,t){e.node.value=t,ol(e)}function Vf(e){return e.node.childCount>0}function Qb(e){return ts(e)===void 0&&!Vf(e)}function Sr(e,t){ne(e.node.children,(i,s)=>{t(new cc(i,e,s))})}function jf(e,t,i,s){i&&!s&&t(e),Sr(e,r=>{jf(r,t,!0,s)}),i&&s&&t(e)}function Xb(e,t,i){let s=i?e:e.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function Ys(e){return new Et(e.parent===null?e.name:Ys(e.parent)+"/"+e.name)}function ol(e){e.parent!==null&&Jb(e.parent,e.name,e)}function Jb(e,t,i){const s=Qb(i),r=Ge(e.node.children,t);s&&r?(delete e.node.children[t],e.node.childCount--,ol(e)):!s&&!r&&(e.node.children[t]=i.node,e.node.childCount++,ol(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=/[\[\].#$\/\u0000-\u001F\u007F]/,eC=/[\[\].#$\u0000-\u001F\u007F]/,Pa=10*1024*1024,uc=function(e){return typeof e=="string"&&e.length!==0&&!tC.test(e)},qf=function(e){return typeof e=="string"&&e.length!==0&&!eC.test(e)},nC=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),qf(e)},iC=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Bl(e)||e&&typeof e=="object"&&Ge(e,".sv")},sC=function(e,t,i,s){s&&t===void 0||kr(br(e,"value"),t,i)},kr=function(e,t,i){const s=i instanceof Et?new vw(i,e):i;if(t===void 0)throw new Error(e+"contains undefined "+qn(s));if(typeof t=="function")throw new Error(e+"contains a function "+qn(s)+" with contents = "+t.toString());if(Bl(t))throw new Error(e+"contains "+t.toString()+" "+qn(s));if(typeof t=="string"&&t.length>Pa/3&&Cr(t)>Pa)throw new Error(e+"contains a string greater than "+Pa+" utf8 bytes "+qn(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,a=!1;if(ne(t,(c,u)=>{if(c===".value")r=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!uc(c)))throw new Error(e+" contains an invalid key ("+c+") "+qn(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yw(s,c),kr(e,u,s),ww(s)}),r&&a)throw new Error(e+' contains ".value" child '+qn(s)+" in addition to actual children.")}},oC=function(e,t){let i,s;for(i=0;i<t.length;i++){s=t[i];const a=zs(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!uc(a[c]))throw new Error(e+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(gw);let r=null;for(i=0;i<t.length;i++){if(s=t[i],r!==null&&Ce(r,s))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+s.toString());r=s}},rC=function(e,t,i,s){if(s&&t===void 0)return;const r=br(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const a=[];ne(t,(c,u)=>{const f=new Et(c);if(kr(r,u,Ft(i,f)),Zl(f)===".priority"&&!iC(u))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),oC(r,a)},Gf=function(e,t,i,s){if(!(s&&i===void 0)&&!qf(i))throw new Error(br(e,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},aC=function(e,t,i,s){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Gf(e,t,i,s)},lC=function(e,t){if(et(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},cC=function(e,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!uc(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!nC(i))throw new Error(br(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lr(e,t){let i=null;for(let s=0;s<t.length;s++){const r=t[s],a=r.getPath();i!==null&&!$l(a,i.path)&&(e.eventLists_.push(i),i=null),i===null&&(i={events:[],path:a}),i.events.push(r)}i&&e.eventLists_.push(i)}function dc(e,t,i){Lr(e,i),Kf(e,s=>$l(s,t))}function Ne(e,t,i){Lr(e,i),Kf(e,s=>Ce(s,t)||Ce(t,s))}function Kf(e,t){e.recursionDepth_++;let i=!0;for(let s=0;s<e.eventLists_.length;s++){const r=e.eventLists_[s];if(r){const a=r.path;t(a)?(uC(e.eventLists_[s]),e.eventLists_[s]=null):i=!1}}i&&(e.eventLists_=[]),e.recursionDepth_--}function uC(e){for(let t=0;t<e.events.length;t++){const i=e.events[t];if(i!==null){e.events[t]=null;const s=i.getEventRunner();ii&&te("event: "+i.toString()),Xi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="repo_interrupt",fC=25;class _C{constructor(t,i,s,r){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qo(),this.transactionQueueTree_=new cc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pC(e,t,i){if(e.stats_=Wl(e.repoInfo_),e.forceRestClient_||Wy())e.server_=new Yo(e.repoInfo_,(s,r,a,c)=>{Eu(e,s,r,a,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Tu(e,!0),0);else{if(typeof i!="undefined"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{qt(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new dn(e.repoInfo_,t,(s,r,a,c)=>{Eu(e,s,r,a,c)},s=>{Tu(e,s)},s=>{gC(e,s)},e.authTokenProvider_,e.appCheckProvider_,i),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(s=>{e.server_.refreshAuthToken(s)}),e.appCheckProvider_.addTokenChangeListener(s=>{e.server_.refreshAppCheckToken(s.token)}),e.statsReporter_=qy(e.repoInfo_,()=>new qw(e.stats_,e.server_)),e.infoData_=new Uw,e.infoSyncTree_=new bu({startListening:(s,r,a,c)=>{let u=[];const f=e.infoData_.getNode(s._path);return f.isEmpty()||(u=Ks(e.infoSyncTree_,s._path,f),setTimeout(()=>{c("ok")},0)),u},stopListening:()=>{}}),fc(e,"connected",!1),e.serverSyncTree_=new bu({startListening:(s,r,a,c)=>(e.server_.listen(s,a,r,(u,f)=>{const _=c(u,f);Ne(e.eventQueue_,s._path,_)}),[]),stopListening:(s,r)=>{e.server_.unlisten(s,r)}})}function mC(e){const i=e.infoData_.getNode(new Et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Ar(e){return Gb({timestamp:mC(e)})}function Eu(e,t,i,s,r){e.dataUpdateCount++;const a=new Et(t);i=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,i):i;let c=[];if(r)if(s){const f=Vo(i,_=>jt(_));c=Ub(e.serverSyncTree_,a,f,r)}else{const f=jt(i);c=Hb(e.serverSyncTree_,a,f,r)}else if(s){const f=Vo(i,_=>jt(_));c=Fb(e.serverSyncTree_,a,f)}else{const f=jt(i);c=Ks(e.serverSyncTree_,a,f)}let u=a;c.length>0&&(u=$i(e,a)),Ne(e.eventQueue_,u,c)}function Tu(e,t){fc(e,"connected",t),t===!1&&bC(e)}function gC(e,t){ne(t,(i,s)=>{fc(e,i,s)})}function fc(e,t,i){const s=new Et("/.info/"+t),r=jt(i);e.infoData_.updateSnapshot(s,r);const a=Ks(e.infoSyncTree_,s,r);Ne(e.eventQueue_,s,a)}function _c(e){return e.nextWriteId_++}function vC(e,t){const i=Zb(e.serverSyncTree_,t);return i!=null?Promise.resolve(i):e.server_.get(t).then(s=>{const r=jt(s).withIndex(t._queryParams.getIndex()),a=Ks(e.serverSyncTree_,t._path,r);return dc(e.eventQueue_,t._path,a),Promise.resolve(r)},s=>(Qs(e,"get for query "+qt(t)+" failed: "+s),Promise.reject(new Error(s))))}function yC(e,t,i,s,r){Qs(e,"set",{path:t.toString(),value:i,priority:s});const a=Ar(e),c=jt(i,s),u=nc(e.serverSyncTree_,t),f=Zf(c,u,a),_=_c(e),g=Ff(e.serverSyncTree_,t,f,_,!0);Lr(e.eventQueue_,g),e.server_.put(t.toString(),c.val(!0),(w,T)=>{const A=w==="ok";A||ae("set at "+t+" failed: "+w);const D=In(e.serverSyncTree_,_,!A);Ne(e.eventQueue_,t,D),rl(e,r,w,T)});const m=mc(e,t);$i(e,m),Ne(e.eventQueue_,m,[])}function wC(e,t,i,s){Qs(e,"update",{path:t.toString(),value:i});let r=!0;const a=Ar(e),c={};if(ne(i,(u,f)=>{r=!1,c[u]=Uf(Ft(t,u),jt(f),e.serverSyncTree_,a)}),r)te("update() called with empty data.  Don't do anything."),rl(e,s,"ok",void 0);else{const u=_c(e),f=Bb(e.serverSyncTree_,t,c,u);Lr(e.eventQueue_,f),e.server_.merge(t.toString(),i,(_,g)=>{const m=_==="ok";m||ae("update at "+t+" failed: "+_);const w=In(e.serverSyncTree_,u,!m),T=w.length>0?$i(e,t):t;Ne(e.eventQueue_,T,w),rl(e,s,_,g)}),ne(i,_=>{const g=mc(e,Ft(t,_));$i(e,g)}),Ne(e.eventQueue_,t,[])}}function bC(e){Qs(e,"onDisconnectEvents");const t=Ar(e),i=Qo();Xa(e.onDisconnect_,pt(),(r,a)=>{const c=Uf(r,a,e.serverSyncTree_,t);xf(i,r,c)});let s=[];Xa(i,pt(),(r,a)=>{s=s.concat(Ks(e.serverSyncTree_,r,a));const c=mc(e,r);$i(e,c)}),e.onDisconnect_=Qo(),Ne(e.eventQueue_,pt(),s)}function CC(e,t,i){let s;et(t._path)===".info"?s=Cu(e.infoSyncTree_,t,i):s=Cu(e.serverSyncTree_,t,i),dc(e.eventQueue_,t._path,s)}function Pu(e,t,i){let s;et(t._path)===".info"?s=sl(e.infoSyncTree_,t,i):s=sl(e.serverSyncTree_,t,i),dc(e.eventQueue_,t._path,s)}function xC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(dC)}function Qs(e,...t){let i="";e.persistentConnection_&&(i=e.persistentConnection_.id+":"),te(i,...t)}function rl(e,t,i,s){t&&Xi(()=>{if(i==="ok")t(null);else{const r=(i||"error").toUpperCase();let a=r;s&&(a+=": "+s);const c=new Error(a);c.code=r,t(c)}})}function Yf(e,t,i){return nc(e.serverSyncTree_,t,i)||K.EMPTY_NODE}function pc(e,t=e.transactionQueueTree_){if(t||Mr(e,t),ts(t)){const i=Xf(e,t);O(i.length>0,"Sending zero length transaction queue"),i.every(r=>r.status===0)&&EC(e,Ys(t),i)}else Vf(t)&&Sr(t,i=>{pc(e,i)})}function EC(e,t,i){const s=i.map(_=>_.currentWriteId),r=Yf(e,t,s);let a=r;const c=r.hash();for(let _=0;_<i.length;_++){const g=i[_];O(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const m=re(t,g.path);a=a.updateChild(m,g.currentOutputSnapshotRaw)}const u=a.val(!0),f=t;e.server_.put(f.toString(),u,_=>{Qs(e,"transaction put response",{path:f.toString(),status:_});let g=[];if(_==="ok"){const m=[];for(let w=0;w<i.length;w++)i[w].status=2,g=g.concat(In(e.serverSyncTree_,i[w].currentWriteId)),i[w].onComplete&&m.push(()=>i[w].onComplete(null,!0,i[w].currentOutputSnapshotResolved)),i[w].unwatcher();Mr(e,hc(e.transactionQueueTree_,t)),pc(e,e.transactionQueueTree_),Ne(e.eventQueue_,t,g);for(let w=0;w<m.length;w++)Xi(m[w])}else{if(_==="datastale")for(let m=0;m<i.length;m++)i[m].status===3?i[m].status=4:i[m].status=0;else{ae("transaction at "+f.toString()+" failed: "+_);for(let m=0;m<i.length;m++)i[m].status=4,i[m].abortReason=_}$i(e,t)}},c)}function $i(e,t){const i=Qf(e,t),s=Ys(i),r=Xf(e,i);return TC(e,r,s),s}function TC(e,t,i){if(t.length===0)return;const s=[];let r=[];const c=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const f=t[u],_=re(i,f.path);let g=!1,m;if(O(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,m=f.abortReason,r=r.concat(In(e.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=fC)g=!0,m="maxretry",r=r.concat(In(e.serverSyncTree_,f.currentWriteId,!0));else{const w=Yf(e,f.path,c);f.currentInputSnapshot=w;const T=t[u].update(w.val());if(T!==void 0){kr("transaction failed: Data returned ",T,f.path);let A=jt(T);typeof T=="object"&&T!=null&&Ge(T,".priority")||(A=A.updatePriority(w.getPriority()));const Z=f.currentWriteId,X=Ar(e),At=Zf(A,w,X);f.currentOutputSnapshotRaw=A,f.currentOutputSnapshotResolved=At,f.currentWriteId=_c(e),c.splice(c.indexOf(Z),1),r=r.concat(Ff(e.serverSyncTree_,f.path,At,f.currentWriteId,f.applyLocally)),r=r.concat(In(e.serverSyncTree_,Z,!0))}else g=!0,m="nodata",r=r.concat(In(e.serverSyncTree_,f.currentWriteId,!0))}Ne(e.eventQueue_,i,r),r=[],g&&(t[u].status=2,function(w){setTimeout(w,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(m==="nodata"?s.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):s.push(()=>t[u].onComplete(new Error(m),!1,null))))}Mr(e,e.transactionQueueTree_);for(let u=0;u<s.length;u++)Xi(s[u]);pc(e,e.transactionQueueTree_)}function Qf(e,t){let i,s=e.transactionQueueTree_;for(i=et(t);i!==null&&ts(s)===void 0;)s=hc(s,i),t=Lt(t),i=et(t);return s}function Xf(e,t){const i=[];return Jf(e,t,i),i.sort((s,r)=>s.order-r.order),i}function Jf(e,t,i){const s=ts(t);if(s)for(let r=0;r<s.length;r++)i.push(s[r]);Sr(t,r=>{Jf(e,r,i)})}function Mr(e,t){const i=ts(t);if(i){let s=0;for(let r=0;r<i.length;r++)i[r].status!==2&&(i[s]=i[r],s++);i.length=s,$f(t,i.length>0?i:void 0)}Sr(t,s=>{Mr(e,s)})}function mc(e,t){const i=Ys(Qf(e,t)),s=hc(e.transactionQueueTree_,t);return Xb(s,r=>{Ia(e,r)}),Ia(e,s),jf(s,r=>{Ia(e,r)}),i}function Ia(e,t){const i=ts(t);if(i){const s=[];let r=[],a=-1;for(let c=0;c<i.length;c++)i[c].status===3||(i[c].status===1?(O(a===c-1,"All SENT items should be at beginning of queue."),a=c,i[c].status=3,i[c].abortReason="set"):(O(i[c].status===0,"Unexpected transaction status in abort"),i[c].unwatcher(),r=r.concat(In(e.serverSyncTree_,i[c].currentWriteId,!0)),i[c].onComplete&&s.push(i[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?$f(t,void 0):i.length=a+1,Ne(e.eventQueue_,Ys(t),r);for(let c=0;c<s.length;c++)Xi(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(e){let t="";const i=e.split("/");for(let s=0;s<i.length;s++)if(i[s].length>0){let r=i[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function IC(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const i of e.split("&")){if(i.length===0)continue;const s=i.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ae(`Invalid query segment '${i}' in query '${e}'`)}return t}const Iu=function(e,t){const i=SC(e),s=i.namespace;i.domain==="firebase.com"&&ri(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&i.domain!=="localhost"&&ri("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||Ay();const r=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new $y(i.host,i.secure,s,t,r,"",s!==i.subdomain),path:new Et(i.pathString)}},SC=function(e){let t="",i="",s="",r="",a="",c=!0,u="https",f=443;if(typeof e=="string"){let _=e.indexOf("//");_>=0&&(u=e.substring(0,_-1),e=e.substring(_+2));let g=e.indexOf("/");g===-1&&(g=e.length);let m=e.indexOf("?");m===-1&&(m=e.length),t=e.substring(0,Math.min(g,m)),g<m&&(r=PC(e.substring(g,m)));const w=IC(e.substring(Math.min(e.length,m)));_=t.indexOf(":"),_>=0?(c=u==="https"||u==="wss",f=parseInt(t.substring(_+1),10)):_=t.length;const T=t.slice(0,_);if(T.toLowerCase()==="localhost")i="localhost";else if(T.split(".").length<=2)i=T;else{const A=t.indexOf(".");s=t.substring(0,A).toLowerCase(),i=t.substring(A+1),a=s}"ns"in w&&(a=w.ns)}return{host:t,port:f,domain:i,subdomain:s,secure:c,scheme:u,pathString:r,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(t,i,s,r){this.eventType=t,this.eventRegistration=i,this.snapshot=s,this.prevName=r}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+qt(this.snapshot.exportVal())}}class e_{constructor(t,i,s){this.eventRegistration=t,this.error=i,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return O(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t,i,s,r){this._repo=t,this._path=i,this._queryParams=s,this._orderByCalled=r}get key(){return lt(this._path)?null:Zl(this._path)}get ref(){return new Ke(this._repo,this._path)}get _queryIdentifier(){const t=uu(this._queryParams),i=Fl(t);return i==="{}"?"default":i}get _queryObject(){return uu(this._queryParams)}isEqual(t){if(t=Qi(t),!(t instanceof gc))return!1;const i=this._repo===t._repo,s=$l(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return i&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+mw(this._path)}}class Ke extends gc{constructor(t,i){super(t,i,new Gl,!1)}get parent(){const t=pf(this._path);return t===null?null:new Ke(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Vi{constructor(t,i,s){this._node=t,this.ref=i,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Et(t),s=rr(this.ref,t);return new Vi(this._node.getChild(i),s,zt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>t(new Vi(r,rr(this.ref,s),zt)))}hasChild(t){const i=new Et(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pn(e,t){return e=Qi(e),e._checkNotDeleted("ref"),t!==void 0?rr(e._root,t):e._root}function rr(e,t){return e=Qi(e),et(e._path)===null?aC("child","path",t,!1):Gf("child","path",t,!1),new Ke(e._repo,Ft(e._path,t))}function n_(e,t){e=Qi(e),lC("set",e._path),sC("set",t,e._path,!1);const i=new _n;return yC(e._repo,e._path,t,null,i.wrapCallback(()=>{})),i.promise}function al(e,t){rC("update",t,e._path,!1);const i=new _n;return wC(e._repo,e._path,t,i.wrapCallback(()=>{})),i.promise}function i_(e){return e=Qi(e),vC(e._repo,e).then(t=>new Vi(t,new Ke(e._repo,e._path),e._queryParams.getIndex()))}class vc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const s=i._queryParams.getIndex();return new t_("value",this,new Vi(t.snapshotNode,new Ke(i._repo,i._path),s))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new e_(this,t,i):null}matches(t){return t instanceof vc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class yc{constructor(t,i){this.eventType=t,this.callbackContext=i}respondsTo(t){let i=t==="children_added"?"child_added":t;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new e_(this,t,i):null}createEvent(t,i){O(t.childName!=null,"Child events should have a childName.");const s=rr(new Ke(i._repo,i._path),t.childName),r=i._queryParams.getIndex();return new t_(t.type,this,new Vi(t.snapshotNode,s,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof yc?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function LC(e,t,i,s,r){let a;if(typeof s=="object"&&(a=void 0,r=s),typeof s=="function"&&(a=s),r&&r.onlyOnce){const f=i,_=(g,m)=>{Pu(e._repo,e,u),f(g,m)};_.userCallback=i.userCallback,_.context=i.context,i=_}const c=new kC(i,a||void 0),u=t==="value"?new vc(c):new yc(t,c);return CC(e._repo,e,u),()=>Pu(e._repo,e,u)}function AC(e,t,i,s){return LC(e,"value",t,i,s)}kb(Ke);Rb(Ke);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="FIREBASE_DATABASE_EMULATOR_HOST",ll={};let NC=!1;function RC(e,t,i,s,r){let a=s||e.options.databaseURL;a===void 0&&(e.options.projectId||ri("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),te("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=Iu(a,r),u=c.repoInfo,f,_;typeof process!="undefined"&&(_=process.env[MC]),_?(f=!0,a=`http://${_}?ns=${u.namespace}`,c=Iu(a,r),u=c.repoInfo):f=!c.repoInfo.secure;const g=r&&f?new Ka(Ka.OWNER):new Uy(e.name,e.options,t);cC("Invalid Firebase Database URL",c),lt(c.path)||ri("Database URL must point to the root of a Firebase Database (not including a child path).");const m=DC(u,e,g,new Hy(e.name,i));return new BC(m,e)}function OC(e,t){const i=ll[t];(!i||i[e.key]!==e)&&ri(`Database ${t}(${e.repoInfo_}) has already been deleted.`),xC(e),delete i[e.key]}function DC(e,t,i,s){let r=ll[t.name];r||(r={},ll[t.name]=r);let a=r[e.toURLString()];return a&&ri("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new _C(e,NC,i,s),r[e.toURLString()]=a,a}class BC{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ke(this._repo,pt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(OC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&ri("Cannot call "+t+" on a deleted database.")}}function s_(e=$d(),t){return Dl(e,"database").getImmediate({identifier:t})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(e){Py(_y),zi(new si("database",(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return RC(s,r,a,i)},"PUBLIC").setMultipleInstances(!0)),ni(Gh,Kh,e),ni(Gh,Kh,"esm2017")}dn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};dn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};FC();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new Map,zC={activated:!1,tokenObservers:[]},WC={initialized:!1,enabled:!1};function se(e){return o_.get(e)||zC}function pn(e,t){o_.set(e,t)}function Nr(){return WC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="https://content-firebaseappcheck.googleapis.com/v1beta",HC="exchangeRecaptchaToken",UC="exchangeDebugToken",Su={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ZC=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,i,s,r,a){if(this.operation=t,this.retryPolicy=i,this.getWaitDuration=s,this.lowerBound=r,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=r,r>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new _n,await VC(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new _n,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}}function VC(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},_e=new Nl("appCheck","AppCheck",jC);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function a_(e){if(!se(e).activated)throw _e.create("use-before-activation",{appName:e.name})}function qC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function l_(e){const t=Math.round(e/1e3),i=Math.floor(t/(3600*24)),s=Math.floor((t-i*3600*24)/3600),r=Math.floor((t-i*3600*24-s*3600)/60),a=t-i*3600*24-s*3600-r*60;let c="";return i&&(c+=ko(i)+"d:"),s&&(c+=ko(s)+"h:"),c+=ko(r)+"m:"+ko(a)+"s",c}function ko(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_({url:e,body:t},i){const s={"Content-Type":"application/json"},r=i.getImmediate({optional:!0});if(r){const m=await r.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}const a={method:"POST",body:JSON.stringify(t),headers:s};let c;try{c=await fetch(e,a)}catch(m){throw _e.create("fetch-network-error",{originalErrorMessage:m.message})}if(c.status!==200)throw _e.create("fetch-status-error",{httpStatus:c.status});let u;try{u=await c.json()}catch(m){throw _e.create("fetch-parse-error",{originalErrorMessage:m.message})}const f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw _e.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const _=Number(f[1])*1e3,g=Date.now();return{token:u.attestationToken,expireTimeMillis:g+_,issuedAtTimeMillis:g}}function GC(e,t){const{projectId:i,appId:s,apiKey:r}=e.options;return{url:`${r_}/projects/${i}/apps/${s}:${HC}?key=${r}`,body:{recaptcha_token:t}}}function KC(e,t){const{projectId:i,appId:s,apiKey:r}=e.options;return{url:`${r_}/projects/${i}/apps/${s}:${UC}?key=${r}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="firebase-app-check-database",QC=1,$s="firebase-app-check-store",h_="debug-token";let Lo=null;function u_(){return Lo||(Lo=new Promise((e,t)=>{try{const i=indexedDB.open(YC,QC);i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{var r;t(_e.create("storage-open",{originalErrorMessage:(r=s.target.error)===null||r===void 0?void 0:r.message}))},i.onupgradeneeded=s=>{const r=s.target.result;switch(s.oldVersion){case 0:r.createObjectStore($s,{keyPath:"compositeKey"})}}}catch(i){t(_e.create("storage-open",{originalErrorMessage:i.message}))}}),Lo)}function XC(e){return f_(__(e))}function JC(e,t){return d_(__(e),t)}function tx(e){return d_(h_,e)}function ex(){return f_(h_)}async function d_(e,t){const s=(await u_()).transaction($s,"readwrite"),a=s.objectStore($s).put({compositeKey:e,value:t});return new Promise((c,u)=>{a.onsuccess=f=>{c()},s.onerror=f=>{var _;u(_e.create("storage-set",{originalErrorMessage:(_=f.target.error)===null||_===void 0?void 0:_.message}))}})}async function f_(e){const i=(await u_()).transaction($s,"readonly"),r=i.objectStore($s).get(e);return new Promise((a,c)=>{r.onsuccess=u=>{const f=u.target.result;a(f?f.value:void 0)},i.onerror=u=>{var f;c(_e.create("storage-get",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})}function __(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Rl("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(e){if(Al()){let t;try{t=await XC(e)}catch(i){Vs.warn(`Failed to read token from IndexedDB. Error: ${i}`)}return t}}function Lu(e,t){return Al()?JC(e,t).catch(i=>{Vs.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}async function ix(){let e;try{e=await ex()}catch{}if(e)return e;{const t=qC();return tx(t).catch(i=>Vs.warn(`Failed to persist debug token to IndexedDB. Error: ${i}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){return Nr().enabled}async function m_(){const e=Nr();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function sx(){const e=_v(),t=Nr();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const i=new _n;t.token=i,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?i.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):i.resolve(ix())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox={error:"UNKNOWN_ERROR"};function rx(e){return wr.encodeString(JSON.stringify(e),!1)}async function cl(e,t=!1){const i=e.app;a_(i);const s=se(i);let r=s.token,a;if(!r){const f=await s.cachedTokenPromise;f&&ar(f)&&(r=f)}if(!t&&r&&ar(r))return{token:r.token};let c=!1;if(p_()){s.exchangeTokenPromise||(s.exchangeTokenPromise=c_(KC(i,await m_()),e.heartbeatServiceProvider).then(_=>(s.exchangeTokenPromise=void 0,_)),c=!0);const f=await s.exchangeTokenPromise;return await Lu(i,f),pn(i,Object.assign(Object.assign({},s),{token:f})),{token:f.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(f=>(s.exchangeTokenPromise=void 0,f)),c=!0),r=await s.exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"?Vs.warn(f.message):Vs.error(f),a=f}let u;return r?(u={token:r.token},pn(i,Object.assign(Object.assign({},s),{token:r})),await Lu(i,r)):u=lx(a),c&&y_(i,u),u}function g_(e,t,i,s){const{app:r}=e,a=se(r),c={next:i,error:s,type:t};if(pn(r,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&ar(a.token)){const u=a.token;Promise.resolve().then(()=>{i({token:u.token}),Au(e)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Au(e))}function v_(e,t){const i=se(e),s=i.tokenObservers.filter(r=>r.next!==t);s.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),pn(e,Object.assign(Object.assign({},i),{tokenObservers:s}))}function Au(e){const{app:t}=e,i=se(t);let s=i.tokenRefresher;s||(s=ax(e),pn(t,Object.assign(Object.assign({},i),{tokenRefresher:s}))),!s.isRunning()&&i.isTokenAutoRefreshEnabled&&s.start()}function ax(e){const{app:t}=e;return new $C(async()=>{const i=se(t);let s;if(i.token?s=await cl(e,!0):s=await cl(e),s.error)throw s.error},()=>!0,()=>{const i=se(t);if(i.token){let s=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5;const r=i.token.expireTimeMillis-5*60*1e3;return s=Math.min(s,r),Math.max(0,s-Date.now())}else return 0},Su.RETRIAL_MIN_WAIT,Su.RETRIAL_MAX_WAIT)}function y_(e,t){const i=se(e).tokenObservers;for(const s of i)try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}function ar(e){return e.expireTimeMillis-Date.now()>0}function lx(e){return{token:rx(ox),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(t,i){this.app=t,this.heartbeatServiceProvider=i}_delete(){const{tokenObservers:t}=se(this.app);for(const i of t)v_(this.app,i.next);return Promise.resolve()}}function hx(e,t){return new cx(e,t)}function ux(e){return{getToken:t=>cl(e,t),addTokenListener:t=>g_(e,"INTERNAL",t),removeTokenListener:t=>v_(e.app,t)}}const dx="@firebase/app-check",fx="0.5.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="https://www.google.com/recaptcha/api.js";function px(e,t){const i=se(e),s=new _n;pn(e,Object.assign(Object.assign({},i),{reCAPTCHAState:{initialized:s}}));const r=mx(e),a=ku(!1);return a?Mu(e,t,a,r,s):yx(()=>{const c=ku(!1);if(!c)throw new Error("no recaptcha");Mu(e,t,c,r,s)}),s.promise}function Mu(e,t,i,s,r){i.ready(()=>{vx(e,t,i,s),r.resolve(i)})}function mx(e){const t=`fire_app_check_${e.name}`,i=document.createElement("div");return i.id=t,i.style.display="none",document.body.appendChild(i),t}async function gx(e){a_(e);const i=await se(e).reCAPTCHAState.initialized.promise;return new Promise((s,r)=>{const a=se(e).reCAPTCHAState;i.ready(()=>{s(i.execute(a.widgetId,{action:"fire_app_check"}))})})}function vx(e,t,i,s){const r=i.render(s,{sitekey:t,size:"invisible"}),a=se(e);pn(e,Object.assign(Object.assign({},a),{reCAPTCHAState:Object.assign(Object.assign({},a.reCAPTCHAState),{widgetId:r})}))}function yx(e){const t=document.createElement("script");t.src=_x,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t;bx(this._throttleData);const i=await gx(this._app).catch(r=>{throw _e.create("recaptcha-error")});let s;try{s=await c_(GC(this._app,i),this._heartbeatServiceProvider)}catch(r){throw r.code==="fetch-status-error"?(this._throttleData=wx(Number((t=r.customData)===null||t===void 0?void 0:t.httpStatus),this._throttleData),_e.create("throttled",{time:l_(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=Dl(t,"heartbeat"),px(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Rr?this._siteKey===t._siteKey:!1}}function wx(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+ZC,httpStatus:e};{const i=t?t.backoffCount:0,s=Iv(i,1e3,2);return{backoffCount:i+1,allowRequestsAfter:Date.now()+s,httpStatus:e}}}function bx(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw _e.create("throttled",{time:l_(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(e=$d(),t){e=Qi(e);const i=Dl(e,"app-check");if(Nr().initialized||sx(),p_()&&m_().then(r=>console.log(`App Check debug token: ${r}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),i.isInitialized()){const r=i.getImmediate(),a=i.getOptions();if(a.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&a.provider.isEqual(t.provider))return r;throw _e.create("already-initialized",{appName:e.name})}const s=i.initialize({options:t});return Cx(e,t.provider,t.isTokenAutoRefreshEnabled),se(e).isTokenAutoRefreshEnabled&&g_(s,"INTERNAL",()=>{}),s}function Cx(e,t,i){const s=se(e),r=Object.assign(Object.assign({},s),{activated:!0});r.provider=t,r.cachedTokenPromise=nx(e).then(a=>(a&&ar(a)&&(pn(e,Object.assign(Object.assign({},se(e)),{token:a})),y_(e,{token:a.token})),a)),r.isTokenAutoRefreshEnabled=i===void 0?e.automaticDataCollectionEnabled:i,pn(e,r),r.provider.initialize(e)}const xx="app-check",Nu="app-check-internal";function Ex(){zi(new si(xx,e=>{const t=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat");return hx(t,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider(Nu).initialize()})),zi(new si(Nu,e=>{const t=e.getProvider("app-check").getImmediate();return ux(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ni(dx,fx)}Ex();var Tx=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},hl={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(i,s){s(t)})(Tx,function(i){var s="1.7.1";function r(n){var o,l,h,d;for(l=1,h=arguments.length;l<h;l++){d=arguments[l];for(o in d)n[o]=d[o]}return n}var a=Object.create||function(){function n(){}return function(o){return n.prototype=o,new n}}();function c(n,o){var l=Array.prototype.slice;if(n.bind)return n.bind.apply(n,l.call(arguments,1));var h=l.call(arguments,2);return function(){return n.apply(o,h.length?h.concat(l.call(arguments)):arguments)}}var u=0;function f(n){return n._leaflet_id=n._leaflet_id||++u,n._leaflet_id}function _(n,o,l){var h,d,p,y;return y=function(){h=!1,d&&(p.apply(l,d),d=!1)},p=function(){h?d=arguments:(n.apply(l,arguments),setTimeout(y,o),h=!0)},p}function g(n,o,l){var h=o[1],d=o[0],p=h-d;return n===h&&l?n:((n-d)%p+p)%p+d}function m(){return!1}function w(n,o){var l=Math.pow(10,o===void 0?6:o);return Math.round(n*l)/l}function T(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function A(n){return T(n).split(/\s+/)}function D(n,o){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?a(n.options):{});for(var l in o)n.options[l]=o[l];return n.options}function Z(n,o,l){var h=[];for(var d in n)h.push(encodeURIComponent(l?d.toUpperCase():d)+"="+encodeURIComponent(n[d]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var X=/\{ *([\w_-]+) *\}/g;function At(n,o){return n.replace(X,function(l,h){var d=o[h];if(d===void 0)throw new Error("No value provided for variable "+l);return typeof d=="function"&&(d=d(o)),d})}var j=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function $(n,o){for(var l=0;l<n.length;l++)if(n[l]===o)return l;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function tt(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var st=0;function Dt(n){var o=+new Date,l=Math.max(0,16-(o-st));return st=o+l,window.setTimeout(n,l)}var Nt=window.requestAnimationFrame||tt("RequestAnimationFrame")||Dt,le=window.cancelAnimationFrame||tt("CancelAnimationFrame")||tt("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function gt(n,o,l){if(l&&Nt===Dt)n.call(o);else return Nt.call(window,c(n,o))}function Pt(n){n&&le.call(window,n)}var gn={extend:r,create:a,bind:c,lastId:u,stamp:f,throttle:_,wrapNum:g,falseFn:m,formatNum:w,trim:T,splitWords:A,setOptions:D,getParamString:Z,template:At,isArray:j,indexOf:$,emptyImageUrl:M,requestFn:Nt,cancelFn:le,requestAnimFrame:gt,cancelAnimFrame:Pt};function me(){}me.extend=function(n){var o=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=o.__super__=this.prototype,h=a(l);h.constructor=o,o.prototype=h;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(o[d]=this[d]);return n.statics&&(r(o,n.statics),delete n.statics),n.includes&&(es(n.includes),r.apply(null,[h].concat(n.includes)),delete n.includes),h.options&&(n.options=r(a(h.options),n.options)),r(h,n),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,y=h._initHooks.length;p<y;p++)h._initHooks[p].call(this)}},o},me.include=function(n){return r(this.prototype,n),this},me.mergeOptions=function(n){return r(this.prototype.options,n),this},me.addInitHook=function(n){var o=Array.prototype.slice.call(arguments,1),l=typeof n=="function"?n:function(){this[n].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function es(n){if(!(typeof L=="undefined"||!L||!L.Mixin)){n=j(n)?n:[n];for(var o=0;o<n.length;o++)n[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var wt={on:function(n,o,l){if(typeof n=="object")for(var h in n)this._on(h,n[h],o);else{n=A(n);for(var d=0,p=n.length;d<p;d++)this._on(n[d],o,l)}return this},off:function(n,o,l){if(!n)delete this._events;else if(typeof n=="object")for(var h in n)this._off(h,n[h],o);else{n=A(n);for(var d=0,p=n.length;d<p;d++)this._off(n[d],o,l)}return this},_on:function(n,o,l){this._events=this._events||{};var h=this._events[n];h||(h=[],this._events[n]=h),l===this&&(l=void 0);for(var d={fn:o,ctx:l},p=h,y=0,C=p.length;y<C;y++)if(p[y].fn===o&&p[y].ctx===l)return;p.push(d)},_off:function(n,o,l){var h,d,p;if(!!this._events&&(h=this._events[n],!!h)){if(!o){for(d=0,p=h.length;d<p;d++)h[d].fn=m;delete this._events[n];return}if(l===this&&(l=void 0),h)for(d=0,p=h.length;d<p;d++){var y=h[d];if(y.ctx===l&&y.fn===o){y.fn=m,this._firingCount&&(this._events[n]=h=h.slice()),h.splice(d,1);return}}}},fire:function(n,o,l){if(!this.listens(n,l))return this;var h=r({},o,{type:n,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var d=this._events[n];if(d){this._firingCount=this._firingCount+1||1;for(var p=0,y=d.length;p<y;p++){var C=d[p];C.fn.call(C.ctx||this,h)}this._firingCount--}}return l&&this._propagateEvent(h),this},listens:function(n,o){var l=this._events&&this._events[n];if(l&&l.length)return!0;if(o){for(var h in this._eventParents)if(this._eventParents[h].listens(n,o))return!0}return!1},once:function(n,o,l){if(typeof n=="object"){for(var h in n)this.once(h,n[h],o);return this}var d=c(function(){this.off(n,o,l).off(n,d,l)},this);return this.on(n,o,l).on(n,d,l)},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[f(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[f(n)],this},_propagateEvent:function(n){for(var o in this._eventParents)this._eventParents[o].fire(n.type,r({layer:n.target,propagatedFrom:n.target},n),!0)}};wt.addEventListener=wt.on,wt.removeEventListener=wt.clearAllEventListeners=wt.off,wt.addOneTimeEventListener=wt.once,wt.fireEvent=wt.fire,wt.hasEventListeners=wt.listens;var bt=me.extend(wt);function H(n,o,l){this.x=l?Math.round(n):n,this.y=l?Math.round(o):o}var ge=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(n){return this.clone()._add(ot(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(ot(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new H(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new H(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ge(this.x),this.y=ge(this.y),this},distanceTo:function(n){n=ot(n);var o=n.x-this.x,l=n.y-this.y;return Math.sqrt(o*o+l*l)},equals:function(n){return n=ot(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=ot(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function ot(n,o,l){return n instanceof H?n:j(n)?new H(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new H(n.x,n.y):new H(n,o,l)}function vt(n,o){if(!!n)for(var l=o?[n,o]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}vt.prototype={extend:function(n){return n=ot(n),!this.min&&!this.max?(this.min=n.clone(),this.max=n.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(n){return new H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new H(this.min.x,this.max.y)},getTopRight:function(){return new H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var o,l;return typeof n[0]=="number"||n instanceof H?n=ot(n):n=Kt(n),n instanceof vt?(o=n.min,l=n.max):o=l=n,o.x>=this.min.x&&l.x<=this.max.x&&o.y>=this.min.y&&l.y<=this.max.y},intersects:function(n){n=Kt(n);var o=this.min,l=this.max,h=n.min,d=n.max,p=d.x>=o.x&&h.x<=l.x,y=d.y>=o.y&&h.y<=l.y;return p&&y},overlaps:function(n){n=Kt(n);var o=this.min,l=this.max,h=n.min,d=n.max,p=d.x>o.x&&h.x<l.x,y=d.y>o.y&&h.y<l.y;return p&&y},isValid:function(){return!!(this.min&&this.max)}};function Kt(n,o){return!n||n instanceof vt?n:new vt(n,o)}function Rt(n,o){if(!!n)for(var l=o?[n,o]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}Rt.prototype={extend:function(n){var o=this._southWest,l=this._northEast,h,d;if(n instanceof yt)h=n,d=n;else if(n instanceof Rt){if(h=n._southWest,d=n._northEast,!h||!d)return this}else return n?this.extend(Mt(n)||Wt(n)):this;return!o&&!l?(this._southWest=new yt(h.lat,h.lng),this._northEast=new yt(d.lat,d.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),l.lat=Math.max(d.lat,l.lat),l.lng=Math.max(d.lng,l.lng)),this},pad:function(n){var o=this._southWest,l=this._northEast,h=Math.abs(o.lat-l.lat)*n,d=Math.abs(o.lng-l.lng)*n;return new Rt(new yt(o.lat-h,o.lng-d),new yt(l.lat+h,l.lng+d))},getCenter:function(){return new yt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new yt(this.getNorth(),this.getWest())},getSouthEast:function(){return new yt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof yt||"lat"in n?n=Mt(n):n=Wt(n);var o=this._southWest,l=this._northEast,h,d;return n instanceof Rt?(h=n.getSouthWest(),d=n.getNorthEast()):h=d=n,h.lat>=o.lat&&d.lat<=l.lat&&h.lng>=o.lng&&d.lng<=l.lng},intersects:function(n){n=Wt(n);var o=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>=o.lat&&h.lat<=l.lat,y=d.lng>=o.lng&&h.lng<=l.lng;return p&&y},overlaps:function(n){n=Wt(n);var o=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>o.lat&&h.lat<l.lat,y=d.lng>o.lng&&h.lng<l.lng;return p&&y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,o){return n?(n=Wt(n),this._southWest.equals(n.getSouthWest(),o)&&this._northEast.equals(n.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Wt(n,o){return n instanceof Rt?n:new Rt(n,o)}function yt(n,o,l){if(isNaN(n)||isNaN(o))throw new Error("Invalid LatLng object: ("+n+", "+o+")");this.lat=+n,this.lng=+o,l!==void 0&&(this.alt=+l)}yt.prototype={equals:function(n,o){if(!n)return!1;n=Mt(n);var l=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return l<=(o===void 0?1e-9:o)},toString:function(n){return"LatLng("+w(this.lat,n)+", "+w(this.lng,n)+")"},distanceTo:function(n){return de.distance(this,Mt(n))},wrap:function(){return de.wrapLatLng(this)},toBounds:function(n){var o=180*n/40075017,l=o/Math.cos(Math.PI/180*this.lat);return Wt([this.lat-o,this.lng-l],[this.lat+o,this.lng+l])},clone:function(){return new yt(this.lat,this.lng,this.alt)}};function Mt(n,o,l){return n instanceof yt?n:j(n)&&typeof n[0]!="object"?n.length===3?new yt(n[0],n[1],n[2]):n.length===2?new yt(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new yt(n.lat,"lng"in n?n.lng:n.lon,n.alt):o===void 0?null:new yt(n,o,l)}var Vt={latLngToPoint:function(n,o){var l=this.projection.project(n),h=this.scale(o);return this.transformation._transform(l,h)},pointToLatLng:function(n,o){var l=this.scale(o),h=this.transformation.untransform(n,l);return this.projection.unproject(h)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var o=this.projection.bounds,l=this.scale(n),h=this.transformation.transform(o.min,l),d=this.transformation.transform(o.max,l);return new vt(h,d)},infinite:!1,wrapLatLng:function(n){var o=this.wrapLng?g(n.lng,this.wrapLng,!0):n.lng,l=this.wrapLat?g(n.lat,this.wrapLat,!0):n.lat,h=n.alt;return new yt(l,o,h)},wrapLatLngBounds:function(n){var o=n.getCenter(),l=this.wrapLatLng(o),h=o.lat-l.lat,d=o.lng-l.lng;if(h===0&&d===0)return n;var p=n.getSouthWest(),y=n.getNorthEast(),C=new yt(p.lat-h,p.lng-d),x=new yt(y.lat-h,y.lng-d);return new Rt(C,x)}},de=r({},Vt,{wrapLng:[-180,180],R:6371e3,distance:function(n,o){var l=Math.PI/180,h=n.lat*l,d=o.lat*l,p=Math.sin((o.lat-n.lat)*l/2),y=Math.sin((o.lng-n.lng)*l/2),C=p*p+Math.cos(h)*Math.cos(d)*y*y,x=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*x}}),ns=6378137,Re={R:ns,MAX_LATITUDE:85.0511287798,project:function(n){var o=Math.PI/180,l=this.MAX_LATITUDE,h=Math.max(Math.min(l,n.lat),-l),d=Math.sin(h*o);return new H(this.R*n.lng*o,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(n){var o=180/Math.PI;return new yt((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*o,n.x*o/this.R)},bounds:function(){var n=ns*Math.PI;return new vt([-n,-n],[n,n])}()};function Bn(n,o,l,h){if(j(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=o,this._c=l,this._d=h}Bn.prototype={transform:function(n,o){return this._transform(n.clone(),o)},_transform:function(n,o){return o=o||1,n.x=o*(this._a*n.x+this._b),n.y=o*(this._c*n.y+this._d),n},untransform:function(n,o){return o=o||1,new H((n.x/o-this._b)/this._a,(n.y/o-this._d)/this._c)}};function Ye(n,o,l,h){return new Bn(n,o,l,h)}var v=r({},de,{code:"EPSG:3857",projection:Re,transformation:function(){var n=.5/(Math.PI*Re.R);return Ye(n,.5,-n,.5)}()}),b=r({},v,{code:"EPSG:900913"});function E(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function S(n,o){var l="",h,d,p,y,C,x;for(h=0,p=n.length;h<p;h++){for(C=n[h],d=0,y=C.length;d<y;d++)x=C[d],l+=(d?"L":"M")+x.x+" "+x.y;l+=o?Js?"z":"x":""}return l||"M0 0"}var I=document.documentElement.style,R="ActiveXObject"in window,F=R&&!document.addEventListener,N="msLaunchUri"in navigator&&!("documentMode"in document),B=Be("webkit"),k=Be("android"),V=Be("android 2")||Be("android 3"),U=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),q=k&&Be("Google")&&U<537&&!("AudioNode"in window),Y=!!window.opera,rt=!N&&Be("chrome"),Ct=Be("gecko")&&!B&&!Y&&!R,ut=!rt&&Be("safari"),xt=Be("phantom"),ce="OTransition"in I,Qe=navigator.platform.indexOf("Win")===0,di=R&&"transition"in I,Xe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!V,is="MozPerspective"in I,It=!window.L_DISABLE_3D&&(di||Xe||is)&&!ce&&!xt,Jt=typeof orientation!="undefined"||Be("mobile"),Xs=Jt&&B,b_=Jt&&Xe,vn=!window.PointerEvent&&window.MSPointerEvent,Oe=!!(window.PointerEvent||vn),De=!window.L_NO_TOUCH&&(Oe||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),wc=Jt&&Y,C_=Jt&&Ct,yn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,fi=function(){var n=!1;try{var o=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",m,o),window.removeEventListener("testPassiveEventSupport",m,o)}catch{}return n}(),bc=function(){return!!document.createElement("canvas").getContext}(),Js=!!(document.createElementNS&&E("svg").createSVGRect),to=!Js&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var o=n.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}();function Be(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var x_={ie:R,ielt9:F,edge:N,webkit:B,android:k,android23:V,androidStock:q,opera:Y,chrome:rt,gecko:Ct,safari:ut,phantom:xt,opera12:ce,win:Qe,ie3d:di,webkit3d:Xe,gecko3d:is,any3d:It,mobile:Jt,mobileWebkit:Xs,mobileWebkit3d:b_,msPointer:vn,pointer:Oe,touch:De,mobileOpera:wc,mobileGecko:C_,retina:yn,passiveEvents:fi,canvas:bc,svg:Js,vml:to},Or=vn?"MSPointerDown":"pointerdown",Dr=vn?"MSPointerMove":"pointermove",Br=vn?"MSPointerUp":"pointerup",Fr=vn?"MSPointerCancel":"pointercancel",_i={},Cc=!1;function E_(n,o,l,h){return o==="touchstart"?P_(n,l,h):o==="touchmove"?k_(n,l,h):o==="touchend"&&L_(n,l,h),this}function T_(n,o,l){var h=n["_leaflet_"+o+l];return o==="touchstart"?n.removeEventListener(Or,h,!1):o==="touchmove"?n.removeEventListener(Dr,h,!1):o==="touchend"&&(n.removeEventListener(Br,h,!1),n.removeEventListener(Fr,h,!1)),this}function P_(n,o,l){var h=c(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&ye(d),zr(d,o)});n["_leaflet_touchstart"+l]=h,n.addEventListener(Or,h,!1),Cc||(document.addEventListener(Or,I_,!0),document.addEventListener(Dr,S_,!0),document.addEventListener(Br,xc,!0),document.addEventListener(Fr,xc,!0),Cc=!0)}function I_(n){_i[n.pointerId]=n}function S_(n){_i[n.pointerId]&&(_i[n.pointerId]=n)}function xc(n){delete _i[n.pointerId]}function zr(n,o){n.touches=[];for(var l in _i)n.touches.push(_i[l]);n.changedTouches=[n],o(n)}function k_(n,o,l){var h=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||zr(d,o)};n["_leaflet_touchmove"+l]=h,n.addEventListener(Dr,h,!1)}function L_(n,o,l){var h=function(d){zr(d,o)};n["_leaflet_touchend"+l]=h,n.addEventListener(Br,h,!1),n.addEventListener(Fr,h,!1)}var eo=vn?"MSPointerDown":Oe?"pointerdown":"touchstart",no=vn?"MSPointerUp":Oe?"pointerup":"touchend",pi="_leaflet_";function A_(n,o,l){var h,d,p=!1,y=250;function C(P){if(Oe){if(!P.isPrimary||P.pointerType==="mouse")return}else if(P.touches.length>1)return;var z=Date.now(),G=z-(h||z);d=P.touches?P.touches[0]:P,p=G>0&&G<=y,h=z}function x(P){if(p&&!d.cancelBubble){if(Oe){if(P.pointerType==="mouse")return;var z={},G,ft;for(ft in d)G=d[ft],z[ft]=G&&G.bind?G.bind(d):G;d=z}d.type="dblclick",d.button=0,o(d),h=null}}return n[pi+eo+l]=C,n[pi+no+l]=x,n[pi+"dblclick"+l]=o,n.addEventListener(eo,C,fi?{passive:!1}:!1),n.addEventListener(no,x,fi?{passive:!1}:!1),n.addEventListener("dblclick",o,!1),this}function M_(n,o){var l=n[pi+eo+o],h=n[pi+no+o],d=n[pi+"dblclick"+o];return n.removeEventListener(eo,l,fi?{passive:!1}:!1),n.removeEventListener(no,h,fi?{passive:!1}:!1),n.removeEventListener("dblclick",d,!1),this}var Wr=oo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ss=oo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ec=ss==="webkitTransition"||ss==="OTransition"?ss+"End":"transitionend";function Tc(n){return typeof n=="string"?document.getElementById(n):n}function os(n,o){var l=n.style[o]||n.currentStyle&&n.currentStyle[o];if((!l||l==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(n,null);l=h?h[o]:null}return l==="auto"?null:l}function dt(n,o,l){var h=document.createElement(n);return h.className=o||"",l&&l.appendChild(h),h}function Ot(n){var o=n.parentNode;o&&o.removeChild(n)}function io(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function mi(n){var o=n.parentNode;o&&o.lastChild!==n&&o.appendChild(n)}function gi(n){var o=n.parentNode;o&&o.firstChild!==n&&o.insertBefore(n,o.firstChild)}function Hr(n,o){if(n.classList!==void 0)return n.classList.contains(o);var l=so(n);return l.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(l)}function J(n,o){if(n.classList!==void 0)for(var l=A(o),h=0,d=l.length;h<d;h++)n.classList.add(l[h]);else if(!Hr(n,o)){var p=so(n);Ur(n,(p?p+" ":"")+o)}}function Bt(n,o){n.classList!==void 0?n.classList.remove(o):Ur(n,T((" "+so(n)+" ").replace(" "+o+" "," ")))}function Ur(n,o){n.className.baseVal===void 0?n.className=o:n.className.baseVal=o}function so(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function ve(n,o){"opacity"in n.style?n.style.opacity=o:"filter"in n.style&&N_(n,o)}function N_(n,o){var l=!1,h="DXImageTransform.Microsoft.Alpha";try{l=n.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),l?(l.Enabled=o!==100,l.Opacity=o):n.style.filter+=" progid:"+h+"(opacity="+o+")"}function oo(n){for(var o=document.documentElement.style,l=0;l<n.length;l++)if(n[l]in o)return n[l];return!1}function Fn(n,o,l){var h=o||new H(0,0);n.style[Wr]=(di?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(l?" scale("+l+")":"")}function Ut(n,o){n._leaflet_pos=o,It?Fn(n,o):(n.style.left=o.x+"px",n.style.top=o.y+"px")}function wn(n){return n._leaflet_pos||new H(0,0)}var rs,as,Zr;if("onselectstart"in document)rs=function(){at(window,"selectstart",ye)},as=function(){Ht(window,"selectstart",ye)};else{var ls=oo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rs=function(){if(ls){var n=document.documentElement.style;Zr=n[ls],n[ls]="none"}},as=function(){ls&&(document.documentElement.style[ls]=Zr,Zr=void 0)}}function $r(){at(window,"dragstart",ye)}function Vr(){Ht(window,"dragstart",ye)}var ro,jr;function qr(n){for(;n.tabIndex===-1;)n=n.parentNode;!n.style||(ao(),ro=n,jr=n.style.outline,n.style.outline="none",at(window,"keydown",ao))}function ao(){!ro||(ro.style.outline=jr,ro=void 0,jr=void 0,Ht(window,"keydown",ao))}function Pc(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Gr(n){var o=n.getBoundingClientRect();return{x:o.width/n.offsetWidth||1,y:o.height/n.offsetHeight||1,boundingClientRect:o}}var R_={TRANSFORM:Wr,TRANSITION:ss,TRANSITION_END:Ec,get:Tc,getStyle:os,create:dt,remove:Ot,empty:io,toFront:mi,toBack:gi,hasClass:Hr,addClass:J,removeClass:Bt,setClass:Ur,getClass:so,setOpacity:ve,testProp:oo,setTransform:Fn,setPosition:Ut,getPosition:wn,disableTextSelection:rs,enableTextSelection:as,disableImageDrag:$r,enableImageDrag:Vr,preventOutline:qr,restoreOutline:ao,getSizedParentNode:Pc,getScale:Gr};function at(n,o,l,h){if(typeof o=="object")for(var d in o)lo(n,d,o[d],l);else{o=A(o);for(var p=0,y=o.length;p<y;p++)lo(n,o[p],l,h)}return this}var Ee="_leaflet_events";function Ht(n,o,l,h){if(typeof o=="object")for(var d in o)Yr(n,d,o[d],l);else if(o){o=A(o);for(var p=0,y=o.length;p<y;p++)Yr(n,o[p],l,h)}else{for(var C in n[Ee])Yr(n,C,n[Ee][C]);delete n[Ee]}return this}function Ic(){if(Oe)return!(N||ut)}var Kr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function lo(n,o,l,h){var d=o+f(l)+(h?"_"+f(h):"");if(n[Ee]&&n[Ee][d])return this;var p=function(C){return l.call(h||n,C||window.event)},y=p;Oe&&o.indexOf("touch")===0?E_(n,o,p,d):De&&o==="dblclick"&&!Ic()?A_(n,p,d):"addEventListener"in n?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?n.addEventListener(Kr[o]||o,p,fi?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(p=function(C){C=C||window.event,co(n,C)&&y(C)},n.addEventListener(Kr[o],p,!1)):n.addEventListener(o,y,!1):"attachEvent"in n&&n.attachEvent("on"+o,p),n[Ee]=n[Ee]||{},n[Ee][d]=p}function Yr(n,o,l,h){var d=o+f(l)+(h?"_"+f(h):""),p=n[Ee]&&n[Ee][d];if(!p)return this;Oe&&o.indexOf("touch")===0?T_(n,o,d):De&&o==="dblclick"&&!Ic()?M_(n,d):"removeEventListener"in n?n.removeEventListener(Kr[o]||o,p,!1):"detachEvent"in n&&n.detachEvent("on"+o,p),n[Ee][d]=null}function zn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,ta(n),this}function Qr(n){return lo(n,"wheel",zn),this}function cs(n){return at(n,"mousedown touchstart dblclick",zn),lo(n,"click",Jr),this}function ye(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Je(n){return ye(n),zn(n),this}function Sc(n,o){if(!o)return new H(n.clientX,n.clientY);var l=Gr(o),h=l.boundingClientRect;return new H((n.clientX-h.left)/l.x-o.clientLeft,(n.clientY-h.top)/l.y-o.clientTop)}var O_=Qe&&rt?2*window.devicePixelRatio:Ct?window.devicePixelRatio:1;function kc(n){return N?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/O_:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}var Xr={};function Jr(n){Xr[n.type]=!0}function ta(n){var o=Xr[n.type];return Xr[n.type]=!1,o}function co(n,o){var l=o.relatedTarget;if(!l)return!0;try{for(;l&&l!==n;)l=l.parentNode}catch{return!1}return l!==n}var D_={on:at,off:Ht,stopPropagation:zn,disableScrollPropagation:Qr,disableClickPropagation:cs,preventDefault:ye,stop:Je,getMousePosition:Sc,getWheelDelta:kc,fakeStop:Jr,skipped:ta,isExternalTarget:co,addListener:at,removeListener:Ht},Lc=bt.extend({run:function(n,o,l,h){this.stop(),this._el=n,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=wn(n),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=gt(this._animate,this),this._step()},_step:function(n){var o=+new Date-this._startTime,l=this._duration*1e3;o<l?this._runFrame(this._easeOut(o/l),n):(this._runFrame(1),this._complete())},_runFrame:function(n,o){var l=this._startPos.add(this._offset.multiplyBy(n));o&&l._round(),Ut(this._el,l),this.fire("step")},_complete:function(){Pt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),ht=bt.extend({options:{crs:v,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,o){o=D(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Mt(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ss&&It&&!wc&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),at(this._proxy,Ec,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,o,l){if(o=o===void 0?this._zoom:this._limitZoom(o),n=this._limitCenter(Mt(n),o,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=r({animate:l.animate},l.zoom),l.pan=r({animate:l.animate,duration:l.duration},l.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,o,l.zoom):this._tryAnimatedPan(n,l.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(n,o),this},setZoom:function(n,o){return this._loaded?this.setView(this.getCenter(),n,{zoom:o}):(this._zoom=n,this)},zoomIn:function(n,o){return n=n||(It?this.options.zoomDelta:1),this.setZoom(this._zoom+n,o)},zoomOut:function(n,o){return n=n||(It?this.options.zoomDelta:1),this.setZoom(this._zoom-n,o)},setZoomAround:function(n,o,l){var h=this.getZoomScale(o),d=this.getSize().divideBy(2),p=n instanceof H?n:this.latLngToContainerPoint(n),y=p.subtract(d).multiplyBy(1-1/h),C=this.containerPointToLatLng(d.add(y));return this.setView(C,o,{zoom:l})},_getBoundsCenterZoom:function(n,o){o=o||{},n=n.getBounds?n.getBounds():Wt(n);var l=ot(o.paddingTopLeft||o.padding||[0,0]),h=ot(o.paddingBottomRight||o.padding||[0,0]),d=this.getBoundsZoom(n,!1,l.add(h));if(d=typeof o.maxZoom=="number"?Math.min(o.maxZoom,d):d,d===1/0)return{center:n.getCenter(),zoom:d};var p=h.subtract(l).divideBy(2),y=this.project(n.getSouthWest(),d),C=this.project(n.getNorthEast(),d),x=this.unproject(y.add(C).divideBy(2).add(p),d);return{center:x,zoom:d}},fitBounds:function(n,o){if(n=Wt(n),!n.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(n,o);return this.setView(l.center,l.zoom,o)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,o){return this.setView(n,this._zoom,{pan:o})},panBy:function(n,o){if(n=ot(n).round(),o=o||{},!n.x&&!n.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Lc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){J(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,l,o.duration||.25,o.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,o,l){if(l=l||{},l.animate===!1||!It)return this.setView(n,o,l);this._stop();var h=this.project(this.getCenter()),d=this.project(n),p=this.getSize(),y=this._zoom;n=Mt(n),o=o===void 0?y:o;var C=Math.max(p.x,p.y),x=C*this.getZoomScale(y,o),P=d.distanceTo(h)||1,z=1.42,G=z*z;function ft(Zt){var wo=Zt?-1:1,Cp=Zt?x:C,xp=x*x-C*C+wo*G*G*P*P,Ep=2*Cp*G*P,fa=xp/Ep,ch=Math.sqrt(fa*fa+1)-fa,Tp=ch<1e-9?-18:Math.log(ch);return Tp}function on(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function Un(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}function yo(Zt){return on(Zt)/Un(Zt)}var Cn=ft(0);function da(Zt){return C*(Un(Cn)/Un(Cn+z*Zt))}function vp(Zt){return C*(Un(Cn)*yo(Cn+z*Zt)-on(Cn))/G}function yp(Zt){return 1-Math.pow(1-Zt,1.5)}var wp=Date.now(),ah=(ft(1)-Cn)/z,bp=l.duration?1e3*l.duration:1e3*ah*.8;function lh(){var Zt=(Date.now()-wp)/bp,wo=yp(Zt)*ah;Zt<=1?(this._flyToFrame=gt(lh,this),this._move(this.unproject(h.add(d.subtract(h).multiplyBy(vp(wo)/P)),y),this.getScaleZoom(C/da(wo),y),{flyTo:!0})):this._move(n,o)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),lh.call(this),this},flyToBounds:function(n,o){var l=this._getBoundsCenterZoom(n,o);return this.flyTo(l.center,l.zoom,o)},setMaxBounds:function(n){if(n=Wt(n),n.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(n){var o=this.options.minZoom;return this.options.minZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var o=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,o){this._enforcingBounds=!0;var l=this.getCenter(),h=this._limitCenter(l,this._zoom,Wt(n));return l.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(n,o){o=o||{};var l=ot(o.paddingTopLeft||o.padding||[0,0]),h=ot(o.paddingBottomRight||o.padding||[0,0]),d=this.getCenter(),p=this.project(d),y=this.project(n),C=this.getPixelBounds(),x=C.getSize().divideBy(2),P=Kt([C.min.add(l),C.max.subtract(h)]);if(!P.contains(y)){this._enforcingBounds=!0;var z=p.subtract(y),G=ot(y.x+z.x,y.y+z.y);(y.x<P.min.x||y.x>P.max.x)&&(G.x=p.x-z.x,z.x>0?G.x+=x.x-l.x:G.x-=x.x-h.x),(y.y<P.min.y||y.y>P.max.y)&&(G.y=p.y-z.y,z.y>0?G.y+=x.y-l.y:G.y-=x.y-h.y),this.panTo(this.unproject(G),o),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=r({animate:!1,pan:!0},n===!0?{animate:!0}:n);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),h=o.divideBy(2).round(),d=l.divideBy(2).round(),p=h.subtract(d);return!p.x&&!p.y?this:(n.animate&&n.pan?this.panBy(p):(n.pan&&this._rawPanBy(p),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=r({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=c(this._handleGeolocationResponse,this),l=c(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,l,n):navigator.geolocation.getCurrentPosition(o,l,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){var o=n.code,l=n.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+l+"."})},_handleGeolocationResponse:function(n){var o=n.coords.latitude,l=n.coords.longitude,h=new yt(o,l),d=h.toBounds(n.coords.accuracy*2),p=this._locateOptions;if(p.setView){var y=this.getBoundsZoom(d);this.setView(h,p.maxZoom?Math.min(y,p.maxZoom):y)}var C={latlng:h,bounds:d,timestamp:n.timestamp};for(var x in n.coords)typeof n.coords[x]=="number"&&(C[x]=n.coords[x]);this.fire("locationfound",C)},addHandler:function(n,o){if(!o)return this;var l=this[n]=new o(this);return this._handlers.push(l),this.options[n]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ot(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Pt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Ot(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,o){var l="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),h=dt("div",l,o||this._mapPane);return n&&(this._panes[n]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),o=this.unproject(n.getBottomLeft()),l=this.unproject(n.getTopRight());return new Rt(o,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,o,l){n=Wt(n),l=ot(l||[0,0]);var h=this.getZoom()||0,d=this.getMinZoom(),p=this.getMaxZoom(),y=n.getNorthWest(),C=n.getSouthEast(),x=this.getSize().subtract(l),P=Kt(this.project(C,h),this.project(y,h)).getSize(),z=It?this.options.zoomSnap:1,G=x.x/P.x,ft=x.y/P.y,on=o?Math.max(G,ft):Math.min(G,ft);return h=this.getScaleZoom(on,h),z&&(h=Math.round(h/(z/100))*(z/100),h=o?Math.ceil(h/z)*z:Math.floor(h/z)*z),Math.max(d,Math.min(p,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,o){var l=this._getTopLeftPoint(n,o);return new vt(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,o){var l=this.options.crs;return o=o===void 0?this._zoom:o,l.scale(n)/l.scale(o)},getScaleZoom:function(n,o){var l=this.options.crs;o=o===void 0?this._zoom:o;var h=l.zoom(n*l.scale(o));return isNaN(h)?1/0:h},project:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Mt(n),o)},unproject:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(ot(n),o)},layerPointToLatLng:function(n){var o=ot(n).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(n){var o=this.project(Mt(n))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Mt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Wt(n))},distance:function(n,o){return this.options.crs.distance(Mt(n),Mt(o))},containerPointToLayerPoint:function(n){return ot(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return ot(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var o=this.containerPointToLayerPoint(ot(n));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Mt(n)))},mouseEventToContainerPoint:function(n){return Sc(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var o=this._container=Tc(n);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");at(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&It,J(n,"leaflet-container"+(De?" leaflet-touch":"")+(yn?" leaflet-retina":"")+(F?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=os(n,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ut(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(J(n.markerPane,"leaflet-zoom-hide"),J(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,o){Ut(this._mapPane,new H(0,0));var l=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var h=this._zoom!==o;this._moveStart(h,!1)._move(n,o)._moveEnd(h),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(n,o){return n&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(n,o,l){o===void 0&&(o=this._zoom);var h=this._zoom!==o;return this._zoom=o,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),(h||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Pt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Ut(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[f(this._container)]=this;var o=n?Ht:at;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),It&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Pt(this._resizeRequest),this._resizeRequest=gt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,o){for(var l=[],h,d=o==="mouseout"||o==="mouseover",p=n.target||n.srcElement,y=!1;p;){if(h=this._targets[f(p)],h&&(o==="click"||o==="preclick")&&!n._simulated&&this._draggableMoved(h)){y=!0;break}if(h&&h.listens(o,!0)&&(d&&!co(p,n)||(l.push(h),d))||p===this._container)break;p=p.parentNode}return!l.length&&!y&&!d&&co(p,n)&&(l=[this]),l},_handleDOMEvent:function(n){if(!(!this._loaded||ta(n))){var o=n.type;(o==="mousedown"||o==="keypress"||o==="keyup"||o==="keydown")&&qr(n.target||n.srcElement),this._fireDOMEvent(n,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,o,l){if(n.type==="click"){var h=r({},n);h.type="preclick",this._fireDOMEvent(h,h.type,l)}if(!n._stopped&&(l=(l||[]).concat(this._findEventTargets(n,o)),!!l.length)){var d=l[0];o==="contextmenu"&&d.listens(o,!0)&&ye(n);var p={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var y=d.getLatLng&&(!d._radius||d._radius<=10);p.containerPoint=y?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(n),p.layerPoint=this.containerPointToLayerPoint(p.containerPoint),p.latlng=y?d.getLatLng():this.layerPointToLatLng(p.layerPoint)}for(var C=0;C<l.length;C++)if(l[C].fire(o,p,!0),p.originalEvent._stopped||l[C].options.bubblingMouseEvents===!1&&$(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,o=this._handlers.length;n<o;n++)this._handlers[n].disable()},whenReady:function(n,o){return this._loaded?n.call(o||this,{target:this}):this.on("load",n,o),this},_getMapPanePos:function(){return wn(this._mapPane)||new H(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,o){var l=n&&o!==void 0?this._getNewPixelOrigin(n,o):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,o){var l=this.getSize()._divideBy(2);return this.project(n,o)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,o,l){var h=this._getNewPixelOrigin(l,o);return this.project(n,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(n,o,l){var h=this._getNewPixelOrigin(l,o);return Kt([this.project(n.getSouthWest(),o)._subtract(h),this.project(n.getNorthWest(),o)._subtract(h),this.project(n.getSouthEast(),o)._subtract(h),this.project(n.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,o,l){if(!l)return n;var h=this.project(n,o),d=this.getSize().divideBy(2),p=new vt(h.subtract(d),h.add(d)),y=this._getBoundsOffset(p,l,o);return y.round().equals([0,0])?n:this.unproject(h.add(y),o)},_limitOffset:function(n,o){if(!o)return n;var l=this.getPixelBounds(),h=new vt(l.min.add(n),l.max.add(n));return n.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(n,o,l){var h=Kt(this.project(o.getNorthEast(),l),this.project(o.getSouthWest(),l)),d=h.min.subtract(n.min),p=h.max.subtract(n.max),y=this._rebound(d.x,-p.x),C=this._rebound(d.y,-p.y);return new H(y,C)},_rebound:function(n,o){return n+o>0?Math.round(n-o)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(o))},_limitZoom:function(n){var o=this.getMinZoom(),l=this.getMaxZoom(),h=It?this.options.zoomSnap:1;return h&&(n=Math.round(n/h)*h),Math.max(o,Math.min(l,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,o){var l=this._getCenterOffset(n)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,o),!0)},_createAnimProxy:function(){var n=this._proxy=dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(o){var l=Wr,h=this._proxy.style[l];Fn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ot(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),o=this.getZoom();Fn(this._proxy,this.project(n,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,o,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),d=this._getCenterOffset(n)._divideBy(1-1/h);return l.animate!==!0&&!this.getSize().contains(d)?!1:(gt(function(){this._moveStart(!0,!1)._animateZoom(n,o,!0)},this),!0)},_animateZoom:function(n,o,l,h){!this._mapPane||(l&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=o,J(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:o,noUpdate:h}),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),gt(function(){this._moveEnd(!0)},this))}});function B_(n,o){return new ht(n,o)}var Te=me.extend({options:{position:"topright"},initialize:function(n){D(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var o=this._map;return o&&o.removeControl(this),this.options.position=n,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var o=this._container=this.onAdd(n),l=this.getPosition(),h=n._controlCorners[l];return J(o,"leaflet-control"),l.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ot(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),hs=function(n){return new Te(n)};ht.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",l=this._controlContainer=dt("div",o+"control-container",this._container);function h(d,p){var y=o+d+" "+o+p;n[d+p]=dt("div",y,l)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Ot(this._controlCorners[n]);Ot(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ac=Te.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,o,l,h){return l<h?-1:h<l?1:0}},initialize:function(n,o,l){D(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var h in n)this._addLayer(n[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Te.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,o){return this._addLayer(n,o),this._map?this._update():this},addOverlay:function(n,o){return this._addLayer(n,o,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(n));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){J(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(J(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",o=this._container=dt("div",n),l=this.options.collapsed;o.setAttribute("aria-haspopup",!0),cs(o),Qr(o);var h=this._section=dt("section",n+"-list");l&&(this._map.on("click",this.collapse,this),k||at(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=dt("a",n+"-toggle",o);d.href="#",d.title="Layers",De?(at(d,"click",Je),at(d,"click",this.expand,this)):at(d,"focus",this.expand,this),l||this.expand(),this._baseLayersList=dt("div",n+"-base",h),this._separator=dt("div",n+"-separator",h),this._overlaysList=dt("div",n+"-overlays",h),o.appendChild(h)},_getLayer:function(n){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===n)return this._layers[o]},_addLayer:function(n,o,l){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:o,overlay:l}),this.options.sortLayers&&this._layers.sort(c(function(h,d){return this.options.sortFunction(h.layer,d.layer,h.name,d.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;io(this._baseLayersList),io(this._overlaysList),this._layerControlInputs=[];var n,o,l,h,d=0;for(l=0;l<this._layers.length;l++)h=this._layers[l],this._addItem(h),o=o||h.overlay,n=n||!h.overlay,d+=h.overlay?0:1;return this.options.hideSingleBase&&(n=n&&d>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=o&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var o=this._getLayer(f(n.target)),l=o.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;l&&this._map.fire(l,o)},_createRadioElement:function(n,o){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=l,h.firstChild},_addItem:function(n){var o=document.createElement("label"),l=this._map.hasLayer(n.layer),h;n.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=l):h=this._createRadioElement("leaflet-base-layers_"+f(this),l),this._layerControlInputs.push(h),h.layerId=f(n.layer),at(h,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+n.name;var p=document.createElement("div");o.appendChild(p),p.appendChild(h),p.appendChild(d);var y=n.overlay?this._overlaysList:this._baseLayersList;return y.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){var n=this._layerControlInputs,o,l,h=[],d=[];this._handlingClick=!0;for(var p=n.length-1;p>=0;p--)o=n[p],l=this._getLayer(o.layerId).layer,o.checked?h.push(l):o.checked||d.push(l);for(p=0;p<d.length;p++)this._map.hasLayer(d[p])&&this._map.removeLayer(d[p]);for(p=0;p<h.length;p++)this._map.hasLayer(h[p])||this._map.addLayer(h[p]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,o,l,h=this._map.getZoom(),d=n.length-1;d>=0;d--)o=n[d],l=this._getLayer(o.layerId).layer,o.disabled=l.options.minZoom!==void 0&&h<l.options.minZoom||l.options.maxZoom!==void 0&&h>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),F_=function(n,o,l){return new Ac(n,o,l)},ea=Te.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(n){var o="leaflet-control-zoom",l=dt("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",l,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,o,l,h,d){var p=dt("a",l,h);return p.innerHTML=n,p.href="#",p.title=o,p.setAttribute("role","button"),p.setAttribute("aria-label",o),cs(p),at(p,"click",Je),at(p,"click",d,this),at(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var n=this._map,o="leaflet-disabled";Bt(this._zoomInButton,o),Bt(this._zoomOutButton,o),(this._disabled||n._zoom===n.getMinZoom())&&J(this._zoomOutButton,o),(this._disabled||n._zoom===n.getMaxZoom())&&J(this._zoomInButton,o)}});ht.mergeOptions({zoomControl:!0}),ht.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ea,this.addControl(this.zoomControl))});var z_=function(n){return new ea(n)},Mc=Te.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var o="leaflet-control-scale",l=dt("div",o),h=this.options;return this._addScales(h,o+"-line",l),n.on(h.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),l},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,o,l){n.metric&&(this._mScale=dt("div",o,l)),n.imperial&&(this._iScale=dt("div",o,l))},_update:function(){var n=this._map,o=n.getSize().y/2,l=n.distance(n.containerPointToLatLng([0,o]),n.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(l)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var o=this._getRoundNum(n),l=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,l,o/n)},_updateImperial:function(n){var o=n*3.2808399,l,h,d;o>5280?(l=o/5280,h=this._getRoundNum(l),this._updateScale(this._iScale,h+" mi",h/l)):(d=this._getRoundNum(o),this._updateScale(this._iScale,d+" ft",d/o))},_updateScale:function(n,o,l){n.style.width=Math.round(this.options.maxWidth*l)+"px",n.innerHTML=o},_getRoundNum:function(n){var o=Math.pow(10,(Math.floor(n)+"").length-1),l=n/o;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,o*l}}),W_=function(n){return new Mc(n)},na=Te.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(n){D(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=dt("div","leaflet-control-attribution"),cs(this._container);for(var o in n._layers)n._layers[o].getAttribution&&this.addAttribution(n._layers[o].getAttribution());return this._update(),this._container},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(!!this._map){var n=[];for(var o in this._attributions)this._attributions[o]&&n.push(o);var l=[];this.options.prefix&&l.push(this.options.prefix),n.length&&l.push(n.join(", ")),this._container.innerHTML=l.join(" | ")}}});ht.mergeOptions({attributionControl:!0}),ht.addInitHook(function(){this.options.attributionControl&&new na().addTo(this)});var H_=function(n){return new na(n)};Te.Layers=Ac,Te.Zoom=ea,Te.Scale=Mc,Te.Attribution=na,hs.layers=F_,hs.zoom=z_,hs.scale=W_,hs.attribution=H_;var Fe=me.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fe.addTo=function(n,o){return n.addHandler(o,this),this};var U_={Events:wt},Nc=De?"touchstart mousedown":"mousedown",Rc={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ia={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Wn=bt.extend({options:{clickTolerance:3},initialize:function(n,o,l,h){D(this,h),this._element=n,this._dragStartTarget=o||n,this._preventOutline=l},enable:function(){this._enabled||(at(this._dragStartTarget,Nc,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Wn._dragging===this&&this.finishDrag(),Ht(this._dragStartTarget,Nc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(!(n._simulated||!this._enabled)&&(this._moved=!1,!Hr(this._element,"leaflet-zoom-anim")&&!(Wn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Wn._dragging=this,this._preventOutline&&qr(this._element),$r(),rs(),!this._moving))){this.fire("down");var o=n.touches?n.touches[0]:n,l=Pc(this._element);this._startPoint=new H(o.clientX,o.clientY),this._parentScale=Gr(l),at(document,ia[n.type],this._onMove,this),at(document,Rc[n.type],this._onUp,this)}},_onMove:function(n){if(!(n._simulated||!this._enabled)){if(n.touches&&n.touches.length>1){this._moved=!0;return}var o=n.touches&&n.touches.length===1?n.touches[0]:n,l=new H(o.clientX,o.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,ye(n),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=wn(this._element).subtract(l),J(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),J(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,Pt(this._animRequest),this._lastEvent=n,this._animRequest=gt(this._updatePosition,this,!0))}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Ut(this._element,this._newPos),this.fire("drag",n)},_onUp:function(n){n._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){Bt(document.body,"leaflet-dragging"),this._lastTarget&&(Bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var n in ia)Ht(document,ia[n],this._onMove,this),Ht(document,Rc[n],this._onUp,this);Vr(),as(),this._moved&&this._moving&&(Pt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Wn._dragging=!1}});function Oc(n,o){if(!o||!n.length)return n.slice();var l=o*o;return n=V_(n,l),n=$_(n,l),n}function Dc(n,o,l){return Math.sqrt(us(n,o,l,!0))}function Z_(n,o,l){return us(n,o,l)}function $_(n,o){var l=n.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new h(l);d[0]=d[l-1]=1,sa(n,d,o,0,l-1);var p,y=[];for(p=0;p<l;p++)d[p]&&y.push(n[p]);return y}function sa(n,o,l,h,d){var p=0,y,C,x;for(C=h+1;C<=d-1;C++)x=us(n[C],n[h],n[d],!0),x>p&&(y=C,p=x);p>l&&(o[y]=1,sa(n,o,l,h,y),sa(n,o,l,y,d))}function V_(n,o){for(var l=[n[0]],h=1,d=0,p=n.length;h<p;h++)j_(n[h],n[d])>o&&(l.push(n[h]),d=h);return d<p-1&&l.push(n[p-1]),l}var Bc;function Fc(n,o,l,h,d){var p=h?Bc:Hn(n,l),y=Hn(o,l),C,x,P;for(Bc=y;;){if(!(p|y))return[n,o];if(p&y)return!1;C=p||y,x=ho(n,o,C,l,d),P=Hn(x,l),C===p?(n=x,p=P):(o=x,y=P)}}function ho(n,o,l,h,d){var p=o.x-n.x,y=o.y-n.y,C=h.min,x=h.max,P,z;return l&8?(P=n.x+p*(x.y-n.y)/y,z=x.y):l&4?(P=n.x+p*(C.y-n.y)/y,z=C.y):l&2?(P=x.x,z=n.y+y*(x.x-n.x)/p):l&1&&(P=C.x,z=n.y+y*(C.x-n.x)/p),new H(P,z,d)}function Hn(n,o){var l=0;return n.x<o.min.x?l|=1:n.x>o.max.x&&(l|=2),n.y<o.min.y?l|=4:n.y>o.max.y&&(l|=8),l}function j_(n,o){var l=o.x-n.x,h=o.y-n.y;return l*l+h*h}function us(n,o,l,h){var d=o.x,p=o.y,y=l.x-d,C=l.y-p,x=y*y+C*C,P;return x>0&&(P=((n.x-d)*y+(n.y-p)*C)/x,P>1?(d=l.x,p=l.y):P>0&&(d+=y*P,p+=C*P)),y=n.x-d,C=n.y-p,h?y*y+C*C:new H(d,p)}function tn(n){return!j(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]!="undefined"}function zc(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),tn(n)}var q_={simplify:Oc,pointToSegmentDistance:Dc,closestPointOnSegment:Z_,clipSegment:Fc,_getEdgeIntersection:ho,_getBitCode:Hn,_sqClosestPointOnSegment:us,isFlat:tn,_flat:zc};function Wc(n,o,l){var h,d=[1,4,2,8],p,y,C,x,P,z,G,ft;for(p=0,z=n.length;p<z;p++)n[p]._code=Hn(n[p],o);for(C=0;C<4;C++){for(G=d[C],h=[],p=0,z=n.length,y=z-1;p<z;y=p++)x=n[p],P=n[y],x._code&G?P._code&G||(ft=ho(P,x,G,o,l),ft._code=Hn(ft,o),h.push(ft)):(P._code&G&&(ft=ho(P,x,G,o,l),ft._code=Hn(ft,o),h.push(ft)),h.push(x));n=h}return n}var G_={clipPolygon:Wc},oa={project:function(n){return new H(n.lng,n.lat)},unproject:function(n){return new yt(n.y,n.x)},bounds:new vt([-180,-90],[180,90])},ra={R:6378137,R_MINOR:6356752314245179e-9,bounds:new vt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var o=Math.PI/180,l=this.R,h=n.lat*o,d=this.R_MINOR/l,p=Math.sqrt(1-d*d),y=p*Math.sin(h),C=Math.tan(Math.PI/4-h/2)/Math.pow((1-y)/(1+y),p/2);return h=-l*Math.log(Math.max(C,1e-10)),new H(n.lng*o*l,h)},unproject:function(n){for(var o=180/Math.PI,l=this.R,h=this.R_MINOR/l,d=Math.sqrt(1-h*h),p=Math.exp(-n.y/l),y=Math.PI/2-2*Math.atan(p),C=0,x=.1,P;C<15&&Math.abs(x)>1e-7;C++)P=d*Math.sin(y),P=Math.pow((1-P)/(1+P),d/2),x=Math.PI/2-2*Math.atan(p*P)-y,y+=x;return new yt(y*o,n.x*o/l)}},K_={LonLat:oa,Mercator:ra,SphericalMercator:Re},Y_=r({},de,{code:"EPSG:3395",projection:ra,transformation:function(){var n=.5/(Math.PI*ra.R);return Ye(n,.5,-n,.5)}()}),Hc=r({},de,{code:"EPSG:4326",projection:oa,transformation:Ye(1/180,1,-1/180,.5)}),Q_=r({},Vt,{projection:oa,transformation:Ye(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,o){var l=o.lng-n.lng,h=o.lat-n.lat;return Math.sqrt(l*l+h*h)},infinite:!0});Vt.Earth=de,Vt.EPSG3395=Y_,Vt.EPSG3857=v,Vt.EPSG900913=b,Vt.EPSG4326=Hc,Vt.Simple=Q_;var Pe=bt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[f(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[f(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var o=n.target;if(!!o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var l=this.getEvents();o.on(l,this),this.once("remove",function(){o.off(l,this)},this)}this.onAdd(o),this.getAttribution&&o.attributionControl&&o.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),o.fire("layeradd",{layer:this})}}});ht.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(n);return this._layers[o]?this:(this._layers[o]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var o=f(n);return this._layers[o]?(this._loaded&&n.onRemove(this),n.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(n.getAttribution()),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return!!n&&f(n)in this._layers},eachLayer:function(n,o){for(var l in this._layers)n.call(o,this._layers[l]);return this},_addLayers:function(n){n=n?j(n)?n:[n]:[];for(var o=0,l=n.length;o<l;o++)this.addLayer(n[o])},_addZoomLimit:function(n){(isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[f(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var o=f(n);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,o=-1/0,l=this._getZoomSpan();for(var h in this._zoomBoundLayers){var d=this._zoomBoundLayers[h].options;n=d.minZoom===void 0?n:Math.min(n,d.minZoom),o=d.maxZoom===void 0?o:Math.max(o,d.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=n===1/0?void 0:n,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vi=Pe.extend({initialize:function(n,o){D(this,o),this._layers={};var l,h;if(n)for(l=0,h=n.length;l<h;l++)this.addLayer(n[l])},addLayer:function(n){var o=this.getLayerId(n);return this._layers[o]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var o=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(n){if(!n)return!1;var o=typeof n=="number"?n:this.getLayerId(n);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var o=Array.prototype.slice.call(arguments,1),l,h;for(l in this._layers)h=this._layers[l],h[n]&&h[n].apply(h,o);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,o){for(var l in this._layers)n.call(o,this._layers[l]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return f(n)}}),X_=function(n,o){return new vi(n,o)},yi=vi.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),vi.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),vi.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Rt;for(var o in this._layers){var l=this._layers[o];n.extend(l.getBounds?l.getBounds():l.getLatLng())}return n}}),J_=function(n,o){return new yi(n,o)},wi=me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(n){D(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,o){var l=this._getIconUrl(n);if(!l){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(l,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,n),h},_setIconStyles:function(n,o){var l=this.options,h=l[o+"Size"];typeof h=="number"&&(h=[h,h]);var d=ot(h),p=ot(o==="shadow"&&l.shadowAnchor||l.iconAnchor||d&&d.divideBy(2,!0));n.className="leaflet-marker-"+o+" "+(l.className||""),p&&(n.style.marginLeft=-p.x+"px",n.style.marginTop=-p.y+"px"),d&&(n.style.width=d.x+"px",n.style.height=d.y+"px")},_createImg:function(n,o){return o=o||document.createElement("img"),o.src=n,o},_getIconUrl:function(n){return yn&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function tp(n){return new wi(n)}var ds=wi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return ds.imagePath||(ds.imagePath=this._detectIconPath()),(this.options.imagePath||ds.imagePath)+wi.prototype._getIconUrl.call(this,n)},_detectIconPath:function(){var n=dt("div","leaflet-default-icon-path",document.body),o=os(n,"background-image")||os(n,"backgroundImage");return document.body.removeChild(n),o===null||o.indexOf("url")!==0?o="":o=o.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),o}}),Uc=Fe.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Wn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),J(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var o=this._marker,l=o._map,h=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,p=wn(o._icon),y=l.getPixelBounds(),C=l.getPixelOrigin(),x=Kt(y.min._subtract(C).add(d),y.max._subtract(C).subtract(d));if(!x.contains(p)){var P=ot((Math.max(x.max.x,p.x)-x.max.x)/(y.max.x-x.max.x)-(Math.min(x.min.x,p.x)-x.min.x)/(y.min.x-x.min.x),(Math.max(x.max.y,p.y)-x.max.y)/(y.max.y-x.max.y)-(Math.min(x.min.y,p.y)-x.min.y)/(y.min.y-x.min.y)).multiplyBy(h);l.panBy(P,{animate:!1}),this._draggable._newPos._add(P),this._draggable._startPos._add(P),Ut(o._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=gt(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(Pt(this._panRequest),this._panRequest=gt(this._adjustPan.bind(this,n)))},_onDrag:function(n){var o=this._marker,l=o._shadow,h=wn(o._icon),d=o._map.layerPointToLatLng(h);l&&Ut(l,h),o._latlng=d,n.latlng=d,n.oldLatLng=this._oldLatLng,o.fire("move",n).fire("drag",n)},_onDragEnd:function(n){Pt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),uo=Pe.extend({options:{icon:new ds,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,o){D(this,o),this._latlng=Mt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var o=this._latlng;return this._latlng=Mt(n),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=n.icon.createIcon(this._icon),h=!1;l!==this._icon&&(this._icon&&this._removeIcon(),h=!0,n.title&&(l.title=n.title),l.tagName==="IMG"&&(l.alt=n.alt||"")),J(l,o),n.keyboard&&(l.tabIndex="0"),this._icon=l,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=n.icon.createShadow(this._shadow),p=!1;d!==this._shadow&&(this._removeShadow(),p=!0),d&&(J(d,o),d.alt=""),this._shadow=d,n.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&p&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Ot(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ot(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Ut(this._icon,n),this._shadow&&Ut(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(o)},_initInteraction:function(){if(!!this.options.interactive&&(J(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Uc)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Uc(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&ve(this._icon,n),this._shadow&&ve(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ep(n,o){return new uo(n,o)}var bn=Pe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return D(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),fo=bn.extend({options:{fill:!0,radius:10},initialize:function(n,o){D(this,o),this._latlng=Mt(n),this._radius=this.options.radius},setLatLng:function(n){var o=this._latlng;return this._latlng=Mt(n),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var o=n&&n.radius||this._radius;return bn.prototype.setStyle.call(this,n),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,o=this._radiusY||n,l=this._clickTolerance(),h=[n+l,o+l];this._pxBounds=new vt(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function np(n,o){return new fo(n,o)}var aa=fo.extend({initialize:function(n,o,l){if(typeof o=="number"&&(o=r({},l,{radius:o})),D(this,o),this._latlng=Mt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Rt(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:bn.prototype.setStyle,_project:function(){var n=this._latlng.lng,o=this._latlng.lat,l=this._map,h=l.options.crs;if(h.distance===de.distance){var d=Math.PI/180,p=this._mRadius/de.R/d,y=l.project([o+p,n]),C=l.project([o-p,n]),x=y.add(C).divideBy(2),P=l.unproject(x).lat,z=Math.acos((Math.cos(p*d)-Math.sin(o*d)*Math.sin(P*d))/(Math.cos(o*d)*Math.cos(P*d)))/d;(isNaN(z)||z===0)&&(z=p/Math.cos(Math.PI/180*o)),this._point=x.subtract(l.getPixelOrigin()),this._radius=isNaN(z)?0:x.x-l.project([P,n-z]).x,this._radiusY=x.y-y.y}else{var G=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(G).x}this._updateBounds()}});function ip(n,o,l){return new aa(n,o,l)}var en=bn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,o){D(this,o),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var o=1/0,l=null,h=us,d,p,y=0,C=this._parts.length;y<C;y++)for(var x=this._parts[y],P=1,z=x.length;P<z;P++){d=x[P-1],p=x[P];var G=h(n,d,p,!0);G<o&&(o=G,l=h(n,d,p))}return l&&(l.distance=Math.sqrt(o)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,o,l,h,d,p,y,C=this._rings[0],x=C.length;if(!x)return null;for(n=0,o=0;n<x-1;n++)o+=C[n].distanceTo(C[n+1])/2;if(o===0)return this._map.layerPointToLatLng(C[0]);for(n=0,h=0;n<x-1;n++)if(d=C[n],p=C[n+1],l=d.distanceTo(p),h+=l,h>o)return y=(h-o)/l,this._map.layerPointToLatLng([p.x-y*(p.x-d.x),p.y-y*(p.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(n,o){return o=o||this._defaultShape(),n=Mt(n),o.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Rt,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var o=[],l=tn(n),h=0,d=n.length;h<d;h++)l?(o[h]=Mt(n[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(n[h]);return o},_project:function(){var n=new vt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),o=new H(n,n);this._pxBounds=new vt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)])},_projectLatlngs:function(n,o,l){var h=n[0]instanceof yt,d=n.length,p,y;if(h){for(y=[],p=0;p<d;p++)y[p]=this._map.latLngToLayerPoint(n[p]),l.extend(y[p]);o.push(y)}else for(p=0;p<d;p++)this._projectLatlngs(n[p],o,l)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,l,h,d,p,y,C,x;for(l=0,d=0,p=this._rings.length;l<p;l++)for(x=this._rings[l],h=0,y=x.length;h<y-1;h++)C=Fc(x[h],x[h+1],n,h,!0),C&&(o[d]=o[d]||[],o[d].push(C[0]),(C[1]!==x[h+1]||h===y-2)&&(o[d].push(C[1]),d++))}},_simplifyPoints:function(){for(var n=this._parts,o=this.options.smoothFactor,l=0,h=n.length;l<h;l++)n[l]=Oc(n[l],o)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,o){var l,h,d,p,y,C,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(l=0,p=this._parts.length;l<p;l++)for(C=this._parts[l],h=0,y=C.length,d=y-1;h<y;d=h++)if(!(!o&&h===0)&&Dc(n,C[d],C[h])<=x)return!0;return!1}});function sp(n,o){return new en(n,o)}en._flat=zc;var bi=en.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,o,l,h,d,p,y,C,x,P=this._rings[0],z=P.length;if(!z)return null;for(p=y=C=0,n=0,o=z-1;n<z;o=n++)l=P[n],h=P[o],d=l.y*h.x-h.y*l.x,y+=(l.x+h.x)*d,C+=(l.y+h.y)*d,p+=d*3;return p===0?x=P[0]:x=[y/p,C/p],this._map.layerPointToLatLng(x)},_convertLatLngs:function(n){var o=en.prototype._convertLatLngs.call(this,n),l=o.length;return l>=2&&o[0]instanceof yt&&o[0].equals(o[l-1])&&o.pop(),o},_setLatLngs:function(n){en.prototype._setLatLngs.call(this,n),tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,o=this.options.weight,l=new H(o,o);if(n=new vt(n.min.subtract(l),n.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,d=this._rings.length,p;h<d;h++)p=Wc(this._rings[h],n,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var o=!1,l,h,d,p,y,C,x,P;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(p=0,x=this._parts.length;p<x;p++)for(l=this._parts[p],y=0,P=l.length,C=P-1;y<P;C=y++)h=l[y],d=l[C],h.y>n.y!=d.y>n.y&&n.x<(d.x-h.x)*(n.y-h.y)/(d.y-h.y)+h.x&&(o=!o);return o||en.prototype._containsPoint.call(this,n,!0)}});function op(n,o){return new bi(n,o)}var nn=yi.extend({initialize:function(n,o){D(this,o),this._layers={},n&&this.addData(n)},addData:function(n){var o=j(n)?n:n.features,l,h,d;if(o){for(l=0,h=o.length;l<h;l++)d=o[l],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var p=this.options;if(p.filter&&!p.filter(n))return this;var y=la(n,p);return y?(y.feature=mo(n),y.defaultOptions=y.options,this.resetStyle(y),p.onEachFeature&&p.onEachFeature(n,y),this.addLayer(y)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=r({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(o){this._setLayerStyle(o,n)},this)},_setLayerStyle:function(n,o){n.setStyle&&(typeof o=="function"&&(o=o(n.feature)),n.setStyle(o))}});function la(n,o){var l=n.type==="Feature"?n.geometry:n,h=l?l.coordinates:null,d=[],p=o&&o.pointToLayer,y=o&&o.coordsToLatLng||ca,C,x,P,z;if(!h&&!l)return null;switch(l.type){case"Point":return C=y(h),Zc(p,n,C,o);case"MultiPoint":for(P=0,z=h.length;P<z;P++)C=y(h[P]),d.push(Zc(p,n,C,o));return new yi(d);case"LineString":case"MultiLineString":return x=_o(h,l.type==="LineString"?0:1,y),new en(x,o);case"Polygon":case"MultiPolygon":return x=_o(h,l.type==="Polygon"?1:2,y),new bi(x,o);case"GeometryCollection":for(P=0,z=l.geometries.length;P<z;P++){var G=la({geometry:l.geometries[P],type:"Feature",properties:n.properties},o);G&&d.push(G)}return new yi(d);default:throw new Error("Invalid GeoJSON object.")}}function Zc(n,o,l,h){return n?n(o,l):new uo(l,h&&h.markersInheritOptions&&h)}function ca(n){return new yt(n[1],n[0],n[2])}function _o(n,o,l){for(var h=[],d=0,p=n.length,y;d<p;d++)y=o?_o(n[d],o-1,l):(l||ca)(n[d]),h.push(y);return h}function ha(n,o){return o=typeof o=="number"?o:6,n.alt!==void 0?[w(n.lng,o),w(n.lat,o),w(n.alt,o)]:[w(n.lng,o),w(n.lat,o)]}function po(n,o,l,h){for(var d=[],p=0,y=n.length;p<y;p++)d.push(o?po(n[p],o-1,l,h):ha(n[p],h));return!o&&l&&d.push(d[0]),d}function Ci(n,o){return n.feature?r({},n.feature,{geometry:o}):mo(o)}function mo(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var ua={toGeoJSON:function(n){return Ci(this,{type:"Point",coordinates:ha(this.getLatLng(),n)})}};uo.include(ua),aa.include(ua),fo.include(ua),en.include({toGeoJSON:function(n){var o=!tn(this._latlngs),l=po(this._latlngs,o?1:0,!1,n);return Ci(this,{type:(o?"Multi":"")+"LineString",coordinates:l})}}),bi.include({toGeoJSON:function(n){var o=!tn(this._latlngs),l=o&&!tn(this._latlngs[0]),h=po(this._latlngs,l?2:o?1:0,!0,n);return o||(h=[h]),Ci(this,{type:(l?"Multi":"")+"Polygon",coordinates:h})}}),vi.include({toMultiPoint:function(n){var o=[];return this.eachLayer(function(l){o.push(l.toGeoJSON(n).geometry.coordinates)}),Ci(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(n){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(n);var l=o==="GeometryCollection",h=[];return this.eachLayer(function(d){if(d.toGeoJSON){var p=d.toGeoJSON(n);if(l)h.push(p.geometry);else{var y=mo(p);y.type==="FeatureCollection"?h.push.apply(h,y.features):h.push(y)}}}),l?Ci(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function $c(n,o){return new nn(n,o)}var rp=$c,go=Pe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,o,l){this._url=n,this._bounds=Wt(o),D(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(J(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ot(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&mi(this._image),this},bringToBack:function(){return this._map&&gi(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Wt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",o=this._image=n?this._url:dt("img");if(J(o,"leaflet-image-layer"),this._zoomAnimated&&J(o,"leaflet-zoom-animated"),this.options.className&&J(o,this.options.className),o.onselectstart=m,o.onmousemove=m,o.onload=c(this.fire,this,"load"),o.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(n){var o=this._map.getZoomScale(n.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Fn(this._image,l,o)},_reset:function(){var n=this._image,o=new vt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=o.getSize();Ut(n,o.min),n.style.width=l.x+"px",n.style.height=l.y+"px"},_updateOpacity:function(){ve(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)}}),ap=function(n,o,l){return new go(n,o,l)},Vc=go.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var n=this._url.tagName==="VIDEO",o=this._image=n?this._url:dt("video");if(J(o,"leaflet-image-layer"),this._zoomAnimated&&J(o,"leaflet-zoom-animated"),this.options.className&&J(o,this.options.className),o.onselectstart=m,o.onmousemove=m,o.onloadeddata=c(this.fire,this,"load"),n){for(var l=o.getElementsByTagName("source"),h=[],d=0;d<l.length;d++)h.push(l[d].src);this._url=l.length>0?h:[o.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted;for(var p=0;p<this._url.length;p++){var y=dt("source");y.src=this._url[p],o.appendChild(y)}}});function lp(n,o,l){return new Vc(n,o,l)}var jc=go.extend({_initImage:function(){var n=this._image=this._url;J(n,"leaflet-image-layer"),this._zoomAnimated&&J(n,"leaflet-zoom-animated"),this.options.className&&J(n,this.options.className),n.onselectstart=m,n.onmousemove=m}});function cp(n,o,l){return new jc(n,o,l)}var sn=Pe.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(n,o){D(this,n),this._source=o},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&ve(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&ve(this._container,1),this.bringToFront()},onRemove:function(n){n._fadeAnimated?(ve(this._container,0),this._removeTimeout=setTimeout(c(Ot,void 0,this._container),200)):Ot(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Mt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&mi(this._container),this},bringToBack:function(){return this._map&&gi(this._container),this},_prepareOpen:function(n,o,l){if(o instanceof Pe||(l=o,o=n),o instanceof yi)for(var h in n._layers){o=n._layers[h];break}if(!l)if(o.getCenter)l=o.getCenter();else if(o.getLatLng)l=o.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=o,this.update(),l},_updateContent:function(){if(!!this._content){var n=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")n.innerHTML=o;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var n=this._map.latLngToLayerPoint(this._latlng),o=ot(this.options.offset),l=this._getAnchor();this._zoomAnimated?Ut(this._container,n.add(l)):o=o.add(n).add(l);var h=this._containerBottom=-o.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),xi=sn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n.openPopup(this),this},onAdd:function(n){sn.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bn||this._source.on("preclick",zn))},onRemove:function(n){sn.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bn||this._source.off("preclick",zn))},getEvents:function(){var n=sn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this._close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var n="leaflet-popup",o=this._container=dt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=dt("div",n+"-content-wrapper",o);if(this._contentNode=dt("div",n+"-content",l),cs(o),Qr(this._contentNode),at(o,"contextmenu",zn),this._tipContainer=dt("div",n+"-tip-container",o),this._tip=dt("div",n+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=dt("a",n+"-close-button",o);h.href="#close",h.innerHTML="&#215;",at(h,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var n=this._contentNode,o=n.style;o.width="",o.whiteSpace="nowrap";var l=n.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),o.width=l+1+"px",o.whiteSpace="",o.height="";var h=n.offsetHeight,d=this.options.maxHeight,p="leaflet-popup-scrolled";d&&h>d?(o.height=d+"px",J(n,p)):Bt(n,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),l=this._getAnchor();Ut(this._container,o.add(l))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var n=this._map,o=parseInt(os(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+o,h=this._containerWidth,d=new H(this._containerLeft,-l-this._containerBottom);d._add(wn(this._container));var p=n.layerPointToContainerPoint(d),y=ot(this.options.autoPanPadding),C=ot(this.options.autoPanPaddingTopLeft||y),x=ot(this.options.autoPanPaddingBottomRight||y),P=n.getSize(),z=0,G=0;p.x+h+x.x>P.x&&(z=p.x+h-P.x+x.x),p.x-z-C.x<0&&(z=p.x-C.x),p.y+l+x.y>P.y&&(G=p.y+l-P.y+x.y),p.y-G-C.y<0&&(G=p.y-C.y),(z||G)&&n.fire("autopanstart").panBy([z,G])}},_onCloseButtonClick:function(n){this._close(),Je(n)},_getAnchor:function(){return ot(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),hp=function(n,o){return new xi(n,o)};ht.mergeOptions({closePopupOnClick:!0}),ht.include({openPopup:function(n,o,l){return n instanceof xi||(n=new xi(l).setContent(n)),o&&n.setLatLng(o),this.hasLayer(n)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=n,this.addLayer(n))},closePopup:function(n){return(!n||n===this._popup)&&(n=this._popup,this._popup=null),n&&this.removeLayer(n),this}}),Pe.include({bindPopup:function(n,o){return n instanceof xi?(D(n,o),this._popup=n,n._source=this):((!this._popup||o)&&(this._popup=new xi(o,this)),this._popup.setContent(n)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n,o){return this._popup&&this._map&&(o=this._popup._prepareOpen(this,n,o),this._map.openPopup(this._popup,o)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(n){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(n)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){var o=n.layer||n.target;if(!!this._popup&&!!this._map){if(Je(n),o instanceof bn){this.openPopup(n.layer||n.target,n.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===o?this.closePopup():this.openPopup(o,n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ei=sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(n){sn.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(n){sn.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var n=sn.prototype.getEvents.call(this);return De&&!this.options.permanent&&(n.preclick=this._close),n},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var n="leaflet-tooltip",o=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=dt("div",o)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var o,l,h=this._map,d=this._container,p=h.latLngToContainerPoint(h.getCenter()),y=h.layerPointToContainerPoint(n),C=this.options.direction,x=d.offsetWidth,P=d.offsetHeight,z=ot(this.options.offset),G=this._getAnchor();C==="top"?(o=x/2,l=P):C==="bottom"?(o=x/2,l=0):C==="center"?(o=x/2,l=P/2):C==="right"?(o=0,l=P/2):C==="left"?(o=x,l=P/2):y.x<p.x?(C="right",o=0,l=P/2):(C="left",o=x+(z.x+G.x)*2,l=P/2),n=n.subtract(ot(o,l,!0)).add(z).add(G),Bt(d,"leaflet-tooltip-right"),Bt(d,"leaflet-tooltip-left"),Bt(d,"leaflet-tooltip-top"),Bt(d,"leaflet-tooltip-bottom"),J(d,"leaflet-tooltip-"+C),Ut(d,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&ve(this._container,n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(o)},_getAnchor:function(){return ot(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),up=function(n,o){return new Ei(n,o)};ht.include({openTooltip:function(n,o,l){return n instanceof Ei||(n=new Ei(l).setContent(n)),o&&n.setLatLng(o),this.hasLayer(n)?this:this.addLayer(n)},closeTooltip:function(n){return n&&this.removeLayer(n),this}}),Pe.include({bindTooltip:function(n,o){return n instanceof Ei?(D(n,o),this._tooltip=n,n._source=this):((!this._tooltip||o)&&(this._tooltip=new Ei(o,this)),this._tooltip.setContent(n)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var o=n?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),De&&(l.click=this._openTooltip)),this[o](l),this._tooltipHandlersAdded=!n}},openTooltip:function(n,o){return this._tooltip&&this._map&&(o=this._tooltip._prepareOpen(this,n,o),this._map.openTooltip(this._tooltip,o),this._tooltip.options.interactive&&this._tooltip._container&&(J(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Bt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(n){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(n)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_openTooltip:function(n){var o=n.layer||n.target;!this._tooltip||!this._map||this.openTooltip(o,this._tooltip.options.sticky?n.latlng:void 0)},_moveTooltip:function(n){var o=n.latlng,l,h;this._tooltip.options.sticky&&n.originalEvent&&(l=this._map.mouseEventToContainerPoint(n.originalEvent),h=this._map.containerPointToLayerPoint(l),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var qc=wi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var o=n&&n.tagName==="DIV"?n:document.createElement("div"),l=this.options;if(l.html instanceof Element?(io(o),o.appendChild(l.html)):o.innerHTML=l.html!==!1?l.html:"",l.bgPos){var h=ot(l.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function dp(n){return new qc(n)}wi.Default=ds;var fs=Pe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Jt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){D(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Ot(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof H?n:new H(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var o=this.getPane().children,l=-n(-1/0,1/0),h=0,d=o.length,p;h<d;h++)p=o[h].style.zIndex,o[h]!==this._container&&p&&(l=n(l,+p));isFinite(l)&&(this.options.zIndex=l+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!F){ve(this._container,this.options.opacity);var n=+new Date,o=!1,l=!1;for(var h in this._tiles){var d=this._tiles[h];if(!(!d.current||!d.loaded)){var p=Math.min(1,(n-d.loaded)/200);ve(d.el,p),p<1?o=!0:(d.active?l=!0:this._onOpaqueTile(d),d.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),o&&(Pt(this._fadeFrame),this._fadeFrame=gt(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,o=this.options.maxZoom;if(n!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===n?(this._levels[l].el.style.zIndex=o-Math.abs(n-l),this._onUpdateLevel(l)):(Ot(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var h=this._levels[n],d=this._map;return h||(h=this._levels[n]={},h.el=dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=d.project(d.unproject(d.getPixelOrigin()),n).round(),h.zoom=n,this._setZoomTransform(h,d.getCenter(),d.getZoom()),m(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(!!this._map){var n,o,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)o=this._tiles[n],o.retain=o.current;for(n in this._tiles)if(o=this._tiles[n],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var o in this._tiles)this._tiles[o].coords.z===n&&this._removeTile(o)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Ot(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,o,l,h){var d=Math.floor(n/2),p=Math.floor(o/2),y=l-1,C=new H(+d,+p);C.z=+y;var x=this._tileCoordsToKey(C),P=this._tiles[x];return P&&P.active?(P.retain=!0,!0):(P&&P.loaded&&(P.retain=!0),y>h?this._retainParent(d,p,y,h):!1)},_retainChildren:function(n,o,l,h){for(var d=2*n;d<2*n+2;d++)for(var p=2*o;p<2*o+2;p++){var y=new H(d,p);y.z=l+1;var C=this._tileCoordsToKey(y),x=this._tiles[C];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);l+1<h&&this._retainChildren(d,p,l+1,h)}},_resetView:function(n){var o=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var o=this.options;return o.minNativeZoom!==void 0&&n<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<n?o.maxNativeZoom:n},_setView:function(n,o,l,h){var d=Math.round(o);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var p=this.options.updateWhenZooming&&d!==this._tileZoom;(!h||p)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(n),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(n,o)},_setZoomTransforms:function(n,o){for(var l in this._levels)this._setZoomTransform(this._levels[l],n,o)},_setZoomTransform:function(n,o,l){var h=this._map.getZoomScale(l,n.zoom),d=n.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,l)).round();It?Fn(n.el,d,h):Ut(n.el,d)},_resetGrid:function(){var n=this._map,o=n.options.crs,l=this._tileSize=this.getTileSize(),h=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,o.wrapLng[0]],h).x/l.x),Math.ceil(n.project([0,o.wrapLng[1]],h).x/l.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([o.wrapLat[0],0],h).y/l.x),Math.ceil(n.project([o.wrapLat[1],0],h).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var o=this._map,l=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(l,this._tileZoom),d=o.project(n,this._tileZoom).floor(),p=o.getSize().divideBy(h*2);return new vt(d.subtract(p),d.add(p))},_update:function(n){var o=this._map;if(!!o){var l=this._clampZoom(o.getZoom());if(n===void 0&&(n=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(n),d=this._pxBoundsToTileRange(h),p=d.getCenter(),y=[],C=this.options.keepBuffer,x=new vt(d.getBottomLeft().subtract([C,-C]),d.getTopRight().add([C,-C]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var P in this._tiles){var z=this._tiles[P].coords;(z.z!==this._tileZoom||!x.contains(new H(z.x,z.y)))&&(this._tiles[P].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(n,l);return}for(var G=d.min.y;G<=d.max.y;G++)for(var ft=d.min.x;ft<=d.max.x;ft++){var on=new H(ft,G);if(on.z=this._tileZoom,!!this._isValidTile(on)){var Un=this._tiles[this._tileCoordsToKey(on)];Un?Un.current=!0:y.push(on)}}if(y.sort(function(Cn,da){return Cn.distanceTo(p)-da.distanceTo(p)}),y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yo=document.createDocumentFragment();for(ft=0;ft<y.length;ft++)this._addTile(y[ft],yo);this._level.el.appendChild(yo)}}}},_isValidTile:function(n){var o=this._map.options.crs;if(!o.infinite){var l=this._globalTileRange;if(!o.wrapLng&&(n.x<l.min.x||n.x>l.max.x)||!o.wrapLat&&(n.y<l.min.y||n.y>l.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(n);return Wt(this.options.bounds).overlaps(h)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var o=this._map,l=this.getTileSize(),h=n.scaleBy(l),d=h.add(l),p=o.unproject(h,n.z),y=o.unproject(d,n.z);return[p,y]},_tileCoordsToBounds:function(n){var o=this._tileCoordsToNwSe(n),l=new Rt(o[0],o[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var o=n.split(":"),l=new H(+o[0],+o[1]);return l.z=+o[2],l},_removeTile:function(n){var o=this._tiles[n];!o||(Ot(o.el),delete this._tiles[n],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){J(n,"leaflet-tile");var o=this.getTileSize();n.style.width=o.x+"px",n.style.height=o.y+"px",n.onselectstart=m,n.onmousemove=m,F&&this.options.opacity<1&&ve(n,this.options.opacity),k&&!V&&(n.style.WebkitBackfaceVisibility="hidden")},_addTile:function(n,o){var l=this._getTilePos(n),h=this._tileCoordsToKey(n),d=this.createTile(this._wrapCoords(n),c(this._tileReady,this,n));this._initTile(d),this.createTile.length<2&&gt(c(this._tileReady,this,n,null,d)),Ut(d,l),this._tiles[h]={el:d,coords:n,current:!0},o.appendChild(d),this.fire("tileloadstart",{tile:d,coords:n})},_tileReady:function(n,o,l){o&&this.fire("tileerror",{error:o,tile:l,coords:n});var h=this._tileCoordsToKey(n);l=this._tiles[h],l&&(l.loaded=+new Date,this._map._fadeAnimated?(ve(l.el,0),Pt(this._fadeFrame),this._fadeFrame=gt(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),o||(J(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),F||!this._map._fadeAnimated?gt(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var o=new H(this._wrapX?g(n.x,this._wrapX):n.x,this._wrapY?g(n.y,this._wrapY):n.y);return o.z=n.z,o},_pxBoundsToTileRange:function(n){var o=this.getTileSize();return new vt(n.min.unscaleBy(o).floor(),n.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function fp(n){return new fs(n)}var Ti=fs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(n,o){this._url=n,o=D(this,o),o.detectRetina&&yn&&o.maxZoom>0&&(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom++):(o.zoomOffset++,o.maxZoom--),o.minZoom=Math.max(0,o.minZoom)),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),k||this.on("tileunload",this._onTileRemove)},setUrl:function(n,o){return this._url===n&&o===void 0&&(o=!0),this._url=n,o||this.redraw(),this},createTile:function(n,o){var l=document.createElement("img");return at(l,"load",c(this._tileOnLoad,this,o,l)),at(l,"error",c(this._tileOnError,this,o,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l.alt="",l.setAttribute("role","presentation"),l.src=this.getTileUrl(n),l},getTileUrl:function(n){var o={r:yn?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-n.y;this.options.tms&&(o.y=l),o["-y"]=l}return At(this._url,r(o,this.options))},_tileOnLoad:function(n,o){F?setTimeout(c(n,this,null,o),0):n(null,o)},_tileOnError:function(n,o,l){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),n(l,o)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,o=this.options.maxZoom,l=this.options.zoomReverse,h=this.options.zoomOffset;return l&&(n=o-n),n+h},_getSubdomain:function(n){var o=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var n,o;for(n in this._tiles)this._tiles[n].coords.z!==this._tileZoom&&(o=this._tiles[n].el,o.onload=m,o.onerror=m,o.complete||(o.src=M,Ot(o),delete this._tiles[n]))},_removeTile:function(n){var o=this._tiles[n];if(!!o)return q||o.el.setAttribute("src",M),fs.prototype._removeTile.call(this,n)},_tileReady:function(n,o,l){if(!(!this._map||l&&l.getAttribute("src")===M))return fs.prototype._tileReady.call(this,n,o,l)}});function Gc(n,o){return new Ti(n,o)}var Kc=Ti.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,o){this._url=n;var l=r({},this.defaultWmsParams);for(var h in o)h in this.options||(l[h]=o[h]);o=D(this,o);var d=o.detectRetina&&yn?2:1,p=this.getTileSize();l.width=p.x*d,l.height=p.y*d,this.wmsParams=l},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Ti.prototype.onAdd.call(this,n)},getTileUrl:function(n){var o=this._tileCoordsToNwSe(n),l=this._crs,h=Kt(l.project(o[0]),l.project(o[1])),d=h.min,p=h.max,y=(this._wmsVersion>=1.3&&this._crs===Hc?[d.y,d.x,p.y,p.x]:[d.x,d.y,p.x,p.y]).join(","),C=Ti.prototype.getTileUrl.call(this,n);return C+Z(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+y},setParams:function(n,o){return r(this.wmsParams,n),o||this.redraw(),this}});function _p(n,o){return new Kc(n,o)}Ti.WMS=Kc,Gc.wms=_p;var ze=Pe.extend({options:{padding:.1,tolerance:0},initialize:function(n){D(this,n),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&J(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,o){var l=this._map.getZoomScale(o,this._zoom),h=wn(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,o),y=this._map.project(n,o),C=y.subtract(p),x=d.multiplyBy(-l).add(h).add(d).subtract(C);It?Fn(this._container,x,l):Ut(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,o=this._map.getSize(),l=this._map.containerPointToLayerPoint(o.multiplyBy(-n)).round();this._bounds=new vt(l,l.add(o.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Yc=ze.extend({getEvents:function(){var n=ze.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ze.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");at(n,"mousemove",this._onMouseMove,this),at(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),at(n,"mouseout",this._handleMouseOut,this),this._ctx=n.getContext("2d")},_destroyContainer:function(){Pt(this._redrawRequest),delete this._ctx,Ot(this._container),Ht(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var o in this._layers)n=this._layers[o],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ze.prototype._update.call(this);var n=this._bounds,o=this._container,l=n.getSize(),h=yn?2:1;Ut(o,n.min),o.width=h*l.x,o.height=h*l.y,o.style.width=l.x+"px",o.style.height=l.y+"px",yn&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){ze.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[f(n)]=n;var o=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var o=n._order,l=o.next,h=o.prev;l?l.prev=h:this._drawLast=h,h?h.next=l:this._drawFirst=l,delete n._order,delete this._layers[f(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var o=n.options.dashArray.split(/[, ]+/),l=[],h,d;for(d=0;d<o.length;d++){if(h=Number(o[d]),isNaN(h))return;l.push(h)}n.options._dashArray=l}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){!this._map||(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||gt(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var o=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new vt,this._redrawBounds.extend(n._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(n._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var o=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,o=this._redrawBounds;if(this._ctx.save(),o){var l=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)n=h.layer,(!o||n._pxBounds&&n._pxBounds.intersects(o))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,o){if(!!this._drawing){var l,h,d,p,y=n._parts,C=y.length,x=this._ctx;if(!!C){for(x.beginPath(),l=0;l<C;l++){for(h=0,d=y[l].length;h<d;h++)p=y[l][h],x[h?"lineTo":"moveTo"](p.x,p.y);o&&x.closePath()}this._fillStroke(x,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var o=n._point,l=this._ctx,h=Math.max(Math.round(n._radius),1),d=(Math.max(Math.round(n._radiusY),1)||h)/h;d!==1&&(l.save(),l.scale(1,d)),l.beginPath(),l.arc(o.x,o.y/d,h,0,Math.PI*2,!1),d!==1&&l.restore(),this._fillStroke(l,n)}},_fillStroke:function(n,o){var l=o.options;l.fill&&(n.globalAlpha=l.fillOpacity,n.fillStyle=l.fillColor||l.color,n.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(n.setLineDash&&n.setLineDash(o.options&&o.options._dashArray||[]),n.globalAlpha=l.opacity,n.lineWidth=l.weight,n.strokeStyle=l.color,n.lineCap=l.lineCap,n.lineJoin=l.lineJoin,n.stroke())},_onClick:function(n){for(var o=this._map.mouseEventToLayerPoint(n),l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(o)&&(!(n.type==="click"||n.type!=="preclick")||!this._map._draggableMoved(l))&&(h=l);h&&(Jr(n),this._fireEvent([h],n))},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,o)}},_handleMouseOut:function(n){var o=this._hoveredLayer;o&&(Bt(this._container,"leaflet-interactive"),this._fireEvent([o],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,o){if(!this._mouseHoverThrottled){for(var l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(o)&&(h=l);h!==this._hoveredLayer&&(this._handleMouseOut(n),h&&(J(this._container,"leaflet-interactive"),this._fireEvent([h],n,"mouseover"),this._hoveredLayer=h)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],n),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,o,l){this._map._fireDOMEvent(o,l||o.type,n)},_bringToFront:function(n){var o=n._order;if(!!o){var l=o.next,h=o.prev;if(l)l.prev=h;else return;h?h.next=l:l&&(this._drawFirst=l),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(n)}},_bringToBack:function(n){var o=n._order;if(!!o){var l=o.next,h=o.prev;if(h)h.next=l;else return;l?l.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(n)}}});function Qc(n){return bc?new Yc(n):null}var _s=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),pp={_initContainer:function(){this._container=dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ze.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var o=n._container=_s("shape");J(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",n._path=_s("path"),o.appendChild(n._path),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){var o=n._container;this._container.appendChild(o),n.options.interactive&&n.addInteractiveTarget(o)},_removePath:function(n){var o=n._container;Ot(o),n.removeInteractiveTarget(o),delete this._layers[f(n)]},_updateStyle:function(n){var o=n._stroke,l=n._fill,h=n.options,d=n._container;d.stroked=!!h.stroke,d.filled=!!h.fill,h.stroke?(o||(o=n._stroke=_s("stroke")),d.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=j(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(d.removeChild(o),n._stroke=null),h.fill?(l||(l=n._fill=_s("fill")),d.appendChild(l),l.color=h.fillColor||h.color,l.opacity=h.fillOpacity):l&&(d.removeChild(l),n._fill=null)},_updateCircle:function(n){var o=n._point.round(),l=Math.round(n._radius),h=Math.round(n._radiusY||l);this._setPath(n,n._empty()?"M0 0":"AL "+o.x+","+o.y+" "+l+","+h+" 0,"+65535*360)},_setPath:function(n,o){n._path.v=o},_bringToFront:function(n){mi(n._container)},_bringToBack:function(n){gi(n._container)}},vo=to?_s:E,ps=ze.extend({getEvents:function(){var n=ze.prototype.getEvents.call(this);return n.zoomstart=this._onZoomStart,n},_initContainer:function(){this._container=vo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ot(this._container),Ht(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ze.prototype._update.call(this);var n=this._bounds,o=n.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,l.setAttribute("width",o.x),l.setAttribute("height",o.y)),Ut(l,n.min),l.setAttribute("viewBox",[n.min.x,n.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(n){var o=n._path=vo("path");n.options.className&&J(o,n.options.className),n.options.interactive&&J(o,"leaflet-interactive"),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Ot(n._path),n.removeInteractiveTarget(n._path),delete this._layers[f(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var o=n._path,l=n.options;!o||(l.stroke?(o.setAttribute("stroke",l.color),o.setAttribute("stroke-opacity",l.opacity),o.setAttribute("stroke-width",l.weight),o.setAttribute("stroke-linecap",l.lineCap),o.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?o.setAttribute("stroke-dasharray",l.dashArray):o.removeAttribute("stroke-dasharray"),l.dashOffset?o.setAttribute("stroke-dashoffset",l.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),l.fill?(o.setAttribute("fill",l.fillColor||l.color),o.setAttribute("fill-opacity",l.fillOpacity),o.setAttribute("fill-rule",l.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(n,o){this._setPath(n,S(n._parts,o))},_updateCircle:function(n){var o=n._point,l=Math.max(Math.round(n._radius),1),h=Math.max(Math.round(n._radiusY),1)||l,d="a"+l+","+h+" 0 1,0 ",p=n._empty()?"M0 0":"M"+(o.x-l)+","+o.y+d+l*2+",0 "+d+-l*2+",0 ";this._setPath(n,p)},_setPath:function(n,o){n._path.setAttribute("d",o)},_bringToFront:function(n){mi(n._path)},_bringToBack:function(n){gi(n._path)}});to&&ps.include(pp);function Xc(n){return Js||to?new ps(n):null}ht.include({getRenderer:function(n){var o=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var o=this._paneRenderers[n];return o===void 0&&(o=this._createRenderer({pane:n}),this._paneRenderers[n]=o),o},_createRenderer:function(n){return this.options.preferCanvas&&Qc(n)||Xc(n)}});var Jc=bi.extend({initialize:function(n,o){bi.prototype.initialize.call(this,this._boundsToLatLngs(n),o)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Wt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function mp(n,o){return new Jc(n,o)}ps.create=vo,ps.pointsToPath=S,nn.geometryToLayer=la,nn.coordsToLatLng=ca,nn.coordsToLatLngs=_o,nn.latLngToCoords=ha,nn.latLngsToCoords=po,nn.getFeature=Ci,nn.asFeature=mo,ht.mergeOptions({boxZoom:!0});var th=Fe.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ht(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ot(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),rs(),$r(),this._startPoint=this._map.mouseEventToContainerPoint(n),at(document,{contextmenu:Je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=dt("div","leaflet-zoom-box",this._container),J(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var o=new vt(this._point,this._startPoint),l=o.getSize();Ut(this._box,o.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Ot(this._box),Bt(this._container,"leaflet-crosshair")),as(),Vr(),Ht(document,{contextmenu:Je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var o=new Rt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(n){n.keyCode===27&&this._finish()}});ht.addInitHook("addHandler","boxZoom",th),ht.mergeOptions({doubleClickZoom:!0});var eh=Fe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var o=this._map,l=o.getZoom(),h=o.options.zoomDelta,d=n.originalEvent.shiftKey?l-h:l+h;o.options.doubleClickZoom==="center"?o.setZoom(d):o.setZoomAround(n.containerPoint,d)}});ht.addInitHook("addHandler","doubleClickZoom",eh),ht.mergeOptions({dragging:!0,inertia:!V,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nh=Fe.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Wn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}J(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Bt(this._map._container,"leaflet-grab"),Bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Wt(this._map.options.maxBounds);this._offsetLimit=Kt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var o=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(o),this._prunePositions(o)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,o){return n-(n-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;n.x<o.min.x&&(n.x=this._viscousLimit(n.x,o.min.x)),n.y<o.min.y&&(n.y=this._viscousLimit(n.y,o.min.y)),n.x>o.max.x&&(n.x=this._viscousLimit(n.x,o.max.x)),n.y>o.max.y&&(n.y=this._viscousLimit(n.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,o=Math.round(n/2),l=this._initialWorldOffset,h=this._draggable._newPos.x,d=(h-o+l)%n+o-l,p=(h+o+l)%n-o-l,y=Math.abs(d+l)<Math.abs(p+l)?d:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=y},_onDragEnd:function(n){var o=this._map,l=o.options,h=!l.inertia||this._times.length<2;if(o.fire("dragend",n),h)o.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,y=l.easeLinearity,C=d.multiplyBy(y/p),x=C.distanceTo([0,0]),P=Math.min(l.inertiaMaxSpeed,x),z=C.multiplyBy(P/x),G=P/(l.inertiaDeceleration*y),ft=z.multiplyBy(-G/2).round();!ft.x&&!ft.y?o.fire("moveend"):(ft=o._limitOffset(ft,o.options.maxBounds),gt(function(){o.panBy(ft,{duration:G,easeLinearity:y,noMoveStart:!0,animate:!0})}))}}});ht.addInitHook("addHandler","dragging",nh),ht.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ih=Fe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),at(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ht(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,o=document.documentElement,l=n.scrollTop||o.scrollTop,h=n.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var o=this._panKeys={},l=this.keyCodes,h,d;for(h=0,d=l.left.length;h<d;h++)o[l.left[h]]=[-1*n,0];for(h=0,d=l.right.length;h<d;h++)o[l.right[h]]=[n,0];for(h=0,d=l.down.length;h<d;h++)o[l.down[h]]=[0,n];for(h=0,d=l.up.length;h<d;h++)o[l.up[h]]=[0,-1*n]},_setZoomDelta:function(n){var o=this._zoomKeys={},l=this.keyCodes,h,d;for(h=0,d=l.zoomIn.length;h<d;h++)o[l.zoomIn[h]]=n;for(h=0,d=l.zoomOut.length;h<d;h++)o[l.zoomOut[h]]=-n},_addHooks:function(){at(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ht(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=n.keyCode,l=this._map,h;if(o in this._panKeys)(!l._panAnim||!l._panAnim._inProgress)&&(h=this._panKeys[o],n.shiftKey&&(h=ot(h).multiplyBy(3)),l.panBy(h),l.options.maxBounds&&l.panInsideBounds(l.options.maxBounds));else if(o in this._zoomKeys)l.setZoom(l.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Je(n)}}});ht.addInitHook("addHandler","keyboard",ih),ht.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var sh=Fe.extend({addHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ht(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var o=kc(n),l=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var h=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),h),Je(n)},_performZoom:function(){var n=this._map,o=n.getZoom(),l=this._map.options.zoomSnap||0;n._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,p=l?Math.ceil(d/l)*l:d,y=n._limitZoom(o+(this._delta>0?p:-p))-o;this._delta=0,this._startTime=null,y&&(n.options.scrollWheelZoom==="center"?n.setZoom(o+y):n.setZoomAround(this._lastMousePos,o+y))}});ht.addInitHook("addHandler","scrollWheelZoom",sh),ht.mergeOptions({tap:!0,tapTolerance:15});var oh=Fe.extend({addHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ht(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(!!n.touches){if(ye(n),this._fireClick=!0,n.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var o=n.touches[0],l=o.target;this._startPos=this._newPos=new H(o.clientX,o.clientY),l.tagName&&l.tagName.toLowerCase()==="a"&&J(l,"leaflet-active"),this._holdTimeout=setTimeout(c(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3),this._simulateEvent("mousedown",o),at(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(n){if(clearTimeout(this._holdTimeout),Ht(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&n&&n.changedTouches){var o=n.changedTouches[0],l=o.target;l&&l.tagName&&l.tagName.toLowerCase()==="a"&&Bt(l,"leaflet-active"),this._simulateEvent("mouseup",o),this._isTapValid()&&this._simulateEvent("click",o)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(n){var o=n.touches[0];this._newPos=new H(o.clientX,o.clientY),this._simulateEvent("mousemove",o)},_simulateEvent:function(n,o){var l=document.createEvent("MouseEvents");l._simulated=!0,o.target._simulatedClick=!0,l.initMouseEvent(n,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(l)}});De&&(!Oe||ut)&&ht.addInitHook("addHandler","tap",oh),ht.mergeOptions({touchZoom:De&&!V,bounceAtZoomLimits:!0});var rh=Fe.extend({addHooks:function(){J(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Bt(this._map._container,"leaflet-touch-zoom"),Ht(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var o=this._map;if(!(!n.touches||n.touches.length!==2||o._animatingZoom||this._zooming)){var l=o.mouseEventToContainerPoint(n.touches[0]),h=o.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(l.add(h)._divideBy(2))),this._startDist=l.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend",this._onTouchEnd,this),ye(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var o=this._map,l=o.mouseEventToContainerPoint(n.touches[0]),h=o.mouseEventToContainerPoint(n.touches[1]),d=l.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(d,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&d<1||this._zoom>o.getMaxZoom()&&d>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var p=l._add(h)._divideBy(2)._subtract(this._centerPoint);if(d===1&&p.x===0&&p.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Pt(this._animRequest);var y=c(o._move,o,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=gt(y,this,!0),ye(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Pt(this._animRequest),Ht(document,"touchmove",this._onTouchMove,this),Ht(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ht.addInitHook("addHandler","touchZoom",rh),ht.BoxZoom=th,ht.DoubleClickZoom=eh,ht.Drag=nh,ht.Keyboard=ih,ht.ScrollWheelZoom=sh,ht.Tap=oh,ht.TouchZoom=rh,i.version=s,i.Control=Te,i.control=hs,i.Browser=x_,i.Evented=bt,i.Mixin=U_,i.Util=gn,i.Class=me,i.Handler=Fe,i.extend=r,i.bind=c,i.stamp=f,i.setOptions=D,i.DomEvent=D_,i.DomUtil=R_,i.PosAnimation=Lc,i.Draggable=Wn,i.LineUtil=q_,i.PolyUtil=G_,i.Point=H,i.point=ot,i.Bounds=vt,i.bounds=Kt,i.Transformation=Bn,i.transformation=Ye,i.Projection=K_,i.LatLng=yt,i.latLng=Mt,i.LatLngBounds=Rt,i.latLngBounds=Wt,i.CRS=Vt,i.GeoJSON=nn,i.geoJSON=$c,i.geoJson=rp,i.Layer=Pe,i.LayerGroup=vi,i.layerGroup=X_,i.FeatureGroup=yi,i.featureGroup=J_,i.ImageOverlay=go,i.imageOverlay=ap,i.VideoOverlay=Vc,i.videoOverlay=lp,i.SVGOverlay=jc,i.svgOverlay=cp,i.DivOverlay=sn,i.Popup=xi,i.popup=hp,i.Tooltip=Ei,i.tooltip=up,i.Icon=wi,i.icon=tp,i.DivIcon=qc,i.divIcon=dp,i.Marker=uo,i.marker=ep,i.TileLayer=Ti,i.tileLayer=Gc,i.GridLayer=fs,i.gridLayer=fp,i.SVG=ps,i.svg=Xc,i.Renderer=ze,i.Canvas=Yc,i.canvas=Qc,i.Path=bn,i.CircleMarker=fo,i.circleMarker=np,i.Circle=aa,i.circle=ip,i.Polyline=en,i.polyline=sp,i.Polygon=bi,i.polygon=op,i.Rectangle=Jc,i.rectangle=mp,i.Map=ht,i.map=B_;var gp=window.L;i.noConflict=function(){return window.L=gp,this},window.L=i})})(hl,hl.exports);var rn=hl.exports;const Px={class:"row me-auto"},Ix=W("div",{class:"col-8 mt-1 ps-1"},[W("div",{id:"map"})],-1),Sx={class:"col-4 ps-0 pe-2"},kx=W("div",{class:"row offset-3 my-2 ps-0"},"Adding SanBau Data",-1),Lx={class:"row align-items-center mb-1"},Ax=W("div",{class:"col-3 ps-2"},"Nickname",-1),Mx={class:"row align-items-center mb-1"},Nx=W("div",{class:"col-3 ps-2"},"Plate",-1),Rx=W("option",{value:"human"},"Human",-1),Ox=W("option",{value:"car"},"Car",-1),Dx=W("option",{value:"motor"},"Motorcycle",-1),Bx=W("option",{value:"truck"},"Truck",-1),Fx=[Rx,Ox,Dx,Bx],zx={class:"row align-items-center mb-1"},Wx=W("div",{class:"col-3 ps-2"},"Date/Time",-1),Hx={class:"row align-items-center mb-1"},Ux=W("div",{class:"col-3 ps-2"},"Behavior",-1),Zx={class:"row align-items-center mb-1"},$x=W("div",{class:"col-3 ps-2"},"Address",-1),Vx={class:"row align-items-center mb-1"},jx=W("div",{class:"col-3 ps-2"},"Lat, Lng",-1),qx=W("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-geo-alt",viewBox:"0 0 16 16"},[W("path",{d:"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"}),W("path",{d:"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})],-1),Gx=[qx],Kx={class:"row align-items-center"},Yx=W("div",{class:"col-3 ps-2"},"appendix",-1),Qx=W("img",{class:"w-100",src:"https://s.imgur.com/images/favicon.png"},null,-1),Xx=[Qx],Jx={setup(e){const i=Zd({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=s_(i);w_(i,{provider:new Rr("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let r,a,c,u,f=rn.marker(),_=cn({type:"car"}),g=7;function m(){let $,M={nickname:_.value.nickname,plate:_.value.plate,type:_.value.type,date:_.value.date,time:_.value.time,behavior:_.value.behavior,address:_.value.address,latlng:_.value.latlng,appendix:_.value.appendix};if(!(M.nickname==null||M.plate==null||M.date==null||M.time==null||M.behavior==null||M.latlng==null)&&!(M.plate!=null&&M.type=="human")){for(let tt in M)M[tt]==null&&(M[tt]="");i_(Pn(s,"/map/count")).then(tt=>{try{$=tt.val()+1}catch{$=1}n_(Pn(s,`/map/${$}`),{nickname:M.nickname,plate:M.plate,type:M.type,behavior:M.behavior,address:M.address,date:M.date,time:M.time,latlng:M.latlng,appendix:M.appendix}),al(Pn(s,"/map/"),{count:$})}),D()}}function w(){r.setView([a,c]),_.value.latlng=`${a.toFixed(g)}, ${c.toFixed(g)}`,r.removeLayer(f),rn.marker([a,c]).addTo(r).bindPopup("you're here").openPopup()}function T(){window.open("https://imgur.com/upload")}function A(){_.value.link!=""&&_.value.link!=null&&confirm("open link in new window?")&&window.open(_.value.link)}function D(){_.value=[],_.value.type="car",r.removeLayer(f)}function Z(){navigator.geolocation&&navigator.geolocation.getCurrentPosition($=>{a=$.coords.latitude,c=$.coords.longitude,r=rn.map("map",{center:[a,c],zoom:15,attributionControl:!0,zoomControl:!0}),rn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(r),rn.marker([a,c]).addTo(r).bindPopup("you're here").openPopup(),r.on("click",X)})}function X($){u=$;let M=_.value.type,tt=rn.icon({iconUrl:`./pic/${M}.png`,iconSize:[40,40],popupAnchor:[0,-10]}),st=7;r.removeLayer(f),f=rn.marker($.latlng,{icon:tt}).addTo(r).bindPopup("SamBao is here").openPopup(),_.value.latlng=`${$.latlng.lat.toFixed(st)}, ${$.latlng.lng.toFixed(st)}`}function At(){let $=_.value.type,M=rn.icon({iconUrl:`./pic/${$}.png`,iconSize:[40,40],popupAnchor:[0,-10]});r.removeLayer(f),f=rn.marker(u.latlng,{icon:M}).addTo(r).bindPopup("SamBao is here").openPopup()}function j(){navigator.clipboard.readText().then(async $=>{try{$.length>1&&((await fetch($,{mode:"no-cors"})).status!=404?_.value.link=$:_.value.link="")}catch{_.value.link=""}})}return Ki(()=>{Z(),Ln.value.show_map&&window.addEventListener("focus",j)}),($,M)=>be((Ue(),ln("div",Px,[Ix,W("div",Sx,[kx,W("div",Lx,[Ax,be(W("input",{class:"col rounded border py-2 bg-dark text-light border-secondary",type:"text",placeholder:"300\u54E5/\u796D\u592E\u4E42/\u99AC\u7DAD\u62C9/\u97D3\u7E3D\u6A5F","onUpdate:modelValue":M[0]||(M[0]=tt=>ct(_).nickname=tt),maxlength:"20"},null,512),[[He,ct(_).nickname]])]),W("div",Mx,[Nx,be(W("input",{class:"col rounded border py-2 bg-dark border-secondary text-light me-1",type:"text",placeholder:"ABC-1234","onUpdate:modelValue":M[1]||(M[1]=tt=>ct(_).plate=tt)},null,512),[[He,ct(_).plate]]),be(W("select",{class:"col-4 py-2 rounded border-secondary border bg-dark text-light","onUpdate:modelValue":M[2]||(M[2]=tt=>ct(_).type=tt),onChange:At},Fx,544),[[Jg,ct(_).type]])]),W("div",zx,[Wx,be(W("input",{class:"col border rounded py-2 me-1 bg-dark text-light border-secondary","onUpdate:modelValue":M[3]||(M[3]=tt=>ct(_).date=tt),type:"date"},null,512),[[He,ct(_).date]]),be(W("input",{class:"border-secondary col-4 border rounded py-2 bg-dark text-light","onUpdate:modelValue":M[4]||(M[4]=tt=>ct(_).time=tt),type:"time"},null,512),[[He,ct(_).time]])]),W("div",Hx,[Ux,be(W("textarea",{class:"col py-2 border rounded bg-dark text-light border-secondary",type:"text",placeholder:"How SanBau?",maxlength:"100","onUpdate:modelValue":M[5]||(M[5]=tt=>ct(_).behavior=tt)},null,512),[[He,ct(_).behavior]])]),W("div",Zx,[$x,be(W("textarea",{class:"col py-2 border rounded bg-dark text-light border-secondary",type:"text",placeholder:"Where? (option)",maxlength:"100","onUpdate:modelValue":M[6]||(M[6]=tt=>ct(_).address=tt)},null,512),[[He,ct(_).address]])]),W("div",Vx,[jx,be(W("input",{class:"col border rounded bg-dark text-light py-2 border-secondary",type:"text",placeholder:"Location","onUpdate:modelValue":M[7]||(M[7]=tt=>ct(_).latlng=tt),maxlength:"30"},null,512),[[He,ct(_).latlng]]),W("div",{class:"badge col-2 text-warning",title:"get currten latlng",type:"button",onClick:w},Gx)]),W("div",Kx,[Yx,be(W("input",{class:"col border border-secondary rounded py-2 bg-dark text-secondary",type:"url",placeholder:"upload image/video","onUpdate:modelValue":M[8]||(M[8]=tt=>ct(_).link=tt),onClick:A},null,512),[[He,ct(_).link]]),W("div",{class:"col-2",onClick:T,type:"button",title:"link to imgur"},Xx)]),W("div",{class:"row mt-2 justify-content-center"},[W("div",{class:"col-3 badge fs-6 border border-secondary text-success me-1 ms-1 py-2",type:"button",onClick:m},"Add"),W("div",{class:"col-3 badge fs-6 border border-secondary text-danger py-2",type:"button",onClick:D},"Clear")])])],512)),[[tv,ct(Ln).show_map==!0]])}};const tE={key:0,class:"container-fluid px-3 hate"},eE=vg('<div class="fs-1 my-1"> Author: <span class="text-warning">OrzOGC</span></div><div class="fs-1 my-1">\u6D3B\u7684\u7CBE\u5F69,\u4FEE\u7684\u75DB\u5FEB,Fix On RoaD</div><div class="fs-1 my-1 text-end">\u9055\u898F\u9B54\u4EBA\u90FD\u53BB\u6B7B\u4E00\u6B7B\u5566\u5E79</div><div class="fs-1 my-1">\u81C9\u76AE\u90FD\u6BD4\u6211\u963F\u5B24\u7684\u8173\u5E95\u76AE\u9084\u539A\u5566\u5E79</div><div class="fs-1 my-1 text-end">\u4E09\u5BF6\u90FD\u4ED6\u5ABD\u7684\u53BB\u5403\u5C4E\u5566\u5E79</div><div class="fs-1 my-1">\u9F9C\u4ED4\u958B\u90A3\u9EBC\u6162\u9084\u4E0D\u6EFE\u53BB\u9A0E\u52C1\u6230\u5566\u5E79</div><div class="fs-1 my-2 text-end">\u4ED6\u5ABD\u7684\u5357\u90E8\u9109\u4E0B\u5F70\u5316\u8C93\u5974\u5C31\u662F\u64CD\u4F60\u5A18\u7684\u6C92\u6C34\u6E96\u5566\u5E79</div>',7),nE={setup(e){let t=cn(["","","",""]),i=0,s=Math.round(Math.random()*5e3);function r(a){t.value[a]==""?t.value[a]="fuck-top":t.value[a]=""}return Ki(()=>{setInterval(()=>{Ln.value.show_about==!0&&(i=Math.round(Math.random()*3),r(i))},s)}),(a,c)=>ct(Ln).show_about==!0?(Ue(),ln("div",tE,[eE,W("div",{class:$e(["text-black lh-1 fuck fuck-1",ct(t)[0]])},"\u5E79",2),W("div",{class:$e(["text-black lh-1 fuck fuck-2",ct(t)[1]])},"\u6041",2),W("div",{class:$e(["text-black lh-1 fuck fuck-3",ct(t)[2]])},"\u5A18",2),W("div",{class:$e(["text-black lh-1 fuck fuck-4",ct(t)[3]])},"\u5566",2)])):xs("",!0)}};const iE={key:0,class:"txt"},sE={key:0,class:"bg-dark border border-secondary input"},oE={class:"row w-100 h-75 mx-auto mt-3"},rE={class:"col-9"},aE={class:"form-floating"},lE={for:"input",class:"text-light"},cE={class:"row my-2 mx-2 align-items-center"},hE=W("div",{class:"col-2"},"Author",-1),uE={class:"row h-100"},dE=["onClick"],fE={key:0,class:"zero text-light h-75 mt-2 overflow-auto text-break text-wrap txt lh-sm"},_E={key:1,class:"zero text-light d-flex align-self-center justify-content-end fw-light small"},pE={setup(e){const i=Zd({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=s_(i);w_(i,{provider:new Rr("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let r=36,a=cn(""),c=cn(""),u=cn(""),f=cn({}),_=cn(0);Ki(()=>{D()});function g(j,$){_.value=1,c.value="message",a.value=j,u.value=$}function m(){_.value==0?_.value=1:_.value=0}function w(){let j=Math.ceil(Math.random()*360),$=Math.ceil(Math.random()*75)+25,M=Math.ceil(Math.random()*25)+5;return`background-color:hsla(${j},${$}%,${M}%)`}function T(j){AC(Pn(s,`/msg/${j}`),$=>{let M=$.val();try{f.value[j]={msg:M.msg,date:M.date,bg:M.bg,nic:M.nic}}catch{f.value[j]={msg:"",date:"",bg:w(),nic:""}}})}function A(){let j=`pure front end message board
	language:javascript
	framework:Bootstrap,Vue.js
	database:firebase
============================
author:OrzOGC
	junior amatuer developer
	senior mechanical designer
	senior part-time gofer
	and road rage monster`;a.value=j,c.value="about",u.value="OrzOGC"}function D(){X();for(let j=1;j<=r;j++)T(j)}function Z(){let j=a.value,$,M=u.value;M==null&&(M=""),j==""&&(c.value="Oops!"),j!=""&&i_(Pn(s,"/msg/flag")).then(tt=>{let st=tt.val();st>=r?$=1:$=st+1;let Dt={day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};n_(Pn(s,`/msg/${$}`),{msg:j,date:new Date().toLocaleString("en-US",Dt),bg:w(),nic:M}),al(Pn(s,"/msg/"),{flag:$}),D(),_.value=0})}function X(){a.value="",c.value="Write some messages",u.value=""}function At(){for(let j=1;j<=r;j++)al(Pn(s,`/msg/${j}`),{bg:w()});X()}return(j,$)=>ct(Ln).show_msg==!0?(Ue(),ln("div",iE,[W("div",{class:"bg-dark fab text-warning fs-1 lh-1 fw-bolder text-center",type:"button",onClick:m},"+"),ct(_)==1?(Ue(),ln("div",sE,[W("div",{type:"button",class:"position-absolute top-0 end-0 btn-close btn-close-white",onClick:m}),W("div",oE,[W("div",rE,[W("div",aE,[be(W("textarea",{id:"input",class:"zero text-light border-secondary bg-dark h-100 lh-base form-control txt","onUpdate:modelValue":$[0]||($[0]=M=>Gt(a)?a.value=M:a=M)},bo(ct(a)),513),[[He,ct(a)]]),W("label",lE,bo(ct(c)),1)])]),W("div",{class:"col ps-0 me-3 flex-column d-flex"},[W("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-center text-success",onClick:Z},"Post"),W("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-danger text-center",onClick:X},"Clear"),W("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-warning text-center",onClick:At},"Reset"),W("div",{type:"button",class:"border btn-block border-secondary text-center rounded my-2 text-info",onClick:A},"About")])]),W("div",cE,[hE,be(W("input",{class:"col-5 py-2 bg-dark rounded border border-secondary text-light px-2",type:"text",placeholder:"\u516B\u5366\u5C71\u4E0B\u75E3\u4E5D",maxlength:"50","onUpdate:modelValue":$[1]||($[1]=M=>Gt(u)?u.value=M:u=M)},null,512),[[He,ct(u)]])])])):xs("",!0),W("div",uE,[(Ue(!0),ln(Ie,null,wg(ct(f),M=>(Ue(),ln("div",{class:"col-2 h-25",style:lr(M.bg),onClick:tt=>g(M.msg,M.nic)},[M.msg!=""?(Ue(),ln("div",fE,bo(M.msg),1)):xs("",!0),M.date!=""?(Ue(),ln("div",_E,bo(M.date),1)):xs("",!0)],12,dE))),256))])])):xs("",!0)}};yr(av).mount("#navbar");yr(Jx).mount("#map-frame");yr(nE).mount("#about");yr(pE).mount("#msg");
