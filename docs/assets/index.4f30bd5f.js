const Pp=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}};Pp();function fl(e,t){const i=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)i[s[o]]=!0;return t?o=>!!i[o.toLowerCase()]:o=>!!i[o]}const Ip="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sp=fl(Ip);function Du(e){return!!e||e===""}function co(e){if(J(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],o=te(s)?Ap(s):co(s);if(o)for(const a in o)t[a]=o[a]}return t}else{if(te(e))return e;if($t(e))return e}}const kp=/;(?![^(]*\))/g,Lp=/:(.+)/;function Ap(e){const t={};return e.split(kp).forEach(i=>{if(i){const s=i.split(Lp);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function qe(e){let t="";if(te(e))t=e;else if(J(e))for(let i=0;i<e.length;i++){const s=qe(e[i]);s&&(t+=s+" ")}else if($t(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function Mp(e,t){if(e.length!==t.length)return!1;let i=!0;for(let s=0;i&&s<e.length;s++)i=ho(e[s],t[s]);return i}function ho(e,t){if(e===t)return!0;let i=dh(e),s=dh(t);if(i||s)return i&&s?e.getTime()===t.getTime():!1;if(i=J(e),s=J(t),i||s)return i&&s?Mp(e,t):!1;if(i=$t(e),s=$t(t),i||s){if(!i||!s)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const c in e){const u=e.hasOwnProperty(c),f=t.hasOwnProperty(c);if(u&&!f||!u&&f||!ho(e[c],t[c]))return!1}}return String(e)===String(t)}function Np(e,t){return e.findIndex(i=>ho(i,t))}const br=e=>te(e)?e:e==null?"":J(e)||$t(e)&&(e.toString===zu||!st(e.toString))?JSON.stringify(e,Bu,2):String(e),Bu=(e,t)=>t&&t.__v_isRef?Bu(e,t.value):Ai(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,o])=>(i[`${s} =>`]=o,i),{})}:fo(t)?{[`Set(${t.size})`]:[...t.values()]}:$t(t)&&!J(t)&&!Wu(t)?String(t):t,It={},Li=[],Oe=()=>{},Rp=()=>!1,Op=/^on[^a-z]/,uo=e=>Op.test(e),_l=e=>e.startsWith("onUpdate:"),re=Object.assign,pl=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Dp=Object.prototype.hasOwnProperty,gt=(e,t)=>Dp.call(e,t),J=Array.isArray,Ai=e=>_o(e)==="[object Map]",fo=e=>_o(e)==="[object Set]",dh=e=>e instanceof Date,st=e=>typeof e=="function",te=e=>typeof e=="string",ml=e=>typeof e=="symbol",$t=e=>e!==null&&typeof e=="object",Fu=e=>$t(e)&&st(e.then)&&st(e.catch),zu=Object.prototype.toString,_o=e=>zu.call(e),Bp=e=>_o(e).slice(8,-1),Wu=e=>_o(e)==="[object Object]",gl=e=>te(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ar=fl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),po=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Fp=/-(\w)/g,Oi=po(e=>e.replace(Fp,(t,i)=>i?i.toUpperCase():"")),zp=/\B([A-Z])/g,ji=po(e=>e.replace(zp,"-$1").toLowerCase()),Hu=po(e=>e.charAt(0).toUpperCase()+e.slice(1)),ma=po(e=>e?`on${Hu(e)}`:""),Ns=(e,t)=>!Object.is(e,t),Mr=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},Dr=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Br=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let fh;const Wp=()=>fh||(fh=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let cn;class Hp{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&cn&&(this.parent=cn,this.index=(cn.scopes||(cn.scopes=[])).push(this)-1)}run(t){if(this.active)try{return cn=this,t()}finally{cn=this.parent}}on(){cn=this}off(){cn=this.parent}stop(t){if(this.active){let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.scopes)for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function Up(e,t=cn){t&&t.active&&t.effects.push(e)}const vl=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Uu=e=>(e.w&Mn)>0,Zu=e=>(e.n&Mn)>0,Zp=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Mn},$p=e=>{const{deps:t}=e;if(t.length){let i=0;for(let s=0;s<t.length;s++){const o=t[s];Uu(o)&&!Zu(o)?o.delete(e):t[i++]=o,o.w&=~Mn,o.n&=~Mn}t.length=i}},La=new WeakMap;let bs=0,Mn=1;const Aa=30;let Ge;const Xn=Symbol(""),Ma=Symbol("");class yl{constructor(t,i=null,s){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Up(this,s)}run(){if(!this.active)return this.fn();let t=Ge,i=Sn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ge,Ge=this,Sn=!0,Mn=1<<++bs,bs<=Aa?Zp(this):_h(this),this.fn()}finally{bs<=Aa&&$p(this),Mn=1<<--bs,Ge=this.parent,Sn=i,this.parent=void 0}}stop(){this.active&&(_h(this),this.onStop&&this.onStop(),this.active=!1)}}function _h(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Sn=!0;const $u=[];function qi(){$u.push(Sn),Sn=!1}function Gi(){const e=$u.pop();Sn=e===void 0?!0:e}function ve(e,t,i){if(Sn&&Ge){let s=La.get(e);s||La.set(e,s=new Map);let o=s.get(i);o||s.set(i,o=vl()),Vu(o)}}function Vu(e,t){let i=!1;bs<=Aa?Zu(e)||(e.n|=Mn,i=!Uu(e)):i=!e.has(Ge),i&&(e.add(Ge),Ge.deps.push(e))}function pn(e,t,i,s,o,a){const c=La.get(e);if(!c)return;let u=[];if(t==="clear")u=[...c.values()];else if(i==="length"&&J(e))c.forEach((f,_)=>{(_==="length"||_>=s)&&u.push(f)});else switch(i!==void 0&&u.push(c.get(i)),t){case"add":J(e)?gl(i)&&u.push(c.get("length")):(u.push(c.get(Xn)),Ai(e)&&u.push(c.get(Ma)));break;case"delete":J(e)||(u.push(c.get(Xn)),Ai(e)&&u.push(c.get(Ma)));break;case"set":Ai(e)&&u.push(c.get(Xn));break}if(u.length===1)u[0]&&Na(u[0]);else{const f=[];for(const _ of u)_&&f.push(..._);Na(vl(f))}}function Na(e,t){for(const i of J(e)?e:[...e])(i!==Ge||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const Vp=fl("__proto__,__v_isRef,__isVue"),ju=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(ml)),jp=wl(),qp=wl(!1,!0),Gp=wl(!0),ph=Kp();function Kp(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const s=yt(this);for(let a=0,c=this.length;a<c;a++)ve(s,"get",a+"");const o=s[t](...i);return o===-1||o===!1?s[t](...i.map(yt)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){qi();const s=yt(this)[t].apply(this,i);return Gi(),s}}),e}function wl(e=!1,t=!1){return function(s,o,a){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&a===(e?t?um:Qu:t?Yu:Ku).get(s))return s;const c=J(s);if(!e&&c&&gt(ph,o))return Reflect.get(ph,o,a);const u=Reflect.get(s,o,a);return(ml(o)?ju.has(o):Vp(o))||(e||ve(s,"get",o),t)?u:Kt(u)?!c||!gl(o)?u.value:u:$t(u)?e?Xu(u):xl(u):u}}const Yp=qu(),Qp=qu(!0);function qu(e=!1){return function(i,s,o,a){let c=i[s];if(Rs(c)&&Kt(c)&&!Kt(o))return!1;if(!e&&!Rs(o)&&(Ju(o)||(o=yt(o),c=yt(c)),!J(i)&&Kt(c)&&!Kt(o)))return c.value=o,!0;const u=J(i)&&gl(s)?Number(s)<i.length:gt(i,s),f=Reflect.set(i,s,o,a);return i===yt(a)&&(u?Ns(o,c)&&pn(i,"set",s,o):pn(i,"add",s,o)),f}}function Xp(e,t){const i=gt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&pn(e,"delete",t,void 0),s}function Jp(e,t){const i=Reflect.has(e,t);return(!ml(t)||!ju.has(t))&&ve(e,"has",t),i}function tm(e){return ve(e,"iterate",J(e)?"length":Xn),Reflect.ownKeys(e)}const Gu={get:jp,set:Yp,deleteProperty:Xp,has:Jp,ownKeys:tm},em={get:Gp,set(e,t){return!0},deleteProperty(e,t){return!0}},nm=re({},Gu,{get:qp,set:Qp}),bl=e=>e,mo=e=>Reflect.getPrototypeOf(e);function Cr(e,t,i=!1,s=!1){e=e.__v_raw;const o=yt(e),a=yt(t);t!==a&&!i&&ve(o,"get",t),!i&&ve(o,"get",a);const{has:c}=mo(o),u=s?bl:i?El:Os;if(c.call(o,t))return u(e.get(t));if(c.call(o,a))return u(e.get(a));e!==o&&e.get(t)}function xr(e,t=!1){const i=this.__v_raw,s=yt(i),o=yt(e);return e!==o&&!t&&ve(s,"has",e),!t&&ve(s,"has",o),e===o?i.has(e):i.has(e)||i.has(o)}function Tr(e,t=!1){return e=e.__v_raw,!t&&ve(yt(e),"iterate",Xn),Reflect.get(e,"size",e)}function mh(e){e=yt(e);const t=yt(this);return mo(t).has.call(t,e)||(t.add(e),pn(t,"add",e,e)),this}function gh(e,t){t=yt(t);const i=yt(this),{has:s,get:o}=mo(i);let a=s.call(i,e);a||(e=yt(e),a=s.call(i,e));const c=o.call(i,e);return i.set(e,t),a?Ns(t,c)&&pn(i,"set",e,t):pn(i,"add",e,t),this}function vh(e){const t=yt(this),{has:i,get:s}=mo(t);let o=i.call(t,e);o||(e=yt(e),o=i.call(t,e)),s&&s.call(t,e);const a=t.delete(e);return o&&pn(t,"delete",e,void 0),a}function yh(){const e=yt(this),t=e.size!==0,i=e.clear();return t&&pn(e,"clear",void 0,void 0),i}function Er(e,t){return function(s,o){const a=this,c=a.__v_raw,u=yt(c),f=t?bl:e?El:Os;return!e&&ve(u,"iterate",Xn),c.forEach((_,g)=>s.call(o,f(_),f(g),a))}}function Pr(e,t,i){return function(...s){const o=this.__v_raw,a=yt(o),c=Ai(a),u=e==="entries"||e===Symbol.iterator&&c,f=e==="keys"&&c,_=o[e](...s),g=i?bl:t?El:Os;return!t&&ve(a,"iterate",f?Ma:Xn),{next(){const{value:m,done:v}=_.next();return v?{value:m,done:v}:{value:u?[g(m[0]),g(m[1])]:g(m),done:v}},[Symbol.iterator](){return this}}}}function Tn(e){return function(...t){return e==="delete"?!1:this}}function im(){const e={get(a){return Cr(this,a)},get size(){return Tr(this)},has:xr,add:mh,set:gh,delete:vh,clear:yh,forEach:Er(!1,!1)},t={get(a){return Cr(this,a,!1,!0)},get size(){return Tr(this)},has:xr,add:mh,set:gh,delete:vh,clear:yh,forEach:Er(!1,!0)},i={get(a){return Cr(this,a,!0)},get size(){return Tr(this,!0)},has(a){return xr.call(this,a,!0)},add:Tn("add"),set:Tn("set"),delete:Tn("delete"),clear:Tn("clear"),forEach:Er(!0,!1)},s={get(a){return Cr(this,a,!0,!0)},get size(){return Tr(this,!0)},has(a){return xr.call(this,a,!0)},add:Tn("add"),set:Tn("set"),delete:Tn("delete"),clear:Tn("clear"),forEach:Er(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Pr(a,!1,!1),i[a]=Pr(a,!0,!1),t[a]=Pr(a,!1,!0),s[a]=Pr(a,!0,!0)}),[e,i,t,s]}const[sm,rm,om,am]=im();function Cl(e,t){const i=t?e?am:om:e?rm:sm;return(s,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(gt(i,o)&&o in s?i:s,o,a)}const lm={get:Cl(!1,!1)},cm={get:Cl(!1,!0)},hm={get:Cl(!0,!1)},Ku=new WeakMap,Yu=new WeakMap,Qu=new WeakMap,um=new WeakMap;function dm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fm(e){return e.__v_skip||!Object.isExtensible(e)?0:dm(Bp(e))}function xl(e){return Rs(e)?e:Tl(e,!1,Gu,lm,Ku)}function _m(e){return Tl(e,!1,nm,cm,Yu)}function Xu(e){return Tl(e,!0,em,hm,Qu)}function Tl(e,t,i,s,o){if(!$t(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const c=fm(e);if(c===0)return e;const u=new Proxy(e,c===2?s:i);return o.set(e,u),u}function Mi(e){return Rs(e)?Mi(e.__v_raw):!!(e&&e.__v_isReactive)}function Rs(e){return!!(e&&e.__v_isReadonly)}function Ju(e){return!!(e&&e.__v_isShallow)}function td(e){return Mi(e)||Rs(e)}function yt(e){const t=e&&e.__v_raw;return t?yt(t):e}function ed(e){return Dr(e,"__v_skip",!0),e}const Os=e=>$t(e)?xl(e):e,El=e=>$t(e)?Xu(e):e;function nd(e){Sn&&Ge&&(e=yt(e),Vu(e.dep||(e.dep=vl())))}function id(e,t){e=yt(e),e.dep&&Na(e.dep)}function Kt(e){return!!(e&&e.__v_isRef===!0)}function un(e){return pm(e,!1)}function pm(e,t){return Kt(e)?e:new mm(e,t)}class mm{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:yt(t),this._value=i?t:Os(t)}get value(){return nd(this),this._value}set value(t){t=this.__v_isShallow?t:yt(t),Ns(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Os(t),id(this))}}function ct(e){return Kt(e)?e.value:e}const gm={get:(e,t,i)=>ct(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const o=e[t];return Kt(o)&&!Kt(i)?(o.value=i,!0):Reflect.set(e,t,i,s)}};function sd(e){return Mi(e)?e:new Proxy(e,gm)}class vm{constructor(t,i,s,o){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new yl(t,()=>{this._dirty||(this._dirty=!0,id(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=yt(this);return nd(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function ym(e,t,i=!1){let s,o;const a=st(e);return a?(s=e,o=Oe):(s=e.get,o=e.set),new vm(s,o,a||!o,i)}Promise.resolve();function kn(e,t,i,s){let o;try{o=s?e(...s):e()}catch(a){go(a,t,i)}return o}function Pe(e,t,i,s){if(st(e)){const a=kn(e,t,i,s);return a&&Fu(a)&&a.catch(c=>{go(c,t,i)}),a}const o=[];for(let a=0;a<e.length;a++)o.push(Pe(e[a],t,i,s));return o}function go(e,t,i,s=!0){const o=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,u=i;for(;a;){const _=a.ec;if(_){for(let g=0;g<_.length;g++)if(_[g](e,c,u)===!1)return}a=a.parent}const f=t.appContext.config.errorHandler;if(f){kn(f,null,10,[e,c,u]);return}}wm(e,i,o,s)}function wm(e,t,i,s=!0){console.error(e)}let Fr=!1,Ra=!1;const me=[];let dn=0;const Es=[];let Cs=null,Ii=0;const Ps=[];let En=null,Si=0;const rd=Promise.resolve();let Pl=null,Oa=null;function bm(e){const t=Pl||rd;return e?t.then(this?e.bind(this):e):t}function Cm(e){let t=dn+1,i=me.length;for(;t<i;){const s=t+i>>>1;Ds(me[s])<e?t=s+1:i=s}return t}function od(e){(!me.length||!me.includes(e,Fr&&e.allowRecurse?dn+1:dn))&&e!==Oa&&(e.id==null?me.push(e):me.splice(Cm(e.id),0,e),ad())}function ad(){!Fr&&!Ra&&(Ra=!0,Pl=rd.then(hd))}function xm(e){const t=me.indexOf(e);t>dn&&me.splice(t,1)}function ld(e,t,i,s){J(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&i.push(e),ad()}function Tm(e){ld(e,Cs,Es,Ii)}function Em(e){ld(e,En,Ps,Si)}function Il(e,t=null){if(Es.length){for(Oa=t,Cs=[...new Set(Es)],Es.length=0,Ii=0;Ii<Cs.length;Ii++)Cs[Ii]();Cs=null,Ii=0,Oa=null,Il(e,t)}}function cd(e){if(Ps.length){const t=[...new Set(Ps)];if(Ps.length=0,En){En.push(...t);return}for(En=t,En.sort((i,s)=>Ds(i)-Ds(s)),Si=0;Si<En.length;Si++)En[Si]();En=null,Si=0}}const Ds=e=>e.id==null?1/0:e.id;function hd(e){Ra=!1,Fr=!0,Il(e),me.sort((i,s)=>Ds(i)-Ds(s));const t=Oe;try{for(dn=0;dn<me.length;dn++){const i=me[dn];i&&i.active!==!1&&kn(i,null,14)}}finally{dn=0,me.length=0,cd(),Fr=!1,Pl=null,(me.length||Es.length||Ps.length)&&hd(e)}}function Pm(e,t,...i){const s=e.vnode.props||It;let o=i;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:m,trim:v}=s[g]||It;v?o=i.map(E=>E.trim()):m&&(o=i.map(Br))}let u,f=s[u=ma(t)]||s[u=ma(Oi(t))];!f&&a&&(f=s[u=ma(ji(t))]),f&&Pe(f,e,6,o);const _=s[u+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,Pe(_,e,6,o)}}function ud(e,t,i=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const a=e.emits;let c={},u=!1;if(!st(e)){const f=_=>{const g=ud(_,t,!0);g&&(u=!0,re(c,g))};!i&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!a&&!u?(s.set(e,null),null):(J(a)?a.forEach(f=>c[f]=null):re(c,a),s.set(e,c),c)}function Sl(e,t){return!e||!uo(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,ji(t))||gt(e,t))}let Ne=null,dd=null;function zr(e){const t=Ne;return Ne=e,dd=e&&e.type.__scopeId||null,t}function Im(e,t=Ne,i){if(!t||e._n)return e;const s=(...o)=>{s._d&&kh(-1);const a=zr(t),c=e(...o);return zr(a),s._d&&kh(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function ga(e){const{type:t,vnode:i,proxy:s,withProxy:o,props:a,propsOptions:[c],slots:u,attrs:f,emit:_,render:g,renderCache:m,data:v,setupState:E,ctx:M,inheritAttrs:D}=e;let $,tt;const Mt=zr(e);try{if(i.shapeFlag&4){const et=o||s;$=je(g.call(et,et,m,a,E,v,M)),tt=f}else{const et=t;$=je(et.length>1?et(a,{attrs:f,slots:u,emit:_}):et(a,null)),tt=t.props?f:Sm(f)}}catch(et){Is.length=0,go(et,e,1),$=Ke(Ye)}let V=$;if(tt&&D!==!1){const et=Object.keys(tt),{shapeFlag:X}=V;et.length&&X&7&&(c&&et.some(_l)&&(tt=km(tt,c)),V=Di(V,tt))}return i.dirs&&(V.dirs=V.dirs?V.dirs.concat(i.dirs):i.dirs),i.transition&&(V.transition=i.transition),$=V,zr(Mt),$}const Sm=e=>{let t;for(const i in e)(i==="class"||i==="style"||uo(i))&&((t||(t={}))[i]=e[i]);return t},km=(e,t)=>{const i={};for(const s in e)(!_l(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function Lm(e,t,i){const{props:s,children:o,component:a}=e,{props:c,children:u,patchFlag:f}=t,_=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&f>=0){if(f&1024)return!0;if(f&16)return s?wh(s,c,_):!!c;if(f&8){const g=t.dynamicProps;for(let m=0;m<g.length;m++){const v=g[m];if(c[v]!==s[v]&&!Sl(_,v))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:s===c?!1:s?c?wh(s,c,_):!0:!!c;return!1}function wh(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const a=s[o];if(t[a]!==e[a]&&!Sl(i,a))return!0}return!1}function Am({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Mm=e=>e.__isSuspense;function Nm(e,t){t&&t.pendingBranch?J(e)?t.effects.push(...e):t.effects.push(e):Em(e)}function Rm(e,t){if(ie){let i=ie.provides;const s=ie.parent&&ie.parent.provides;s===i&&(i=ie.provides=Object.create(s)),i[e]=t}}function va(e,t,i=!1){const s=ie||Ne;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return i&&st(t)?t.call(s.proxy):t}}const bh={};function ya(e,t,i){return fd(e,t,i)}function fd(e,t,{immediate:i,deep:s,flush:o,onTrack:a,onTrigger:c}=It){const u=ie;let f,_=!1,g=!1;if(Kt(e)?(f=()=>e.value,_=Ju(e)):Mi(e)?(f=()=>e,s=!0):J(e)?(g=!0,_=e.some(Mi),f=()=>e.map(tt=>{if(Kt(tt))return tt.value;if(Mi(tt))return Yn(tt);if(st(tt))return kn(tt,u,2)})):st(e)?t?f=()=>kn(e,u,2):f=()=>{if(!(u&&u.isUnmounted))return m&&m(),Pe(e,u,3,[v])}:f=Oe,t&&s){const tt=f;f=()=>Yn(tt())}let m,v=tt=>{m=$.onStop=()=>{kn(tt,u,4)}};if(Bs)return v=Oe,t?i&&Pe(t,u,3,[f(),g?[]:void 0,v]):f(),Oe;let E=g?[]:bh;const M=()=>{if(!!$.active)if(t){const tt=$.run();(s||_||(g?tt.some((Mt,V)=>Ns(Mt,E[V])):Ns(tt,E)))&&(m&&m(),Pe(t,u,3,[tt,E===bh?void 0:E,v]),E=tt)}else $.run()};M.allowRecurse=!!t;let D;o==="sync"?D=M:o==="post"?D=()=>ue(M,u&&u.suspense):D=()=>{!u||u.isMounted?Tm(M):M()};const $=new yl(f,D);return t?i?M():E=$.run():o==="post"?ue($.run.bind($),u&&u.suspense):$.run(),()=>{$.stop(),u&&u.scope&&pl(u.scope.effects,$)}}function Om(e,t,i){const s=this.proxy,o=te(e)?e.includes(".")?_d(s,e):()=>s[e]:e.bind(s,s);let a;st(t)?a=t:(a=t.handler,i=t);const c=ie;Bi(this);const u=fd(o,a.bind(s),i);return c?Bi(c):ti(),u}function _d(e,t){const i=t.split(".");return()=>{let s=e;for(let o=0;o<i.length&&s;o++)s=s[i[o]];return s}}function Yn(e,t){if(!$t(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Kt(e))Yn(e.value,t);else if(J(e))for(let i=0;i<e.length;i++)Yn(e[i],t);else if(fo(e)||Ai(e))e.forEach(i=>{Yn(i,t)});else if(Wu(e))for(const i in e)Yn(e[i],t);return e}function Dm(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ki(()=>{e.isMounted=!0}),vd(()=>{e.isUnmounting=!0}),e}const xe=[Function,Array],Bm={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xe,onEnter:xe,onAfterEnter:xe,onEnterCancelled:xe,onBeforeLeave:xe,onLeave:xe,onAfterLeave:xe,onLeaveCancelled:xe,onBeforeAppear:xe,onAppear:xe,onAfterAppear:xe,onAppearCancelled:xe},setup(e,{slots:t}){const i=Eg(),s=Dm();let o;return()=>{const a=t.default&&md(t.default(),!0);if(!a||!a.length)return;const c=yt(e),{mode:u}=c,f=a[0];if(s.isLeaving)return wa(f);const _=Ch(f);if(!_)return wa(f);const g=Da(_,c,s,i);Ba(_,g);const m=i.subTree,v=m&&Ch(m);let E=!1;const{getTransitionKey:M}=_.type;if(M){const D=M();o===void 0?o=D:D!==o&&(o=D,E=!0)}if(v&&v.type!==Ye&&(!qn(_,v)||E)){const D=Da(v,c,s,i);if(Ba(v,D),u==="out-in")return s.isLeaving=!0,D.afterLeave=()=>{s.isLeaving=!1,i.update()},wa(f);u==="in-out"&&_.type!==Ye&&(D.delayLeave=($,tt,Mt)=>{const V=pd(s,v);V[String(v.key)]=v,$._leaveCb=()=>{tt(),$._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=Mt})}return f}}},Fm=Bm;function pd(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function Da(e,t,i,s){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:_,onEnterCancelled:g,onBeforeLeave:m,onLeave:v,onAfterLeave:E,onLeaveCancelled:M,onBeforeAppear:D,onAppear:$,onAfterAppear:tt,onAppearCancelled:Mt}=t,V=String(e.key),et=pd(i,e),X=(ut,Nt)=>{ut&&Pe(ut,s,9,Nt)},Yt={mode:a,persisted:c,beforeEnter(ut){let Nt=u;if(!i.isMounted)if(o)Nt=D||u;else return;ut._leaveCb&&ut._leaveCb(!0);const Y=et[V];Y&&qn(e,Y)&&Y.el._leaveCb&&Y.el._leaveCb(),X(Nt,[ut])},enter(ut){let Nt=f,Y=_,U=g;if(!i.isMounted)if(o)Nt=$||f,Y=tt||_,U=Mt||g;else return;let A=!1;const dt=ut._enterCb=Vt=>{A||(A=!0,Vt?X(U,[ut]):X(Y,[ut]),Yt.delayedLeave&&Yt.delayedLeave(),ut._enterCb=void 0)};Nt?(Nt(ut,dt),Nt.length<=1&&dt()):dt()},leave(ut,Nt){const Y=String(e.key);if(ut._enterCb&&ut._enterCb(!0),i.isUnmounting)return Nt();X(m,[ut]);let U=!1;const A=ut._leaveCb=dt=>{U||(U=!0,Nt(),dt?X(M,[ut]):X(E,[ut]),ut._leaveCb=void 0,et[Y]===e&&delete et[Y])};et[Y]=e,v?(v(ut,A),v.length<=1&&A()):A()},clone(ut){return Da(ut,t,i,s)}};return Yt}function wa(e){if(vo(e))return e=Di(e),e.children=null,e}function Ch(e){return vo(e)?e.children?e.children[0]:void 0:e}function Ba(e,t){e.shapeFlag&6&&e.component?Ba(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function md(e,t=!1){let i=[],s=0;for(let o=0;o<e.length;o++){const a=e[o];a.type===Ae?(a.patchFlag&128&&s++,i=i.concat(md(a.children,t))):(t||a.type!==Ye)&&i.push(a)}if(s>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}const Fa=e=>!!e.type.__asyncLoader,vo=e=>e.type.__isKeepAlive;function zm(e,t){gd(e,"a",t)}function Wm(e,t){gd(e,"da",t)}function gd(e,t,i=ie){const s=e.__wdc||(e.__wdc=()=>{let o=i;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(yo(t,s,i),i){let o=i.parent;for(;o&&o.parent;)vo(o.parent.vnode)&&Hm(s,t,i,o),o=o.parent}}function Hm(e,t,i,s){const o=yo(t,e,s,!0);yd(()=>{pl(s[t],o)},i)}function yo(e,t,i=ie,s=!1){if(i){const o=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...c)=>{if(i.isUnmounted)return;qi(),Bi(i);const u=Pe(t,i,e,c);return ti(),Gi(),u});return s?o.unshift(a):o.push(a),a}}const vn=e=>(t,i=ie)=>(!Bs||e==="sp")&&yo(e,t,i),Um=vn("bm"),Ki=vn("m"),Zm=vn("bu"),$m=vn("u"),vd=vn("bum"),yd=vn("um"),Vm=vn("sp"),jm=vn("rtg"),qm=vn("rtc");function Gm(e,t=ie){yo("ec",e,t)}let za=!0;function Km(e){const t=bd(e),i=e.proxy,s=e.ctx;za=!1,t.beforeCreate&&xh(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:u,provide:f,inject:_,created:g,beforeMount:m,mounted:v,beforeUpdate:E,updated:M,activated:D,deactivated:$,beforeDestroy:tt,beforeUnmount:Mt,destroyed:V,unmounted:et,render:X,renderTracked:Yt,renderTriggered:ut,errorCaptured:Nt,serverPrefetch:Y,expose:U,inheritAttrs:A,components:dt,directives:Vt,filters:ye}=t;if(_&&Ym(_,s,null,e.appContext.config.unwrapInjectedRef),c)for(const xt in c){const H=c[xt];st(H)&&(s[xt]=H.bind(i))}if(o){const xt=o.call(i,i);$t(xt)&&(e.data=xl(xt))}if(za=!0,a)for(const xt in a){const H=a[xt],we=st(H)?H.bind(i,i):st(H.get)?H.get.bind(i,i):Oe,ot=!st(H)&&st(H.set)?H.set.bind(i):Oe,wt=Ag({get:we,set:ot});Object.defineProperty(s,xt,{enumerable:!0,configurable:!0,get:()=>wt.value,set:Qt=>wt.value=Qt})}if(u)for(const xt in u)wd(u[xt],s,i,xt);if(f){const xt=st(f)?f.call(i):f;Reflect.ownKeys(xt).forEach(H=>{Rm(H,xt[H])})}g&&xh(g,e,"c");function Ct(xt,H){J(H)?H.forEach(we=>xt(we.bind(i))):H&&xt(H.bind(i))}if(Ct(Um,m),Ct(Ki,v),Ct(Zm,E),Ct($m,M),Ct(zm,D),Ct(Wm,$),Ct(Gm,Nt),Ct(qm,Yt),Ct(jm,ut),Ct(vd,Mt),Ct(yd,et),Ct(Vm,Y),J(U))if(U.length){const xt=e.exposed||(e.exposed={});U.forEach(H=>{Object.defineProperty(xt,H,{get:()=>i[H],set:we=>i[H]=we})})}else e.exposed||(e.exposed={});X&&e.render===Oe&&(e.render=X),A!=null&&(e.inheritAttrs=A),dt&&(e.components=dt),Vt&&(e.directives=Vt)}function Ym(e,t,i=Oe,s=!1){J(e)&&(e=Wa(e));for(const o in e){const a=e[o];let c;$t(a)?"default"in a?c=va(a.from||o,a.default,!0):c=va(a.from||o):c=va(a),Kt(c)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>c.value,set:u=>c.value=u}):t[o]=c}}function xh(e,t,i){Pe(J(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function wd(e,t,i,s){const o=s.includes(".")?_d(i,s):()=>i[s];if(te(e)){const a=t[e];st(a)&&ya(o,a)}else if(st(e))ya(o,e.bind(i));else if($t(e))if(J(e))e.forEach(a=>wd(a,t,i,s));else{const a=st(e.handler)?e.handler.bind(i):t[e.handler];st(a)&&ya(o,a,e)}}function bd(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,u=a.get(t);let f;return u?f=u:!o.length&&!i&&!s?f=t:(f={},o.length&&o.forEach(_=>Wr(f,_,c,!0)),Wr(f,t,c)),a.set(t,f),f}function Wr(e,t,i,s=!1){const{mixins:o,extends:a}=t;a&&Wr(e,a,i,!0),o&&o.forEach(c=>Wr(e,c,i,!0));for(const c in t)if(!(s&&c==="expose")){const u=Qm[c]||i&&i[c];e[c]=u?u(e[c],t[c]):t[c]}return e}const Qm={data:Th,props:$n,emits:$n,methods:$n,computed:$n,beforeCreate:ae,created:ae,beforeMount:ae,mounted:ae,beforeUpdate:ae,updated:ae,beforeDestroy:ae,beforeUnmount:ae,destroyed:ae,unmounted:ae,activated:ae,deactivated:ae,errorCaptured:ae,serverPrefetch:ae,components:$n,directives:$n,watch:Jm,provide:Th,inject:Xm};function Th(e,t){return t?e?function(){return re(st(e)?e.call(this,this):e,st(t)?t.call(this,this):t)}:t:e}function Xm(e,t){return $n(Wa(e),Wa(t))}function Wa(e){if(J(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ae(e,t){return e?[...new Set([].concat(e,t))]:t}function $n(e,t){return e?re(re(Object.create(null),e),t):t}function Jm(e,t){if(!e)return t;if(!t)return e;const i=re(Object.create(null),e);for(const s in t)i[s]=ae(e[s],t[s]);return i}function tg(e,t,i,s=!1){const o={},a={};Dr(a,wo,1),e.propsDefaults=Object.create(null),Cd(e,t,o,a);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);i?e.props=s?o:_m(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function eg(e,t,i,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,u=yt(o),[f]=e.propsOptions;let _=!1;if((s||c>0)&&!(c&16)){if(c&8){const g=e.vnode.dynamicProps;for(let m=0;m<g.length;m++){let v=g[m];const E=t[v];if(f)if(gt(a,v))E!==a[v]&&(a[v]=E,_=!0);else{const M=Oi(v);o[M]=Ha(f,u,M,E,e,!1)}else E!==a[v]&&(a[v]=E,_=!0)}}}else{Cd(e,t,o,a)&&(_=!0);let g;for(const m in u)(!t||!gt(t,m)&&((g=ji(m))===m||!gt(t,g)))&&(f?i&&(i[m]!==void 0||i[g]!==void 0)&&(o[m]=Ha(f,u,m,void 0,e,!0)):delete o[m]);if(a!==u)for(const m in a)(!t||!gt(t,m)&&!0)&&(delete a[m],_=!0)}_&&pn(e,"set","$attrs")}function Cd(e,t,i,s){const[o,a]=e.propsOptions;let c=!1,u;if(t)for(let f in t){if(Ar(f))continue;const _=t[f];let g;o&&gt(o,g=Oi(f))?!a||!a.includes(g)?i[g]=_:(u||(u={}))[g]=_:Sl(e.emitsOptions,f)||(!(f in s)||_!==s[f])&&(s[f]=_,c=!0)}if(a){const f=yt(i),_=u||It;for(let g=0;g<a.length;g++){const m=a[g];i[m]=Ha(o,f,m,_[m],e,!gt(_,m))}}return c}function Ha(e,t,i,s,o,a){const c=e[i];if(c!=null){const u=gt(c,"default");if(u&&s===void 0){const f=c.default;if(c.type!==Function&&st(f)){const{propsDefaults:_}=o;i in _?s=_[i]:(Bi(o),s=_[i]=f.call(null,t),ti())}else s=f}c[0]&&(a&&!u?s=!1:c[1]&&(s===""||s===ji(i))&&(s=!0))}return s}function xd(e,t,i=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const a=e.props,c={},u=[];let f=!1;if(!st(e)){const g=m=>{f=!0;const[v,E]=xd(m,t,!0);re(c,v),E&&u.push(...E)};!i&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!f)return s.set(e,Li),Li;if(J(a))for(let g=0;g<a.length;g++){const m=Oi(a[g]);Eh(m)&&(c[m]=It)}else if(a)for(const g in a){const m=Oi(g);if(Eh(m)){const v=a[g],E=c[m]=J(v)||st(v)?{type:v}:v;if(E){const M=Sh(Boolean,E.type),D=Sh(String,E.type);E[0]=M>-1,E[1]=D<0||M<D,(M>-1||gt(E,"default"))&&u.push(m)}}}const _=[c,u];return s.set(e,_),_}function Eh(e){return e[0]!=="$"}function Ph(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Ih(e,t){return Ph(e)===Ph(t)}function Sh(e,t){return J(t)?t.findIndex(i=>Ih(i,e)):st(t)&&Ih(t,e)?0:-1}const Td=e=>e[0]==="_"||e==="$stable",kl=e=>J(e)?e.map(je):[je(e)],ng=(e,t,i)=>{const s=Im((...o)=>kl(t(...o)),i);return s._c=!1,s},Ed=(e,t,i)=>{const s=e._ctx;for(const o in e){if(Td(o))continue;const a=e[o];if(st(a))t[o]=ng(o,a,s);else if(a!=null){const c=kl(a);t[o]=()=>c}}},Pd=(e,t)=>{const i=kl(t);e.slots.default=()=>i},ig=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=yt(t),Dr(t,"_",i)):Ed(t,e.slots={})}else e.slots={},t&&Pd(e,t);Dr(e.slots,wo,1)},sg=(e,t,i)=>{const{vnode:s,slots:o}=e;let a=!0,c=It;if(s.shapeFlag&32){const u=t._;u?i&&u===1?a=!1:(re(o,t),!i&&u===1&&delete o._):(a=!t.$stable,Ed(t,o)),c=t}else t&&(Pd(e,t),c={default:1});if(a)for(const u in o)!Td(u)&&!(u in c)&&delete o[u]};function _e(e,t){const i=Ne;if(i===null)return e;const s=i.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[c,u,f,_=It]=t[a];st(c)&&(c={mounted:c,updated:c}),c.deep&&Yn(u),o.push({dir:c,instance:s,value:u,oldValue:void 0,arg:f,modifiers:_})}return e}function Un(e,t,i,s){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const u=o[c];a&&(u.oldValue=a[c].value);let f=u.dir[s];f&&(qi(),Pe(f,i,8,[e.el,u,e,t]),Gi())}}function Id(){return{app:null,config:{isNativeTag:Rp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rg=0;function og(e,t){return function(s,o=null){o!=null&&!$t(o)&&(o=null);const a=Id(),c=new Set;let u=!1;const f=a.app={_uid:rg++,_component:s,_props:o,_container:null,_context:a,_instance:null,version:Mg,get config(){return a.config},set config(_){},use(_,...g){return c.has(_)||(_&&st(_.install)?(c.add(_),_.install(f,...g)):st(_)&&(c.add(_),_(f,...g))),f},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),f},component(_,g){return g?(a.components[_]=g,f):a.components[_]},directive(_,g){return g?(a.directives[_]=g,f):a.directives[_]},mount(_,g,m){if(!u){const v=Ke(s,o);return v.appContext=a,g&&t?t(v,_):e(v,_,m),u=!0,f._container=_,_.__vue_app__=f,Ml(v.component)||v.component.proxy}},unmount(){u&&(e(null,f._container),delete f._container.__vue_app__)},provide(_,g){return a.provides[_]=g,f}};return f}}function Ua(e,t,i,s,o=!1){if(J(e)){e.forEach((v,E)=>Ua(v,t&&(J(t)?t[E]:t),i,s,o));return}if(Fa(s)&&!o)return;const a=s.shapeFlag&4?Ml(s.component)||s.component.proxy:s.el,c=o?null:a,{i:u,r:f}=e,_=t&&t.r,g=u.refs===It?u.refs={}:u.refs,m=u.setupState;if(_!=null&&_!==f&&(te(_)?(g[_]=null,gt(m,_)&&(m[_]=null)):Kt(_)&&(_.value=null)),st(f))kn(f,u,12,[c,g]);else{const v=te(f),E=Kt(f);if(v||E){const M=()=>{if(e.f){const D=v?g[f]:f.value;o?J(D)&&pl(D,a):J(D)?D.includes(a)||D.push(a):v?g[f]=[a]:(f.value=[a],e.k&&(g[e.k]=f.value))}else v?(g[f]=c,gt(m,f)&&(m[f]=c)):Kt(f)&&(f.value=c,e.k&&(g[e.k]=c))};c?(M.id=-1,ue(M,i)):M()}}}const ue=Nm;function ag(e){return lg(e)}function lg(e,t){const i=Wp();i.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:u,createComment:f,setText:_,setElementText:g,parentNode:m,nextSibling:v,setScopeId:E=Oe,cloneNode:M,insertStaticContent:D}=e,$=(y,b,T,S=null,I=null,R=null,F=!1,N=null,B=!!b.dynamicChildren)=>{if(y===b)return;y&&!qn(y,b)&&(S=fe(y),Ot(y,I,R,!0),y=null),b.patchFlag===-2&&(B=!1,b.dynamicChildren=null);const{type:k,ref:j,shapeFlag:Z}=b;switch(k){case Ll:tt(y,b,T,S);break;case Ye:Mt(y,b,T,S);break;case Nr:y==null&&V(b,T,S,F);break;case Ae:Vt(y,b,T,S,I,R,F,N,B);break;default:Z&1?Yt(y,b,T,S,I,R,F,N,B):Z&6?ye(y,b,T,S,I,R,F,N,B):(Z&64||Z&128)&&k.process(y,b,T,S,I,R,F,N,B,Fe)}j!=null&&I&&Ua(j,y&&y.ref,R,b||y,!b)},tt=(y,b,T,S)=>{if(y==null)s(b.el=u(b.children),T,S);else{const I=b.el=y.el;b.children!==y.children&&_(I,b.children)}},Mt=(y,b,T,S)=>{y==null?s(b.el=f(b.children||""),T,S):b.el=y.el},V=(y,b,T,S)=>{[y.el,y.anchor]=D(y.children,b,T,S,y.el,y.anchor)},et=({el:y,anchor:b},T,S)=>{let I;for(;y&&y!==b;)I=v(y),s(y,T,S),y=I;s(b,T,S)},X=({el:y,anchor:b})=>{let T;for(;y&&y!==b;)T=v(y),o(y),y=T;o(b)},Yt=(y,b,T,S,I,R,F,N,B)=>{F=F||b.type==="svg",y==null?ut(b,T,S,I,R,F,N,B):U(y,b,I,R,F,N,B)},ut=(y,b,T,S,I,R,F,N)=>{let B,k;const{type:j,props:Z,shapeFlag:q,transition:Q,patchFlag:at,dirs:Tt}=y;if(y.el&&M!==void 0&&at===-1)B=y.el=M(y.el);else{if(B=y.el=c(y.type,R,Z&&Z.is,Z),q&8?g(B,y.children):q&16&&Y(y.children,B,null,S,I,R&&j!=="foreignObject",F,N),Tt&&Un(y,null,S,"created"),Z){for(const Et in Z)Et!=="value"&&!Ar(Et)&&a(B,Et,null,Z[Et],R,y.children,S,I,jt);"value"in Z&&a(B,"value",null,Z.value),(k=Z.onVnodeBeforeMount)&&$e(k,S,y)}Nt(B,y,y.scopeId,F,S)}Tt&&Un(y,null,S,"beforeMount");const _t=(!I||I&&!I.pendingBranch)&&Q&&!Q.persisted;_t&&Q.beforeEnter(B),s(B,b,T),((k=Z&&Z.onVnodeMounted)||_t||Tt)&&ue(()=>{k&&$e(k,S,y),_t&&Q.enter(B),Tt&&Un(y,null,S,"mounted")},I)},Nt=(y,b,T,S,I)=>{if(T&&E(y,T),S)for(let R=0;R<S.length;R++)E(y,S[R]);if(I){let R=I.subTree;if(b===R){const F=I.vnode;Nt(y,F,F.scopeId,F.slotScopeIds,I.parent)}}},Y=(y,b,T,S,I,R,F,N,B=0)=>{for(let k=B;k<y.length;k++){const j=y[k]=N?Pn(y[k]):je(y[k]);$(null,j,b,T,S,I,R,F,N)}},U=(y,b,T,S,I,R,F)=>{const N=b.el=y.el;let{patchFlag:B,dynamicChildren:k,dirs:j}=b;B|=y.patchFlag&16;const Z=y.props||It,q=b.props||It;let Q;T&&Zn(T,!1),(Q=q.onVnodeBeforeUpdate)&&$e(Q,T,b,y),j&&Un(b,y,T,"beforeUpdate"),T&&Zn(T,!0);const at=I&&b.type!=="foreignObject";if(k?A(y.dynamicChildren,k,N,T,S,at,R):F||we(y,b,N,null,T,S,at,R,!1),B>0){if(B&16)dt(N,b,Z,q,T,S,I);else if(B&2&&Z.class!==q.class&&a(N,"class",null,q.class,I),B&4&&a(N,"style",Z.style,q.style,I),B&8){const Tt=b.dynamicProps;for(let _t=0;_t<Tt.length;_t++){const Et=Tt[_t],he=Z[Et],tn=q[Et];(tn!==he||Et==="value")&&a(N,Et,he,tn,I,y.children,T,S,jt)}}B&1&&y.children!==b.children&&g(N,b.children)}else!F&&k==null&&dt(N,b,Z,q,T,S,I);((Q=q.onVnodeUpdated)||j)&&ue(()=>{Q&&$e(Q,T,b,y),j&&Un(b,y,T,"updated")},S)},A=(y,b,T,S,I,R,F)=>{for(let N=0;N<b.length;N++){const B=y[N],k=b[N],j=B.el&&(B.type===Ae||!qn(B,k)||B.shapeFlag&70)?m(B.el):T;$(B,k,j,null,S,I,R,F,!0)}},dt=(y,b,T,S,I,R,F)=>{if(T!==S){for(const N in S){if(Ar(N))continue;const B=S[N],k=T[N];B!==k&&N!=="value"&&a(y,N,k,B,F,b.children,I,R,jt)}if(T!==It)for(const N in T)!Ar(N)&&!(N in S)&&a(y,N,T[N],null,F,b.children,I,R,jt);"value"in S&&a(y,"value",T.value,S.value)}},Vt=(y,b,T,S,I,R,F,N,B)=>{const k=b.el=y?y.el:u(""),j=b.anchor=y?y.anchor:u("");let{patchFlag:Z,dynamicChildren:q,slotScopeIds:Q}=b;Q&&(N=N?N.concat(Q):Q),y==null?(s(k,T,S),s(j,T,S),Y(b.children,T,j,I,R,F,N,B)):Z>0&&Z&64&&q&&y.dynamicChildren?(A(y.dynamicChildren,q,T,I,R,F,N),(b.key!=null||I&&b===I.subTree)&&Sd(y,b,!0)):we(y,b,T,j,I,R,F,N,B)},ye=(y,b,T,S,I,R,F,N,B)=>{b.slotScopeIds=N,y==null?b.shapeFlag&512?I.ctx.activate(b,T,S,F,B):es(b,T,S,I,R,F,B):Ct(y,b,B)},es=(y,b,T,S,I,R,F)=>{const N=y.component=Tg(y,S,I);if(vo(y)&&(N.ctx.renderer=Fe),Pg(N),N.asyncDep){if(I&&I.registerDep(N,xt),!y.el){const B=N.subTree=Ke(Ye);Mt(null,B,b,T)}return}xt(N,y,b,T,I,R,F)},Ct=(y,b,T)=>{const S=b.component=y.component;if(Lm(y,b,T))if(S.asyncDep&&!S.asyncResolved){H(S,b,T);return}else S.next=b,xm(S.update),S.update();else b.component=y.component,b.el=y.el,S.vnode=b},xt=(y,b,T,S,I,R,F)=>{const N=()=>{if(y.isMounted){let{next:j,bu:Z,u:q,parent:Q,vnode:at}=y,Tt=j,_t;Zn(y,!1),j?(j.el=at.el,H(y,j,F)):j=at,Z&&Mr(Z),(_t=j.props&&j.props.onVnodeBeforeUpdate)&&$e(_t,Q,j,at),Zn(y,!0);const Et=ga(y),he=y.subTree;y.subTree=Et,$(he,Et,m(he.el),fe(he),y,I,R),j.el=Et.el,Tt===null&&Am(y,Et.el),q&&ue(q,I),(_t=j.props&&j.props.onVnodeUpdated)&&ue(()=>$e(_t,Q,j,at),I)}else{let j;const{el:Z,props:q}=b,{bm:Q,m:at,parent:Tt}=y,_t=Fa(b);if(Zn(y,!1),Q&&Mr(Q),!_t&&(j=q&&q.onVnodeBeforeMount)&&$e(j,Tt,b),Zn(y,!0),Z&&Je){const Et=()=>{y.subTree=ga(y),Je(Z,y.subTree,y,I,null)};_t?b.type.__asyncLoader().then(()=>!y.isUnmounted&&Et()):Et()}else{const Et=y.subTree=ga(y);$(null,Et,T,S,y,I,R),b.el=Et.el}if(at&&ue(at,I),!_t&&(j=q&&q.onVnodeMounted)){const Et=b;ue(()=>$e(j,Tt,Et),I)}b.shapeFlag&256&&y.a&&ue(y.a,I),y.isMounted=!0,b=T=S=null}},B=y.effect=new yl(N,()=>od(y.update),y.scope),k=y.update=B.run.bind(B);k.id=y.uid,Zn(y,!0),k()},H=(y,b,T)=>{b.component=y;const S=y.vnode.props;y.vnode=b,y.next=null,eg(y,b.props,S,T),sg(y,b.children,T),qi(),Il(void 0,y.update),Gi()},we=(y,b,T,S,I,R,F,N,B=!1)=>{const k=y&&y.children,j=y?y.shapeFlag:0,Z=b.children,{patchFlag:q,shapeFlag:Q}=b;if(q>0){if(q&128){wt(k,Z,T,S,I,R,F,N,B);return}else if(q&256){ot(k,Z,T,S,I,R,F,N,B);return}}Q&8?(j&16&&jt(k,I,R),Z!==k&&g(T,Z)):j&16?Q&16?wt(k,Z,T,S,I,R,F,N,B):jt(k,I,R,!0):(j&8&&g(T,""),Q&16&&Y(Z,T,S,I,R,F,N,B))},ot=(y,b,T,S,I,R,F,N,B)=>{y=y||Li,b=b||Li;const k=y.length,j=b.length,Z=Math.min(k,j);let q;for(q=0;q<Z;q++){const Q=b[q]=B?Pn(b[q]):je(b[q]);$(y[q],Q,T,null,I,R,F,N,B)}k>j?jt(y,I,R,!0,!1,Z):Y(b,T,S,I,R,F,N,B,Z)},wt=(y,b,T,S,I,R,F,N,B)=>{let k=0;const j=b.length;let Z=y.length-1,q=j-1;for(;k<=Z&&k<=q;){const Q=y[k],at=b[k]=B?Pn(b[k]):je(b[k]);if(qn(Q,at))$(Q,at,T,null,I,R,F,N,B);else break;k++}for(;k<=Z&&k<=q;){const Q=y[Z],at=b[q]=B?Pn(b[q]):je(b[q]);if(qn(Q,at))$(Q,at,T,null,I,R,F,N,B);else break;Z--,q--}if(k>Z){if(k<=q){const Q=q+1,at=Q<j?b[Q].el:S;for(;k<=q;)$(null,b[k]=B?Pn(b[k]):je(b[k]),T,at,I,R,F,N,B),k++}}else if(k>q)for(;k<=Z;)Ot(y[k],I,R,!0),k++;else{const Q=k,at=k,Tt=new Map;for(k=at;k<=q;k++){const St=b[k]=B?Pn(b[k]):je(b[k]);St.key!=null&&Tt.set(St.key,k)}let _t,Et=0;const he=q-at+1;let tn=!1,di=0;const en=new Array(he);for(k=0;k<he;k++)en[k]=0;for(k=Q;k<=Z;k++){const St=y[k];if(Et>=he){Ot(St,I,R,!0);continue}let ee;if(St.key!=null)ee=Tt.get(St.key);else for(_t=at;_t<=q;_t++)if(en[_t-at]===0&&qn(St,b[_t])){ee=_t;break}ee===void 0?Ot(St,I,R,!0):(en[ee-at]=k+1,ee>=di?di=ee:tn=!0,$(St,b[ee],T,null,I,R,F,N,B),Et++)}const is=tn?cg(en):Li;for(_t=is.length-1,k=he-1;k>=0;k--){const St=at+k,ee=b[St],Js=St+1<j?b[St+1].el:S;en[k]===0?$(null,ee,T,Js,I,R,F,N,B):tn&&(_t<0||k!==is[_t]?Qt(ee,T,Js,2):_t--)}}},Qt=(y,b,T,S,I=null)=>{const{el:R,type:F,transition:N,children:B,shapeFlag:k}=y;if(k&6){Qt(y.component.subTree,b,T,S);return}if(k&128){y.suspense.move(b,T,S);return}if(k&64){F.move(y,b,T,Fe);return}if(F===Ae){s(R,b,T);for(let Z=0;Z<B.length;Z++)Qt(B[Z],b,T,S);s(y.anchor,b,T);return}if(F===Nr){et(y,b,T);return}if(S!==2&&k&1&&N)if(S===0)N.beforeEnter(R),s(R,b,T),ue(()=>N.enter(R),I);else{const{leave:Z,delayLeave:q,afterLeave:Q}=N,at=()=>s(R,b,T),Tt=()=>{Z(R,()=>{at(),Q&&Q()})};q?q(R,at,Tt):Tt()}else s(R,b,T)},Ot=(y,b,T,S=!1,I=!1)=>{const{type:R,props:F,ref:N,children:B,dynamicChildren:k,shapeFlag:j,patchFlag:Z,dirs:q}=y;if(N!=null&&Ua(N,null,T,y,!0),j&256){b.ctx.deactivate(y);return}const Q=j&1&&q,at=!Fa(y);let Tt;if(at&&(Tt=F&&F.onVnodeBeforeUnmount)&&$e(Tt,b,y),j&6)Rt(y.component,T,S);else{if(j&128){y.suspense.unmount(T,S);return}Q&&Un(y,null,b,"beforeUnmount"),j&64?y.type.remove(y,b,T,I,Fe,S):k&&(R!==Ae||Z>0&&Z&64)?jt(k,b,T,!1,!0):(R===Ae&&Z&384||!I&&j&16)&&jt(B,b,T),S&&Wt(y)}(at&&(Tt=F&&F.onVnodeUnmounted)||Q)&&ue(()=>{Tt&&$e(Tt,b,y),Q&&Un(y,null,b,"unmounted")},T)},Wt=y=>{const{type:b,el:T,anchor:S,transition:I}=y;if(b===Ae){bt(T,S);return}if(b===Nr){X(y);return}const R=()=>{o(T),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(y.shapeFlag&1&&I&&!I.persisted){const{leave:F,delayLeave:N}=I,B=()=>F(T,R);N?N(y.el,R,B):B()}else R()},bt=(y,b)=>{let T;for(;y!==b;)T=v(y),o(y),y=T;o(b)},Rt=(y,b,T)=>{const{bum:S,scope:I,update:R,subTree:F,um:N}=y;S&&Mr(S),I.stop(),R&&(R.active=!1,Ot(F,y,b,T)),N&&ue(N,b),ue(()=>{y.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},jt=(y,b,T,S=!1,I=!1,R=0)=>{for(let F=R;F<y.length;F++)Ot(y[F],b,T,S,I)},fe=y=>y.shapeFlag&6?fe(y.component.subTree):y.shapeFlag&128?y.suspense.next():v(y.anchor||y.el),ns=(y,b,T)=>{y==null?b._vnode&&Ot(b._vnode,null,null,!0):$(b._vnode||null,y,b,null,null,null,T),cd(),b._vnode=y},Fe={p:$,um:Ot,m:Qt,r:Wt,mt:es,mc:Y,pc:we,pbc:A,n:fe,o:e};let Dn,Je;return t&&([Dn,Je]=t(Fe)),{render:ns,hydrate:Dn,createApp:og(ns,Dn)}}function Zn({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function Sd(e,t,i=!1){const s=e.children,o=t.children;if(J(s)&&J(o))for(let a=0;a<s.length;a++){const c=s[a];let u=o[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[a]=Pn(o[a]),u.el=c.el),i||Sd(c,u))}}function cg(e){const t=e.slice(),i=[0];let s,o,a,c,u;const f=e.length;for(s=0;s<f;s++){const _=e[s];if(_!==0){if(o=i[i.length-1],e[o]<_){t[s]=o,i.push(s);continue}for(a=0,c=i.length-1;a<c;)u=a+c>>1,e[i[u]]<_?a=u+1:c=u;_<e[i[a]]&&(a>0&&(t[s]=i[a-1]),i[a]=s)}}for(a=i.length,c=i[a-1];a-- >0;)i[a]=c,c=t[c];return i}const hg=e=>e.__isTeleport,ug=Symbol(),Ae=Symbol(void 0),Ll=Symbol(void 0),Ye=Symbol(void 0),Nr=Symbol(void 0),Is=[];let Jn=null;function Ve(e=!1){Is.push(Jn=e?null:[])}function dg(){Is.pop(),Jn=Is[Is.length-1]||null}let Hr=1;function kh(e){Hr+=e}function kd(e){return e.dynamicChildren=Hr>0?Jn||Li:null,dg(),Hr>0&&Jn&&Jn.push(e),e}function hn(e,t,i,s,o,a){return kd(z(e,t,i,s,o,a,!0))}function fg(e,t,i,s,o){return kd(Ke(e,t,i,s,o,!0))}function _g(e){return e?e.__v_isVNode===!0:!1}function qn(e,t){return e.type===t.type&&e.key===t.key}const wo="__vInternal",Ld=({key:e})=>e!=null?e:null,Rr=({ref:e,ref_key:t,ref_for:i})=>e!=null?te(e)||Kt(e)||st(e)?{i:Ne,r:e,k:t,f:!!i}:e:null;function z(e,t=null,i=null,s=0,o=null,a=e===Ae?0:1,c=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ld(t),ref:t&&Rr(t),scopeId:dd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return u?(Al(f,i),a&128&&e.normalize(f)):i&&(f.shapeFlag|=te(i)?8:16),Hr>0&&!c&&Jn&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&Jn.push(f),f}const Ke=pg;function pg(e,t=null,i=null,s=0,o=null,a=!1){if((!e||e===ug)&&(e=Ye),_g(e)){const u=Di(e,t,!0);return i&&Al(u,i),u}if(Lg(e)&&(e=e.__vccOpts),t){t=mg(t);let{class:u,style:f}=t;u&&!te(u)&&(t.class=qe(u)),$t(f)&&(td(f)&&!J(f)&&(f=re({},f)),t.style=co(f))}const c=te(e)?1:Mm(e)?128:hg(e)?64:$t(e)?4:st(e)?2:0;return z(e,t,i,s,o,c,a,!0)}function mg(e){return e?td(e)||wo in e?re({},e):e:null}function Di(e,t,i=!1){const{props:s,ref:o,patchFlag:a,children:c}=e,u=t?yg(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Ld(u),ref:t&&t.ref?i&&o?J(o)?o.concat(Rr(t)):[o,Rr(t)]:Rr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ae?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Di(e.ssContent),ssFallback:e.ssFallback&&Di(e.ssFallback),el:e.el,anchor:e.anchor}}function gg(e=" ",t=0){return Ke(Ll,null,e,t)}function vg(e,t){const i=Ke(Nr,null,e);return i.staticCount=t,i}function xs(e="",t=!1){return t?(Ve(),fg(Ye,null,e)):Ke(Ye,null,e)}function je(e){return e==null||typeof e=="boolean"?Ke(Ye):J(e)?Ke(Ae,null,e.slice()):typeof e=="object"?Pn(e):Ke(Ll,null,String(e))}function Pn(e){return e.el===null||e.memo?e:Di(e)}function Al(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(J(t))i=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Al(e,o()),o._c&&(o._d=!0));return}else{i=32;const o=t._;!o&&!(wo in t)?t._ctx=Ne:o===3&&Ne&&(Ne.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else st(t)?(t={default:t,_ctx:Ne},i=32):(t=String(t),s&64?(i=16,t=[gg(t)]):i=8);e.children=t,e.shapeFlag|=i}function yg(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=qe([t.class,s.class]));else if(o==="style")t.style=co([t.style,s.style]);else if(uo(o)){const a=t[o],c=s[o];c&&a!==c&&!(J(a)&&a.includes(c))&&(t[o]=a?[].concat(a,c):c)}else o!==""&&(t[o]=s[o])}return t}function $e(e,t,i,s=null){Pe(e,t,7,[i,s])}function wg(e,t,i,s){let o;const a=i&&i[s];if(J(e)||te(e)){o=new Array(e.length);for(let c=0,u=e.length;c<u;c++)o[c]=t(e[c],c,void 0,a&&a[c])}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,a&&a[c])}else if($t(e))if(e[Symbol.iterator])o=Array.from(e,(c,u)=>t(c,u,void 0,a&&a[u]));else{const c=Object.keys(e);o=new Array(c.length);for(let u=0,f=c.length;u<f;u++){const _=c[u];o[u]=t(e[_],_,u,a&&a[u])}}else o=[];return i&&(i[s]=o),o}const Za=e=>e?Ad(e)?Ml(e)||e.proxy:Za(e.parent):null,Ur=re(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Za(e.parent),$root:e=>Za(e.root),$emit:e=>e.emit,$options:e=>bd(e),$forceUpdate:e=>()=>od(e.update),$nextTick:e=>bm.bind(e.proxy),$watch:e=>Om.bind(e)}),bg={get({_:e},t){const{ctx:i,setupState:s,data:o,props:a,accessCache:c,type:u,appContext:f}=e;let _;if(t[0]!=="$"){const E=c[t];if(E!==void 0)switch(E){case 1:return s[t];case 2:return o[t];case 4:return i[t];case 3:return a[t]}else{if(s!==It&&gt(s,t))return c[t]=1,s[t];if(o!==It&&gt(o,t))return c[t]=2,o[t];if((_=e.propsOptions[0])&&gt(_,t))return c[t]=3,a[t];if(i!==It&&gt(i,t))return c[t]=4,i[t];za&&(c[t]=0)}}const g=Ur[t];let m,v;if(g)return t==="$attrs"&&ve(e,"get",t),g(e);if((m=u.__cssModules)&&(m=m[t]))return m;if(i!==It&&gt(i,t))return c[t]=4,i[t];if(v=f.config.globalProperties,gt(v,t))return v[t]},set({_:e},t,i){const{data:s,setupState:o,ctx:a}=e;return o!==It&&gt(o,t)?(o[t]=i,!0):s!==It&&gt(s,t)?(s[t]=i,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:o,propsOptions:a}},c){let u;return!!i[c]||e!==It&&gt(e,c)||t!==It&&gt(t,c)||(u=a[0])&&gt(u,c)||gt(s,c)||gt(Ur,c)||gt(o.config.globalProperties,c)},defineProperty(e,t,i){return i.get!=null?this.set(e,t,i.get(),null):i.value!=null&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},Cg=Id();let xg=0;function Tg(e,t,i){const s=e.type,o=(t?t.appContext:e.appContext)||Cg,a={uid:xg++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xd(s,o),emitsOptions:ud(s,o),emit:null,emitted:null,propsDefaults:It,inheritAttrs:s.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Pm.bind(null,a),e.ce&&e.ce(a),a}let ie=null;const Eg=()=>ie||Ne,Bi=e=>{ie=e,e.scope.on()},ti=()=>{ie&&ie.scope.off(),ie=null};function Ad(e){return e.vnode.shapeFlag&4}let Bs=!1;function Pg(e,t=!1){Bs=t;const{props:i,children:s}=e.vnode,o=Ad(e);tg(e,i,o,t),ig(e,s);const a=o?Ig(e,t):void 0;return Bs=!1,a}function Ig(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=ed(new Proxy(e.ctx,bg));const{setup:s}=i;if(s){const o=e.setupContext=s.length>1?kg(e):null;Bi(e),qi();const a=kn(s,e,0,[e.props,o]);if(Gi(),ti(),Fu(a)){if(a.then(ti,ti),t)return a.then(c=>{Lh(e,c,t)}).catch(c=>{go(c,e,0)});e.asyncDep=a}else Lh(e,a,t)}else Md(e,t)}function Lh(e,t,i){st(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$t(t)&&(e.setupState=sd(t)),Md(e,i)}let Ah;function Md(e,t,i){const s=e.type;if(!e.render){if(!t&&Ah&&!s.render){const o=s.template;if(o){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:u,compilerOptions:f}=s,_=re(re({isCustomElement:a,delimiters:u},c),f);s.render=Ah(o,_)}}e.render=s.render||Oe}Bi(e),qi(),Km(e),Gi(),ti()}function Sg(e){return new Proxy(e.attrs,{get(t,i){return ve(e,"get","$attrs"),t[i]}})}function kg(e){const t=s=>{e.exposed=s||{}};let i;return{get attrs(){return i||(i=Sg(e))},slots:e.slots,emit:e.emit,expose:t}}function Ml(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(sd(ed(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Ur)return Ur[i](e)}}))}function Lg(e){return st(e)&&"__vccOpts"in e}const Ag=(e,t)=>ym(e,t,Bs),Mg="3.2.31",Ng="http://www.w3.org/2000/svg",Gn=typeof document!="undefined"?document:null,Mh=Gn&&Gn.createElement("template"),Rg={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const o=t?Gn.createElementNS(Ng,e):Gn.createElement(e,i?{is:i}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Gn.createTextNode(e),createComment:e=>Gn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Gn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,s,o,a){const c=i?i.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),i),!(o===a||!(o=o.nextSibling)););else{Mh.innerHTML=s?`<svg>${e}</svg>`:e;const u=Mh.content;if(s){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}t.insertBefore(u,i)}return[c?c.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Og(e,t,i){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Dg(e,t,i){const s=e.style,o=te(i);if(i&&!o){for(const a in i)$a(s,a,i[a]);if(t&&!te(t))for(const a in t)i[a]==null&&$a(s,a,"")}else{const a=s.display;o?t!==i&&(s.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=a)}}const Nh=/\s*!important$/;function $a(e,t,i){if(J(i))i.forEach(s=>$a(e,t,s));else if(t.startsWith("--"))e.setProperty(t,i);else{const s=Bg(e,t);Nh.test(i)?e.setProperty(ji(s),i.replace(Nh,""),"important"):e[s]=i}}const Rh=["Webkit","Moz","ms"],ba={};function Bg(e,t){const i=ba[t];if(i)return i;let s=Oi(t);if(s!=="filter"&&s in e)return ba[t]=s;s=Hu(s);for(let o=0;o<Rh.length;o++){const a=Rh[o]+s;if(a in e)return ba[t]=a}return t}const Oh="http://www.w3.org/1999/xlink";function Fg(e,t,i,s,o){if(s&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Oh,t.slice(6,t.length)):e.setAttributeNS(Oh,t,i);else{const a=Sp(t);i==null||a&&!Du(i)?e.removeAttribute(t):e.setAttribute(t,a?"":i)}}function zg(e,t,i,s,o,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,o,a),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const u=i==null?"":i;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const u=typeof e[t];if(u==="boolean"){e[t]=Du(i);return}else if(i==null&&u==="string"){e[t]="",e.removeAttribute(t);return}else if(u==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let Zr=Date.now,Nd=!1;if(typeof window!="undefined"){Zr()>document.createEvent("Event").timeStamp&&(Zr=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Nd=!!(e&&Number(e[1])<=53)}let Va=0;const Wg=Promise.resolve(),Hg=()=>{Va=0},Ug=()=>Va||(Wg.then(Hg),Va=Zr());function Kn(e,t,i,s){e.addEventListener(t,i,s)}function Zg(e,t,i,s){e.removeEventListener(t,i,s)}function $g(e,t,i,s,o=null){const a=e._vei||(e._vei={}),c=a[t];if(s&&c)c.value=s;else{const[u,f]=Vg(t);if(s){const _=a[t]=jg(s,o);Kn(e,u,_,f)}else c&&(Zg(e,u,c,f),a[t]=void 0)}}const Dh=/(?:Once|Passive|Capture)$/;function Vg(e){let t;if(Dh.test(e)){t={};let i;for(;i=e.match(Dh);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[ji(e.slice(2)),t]}function jg(e,t){const i=s=>{const o=s.timeStamp||Zr();(Nd||o>=i.attached-1)&&Pe(qg(s,i.value),t,5,[s])};return i.value=e,i.attached=Ug(),i}function qg(e,t){if(J(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Bh=/^on[a-z]/,Gg=(e,t,i,s,o=!1,a,c,u,f)=>{t==="class"?Og(e,s,o):t==="style"?Dg(e,i,s):uo(t)?_l(t)||$g(e,t,i,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Kg(e,t,s,o))?zg(e,t,s,a,c,u,f):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Fg(e,t,s,o))};function Kg(e,t,i,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&Bh.test(t)&&st(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Bh.test(t)&&te(i)?!1:t in e}const Yg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Fm.props;const $r=e=>{const t=e.props["onUpdate:modelValue"];return J(t)?i=>Mr(t,i):t};function Qg(e){e.target.composing=!0}function Fh(e){const t=e.target;t.composing&&(t.composing=!1,Xg(t,"input"))}function Xg(e,t){const i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}const Le={created(e,{modifiers:{lazy:t,trim:i,number:s}},o){e._assign=$r(o);const a=s||o.props&&o.props.type==="number";Kn(e,t?"change":"input",c=>{if(c.target.composing)return;let u=e.value;i?u=u.trim():a&&(u=Br(u)),e._assign(u)}),i&&Kn(e,"change",()=>{e.value=e.value.trim()}),t||(Kn(e,"compositionstart",Qg),Kn(e,"compositionend",Fh),Kn(e,"change",Fh))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:s,number:o}},a){if(e._assign=$r(a),e.composing||document.activeElement===e&&(i||s&&e.value.trim()===t||(o||e.type==="number")&&Br(e.value)===t))return;const c=t==null?"":t;e.value!==c&&(e.value=c)}},Jg={deep:!0,created(e,{value:t,modifiers:{number:i}},s){const o=fo(t);Kn(e,"change",()=>{const a=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>i?Br(Vr(c)):Vr(c));e._assign(e.multiple?o?new Set(a):a:a[0])}),e._assign=$r(s)},mounted(e,{value:t}){zh(e,t)},beforeUpdate(e,t,i){e._assign=$r(i)},updated(e,{value:t}){zh(e,t)}};function zh(e,t){const i=e.multiple;if(!(i&&!J(t)&&!fo(t))){for(let s=0,o=e.options.length;s<o;s++){const a=e.options[s],c=Vr(a);if(i)J(t)?a.selected=Np(t,c)>-1:a.selected=t.has(c);else if(ho(Vr(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Vr(e){return"_value"in e?e._value:e.value}const tv={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):ms(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:s}){!t!=!i&&(s?t?(s.beforeEnter(e),ms(e,!0),s.enter(e)):s.leave(e,()=>{ms(e,!1)}):ms(e,t))},beforeUnmount(e,{value:t}){ms(e,t)}};function ms(e,t){e.style.display=t?e._vod:"none"}const ev=re({patchProp:Gg},Rg);let Wh;function nv(){return Wh||(Wh=ag(ev))}const bo=(...e)=>{const t=nv().createApp(...e),{mount:i}=t;return t.mount=s=>{const o=iv(s);if(!o)return;const a=t._component;!st(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const c=i(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},t};function iv(e){return te(e)?document.querySelector(e):e}const ei=un({show_map:!1,show_about:!1,show_msg:!1});const sv={class:"container-fluid d-flex pe-0 navtxt"},rv=z("div",{class:"col-4 align-self-center text-light"},"Finding SanBau",-1),ov=z("input",{class:"col-6 px-3 py-2 border border-secondary rounded bg-dark text-light",type:"text",placeholder:"Plate/Nickname",maxlength:"20"},null,-1),av={setup(e){let t=un({map:"",about:"",msg:""});function i(f){for(let _ in ei.value)ei.value[_]=!1;for(let _ in t.value)t.value[_]="";ei.value[`show_${f}`]=!0,t.value[f]="text-warning"}function s(){i("map")}function o(){i("about")}function a(){i("msg")}function c(){window.open("https://github.com/OGC-Fever")}function u(){}return Ki(()=>{s()}),(f,_)=>(Ve(),hn("div",sv,[z("div",{class:"navbar-brand text-light",type:"button",onClick:s},"Cyber Butchers"),z("div",{class:qe(["navbar-brand fs-6",ct(t).map]),type:"button",onClick:s},"SanBau Map",2),z("div",{class:qe(["navbar-brand fs-6",ct(t).about]),type:"button",onClick:o},"About",2),z("div",{class:qe(["navbar-brand fs-6",ct(t).msg]),type:"button",onClick:a},"Message Board",2),z("div",{class:"navbar-brand fs-6",type:"button",onClick:c},"GitHub"),z("div",{class:"d-flex col-4 my-1 ms-auto"},[rv,ov,z("div",{class:"col fs-4 px-0 badge align-self-center text-warning",type:"button",onClick:u},"Go")])]))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=function(e,t){if(!e)throw Yi(t)},Yi=function(e){return new Error("Firebase Database ("+Rd.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let o=e.charCodeAt(s);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++s)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},lv=function(e){const t=[];let i=0,s=0;for(;i<e.length;){const o=e[i++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=e[i++];t[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=e[i++],c=e[i++],u=e[i++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;t[s++]=String.fromCharCode(55296+(f>>10)),t[s++]=String.fromCharCode(56320+(f&1023))}else{const a=e[i++],c=e[i++];t[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return t.join("")},Co={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<e.length;o+=3){const a=e[o],c=o+1<e.length,u=c?e[o+1]:0,f=o+2<e.length,_=f?e[o+2]:0,g=a>>2,m=(a&3)<<4|u>>4;let v=(u&15)<<2|_>>6,E=_&63;f||(E=64,c||(v=64)),s.push(i[g],i[m],i[v],i[E])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Od(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lv(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<e.length;){const a=i[e.charAt(o++)],u=o<e.length?i[e.charAt(o)]:0;++o;const _=o<e.length?i[e.charAt(o)]:64;++o;const m=o<e.length?i[e.charAt(o)]:64;if(++o,a==null||u==null||_==null||m==null)throw Error();const v=a<<2|u>>4;if(s.push(v),_!==64){const E=u<<4&240|_>>2;if(s.push(E),m!==64){const M=_<<6&192|m;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Dd=function(e){const t=Od(e);return Co.encodeByteArray(t,!0)},Bd=function(e){return Dd(e).replace(/\./g,"")},Hh=function(e){try{return Co.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){return Fd(void 0,e)}function Fd(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!hv(i)||(e[i]=Fd(e[i],t[i]));return e}function hv(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zd(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(uv())}function dv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wd(){return Rd.NODE_ADMIN===!0}function Nl(){return typeof indexedDB=="object"}function fv(){return new Promise((e,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(s),e(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var a;t(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(i){t(i)}})}function _v(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="FirebaseError";class Rl extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=pv,Object.setPrototypeOf(this,Rl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ol.prototype.create)}}class Ol{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},o=`${this.service}/${t}`,a=this.errors[t],c=a?mv(a,s):"Error",u=`${this.serviceName}: ${c} (${o}).`;return new Rl(o,u,s)}}function mv(e,t){return e.replace(gv,(i,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const gv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(e){return JSON.parse(e)}function Gt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=function(e){let t={},i={},s={},o="";try{const a=e.split(".");t=Fs(Hh(a[0])||""),i=Fs(Hh(a[1])||""),o=a[2],s=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:s,signature:o}},vv=function(e){const t=Hd(e),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},yv=function(e){const t=Hd(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Uh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function jr(e,t,i){const s={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s[o]=t.call(i,e[o],o,e));return s}function ja(e,t){if(e===t)return!0;const i=Object.keys(e),s=Object.keys(t);for(const o of i){if(!s.includes(o))return!1;const a=e[o],c=t[o];if(Zh(a)&&Zh(c)){if(!ja(a,c))return!1}else if(a!==c)return!1}for(const o of s)if(!i.includes(o))return!1;return!0}function Zh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(e){const t=[];for(const[i,s]of Object.entries(e))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const s=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)s[m]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let m=0;m<16;m++)s[m]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let m=16;m<80;m++){const v=s[m-3]^s[m-8]^s[m-14]^s[m-16];s[m]=(v<<1|v>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],u=this.chain_[3],f=this.chain_[4],_,g;for(let m=0;m<80;m++){m<40?m<20?(_=u^a&(c^u),g=1518500249):(_=a^c^u,g=1859775393):m<60?(_=a&c|u&(a|c),g=2400959708):(_=a^c^u,g=3395469782);const v=(o<<5|o>>>27)+_+f+g+s[m]&4294967295;f=u,u=c,c=(a<<30|a>>>2)&4294967295,a=o,o=v}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const s=i-this.blockSize;let o=0;const a=this.buf_;let c=this.inbuf_;for(;o<i;){if(c===0)for(;o<=s;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<i;)if(a[c]=t.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}else for(;o<i;)if(a[c]=t[o],++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)t[s]=this.chain_[o]>>a&255,++s;return t}}function xo(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let o=e.charCodeAt(s);if(o>=55296&&o<=56319){const a=o-55296;s++,O(s<e.length,"Surrogate pair missing trail surrogate.");const c=e.charCodeAt(s)-56320;o=65536+(a<<10)+c}o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):o<65536?(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},To=function(e){let t=0;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=1e3,Tv=2,Ev=4*60*60*1e3,Pv=.5;function Iv(e,t=xv,i=Tv){const s=t*Math.pow(i,e),o=Math.round(Pv*s*(Math.random()-.5)*2);return Math.min(Ev,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(e,t){return new Promise((i,s)=>{e.onsuccess=o=>{i(o.target.result)},e.onerror=o=>{var a;s(`${t}: ${(a=o.target.error)===null||a===void 0?void 0:a.message}`)}})}class $h{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,i){return new Ud(this._db.transaction.call(this._db,t,i))}createObjectStore(t,i){return new Zd(this._db.createObjectStore(t,i))}close(){this._db.close()}}class Ud{constructor(t){this._transaction=t,this.complete=new Promise((i,s)=>{this._transaction.oncomplete=function(){i()},this._transaction.onerror=()=>{s(this._transaction.error)},this._transaction.onabort=()=>{s(this._transaction.error)}})}objectStore(t){return new Zd(this._transaction.objectStore(t))}}class Zd{constructor(t){this._store=t}index(t){return new Vh(this._store.index(t))}createIndex(t,i,s){return new Vh(this._store.createIndex(t,i,s))}get(t){const i=this._store.get(t);return Ts(i,"Error reading from IndexedDB")}put(t,i){const s=this._store.put(t,i);return Ts(s,"Error writing to IndexedDB")}delete(t){const i=this._store.delete(t);return Ts(i,"Error deleting from IndexedDB")}clear(){const t=this._store.clear();return Ts(t,"Error clearing IndexedDB object store")}}class Vh{constructor(t){this._index=t}get(t){const i=this._index.get(t);return Ts(i,"Error reading from IndexedDB")}}function Sv(e,t,i){return new Promise((s,o)=>{try{const a=indexedDB.open(e,t);a.onsuccess=c=>{s(new $h(c.target.result))},a.onerror=c=>{var u;o(`Error opening indexedDB: ${(u=c.target.error)===null||u===void 0?void 0:u.message}`)},a.onupgradeneeded=c=>{i(new $h(a.result),c.oldVersion,c.newVersion,new Ud(a.transaction))}}catch(a){o(`Error opening indexedDB: ${a.message}`)}})}class si{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new mn;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Av(t))try{this.getOrInitializeService({instanceIdentifier:Vn})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(t=Vn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vn){return this.instances.has(t)}getOptions(t=Vn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);s===u&&c.resolve(o)}return o}onInit(t,i){var s;const o=this.normalizeInstanceIdentifier(i),a=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&t(c,o),()=>{a.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(!!s)for(const o of s)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Lv(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Vn){return this.component?this.component.multipleInstances?t:Vn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lv(e){return e===Vn?void 0:e}function Av(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new kv(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Lt||(Lt={}));const Nv={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},Rv=Lt.INFO,Ov={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},Dv=(e,t,...i)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),o=Ov[t];if(o)console[o](`[${s}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Dl{constructor(t){this.name=t,this._logLevel=Rv,this._logHandler=Dv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Nv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(Fv(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function Fv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const qa="@firebase/app",jh="0.7.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new Dl("@firebase/app"),zv="@firebase/app-compat",Wv="@firebase/analytics-compat",Hv="@firebase/analytics",Uv="@firebase/app-check-compat",Zv="@firebase/app-check",$v="@firebase/auth",Vv="@firebase/auth-compat",jv="@firebase/database",qv="@firebase/database-compat",Gv="@firebase/functions",Kv="@firebase/functions-compat",Yv="@firebase/installations",Qv="@firebase/installations-compat",Xv="@firebase/messaging",Jv="@firebase/messaging-compat",ty="@firebase/performance",ey="@firebase/performance-compat",ny="@firebase/remote-config",iy="@firebase/remote-config-compat",sy="@firebase/storage",ry="@firebase/storage-compat",oy="@firebase/firestore",ay="@firebase/firestore-compat",ly="firebase",cy="9.6.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="[DEFAULT]",hy={[qa]:"fire-core",[zv]:"fire-core-compat",[Hv]:"fire-analytics",[Wv]:"fire-analytics-compat",[Zv]:"fire-app-check",[Uv]:"fire-app-check-compat",[$v]:"fire-auth",[Vv]:"fire-auth-compat",[jv]:"fire-rtdb",[qv]:"fire-rtdb-compat",[Gv]:"fire-fn",[Kv]:"fire-fn-compat",[Yv]:"fire-iid",[Qv]:"fire-iid-compat",[Xv]:"fire-fcm",[Jv]:"fire-fcm-compat",[ty]:"fire-perf",[ey]:"fire-perf-compat",[ny]:"fire-rc",[iy]:"fire-rc-compat",[sy]:"fire-gcs",[ry]:"fire-gcs-compat",[oy]:"fire-fst",[ay]:"fire-fst-compat","fire-js":"fire-js",[ly]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Map,Ga=new Map;function uy(e,t){try{e.container.addComponent(t)}catch(i){Bl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function zi(e){const t=e.name;if(Ga.has(t))return Bl.debug(`There were multiple attempts to register component ${t}.`),!1;Ga.set(t,e);for(const i of qr.values())uy(i,e);return!0}function Fl(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},ri=new Ol("app","Firebase",dy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t,i,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=cy;function Vd(e,t={}){typeof t!="object"&&(t={name:t});const i=Object.assign({name:$d,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw ri.create("bad-app-name",{appName:String(s)});const o=qr.get(s);if(o){if(ja(e,o.options)&&ja(i,o.config))return o;throw ri.create("duplicate-app",{appName:s})}const a=new Mv(s);for(const u of Ga.values())a.addComponent(u);const c=new fy(e,i,a);return qr.set(s,c),c}function jd(e=$d){const t=qr.get(e);if(!t)throw ri.create("no-app",{appName:e});return t}function ni(e,t,i){var s;let o=(s=hy[e])!==null&&s!==void 0?s:e;i&&(o+=`-${i}`);const a=o.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const u=[`Unable to register library "${o}" with version "${t}":`];a&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Bl.warn(u.join(" "));return}zi(new si(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="firebase-heartbeat-database",my=1,zs="firebase-heartbeat-store";let Ca=null;function qd(){return Ca||(Ca=Sv(py,my,(e,t)=>{switch(t){case 0:e.createObjectStore(zs)}}).catch(e=>{throw ri.create("storage-open",{originalErrorMessage:e.message})})),Ca}async function gy(e){try{return(await qd()).transaction(zs).objectStore(zs).get(Gd(e))}catch(t){throw ri.create("storage-get",{originalErrorMessage:t.message})}}async function qh(e,t){try{const s=(await qd()).transaction(zs,"readwrite");return await s.objectStore(zs).put(t,Gd(e)),s.complete}catch(i){throw ri.create("storage-set",{originalErrorMessage:i.message})}}function Gd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=1024,yy=30*24*60*60*1e3;class wy{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Cy(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gh();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=yy}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gh(),{heartbeatsToSend:i,unsentEntries:s}=by(this._heartbeatsCache.heartbeats),o=Bd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function Gh(){return new Date().toISOString().substring(0,10)}function by(e,t=vy){const i=[];let s=e.slice();for(const o of e){const a=i.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Kh(i)>t){a.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Kh(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class Cy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nl()?fv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await gy(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return qh(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return qh(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Kh(e){return Bd(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(e){zi(new si("platform-logger",t=>new Bv(t),"PRIVATE")),zi(new si("heartbeat",t=>new wy(t),"PRIVATE")),ni(qa,jh,e),ni(qa,jh,"esm2017"),ni("fire-js","")}xy("");var Ty="firebase",Ey="9.6.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(Ty,Ey,"app");const Yh="@firebase/database",Qh="0.12.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd="";function Py(e){Kd=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Gt(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Fs(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return Qe(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=function(e){try{if(typeof window!="undefined"&&typeof window[e]!="undefined"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Iy(t)}}catch{}return new Sy},Qn=Yd("localStorage"),Ka=Yd("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new Dl("@firebase/database"),ky=function(){let e=1;return function(){return e++}}(),Qd=function(e){const t=Cv(e),i=new bv;i.update(t);const s=i.digest();return Co.encodeByteArray(s)},qs=function(...e){let t="";for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=qs.apply(null,s):typeof s=="object"?t+=Gt(s):t+=s,t+=" "}return t};let ii=null,Xh=!0;const Ly=function(e,t){O(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Ni.logLevel=Lt.VERBOSE,ii=Ni.log.bind(Ni),t&&Ka.set("logging_enabled",!0)):typeof e=="function"?ii=e:(ii=null,Ka.remove("logging_enabled"))},ne=function(...e){if(Xh===!0&&(Xh=!1,ii===null&&Ka.get("logging_enabled")===!0&&Ly(!0)),ii){const t=qs.apply(null,e);ii(t)}},Gs=function(e){return function(...t){ne(e,...t)}},Ya=function(...e){const t="FIREBASE INTERNAL ERROR: "+qs(...e);Ni.error(t)},oi=function(...e){const t=`FIREBASE FATAL ERROR: ${qs(...e)}`;throw Ni.error(t),new Error(t)},ce=function(...e){const t="FIREBASE WARNING: "+qs(...e);Ni.warn(t)},Ay=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ce("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},zl=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},My=function(e){if(document.readyState==="complete")e();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Wi="[MIN_NAME]",ai="[MAX_NAME]",hi=function(e,t){if(e===t)return 0;if(e===Wi||t===ai)return-1;if(t===Wi||e===ai)return 1;{const i=Jh(e),s=Jh(t);return i!==null?s!==null?i-s===0?e.length-t.length:i-s:-1:s!==null?1:e<t?-1:1}},Ny=function(e,t){return e===t?0:e<t?-1:1},gs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Gt(t))},Wl=function(e){if(typeof e!="object"||e===null)return Gt(e);const t=[];for(const s in e)t.push(s);t.sort();let i="{";for(let s=0;s<t.length;s++)s!==0&&(i+=","),i+=Gt(t[s]),i+=":",i+=Wl(e[t[s]]);return i+="}",i},Xd=function(e,t){const i=e.length;if(i<=t)return[e];const s=[];for(let o=0;o<i;o+=t)o+t>i?s.push(e.substring(o,i)):s.push(e.substring(o,o+t));return s};function se(e,t){for(const i in e)e.hasOwnProperty(i)&&t(i,e[i])}const Jd=function(e){O(!zl(e),"Invalid JSON number");const t=11,i=52,s=(1<<t-1)-1;let o,a,c,u,f;e===0?(a=0,c=0,o=1/e===-1/0?1:0):(o=e<0,e=Math.abs(e),e>=Math.pow(2,1-s)?(u=Math.min(Math.floor(Math.log(e)/Math.LN2),s),a=u+s,c=Math.round(e*Math.pow(2,i-u)-Math.pow(2,i))):(a=0,c=Math.round(e/Math.pow(2,1-s-i))));const _=[];for(f=i;f;f-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(f=t;f;f-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(o?1:0),_.reverse();const g=_.join("");let m="";for(f=0;f<64;f+=8){let v=parseInt(g.substr(f,8),2).toString(16);v.length===1&&(v="0"+v),m=m+v}return m.toLowerCase()},Ry=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Oy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Dy(e,t){let i="Unknown Error";e==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?i="Client doesn't have permission to access the desired data.":e==="unavailable"&&(i="The service is unavailable");const s=new Error(e+" at "+t._path.toString()+": "+i);return s.code=e.toUpperCase(),s}const By=new RegExp("^-?(0*)\\d{1,10}$"),Fy=-2147483648,zy=2147483647,Jh=function(e){if(By.test(e)){const t=Number(e);if(t>=Fy&&t<=zy)return t}return null},Xi=function(e){try{e()}catch(t){setTimeout(()=>{const i=t.stack||"";throw ce("Exception was thrown by user callback.",i),t},Math.floor(0))}},Wy=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ss=function(e,t){const i=setTimeout(e,t);return typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){ce(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,i,s){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(ne("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ce(t)}}class Qa{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Qa.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="5",tf="v",ef="s",nf="r",sf="f",rf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,of="ls",Zy="p",Xa="ac",af="websocket",lf="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(t,i,s,o,a=!1,c="",u=!1){this.secure=i,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Qn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function Vy(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function cf(e,t,i){O(typeof t=="string","typeof type must == string"),O(typeof i=="object","typeof params must == object");let s;if(t===af)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===lf)s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Vy(e)&&(i.ns=e.namespace);const o=[];return se(i,(a,c)=>{o.push(a+"="+c)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.counters_={}}incrementCounter(t,i=1){Qe(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return cv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa={},Ta={};function Ul(e){const t=e.toString();return xa[t]||(xa[t]=new jy),xa[t]}function qy(e,t){const i=e.toString();return Ta[i]||(Ta[i]=t()),Ta[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Xi(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu="start",Ky="close",Yy="pLPCommand",Qy="pRTLPCB",hf="id",uf="pw",df="ser",Xy="cb",Jy="seg",tw="ts",ew="d",nw="dframe",ff=1870,_f=30,iw=ff-_f,sw=25e3,rw=3e4;class ki{constructor(t,i,s,o,a,c,u){this.connId=t,this.repoInfo=i,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.transportSessionId=c,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gs(t),this.stats_=Ul(i),this.urlFn=f=>(this.appCheckToken&&(f[Xa]=this.appCheckToken),cf(i,lf,f))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new Gy(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(rw)),My(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zl((...a)=>{const[c,u,f,_,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===tu)this.id=u,this.password=f;else if(c===Ky)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,u)},()=>{this.onClosed_()},this.urlFn);const s={};s[tu]="t",s[df]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Xy]=this.scriptTagHolder.uniqueCallbackIdentifier),s[tf]=Hl,this.transportSessionId&&(s[ef]=this.transportSessionId),this.lastSessionId&&(s[of]=this.lastSessionId),this.applicationId&&(s[Zy]=this.applicationId),this.appCheckToken&&(s[Xa]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&rf.test(location.hostname)&&(s[nf]=sf);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ki.forceAllow_=!0}static forceDisallow(){ki.forceDisallow_=!0}static isAvailable(){return ki.forceAllow_?!0:!ki.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Ry()&&!Oy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=Gt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Dd(i),o=Xd(s,iw);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const s={};s[nw]="t",s[hf]=t,s[uf]=i,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=Gt(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Zl{constructor(t,i,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ky(),window[Yy+this.uniqueCallbackIdentifier]=t,window[Qy+this.uniqueCallbackIdentifier]=i,this.myIFrame=Zl.createIFrame_();let a="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const u=document.domain;a='<script>document.domain="'+u+'";<\/script>'}const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(u){ne("frame writing exception"),u.stack&&ne(u.stack),ne(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ne("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[hf]=this.myID,t[uf]=this.myPW,t[df]=this.currentSerial;let i=this.urlFn(t),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_f+s.length<=ff;){const c=this.pendingSegs.shift();s=s+"&"+Jy+o+"="+c.seg+"&"+tw+o+"="+c.ts+"&"+ew+o+"="+c.d,o++}return i=i+s,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,s){this.pendingSegs.push({seg:t,ts:i,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const s=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(s,Math.floor(sw)),a=()=>{clearTimeout(o),s()};this.addTag(t,a)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),i())},s.onerror=()=>{ne("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=16384,aw=45e3;let Gr=null;typeof MozWebSocket!="undefined"?Gr=MozWebSocket:typeof WebSocket!="undefined"&&(Gr=WebSocket);class Me{constructor(t,i,s,o,a,c,u){this.connId=t,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gs(this.connId),this.stats_=Ul(i),this.connURL=Me.connectionURL_(i,c,u,o),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,o){const a={};return a[tf]=Hl,typeof location!="undefined"&&location.hostname&&rf.test(location.hostname)&&(a[nf]=sf),i&&(a[ef]=i),s&&(a[of]=s),o&&(a[Xa]=o),cf(t,af,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qn.set("previous_websocket_failure",!0);try{if(!Wd()){const s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Gr(this.connURL,[],s)}}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Me.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&Gr!==null&&!Me.forceDisallow_}static previouslyFailed(){return Qn.isInMemoryStorage||Qn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=Fs(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(O(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=Gt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Xd(i,ow);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aw))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Me.responsesRequiredToBeHealthy=2;Me.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ki,Me]}initTransports_(t){const i=Me&&Me.isAvailable();let s=i&&!Me.previouslyFailed();if(t.webSocketOnly&&(i||ce("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Me];else{const o=this.transports_=[];for(const a of $l.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=6e4,cw=5e3,hw=10*1024,uw=100*1024,Ea="t",eu="d",dw="s",nu="r",fw="e",iu="o",su="a",ru="n",ou="p",_w="h";class pw{constructor(t,i,s,o,a,c,u,f,_,g){this.id=t,this.repoInfo_=i,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=c,this.onReady_=u,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gs("c:"+this.id+":"),this.transportManager_=new $l(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,s)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ss(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Ea in t){const i=t[Ea];i===su?this.upgradeIfSecondaryHealthy_():i===nu?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===iu&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=gs("t",t),s=gs("d",t);if(i==="c")this.onSecondaryControl_(s);else if(i==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ou,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:su,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ru,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=gs("t",t),s=gs("d",t);i==="c"?this.onControl_(s):i==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=gs(Ea,t);if(eu in t){const s=t[eu];if(i===_w)this.onHandshake_(s);else if(i===ru){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===dw?this.onConnectionShutdown_(s):i===nu?this.onReset_(s):i===fw?Ya("Server Error: "+s):i===iu?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ya("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,s=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Hl!==s&&ce("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,s),Ss(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ss(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(cw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ou,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{put(t,i,s,o){}merge(t,i,s,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,s){}onDisconnectMerge(t,i,s){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(t){this.allowedEvents_=t,this.listeners_={},O(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,i)}}on(t,i,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:s});const o=this.getInitialEvent(t);o&&i.apply(s,o)}off(t,i,s){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let a=0;a<o.length;a++)if(o[a].callback===i&&(!s||s===o[a].context)){o.splice(a,1);return}}validateEventType_(t){O(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends mf{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!zd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Kr}getInitialEvent(t){return O(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=32,lu=768;class Pt{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function vt(){return new Pt("")}function it(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Nn(e){return e.pieces_.length-e.pieceNum_}function At(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Pt(e.pieces_,t)}function Vl(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function mw(e){let t="";for(let i=e.pieceNum_;i<e.pieces_.length;i++)e.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[i])));return t||"/"}function Ws(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function gf(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let i=e.pieceNum_;i<e.pieces_.length-1;i++)t.push(e.pieces_[i]);return new Pt(t,0)}function Ft(e,t){const i=[];for(let s=e.pieceNum_;s<e.pieces_.length;s++)i.push(e.pieces_[s]);if(t instanceof Pt)for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);else{const s=t.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&i.push(s[o])}return new Pt(i,0)}function ht(e){return e.pieceNum_>=e.pieces_.length}function le(e,t){const i=it(e),s=it(t);if(i===null)return t;if(i===s)return le(At(e),At(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function gw(e,t){const i=Ws(e,0),s=Ws(t,0);for(let o=0;o<i.length&&o<s.length;o++){const a=hi(i[o],s[o]);if(a!==0)return a}return i.length===s.length?0:i.length<s.length?-1:1}function jl(e,t){if(Nn(e)!==Nn(t))return!1;for(let i=e.pieceNum_,s=t.pieceNum_;i<=e.pieces_.length;i++,s++)if(e.pieces_[i]!==t.pieces_[s])return!1;return!0}function Ee(e,t){let i=e.pieceNum_,s=t.pieceNum_;if(Nn(e)>Nn(t))return!1;for(;i<e.pieces_.length;){if(e.pieces_[i]!==t.pieces_[s])return!1;++i,++s}return!0}class vw{constructor(t,i){this.errorPrefix_=i,this.parts_=Ws(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=To(this.parts_[s]);vf(this)}}function yw(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=To(t),vf(e)}function ww(e){const t=e.parts_.pop();e.byteLength_-=To(t),e.parts_.length>0&&(e.byteLength_-=1)}function vf(e){if(e.byteLength_>lu)throw new Error(e.errorPrefix_+"has a key path longer than "+lu+" bytes ("+e.byteLength_+").");if(e.parts_.length>au)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+au+") or object contains a cycle "+jn(e))}function jn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends mf{constructor(){super(["visible"]);let t,i;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(i="visibilitychange",t="hidden"):typeof document.mozHidden!="undefined"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden!="undefined"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden!="undefined"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new ql}getInitialEvent(t){return O(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=1e3,bw=60*5*1e3,Cw=3*1e3,cu=30*1e3,xw=1.3,Tw=3e4,Ew="server_kill",hu=3;class _n extends pf{constructor(t,i,s,o,a,c,u,f){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=u,this.authOverride_=f,this.id=_n.nextPersistentConnectionId_++,this.log_=Gs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vs,this.maxReconnectDelay_=bw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!Wd())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ql.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Kr.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const o=++this.requestNumber_,a={r:o,a:t,b:i};this.log_(Gt(a)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[o]=s)}get(t){this.initConnection_();const i=new mn,s={p:t._path.toString(),q:t._queryObject},o={action:"g",request:s,onComplete:c=>{const u=c.d;c.s==="ok"?(this.onDataUpdate_(s.p,u,!1,null),i.resolve(u)):i.reject(u)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const c=this.outstandingGets_[a];c===void 0||o!==c||(delete this.outstandingGets_[a],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+a+" timed out on connection"),i.reject(new Error("Client is offline.")))},Cw),this.connected_&&this.sendGet_(a),i.promise}listen(t,i,s,o){this.initConnection_();const a=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const u={onComplete:o,hashFn:i,query:t,tag:s};this.listens.get(c).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+s+" for "+o);const a={p:s},c="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(c,a,u=>{const f=u.d,_=u.s;_n.warnOnListenWarnings_(f,i),(this.listens.get(s)&&this.listens.get(s).get(o))===t&&(this.log_("listen response",u),_!=="ok"&&this.removeListen_(s,o),t.onComplete&&t.onComplete(_,f))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Qe(t,"w")){const s=Fi(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();ce(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||yv(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=cu)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=vv(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,o=>{const a=o.s,c=o.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,t._queryObject,i)}sendUnlisten_(t,i,s,o){this.log_("Unlisten on "+t+" for "+i);const a={p:t},c="n";o&&(a.q=s,a.t=o),this.sendRequest(c,a)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,o){const a={p:i,d:s};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(t,i,s,o){this.putInternal("p",t,i,s,o)}merge(t,i,s,o){this.putInternal("m",t,i,s,o)}putInternal(t,i,s,o,a){this.initConnection_();const c={p:i,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:t,request:c,onComplete:o}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Gt(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Ya("Unrecognized action received from server: "+Gt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Tw&&(this.reconnectDelay_=vs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*xw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+_n.nextConnectionId_++,a=this.lastSessionId;let c=!1,u=null;const f=function(){u?u.close():(c=!0,s())},_=function(m){O(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:f,sendRequest:_};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,v]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);c?ne("getToken() completed but was canceled"):(ne("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,u=new pw(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,s,E=>{ce(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ew)},a))}catch(m){this.log_("Failed to get token: "+m),c||(this.repoInfo_.nodeAdmin&&ce(m),f())}}}interrupt(t){ne("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ne("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Uh(this.interruptReasons_)&&(this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;i?s=i.map(a=>Wl(a)).join("$"):s="default";const o=this.removeListen_(t,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const s=new Pt(t).toString();let o;if(this.listens.has(s)){const a=this.listens.get(s);o=a.get(i),a.delete(i),a.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(t,i){ne("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=hu&&(this.reconnectDelay_=cu,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ne("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=hu&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+Kd.replace(/\./g,"-")]=1,zd()?t["framework.cordova"]=1:dv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Kr.getInstance().currentlyOnline();return Uh(this.interruptReasons_)&&t}}_n.nextPersistentConnectionId_=0;_n.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new rt(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const s=new rt(Wi,t),o=new rt(Wi,i);return this.compare(s,o)!==0}minPost(){return rt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ir;class yf extends Eo{static get __EMPTY_NODE(){return Ir}static set __EMPTY_NODE(t){Ir=t}compare(t,i){return hi(t.name,i.name)}isDefinedOn(t){throw Yi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return rt.MIN}maxPost(){return new rt(ai,Ir)}makePost(t,i){return O(typeof t=="string","KeyIndex indexValue must always be a string."),new rt(t,Ir)}toString(){return".key"}}const Ri=new yf;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,i,s,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=i?s(t.key,i):1,o&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Jt{constructor(t,i,s,o,a){this.key=t,this.value=i,this.color=s!=null?s:Jt.RED,this.left=o!=null?o:de.EMPTY_NODE,this.right=a!=null?a:de.EMPTY_NODE}copy(t,i,s,o,a){return new Jt(t!=null?t:this.key,i!=null?i:this.value,s!=null?s:this.color,o!=null?o:this.left,a!=null?a:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let o=this;const a=s(t,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(t,i,s),null):a===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return de.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,o;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(t,s.key)===0){if(s.right.isEmpty())return de.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Jt.RED=!0;Jt.BLACK=!1;class Pw{copy(t,i,s,o,a){return this}insert(t,i,s){return new Jt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class de{constructor(t,i=de.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new de(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,Jt.BLACK,null,null))}remove(t){return new de(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Jt.BLACK,null,null))}get(t){let i,s=this.root_;for(;!s.isEmpty();){if(i=this.comparator_(t,s.key),i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}getPredecessorKey(t){let i,s=this.root_,o=null;for(;!s.isEmpty();)if(i=this.comparator_(t,s.key),i===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else i<0?s=s.left:i>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Sr(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Sr(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Sr(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Sr(this.root_,null,this.comparator_,!0,t)}}de.EMPTY_NODE=new Pw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(e,t){return hi(e.name,t.name)}function Gl(e,t){return hi(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja;function Sw(e){Ja=e}const wf=function(e){return typeof e=="number"?"number:"+Jd(e):"string:"+e},bf=function(e){if(e.isLeafNode()){const t=e.val();O(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Qe(t,".sv"),"Priority must be a string or number.")}else O(e===Ja||e.isEmpty(),"priority of unexpected type.");O(e===Ja||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;class Xt{constructor(t,i=Xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bf(this.priorityNode_)}static set __childrenNodeConstructor(t){uu=t}static get __childrenNodeConstructor(){return uu}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Xt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ht(t)?this:it(t)===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:Xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=it(t);return s===null?i:i.isEmpty()&&s!==".priority"?this:(O(s!==".priority"||Nn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(At(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wf(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=Jd(this.value_):t+=this.value_,this.lazyHash_=Qd(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Xt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Xt.__childrenNodeConstructor?-1:(O(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,o=Xt.VALUE_TYPE_ORDER.indexOf(i),a=Xt.VALUE_TYPE_ORDER.indexOf(s);return O(o>=0,"Unknown leaf type: "+i),O(a>=0,"Unknown leaf type: "+s),o===a?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}Xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf,xf;function kw(e){Cf=e}function Lw(e){xf=e}class Aw extends Eo{compare(t,i){const s=t.node.getPriority(),o=i.node.getPriority(),a=s.compareTo(o);return a===0?hi(t.name,i.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return rt.MIN}maxPost(){return new rt(ai,new Xt("[PRIORITY-POST]",xf))}makePost(t,i){const s=Cf(t);return new rt(i,new Xt("[PRIORITY-POST]",s))}toString(){return".priority"}}const zt=new Aw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=Math.log(2);class Nw{constructor(t){const i=a=>parseInt(Math.log(a)/Mw,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=s(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Yr=function(e,t,i,s){e.sort(t);const o=function(f,_){const g=_-f;let m,v;if(g===0)return null;if(g===1)return m=e[f],v=i?i(m):m,new Jt(v,m.node,Jt.BLACK,null,null);{const E=parseInt(g/2,10)+f,M=o(f,E),D=o(E+1,_);return m=e[E],v=i?i(m):m,new Jt(v,m.node,Jt.BLACK,M,D)}},a=function(f){let _=null,g=null,m=e.length;const v=function(M,D){const $=m-M,tt=m;m-=M;const Mt=o($+1,tt),V=e[$],et=i?i(V):V;E(new Jt(et,V.node,D,null,Mt))},E=function(M){_?(_.left=M,_=M):(g=M,_=M)};for(let M=0;M<f.count;++M){const D=f.nextBitIsOne(),$=Math.pow(2,f.count-(M+1));D?v($,Jt.BLACK):(v($,Jt.BLACK),v($,Jt.RED))}return g},c=new Nw(e.length),u=a(c);return new de(s||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa;const Pi={};class fn{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return O(Pi&&zt,"ChildrenNode.ts has not been loaded"),Pa=Pa||new fn({".priority":Pi},{".priority":zt}),Pa}get(t){const i=Fi(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof de?i:null}hasIndex(t){return Qe(this.indexSet_,t.toString())}addIndex(t,i){O(t!==Ri,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const a=i.getIterator(rt.Wrap);let c=a.getNext();for(;c;)o=o||t.isDefinedOn(c.node),s.push(c),c=a.getNext();let u;o?u=Yr(s,t.getCompare()):u=Pi;const f=t.toString(),_=Object.assign({},this.indexSet_);_[f]=t;const g=Object.assign({},this.indexes_);return g[f]=u,new fn(g,_)}addToIndexes(t,i){const s=jr(this.indexes_,(o,a)=>{const c=Fi(this.indexSet_,a);if(O(c,"Missing index implementation for "+a),o===Pi)if(c.isDefinedOn(t.node)){const u=[],f=i.getIterator(rt.Wrap);let _=f.getNext();for(;_;)_.name!==t.name&&u.push(_),_=f.getNext();return u.push(t),Yr(u,c.getCompare())}else return Pi;else{const u=i.get(t.name);let f=o;return u&&(f=f.remove(new rt(t.name,u))),f.insert(t,t.node)}});return new fn(s,this.indexSet_)}removeFromIndexes(t,i){const s=jr(this.indexes_,o=>{if(o===Pi)return o;{const a=i.get(t.name);return a?o.remove(new rt(t.name,a)):o}});return new fn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys;class K{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&bf(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ys||(ys=new K(new de(Gl),null,fn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ys}updatePriority(t){return this.children_.isEmpty()?this:new K(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?ys:i}}getChild(t){const i=it(t);return i===null?this:this.getImmediateChild(i).getChild(At(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(O(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const s=new rt(t,i);let o,a;i.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(s,this.children_));const c=o.isEmpty()?ys:this.priorityNode_;return new K(o,c,a)}}updateChild(t,i){const s=it(t);if(s===null)return i;{O(it(t)!==".priority"||Nn(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(At(t),i);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,o=0,a=!0;if(this.forEachChild(zt,(c,u)=>{i[c]=u.val(t),s++,a&&K.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!t&&a&&o<2*s){const c=[];for(const u in i)c[u]=i[u];return c}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+wf(this.getPriority().val())+":"),this.forEachChild(zt,(i,s)=>{const o=s.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":Qd(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const o=this.resolveIndex_(s);if(o){const a=o.getPredecessorKey(new rt(t,i));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new rt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new rt(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,rt.Wrap);let a=o.peek();for(;a!=null&&i.compare(a,t)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,rt.Wrap);let a=o.peek();for(;a!=null&&i.compare(a,t)>0;)o.getNext(),a=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ks?-1:0}withIndex(t){if(t===Ri||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new K(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ri||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const s=this.getIterator(zt),o=i.getIterator(zt);let a=s.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=o.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===Ri?null:this.indexMap_.get(t.toString())}}K.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Rw extends K{constructor(){super(new de(Gl),K.EMPTY_NODE,fn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return K.EMPTY_NODE}isEmpty(){return!1}}const Ks=new Rw;Object.defineProperties(rt,{MIN:{value:new rt(Wi,K.EMPTY_NODE)},MAX:{value:new rt(ai,Ks)}});yf.__EMPTY_NODE=K.EMPTY_NODE;Xt.__childrenNodeConstructor=K;Sw(Ks);Lw(Ks);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=!0;function qt(e,t=null){if(e===null)return K.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),O(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const i=e;return new Xt(i,qt(t))}if(!(e instanceof Array)&&Ow){const i=[];let s=!1;if(se(e,(c,u)=>{if(c.substring(0,1)!=="."){const f=qt(u);f.isEmpty()||(s=s||!f.getPriority().isEmpty(),i.push(new rt(c,f)))}}),i.length===0)return K.EMPTY_NODE;const a=Yr(i,Iw,c=>c.name,Gl);if(s){const c=Yr(i,zt.getCompare());return new K(a,qt(t),new fn({".priority":c},{".priority":zt}))}else return new K(a,qt(t),fn.Default)}else{let i=K.EMPTY_NODE;return se(e,(s,o)=>{if(Qe(e,s)&&s.substring(0,1)!=="."){const a=qt(o);(a.isLeafNode()||!a.isEmpty())&&(i=i.updateImmediateChild(s,a))}}),i.updatePriority(qt(t))}}kw(qt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends Eo{constructor(t){super(),this.indexPath_=t,O(!ht(t)&&it(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const s=this.extractChild(t.node),o=this.extractChild(i.node),a=s.compareTo(o);return a===0?hi(t.name,i.name):a}makePost(t,i){const s=qt(t),o=K.EMPTY_NODE.updateChild(this.indexPath_,s);return new rt(i,o)}maxPost(){const t=K.EMPTY_NODE.updateChild(this.indexPath_,Ks);return new rt(ai,t)}toString(){return Ws(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends Eo{compare(t,i){const s=t.node.compareTo(i.node);return s===0?hi(t.name,i.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return rt.MIN}maxPost(){return rt.MAX}makePost(t,i){const s=qt(t);return new rt(i,s)}toString(){return".value"}}const Fw=new Bw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(e){return{type:"value",snapshotNode:e}}function Hi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Hs(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Us(e,t,i){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:i}}function zw(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this.index_=t}updateChild(t,i,s,o,a,c){O(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(i);return u.getChild(o).equals(s.getChild(o))&&u.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?t.hasChild(i)?c.trackChildChange(Hs(i,u)):O(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?c.trackChildChange(Hi(i,s)):c.trackChildChange(Us(i,s,u))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(i,s).withIndex(this.index_)}updateFullNode(t,i,s){return s!=null&&(t.isLeafNode()||t.forEachChild(zt,(o,a)=>{i.hasChild(o)||s.trackChildChange(Hs(o,a))}),i.isLeafNode()||i.forEachChild(zt,(o,a)=>{if(t.hasChild(o)){const c=t.getImmediateChild(o);c.equals(a)||s.trackChildChange(Us(o,a,c))}else s.trackChildChange(Hi(o,a))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?K.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t){this.indexedFilter_=new Kl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Zs.getStartPost_(t),this.endPost_=Zs.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,i,s,o,a,c){return this.matches(new rt(i,s))||(s=K.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,s,o,a,c)}updateFullNode(t,i,s){i.isLeafNode()&&(i=K.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(K.EMPTY_NODE);const a=this;return i.forEachChild(zt,(c,u)=>{a.matches(new rt(c,u))||(o=o.updateImmediateChild(c,K.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t){this.rangedFilter_=new Zs(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,i,s,o,a,c){return this.rangedFilter_.matches(new rt(i,s))||(s=K.EMPTY_NODE),t.getImmediateChild(i).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,s,o,a,c):this.fullLimitUpdateChild_(t,i,s,a,c)}updateFullNode(t,i,s){let o;if(i.isLeafNode()||i.isEmpty())o=K.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=K.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const u=a.getNext();let f;if(this.reverse_?f=this.index_.compare(this.rangedFilter_.getStartPost(),u)<=0:f=this.index_.compare(u,this.rangedFilter_.getEndPost())<=0,f)o=o.updateImmediateChild(u.name,u.node),c++;else break}}else{o=i.withIndex(this.index_),o=o.updatePriority(K.EMPTY_NODE);let a,c,u,f;if(this.reverse_){f=o.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const m=this.index_.getCompare();u=(v,E)=>m(E,v)}else f=o.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();let _=0,g=!1;for(;f.hasNext();){const m=f.getNext();!g&&u(a,m)<=0&&(g=!0),g&&_<this.limit_&&u(m,c)<=0?_++:o=o.updateImmediateChild(m.name,K.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,s,o,a){let c;if(this.reverse_){const m=this.index_.getCompare();c=(v,E)=>m(E,v)}else c=this.index_.getCompare();const u=t;O(u.numChildren()===this.limit_,"");const f=new rt(i,s),_=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(u.hasChild(i)){const m=u.getImmediateChild(i);let v=o.getChildAfterChild(this.index_,_,this.reverse_);for(;v!=null&&(v.name===i||u.hasChild(v.name));)v=o.getChildAfterChild(this.index_,v,this.reverse_);const E=v==null?1:c(v,f);if(g&&!s.isEmpty()&&E>=0)return a!=null&&a.trackChildChange(Us(i,s,m)),u.updateImmediateChild(i,s);{a!=null&&a.trackChildChange(Hs(i,m));const D=u.updateImmediateChild(i,K.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a!=null&&a.trackChildChange(Hi(v.name,v.node)),D.updateImmediateChild(v.name,v.node)):D}}else return s.isEmpty()?t:g&&c(_,f)>=0?(a!=null&&(a.trackChildChange(Hs(_.name,_.node)),a.trackChildChange(Hi(i,s))),u.updateImmediateChild(i,s).updateImmediateChild(_.name,K.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wi}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ai}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zt}copy(){const t=new Yl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Hw(e){return e.loadsAllData()?new Kl(e.getIndex()):e.hasLimit()?new Ww(e):new Zs(e)}function du(e){const t={};if(e.isDefault())return t;let i;return e.index_===zt?i="$priority":e.index_===Fw?i="$value":e.index_===Ri?i="$key":(O(e.index_ instanceof Dw,"Unrecognized index type!"),i=e.index_.toString()),t.orderBy=Gt(i),e.startSet_&&(t.startAt=Gt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Gt(e.indexStartName_))),e.endSet_&&(t.endAt=Gt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Gt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function fu(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let i=e.viewFrom_;i===""&&(e.isViewFromLeft()?i="l":i="r"),t.vf=i}return e.index_!==zt&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends pf{constructor(t,i,s,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=Gs("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(O(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,s,o){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const c=Qr.getListenId_(t,s),u={};this.listens_[c]=u;const f=du(t._queryParams);this.restRequest_(a+".json",f,(_,g)=>{let m=g;if(_===404&&(m=null,_=null),_===null&&this.onDataUpdate_(a,m,!1,s),Fi(this.listens_,c)===u){let v;_?_===401?v="permission_denied":v="rest_error:"+_:v="ok",o(v,null)}})}unlisten(t,i){const s=Qr.getListenId_(t,i);delete this.listens_[s]}get(t){const i=du(t._queryParams),s=t._path.toString(),o=new mn;return this.restRequest_(s+".json",i,(a,c)=>{let u=c;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(s,u,!1,null),o.resolve(u)):o.reject(new Error(u))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},s){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(i.auth=o.accessToken),a&&a.token&&(i.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+wv(i);this.log_("Sending REST request for "+c);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(s&&u.readyState===4){this.log_("REST Response for "+c+" received. status:",u.status,"response:",u.responseText);let f=null;if(u.status>=200&&u.status<300){try{f=Fs(u.responseText)}catch{ce("Failed to parse JSON response for "+c+": "+u.responseText)}s(null,f)}else u.status!==401&&u.status!==404&&ce("Got unsuccessful REST response for "+c+" Status: "+u.status),s(u.status);s=null}},u.open("GET",c,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.rootNode_=K.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return{value:null,children:new Map}}function Ef(e,t,i){if(ht(t))e.value=i,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,i);else{const s=it(t);e.children.has(s)||e.children.set(s,Xr());const o=e.children.get(s);t=At(t),Ef(o,t,i)}}function tl(e,t,i){e.value!==null?i(t,e.value):Zw(e,(s,o)=>{const a=new Pt(t.toString()+"/"+s);tl(o,a,i)})}function Zw(e,t){e.children.forEach((i,s)=>{t(s,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&se(this.last_,(s,o)=>{i[s]=i[s]-o}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=10*1e3,Vw=30*1e3,jw=5*60*1e3;class qw{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new $w(t);const s=_u+(Vw-_u)*Math.random();Ss(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),i={};let s=!1;se(t,(o,a)=>{a>0&&Qe(this.statsToReport_,o)&&(i[o]=a,s=!0)}),s&&this.server_.reportStats(i),Ss(this.reportStats_.bind(this),Math.floor(Math.random()*2*jw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Re||(Re={}));function Ql(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Xl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jl(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,i,s){this.path=t,this.affectedTree=i,this.revert=s,this.type=Re.ACK_USER_WRITE,this.source=Ql()}operationForChild(t){if(ht(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Pt(t));return new Jr(vt(),i,this.revert)}}else return O(it(this.path)===t,"operationForChild called for unrelated child."),new Jr(At(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,i){this.source=t,this.path=i,this.type=Re.LISTEN_COMPLETE}operationForChild(t){return ht(this.path)?new $s(this.source,vt()):new $s(this.source,At(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t,i,s){this.source=t,this.path=i,this.snap=s,this.type=Re.OVERWRITE}operationForChild(t){return ht(this.path)?new li(this.source,vt(),this.snap.getImmediateChild(t)):new li(this.source,At(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,i,s){this.source=t,this.path=i,this.children=s,this.type=Re.MERGE}operationForChild(t){if(ht(this.path)){const i=this.children.subtree(new Pt(t));return i.isEmpty()?null:i.value?new li(this.source,vt(),i.value):new Ui(this.source,vt(),i)}else return O(it(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ui(this.source,At(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t,i,s){this.node_=t,this.fullyInitialized_=i,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ht(t))return this.isFullyInitialized()&&!this.filtered_;const i=it(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Kw(e,t,i,s){const o=[],a=[];return t.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(zw(c.childName,c.snapshotNode))}),ws(e,o,"child_removed",t,s,i),ws(e,o,"child_added",t,s,i),ws(e,o,"child_moved",a,s,i),ws(e,o,"child_changed",t,s,i),ws(e,o,"value",t,s,i),o}function ws(e,t,i,s,o,a){const c=s.filter(u=>u.type===i);c.sort((u,f)=>Qw(e,u,f)),c.forEach(u=>{const f=Yw(e,u,a);o.forEach(_=>{_.respondsTo(u.type)&&t.push(_.createEvent(f,e.query_))})})}function Yw(e,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Qw(e,t,i){if(t.childName==null||i.childName==null)throw Yi("Should only compare child_ events.");const s=new rt(t.childName,t.snapshotNode),o=new rt(i.childName,i.snapshotNode);return e.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(e,t){return{eventCache:e,serverCache:t}}function ks(e,t,i,s){return Po(new Rn(t,i,s),e.serverCache)}function Pf(e,t,i,s){return Po(e.eventCache,new Rn(t,i,s))}function to(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ci(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia;const Xw=()=>(Ia||(Ia=new de(Ny)),Ia);class kt{constructor(t,i=Xw()){this.value=t,this.children=i}static fromObject(t){let i=new kt(null);return se(t,(s,o)=>{i=i.set(new Pt(s),o)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:vt(),value:this.value};if(ht(t))return null;{const s=it(t),o=this.children.get(s);if(o!==null){const a=o.findRootMostMatchingPathAndValue(At(t),i);return a!=null?{path:Ft(new Pt(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ht(t))return this;{const i=it(t),s=this.children.get(i);return s!==null?s.subtree(At(t)):new kt(null)}}set(t,i){if(ht(t))return new kt(i,this.children);{const s=it(t),a=(this.children.get(s)||new kt(null)).set(At(t),i),c=this.children.insert(s,a);return new kt(this.value,c)}}remove(t){if(ht(t))return this.children.isEmpty()?new kt(null):new kt(null,this.children);{const i=it(t),s=this.children.get(i);if(s){const o=s.remove(At(t));let a;return o.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,o),this.value===null&&a.isEmpty()?new kt(null):new kt(this.value,a)}else return this}}get(t){if(ht(t))return this.value;{const i=it(t),s=this.children.get(i);return s?s.get(At(t)):null}}setTree(t,i){if(ht(t))return i;{const s=it(t),a=(this.children.get(s)||new kt(null)).setTree(At(t),i);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new kt(this.value,c)}}fold(t){return this.fold_(vt(),t)}fold_(t,i){const s={};return this.children.inorderTraversal((o,a)=>{s[o]=a.fold_(Ft(t,o),i)}),i(t,this.value,s)}findOnPath(t,i){return this.findOnPath_(t,vt(),i)}findOnPath_(t,i,s){const o=this.value?s(i,this.value):!1;if(o)return o;if(ht(t))return null;{const a=it(t),c=this.children.get(a);return c?c.findOnPath_(At(t),Ft(i,a),s):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,vt(),i)}foreachOnPath_(t,i,s){if(ht(t))return this;{this.value&&s(i,this.value);const o=it(t),a=this.children.get(o);return a?a.foreachOnPath_(At(t),Ft(i,o),s):new kt(null)}}foreach(t){this.foreach_(vt(),t)}foreach_(t,i){this.children.inorderTraversal((s,o)=>{o.foreach_(Ft(t,s),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,s)=>{s.value&&t(i,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.writeTree_=t}static empty(){return new De(new kt(null))}}function Ls(e,t,i){if(ht(t))return new De(new kt(i));{const s=e.writeTree_.findRootMostValueAndPath(t);if(s!=null){const o=s.path;let a=s.value;const c=le(o,t);return a=a.updateChild(c,i),new De(e.writeTree_.set(o,a))}else{const o=new kt(i),a=e.writeTree_.setTree(t,o);return new De(a)}}}function el(e,t,i){let s=e;return se(i,(o,a)=>{s=Ls(s,Ft(t,o),a)}),s}function pu(e,t){if(ht(t))return De.empty();{const i=e.writeTree_.setTree(t,new kt(null));return new De(i)}}function nl(e,t){return ui(e,t)!=null}function ui(e,t){const i=e.writeTree_.findRootMostValueAndPath(t);return i!=null?e.writeTree_.get(i.path).getChild(le(i.path,t)):null}function mu(e){const t=[],i=e.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(zt,(s,o)=>{t.push(new rt(s,o))}):e.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&t.push(new rt(s,o.value))}),t}function Ln(e,t){if(ht(t))return e;{const i=ui(e,t);return i!=null?new De(new kt(i)):new De(e.writeTree_.subtree(t))}}function il(e){return e.writeTree_.isEmpty()}function Zi(e,t){return If(vt(),e.writeTree_,t)}function If(e,t,i){if(t.value!=null)return i.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal((o,a)=>{o===".priority"?(O(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):i=If(Ft(e,o),a,i)}),!i.getChild(e).isEmpty()&&s!==null&&(i=i.updateChild(Ft(e,".priority"),s)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(e,t){return Af(t,e)}function Jw(e,t,i,s,o){O(s>e.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),e.allWrites.push({path:t,snap:i,writeId:s,visible:o}),o&&(e.visibleWrites=Ls(e.visibleWrites,t,i)),e.lastWriteId=s}function tb(e,t,i,s){O(s>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:i,writeId:s,visible:!0}),e.visibleWrites=el(e.visibleWrites,t,i),e.lastWriteId=s}function eb(e,t){for(let i=0;i<e.allWrites.length;i++){const s=e.allWrites[i];if(s.writeId===t)return s}return null}function nb(e,t){const i=e.allWrites.findIndex(u=>u.writeId===t);O(i>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[i];e.allWrites.splice(i,1);let o=s.visible,a=!1,c=e.allWrites.length-1;for(;o&&c>=0;){const u=e.allWrites[c];u.visible&&(c>=i&&ib(u,s.path)?o=!1:Ee(s.path,u.path)&&(a=!0)),c--}if(o){if(a)return sb(e),!0;if(s.snap)e.visibleWrites=pu(e.visibleWrites,s.path);else{const u=s.children;se(u,f=>{e.visibleWrites=pu(e.visibleWrites,Ft(s.path,f))})}return!0}else return!1}function ib(e,t){if(e.snap)return Ee(e.path,t);for(const i in e.children)if(e.children.hasOwnProperty(i)&&Ee(Ft(e.path,i),t))return!0;return!1}function sb(e){e.visibleWrites=Sf(e.allWrites,rb,vt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function rb(e){return e.visible}function Sf(e,t,i){let s=De.empty();for(let o=0;o<e.length;++o){const a=e[o];if(t(a)){const c=a.path;let u;if(a.snap)Ee(i,c)?(u=le(i,c),s=Ls(s,u,a.snap)):Ee(c,i)&&(u=le(c,i),s=Ls(s,vt(),a.snap.getChild(u)));else if(a.children){if(Ee(i,c))u=le(i,c),s=el(s,u,a.children);else if(Ee(c,i))if(u=le(c,i),ht(u))s=el(s,vt(),a.children);else{const f=Fi(a.children,it(u));if(f){const _=f.getChild(At(u));s=Ls(s,vt(),_)}}}else throw Yi("WriteRecord should have .snap or .children")}}return s}function kf(e,t,i,s,o){if(!s&&!o){const a=ui(e.visibleWrites,t);if(a!=null)return a;{const c=Ln(e.visibleWrites,t);if(il(c))return i;if(i==null&&!nl(c,vt()))return null;{const u=i||K.EMPTY_NODE;return Zi(c,u)}}}else{const a=Ln(e.visibleWrites,t);if(!o&&il(a))return i;if(!o&&i==null&&!nl(a,vt()))return null;{const c=function(_){return(_.visible||o)&&(!s||!~s.indexOf(_.writeId))&&(Ee(_.path,t)||Ee(t,_.path))},u=Sf(e.allWrites,c,t),f=i||K.EMPTY_NODE;return Zi(u,f)}}}function ob(e,t,i){let s=K.EMPTY_NODE;const o=ui(e.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(zt,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(i){const a=Ln(e.visibleWrites,t);return i.forEachChild(zt,(c,u)=>{const f=Zi(Ln(a,new Pt(c)),u);s=s.updateImmediateChild(c,f)}),mu(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=Ln(e.visibleWrites,t);return mu(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function ab(e,t,i,s,o){O(s||o,"Either existingEventSnap or existingServerSnap must exist");const a=Ft(t,i);if(nl(e.visibleWrites,a))return null;{const c=Ln(e.visibleWrites,a);return il(c)?o.getChild(i):Zi(c,o.getChild(i))}}function lb(e,t,i,s){const o=Ft(t,i),a=ui(e.visibleWrites,o);if(a!=null)return a;if(s.isCompleteForChild(i)){const c=Ln(e.visibleWrites,o);return Zi(c,s.getNode().getImmediateChild(i))}else return null}function cb(e,t){return ui(e.visibleWrites,t)}function hb(e,t,i,s,o,a,c){let u;const f=Ln(e.visibleWrites,t),_=ui(f,vt());if(_!=null)u=_;else if(i!=null)u=Zi(f,i);else return[];if(u=u.withIndex(c),!u.isEmpty()&&!u.isLeafNode()){const g=[],m=c.getCompare(),v=a?u.getReverseIteratorFrom(s,c):u.getIteratorFrom(s,c);let E=v.getNext();for(;E&&g.length<o;)m(E,s)!==0&&g.push(E),E=v.getNext();return g}else return[]}function ub(){return{visibleWrites:De.empty(),allWrites:[],lastWriteId:-1}}function eo(e,t,i,s){return kf(e.writeTree,e.treePath,t,i,s)}function tc(e,t){return ob(e.writeTree,e.treePath,t)}function gu(e,t,i,s){return ab(e.writeTree,e.treePath,t,i,s)}function no(e,t){return cb(e.writeTree,Ft(e.treePath,t))}function db(e,t,i,s,o,a){return hb(e.writeTree,e.treePath,t,i,s,o,a)}function ec(e,t,i){return lb(e.writeTree,e.treePath,t,i)}function Lf(e,t){return Af(Ft(e.treePath,t),e.writeTree)}function Af(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,s=t.childName;O(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),O(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const a=o.type;if(i==="child_added"&&a==="child_removed")this.changeMap.set(s,Us(s,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(i==="child_removed"&&a==="child_changed")this.changeMap.set(s,Hs(s,o.oldSnap));else if(i==="child_changed"&&a==="child_added")this.changeMap.set(s,Hi(s,t.snapshotNode));else if(i==="child_changed"&&a==="child_changed")this.changeMap.set(s,Us(s,t.snapshotNode,o.oldSnap));else throw Yi("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{getCompleteChild(t){return null}getChildAfterChild(t,i,s){return null}}const Mf=new _b;class nc{constructor(t,i,s=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=s}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new Rn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ec(this.writes_,t,s)}}getChildAfterChild(t,i,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ci(this.viewCache_),a=db(this.writes_,o,i,1,s,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(e){return{filter:e}}function mb(e,t){O(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),O(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function gb(e,t,i,s,o){const a=new fb;let c,u;if(i.type===Re.OVERWRITE){const _=i;_.source.fromUser?c=sl(e,t,_.path,_.snap,s,o,a):(O(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered()&&!ht(_.path),c=io(e,t,_.path,_.snap,s,o,u,a))}else if(i.type===Re.MERGE){const _=i;_.source.fromUser?c=yb(e,t,_.path,_.children,s,o,a):(O(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered(),c=rl(e,t,_.path,_.children,s,o,u,a))}else if(i.type===Re.ACK_USER_WRITE){const _=i;_.revert?c=Cb(e,t,_.path,s,o,a):c=wb(e,t,_.path,_.affectedTree,s,o,a)}else if(i.type===Re.LISTEN_COMPLETE)c=bb(e,t,i.path,s,a);else throw Yi("Unknown operation type: "+i.type);const f=a.getChanges();return vb(t,c,f),{viewCache:c,changes:f}}function vb(e,t,i){const s=t.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=to(e);(i.length>0||!e.eventCache.isFullyInitialized()||o&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&i.push(Tf(to(t)))}}function Nf(e,t,i,s,o,a){const c=t.eventCache;if(no(s,i)!=null)return t;{let u,f;if(ht(i))if(O(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=ci(t),g=_ instanceof K?_:K.EMPTY_NODE,m=tc(s,g);u=e.filter.updateFullNode(t.eventCache.getNode(),m,a)}else{const _=eo(s,ci(t));u=e.filter.updateFullNode(t.eventCache.getNode(),_,a)}else{const _=it(i);if(_===".priority"){O(Nn(i)===1,"Can't have a priority with additional path components");const g=c.getNode();f=t.serverCache.getNode();const m=gu(s,i,g,f);m!=null?u=e.filter.updatePriority(g,m):u=c.getNode()}else{const g=At(i);let m;if(c.isCompleteForChild(_)){f=t.serverCache.getNode();const v=gu(s,i,c.getNode(),f);v!=null?m=c.getNode().getImmediateChild(_).updateChild(g,v):m=c.getNode().getImmediateChild(_)}else m=ec(s,_,t.serverCache);m!=null?u=e.filter.updateChild(c.getNode(),_,m,g,o,a):u=c.getNode()}}return ks(t,u,c.isFullyInitialized()||ht(i),e.filter.filtersNodes())}}function io(e,t,i,s,o,a,c,u){const f=t.serverCache;let _;const g=c?e.filter:e.filter.getIndexedFilter();if(ht(i))_=g.updateFullNode(f.getNode(),s,null);else if(g.filtersNodes()&&!f.isFiltered()){const E=f.getNode().updateChild(i,s);_=g.updateFullNode(f.getNode(),E,null)}else{const E=it(i);if(!f.isCompleteForPath(i)&&Nn(i)>1)return t;const M=At(i),$=f.getNode().getImmediateChild(E).updateChild(M,s);E===".priority"?_=g.updatePriority(f.getNode(),$):_=g.updateChild(f.getNode(),E,$,M,Mf,null)}const m=Pf(t,_,f.isFullyInitialized()||ht(i),g.filtersNodes()),v=new nc(o,m,a);return Nf(e,m,i,o,v,u)}function sl(e,t,i,s,o,a,c){const u=t.eventCache;let f,_;const g=new nc(o,t,a);if(ht(i))_=e.filter.updateFullNode(t.eventCache.getNode(),s,c),f=ks(t,_,!0,e.filter.filtersNodes());else{const m=it(i);if(m===".priority")_=e.filter.updatePriority(t.eventCache.getNode(),s),f=ks(t,_,u.isFullyInitialized(),u.isFiltered());else{const v=At(i),E=u.getNode().getImmediateChild(m);let M;if(ht(v))M=s;else{const D=g.getCompleteChild(m);D!=null?Vl(v)===".priority"&&D.getChild(gf(v)).isEmpty()?M=D:M=D.updateChild(v,s):M=K.EMPTY_NODE}if(E.equals(M))f=t;else{const D=e.filter.updateChild(u.getNode(),m,M,v,g,c);f=ks(t,D,u.isFullyInitialized(),e.filter.filtersNodes())}}}return f}function vu(e,t){return e.eventCache.isCompleteForChild(t)}function yb(e,t,i,s,o,a,c){let u=t;return s.foreach((f,_)=>{const g=Ft(i,f);vu(t,it(g))&&(u=sl(e,u,g,_,o,a,c))}),s.foreach((f,_)=>{const g=Ft(i,f);vu(t,it(g))||(u=sl(e,u,g,_,o,a,c))}),u}function yu(e,t,i){return i.foreach((s,o)=>{t=t.updateChild(s,o)}),t}function rl(e,t,i,s,o,a,c,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let f=t,_;ht(i)?_=s:_=new kt(null).setTree(i,s);const g=t.serverCache.getNode();return _.children.inorderTraversal((m,v)=>{if(g.hasChild(m)){const E=t.serverCache.getNode().getImmediateChild(m),M=yu(e,E,v);f=io(e,f,new Pt(m),M,o,a,c,u)}}),_.children.inorderTraversal((m,v)=>{const E=!t.serverCache.isCompleteForChild(m)&&v.value===void 0;if(!g.hasChild(m)&&!E){const M=t.serverCache.getNode().getImmediateChild(m),D=yu(e,M,v);f=io(e,f,new Pt(m),D,o,a,c,u)}}),f}function wb(e,t,i,s,o,a,c){if(no(o,i)!=null)return t;const u=t.serverCache.isFiltered(),f=t.serverCache;if(s.value!=null){if(ht(i)&&f.isFullyInitialized()||f.isCompleteForPath(i))return io(e,t,i,f.getNode().getChild(i),o,a,u,c);if(ht(i)){let _=new kt(null);return f.getNode().forEachChild(Ri,(g,m)=>{_=_.set(new Pt(g),m)}),rl(e,t,i,_,o,a,u,c)}else return t}else{let _=new kt(null);return s.foreach((g,m)=>{const v=Ft(i,g);f.isCompleteForPath(v)&&(_=_.set(g,f.getNode().getChild(v)))}),rl(e,t,i,_,o,a,u,c)}}function bb(e,t,i,s,o){const a=t.serverCache,c=Pf(t,a.getNode(),a.isFullyInitialized()||ht(i),a.isFiltered());return Nf(e,c,i,s,Mf,o)}function Cb(e,t,i,s,o,a){let c;if(no(s,i)!=null)return t;{const u=new nc(s,t,o),f=t.eventCache.getNode();let _;if(ht(i)||it(i)===".priority"){let g;if(t.serverCache.isFullyInitialized())g=eo(s,ci(t));else{const m=t.serverCache.getNode();O(m instanceof K,"serverChildren would be complete if leaf node"),g=tc(s,m)}g=g,_=e.filter.updateFullNode(f,g,a)}else{const g=it(i);let m=ec(s,g,t.serverCache);m==null&&t.serverCache.isCompleteForChild(g)&&(m=f.getImmediateChild(g)),m!=null?_=e.filter.updateChild(f,g,m,At(i),u,a):t.eventCache.getNode().hasChild(g)?_=e.filter.updateChild(f,g,K.EMPTY_NODE,At(i),u,a):_=f,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=eo(s,ci(t)),c.isLeafNode()&&(_=e.filter.updateFullNode(_,c,a)))}return c=t.serverCache.isFullyInitialized()||no(s,vt())!=null,ks(t,_,c,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new Kl(s.getIndex()),a=Hw(s);this.processor_=pb(a);const c=i.serverCache,u=i.eventCache,f=o.updateFullNode(K.EMPTY_NODE,c.getNode(),null),_=a.updateFullNode(K.EMPTY_NODE,u.getNode(),null),g=new Rn(f,c.isFullyInitialized(),o.filtersNodes()),m=new Rn(_,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=Po(m,g),this.eventGenerator_=new Gw(this.query_)}get query(){return this.query_}}function Tb(e){return e.viewCache_.serverCache.getNode()}function Eb(e){return to(e.viewCache_)}function Pb(e,t){const i=ci(e.viewCache_);return i&&(e.query._queryParams.loadsAllData()||!ht(t)&&!i.getImmediateChild(it(t)).isEmpty())?i.getChild(t):null}function wu(e){return e.eventRegistrations_.length===0}function Ib(e,t){e.eventRegistrations_.push(t)}function bu(e,t,i){const s=[];if(i){O(t==null,"A cancel should cancel all event registrations.");const o=e.query._path;e.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(i,o);c&&s.push(c)})}if(t){let o=[];for(let a=0;a<e.eventRegistrations_.length;++a){const c=e.eventRegistrations_[a];if(!c.matches(t))o.push(c);else if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}e.eventRegistrations_=o}else e.eventRegistrations_=[];return s}function Cu(e,t,i,s){t.type===Re.MERGE&&t.source.queryId!==null&&(O(ci(e.viewCache_),"We should always have a full cache before handling merges"),O(to(e.viewCache_),"Missing event cache, even though we have a server cache"));const o=e.viewCache_,a=gb(e.processor_,o,t,i,s);return mb(e.processor_,a.viewCache),O(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Rf(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Sb(e,t){const i=e.viewCache_.eventCache,s=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(zt,(a,c)=>{s.push(Hi(a,c))}),i.isFullyInitialized()&&s.push(Tf(i.getNode())),Rf(e,s,i.getNode(),t)}function Rf(e,t,i,s){const o=s?[s]:e.eventRegistrations_;return Kw(e.eventGenerator_,t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so;class Of{constructor(){this.views=new Map}}function kb(e){O(!so,"__referenceConstructor has already been defined"),so=e}function Lb(){return O(so,"Reference.ts has not been loaded"),so}function Ab(e){return e.views.size===0}function ic(e,t,i,s){const o=t.source.queryId;if(o!==null){const a=e.views.get(o);return O(a!=null,"SyncTree gave us an op for an invalid query."),Cu(a,t,i,s)}else{let a=[];for(const c of e.views.values())a=a.concat(Cu(c,t,i,s));return a}}function Df(e,t,i,s,o){const a=t._queryIdentifier,c=e.views.get(a);if(!c){let u=eo(i,o?s:null),f=!1;u?f=!0:s instanceof K?(u=tc(i,s),f=!1):(u=K.EMPTY_NODE,f=!1);const _=Po(new Rn(u,f,!1),new Rn(s,o,!1));return new xb(t,_)}return c}function Mb(e,t,i,s,o,a){const c=Df(e,t,s,o,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,c),Ib(c,i),Sb(c,i)}function Nb(e,t,i,s){const o=t._queryIdentifier,a=[];let c=[];const u=On(e);if(o==="default")for(const[f,_]of e.views.entries())c=c.concat(bu(_,i,s)),wu(_)&&(e.views.delete(f),_.query._queryParams.loadsAllData()||a.push(_.query));else{const f=e.views.get(o);f&&(c=c.concat(bu(f,i,s)),wu(f)&&(e.views.delete(o),f.query._queryParams.loadsAllData()||a.push(f.query)))}return u&&!On(e)&&a.push(new(Lb())(t._repo,t._path)),{removed:a,events:c}}function Bf(e){const t=[];for(const i of e.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function An(e,t){let i=null;for(const s of e.views.values())i=i||Pb(s,t);return i}function Ff(e,t){if(t._queryParams.loadsAllData())return So(e);{const s=t._queryIdentifier;return e.views.get(s)}}function zf(e,t){return Ff(e,t)!=null}function On(e){return So(e)!=null}function So(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro;function Rb(e){O(!ro,"__referenceConstructor has already been defined"),ro=e}function Ob(){return O(ro,"Reference.ts has not been loaded"),ro}let Db=1;class xu{constructor(t){this.listenProvider_=t,this.syncPointTree_=new kt(null),this.pendingWriteTree_=ub(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Wf(e,t,i,s,o){return Jw(e.pendingWriteTree_,t,i,s,o),o?Ji(e,new li(Ql(),t,i)):[]}function Bb(e,t,i,s){tb(e.pendingWriteTree_,t,i,s);const o=kt.fromObject(i);return Ji(e,new Ui(Ql(),t,o))}function In(e,t,i=!1){const s=eb(e.pendingWriteTree_,t);if(nb(e.pendingWriteTree_,t)){let a=new kt(null);return s.snap!=null?a=a.set(vt(),!0):se(s.children,c=>{a=a.set(new Pt(c),!0)}),Ji(e,new Jr(s.path,a,i))}else return[]}function Ys(e,t,i){return Ji(e,new li(Xl(),t,i))}function Fb(e,t,i){const s=kt.fromObject(i);return Ji(e,new Ui(Xl(),t,s))}function zb(e,t){return Ji(e,new $s(Xl(),t))}function Wb(e,t,i){const s=rc(e,i);if(s){const o=oc(s),a=o.path,c=o.queryId,u=le(a,t),f=new $s(Jl(c),u);return ac(e,a,f)}else return[]}function ol(e,t,i,s){const o=t._path,a=e.syncPointTree_.get(o);let c=[];if(a&&(t._queryIdentifier==="default"||zf(a,t))){const u=Nb(a,t,i,s);Ab(a)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const f=u.removed;c=u.events;const _=f.findIndex(m=>m._queryParams.loadsAllData())!==-1,g=e.syncPointTree_.findOnPath(o,(m,v)=>On(v));if(_&&!g){const m=e.syncPointTree_.subtree(o);if(!m.isEmpty()){const v=$b(m);for(let E=0;E<v.length;++E){const M=v[E],D=M.query,$=Zf(e,M);e.listenProvider_.startListening(As(D),oo(e,D),$.hashFn,$.onComplete)}}}!g&&f.length>0&&!s&&(_?e.listenProvider_.stopListening(As(t),null):f.forEach(m=>{const v=e.queryToTagMap.get(ko(m));e.listenProvider_.stopListening(As(m),v)})),Vb(e,f)}return c}function Hb(e,t,i,s){const o=rc(e,s);if(o!=null){const a=oc(o),c=a.path,u=a.queryId,f=le(c,t),_=new li(Jl(u),f,i);return ac(e,c,_)}else return[]}function Ub(e,t,i,s){const o=rc(e,s);if(o){const a=oc(o),c=a.path,u=a.queryId,f=le(c,t),_=kt.fromObject(i),g=new Ui(Jl(u),f,_);return ac(e,c,g)}else return[]}function Tu(e,t,i){const s=t._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(s,(m,v)=>{const E=le(m,s);o=o||An(v,E),a=a||On(v)});let c=e.syncPointTree_.get(s);c?(a=a||On(c),o=o||An(c,vt())):(c=new Of,e.syncPointTree_=e.syncPointTree_.set(s,c));let u;o!=null?u=!0:(u=!1,o=K.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((v,E)=>{const M=An(E,vt());M&&(o=o.updateImmediateChild(v,M))}));const f=zf(c,t);if(!f&&!t._queryParams.loadsAllData()){const m=ko(t);O(!e.queryToTagMap.has(m),"View does not exist, but we have a tag");const v=jb();e.queryToTagMap.set(m,v),e.tagToQueryMap.set(v,m)}const _=Io(e.pendingWriteTree_,s);let g=Mb(c,t,i,_,o,u);if(!f&&!a){const m=Ff(c,t);g=g.concat(qb(e,t,m))}return g}function sc(e,t,i){const o=e.pendingWriteTree_,a=e.syncPointTree_.findOnPath(t,(c,u)=>{const f=le(c,t),_=An(u,f);if(_)return _});return kf(o,t,a,i,!0)}function Zb(e,t){const i=t._path;let s=null;e.syncPointTree_.foreachOnPath(i,(_,g)=>{const m=le(_,i);s=s||An(g,m)});let o=e.syncPointTree_.get(i);o?s=s||An(o,vt()):(o=new Of,e.syncPointTree_=e.syncPointTree_.set(i,o));const a=s!=null,c=a?new Rn(s,!0,!1):null,u=Io(e.pendingWriteTree_,t._path),f=Df(o,t,u,a?c.getNode():K.EMPTY_NODE,a);return Eb(f)}function Ji(e,t){return Hf(t,e.syncPointTree_,null,Io(e.pendingWriteTree_,vt()))}function Hf(e,t,i,s){if(ht(e.path))return Uf(e,t,i,s);{const o=t.get(vt());i==null&&o!=null&&(i=An(o,vt()));let a=[];const c=it(e.path),u=e.operationForChild(c),f=t.children.get(c);if(f&&u){const _=i?i.getImmediateChild(c):null,g=Lf(s,c);a=a.concat(Hf(u,f,_,g))}return o&&(a=a.concat(ic(o,e,s,i))),a}}function Uf(e,t,i,s){const o=t.get(vt());i==null&&o!=null&&(i=An(o,vt()));let a=[];return t.children.inorderTraversal((c,u)=>{const f=i?i.getImmediateChild(c):null,_=Lf(s,c),g=e.operationForChild(c);g&&(a=a.concat(Uf(g,u,f,_)))}),o&&(a=a.concat(ic(o,e,s,i))),a}function Zf(e,t){const i=t.query,s=oo(e,i);return{hashFn:()=>(Tb(t)||K.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?Wb(e,i._path,s):zb(e,i._path);{const a=Dy(o,i);return ol(e,i,null,a)}}}}function oo(e,t){const i=ko(t);return e.queryToTagMap.get(i)}function ko(e){return e._path.toString()+"$"+e._queryIdentifier}function rc(e,t){return e.tagToQueryMap.get(t)}function oc(e){const t=e.indexOf("$");return O(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Pt(e.substr(0,t))}}function ac(e,t,i){const s=e.syncPointTree_.get(t);O(s,"Missing sync point for query tag that we're tracking");const o=Io(e.pendingWriteTree_,t);return ic(s,i,o,null)}function $b(e){return e.fold((t,i,s)=>{if(i&&On(i))return[So(i)];{let o=[];return i&&(o=Bf(i)),se(s,(a,c)=>{o=o.concat(c)}),o}})}function As(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ob())(e._repo,e._path):e}function Vb(e,t){for(let i=0;i<t.length;++i){const s=t[i];if(!s._queryParams.loadsAllData()){const o=ko(s),a=e.queryToTagMap.get(o);e.queryToTagMap.delete(o),e.tagToQueryMap.delete(a)}}}function jb(){return Db++}function qb(e,t,i){const s=t._path,o=oo(e,t),a=Zf(e,i),c=e.listenProvider_.startListening(As(t),o,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(s);if(o)O(!On(u.value),"If we're adding a query, it shouldn't be shadowed");else{const f=u.fold((_,g,m)=>{if(!ht(_)&&g&&On(g))return[So(g).query];{let v=[];return g&&(v=v.concat(Bf(g).map(E=>E.query))),se(m,(E,M)=>{v=v.concat(M)}),v}});for(let _=0;_<f.length;++_){const g=f[_];e.listenProvider_.stopListening(As(g),oo(e,g))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new lc(i)}node(){return this.node_}}class cc{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=Ft(this.path_,t);return new cc(this.syncTree_,i)}node(){return sc(this.syncTree_,this.path_)}}const Gb=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Eu=function(e,t,i){if(!e||typeof e!="object")return e;if(O(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Kb(e[".sv"],t,i);if(typeof e[".sv"]=="object")return Yb(e[".sv"],t);O(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Kb=function(e,t,i){switch(e){case"timestamp":return i.timestamp;default:O(!1,"Unexpected server value: "+e)}},Yb=function(e,t,i){e.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;typeof s!="number"&&O(!1,"Unexpected increment value: "+s);const o=t.node();if(O(o!==null&&typeof o!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const c=o.getValue();return typeof c!="number"?s:c+s},$f=function(e,t,i,s){return hc(t,new cc(i,e),s)},Vf=function(e,t,i){return hc(e,new lc(t),i)};function hc(e,t,i){const s=e.getPriority().val(),o=Eu(s,t.getImmediateChild(".priority"),i);let a;if(e.isLeafNode()){const c=e,u=Eu(c.getValue(),t,i);return u!==c.getValue()||o!==c.getPriority().val()?new Xt(u,qt(o)):e}else{const c=e;return a=c,o!==c.getPriority().val()&&(a=a.updatePriority(new Xt(o))),c.forEachChild(zt,(u,f)=>{const _=hc(f,t.getImmediateChild(u),i);_!==f&&(a=a.updateImmediateChild(u,_))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(t="",i=null,s={children:{},childCount:0}){this.name=t,this.parent=i,this.node=s}}function dc(e,t){let i=t instanceof Pt?t:new Pt(t),s=e,o=it(i);for(;o!==null;){const a=Fi(s.node.children,o)||{children:{},childCount:0};s=new uc(o,s,a),i=At(i),o=it(i)}return s}function ts(e){return e.node.value}function jf(e,t){e.node.value=t,al(e)}function qf(e){return e.node.childCount>0}function Qb(e){return ts(e)===void 0&&!qf(e)}function Lo(e,t){se(e.node.children,(i,s)=>{t(new uc(i,e,s))})}function Gf(e,t,i,s){i&&!s&&t(e),Lo(e,o=>{Gf(o,t,!0,s)}),i&&s&&t(e)}function Xb(e,t,i){let s=i?e:e.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function Qs(e){return new Pt(e.parent===null?e.name:Qs(e.parent)+"/"+e.name)}function al(e){e.parent!==null&&Jb(e.parent,e.name,e)}function Jb(e,t,i){const s=Qb(i),o=Qe(e.node.children,t);s&&o?(delete e.node.children[t],e.node.childCount--,al(e)):!s&&!o&&(e.node.children[t]=i.node,e.node.childCount++,al(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=/[\[\].#$\/\u0000-\u001F\u007F]/,eC=/[\[\].#$\u0000-\u001F\u007F]/,Sa=10*1024*1024,fc=function(e){return typeof e=="string"&&e.length!==0&&!tC.test(e)},Kf=function(e){return typeof e=="string"&&e.length!==0&&!eC.test(e)},nC=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Kf(e)},iC=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!zl(e)||e&&typeof e=="object"&&Qe(e,".sv")},sC=function(e,t,i,s){s&&t===void 0||Ao(xo(e,"value"),t,i)},Ao=function(e,t,i){const s=i instanceof Pt?new vw(i,e):i;if(t===void 0)throw new Error(e+"contains undefined "+jn(s));if(typeof t=="function")throw new Error(e+"contains a function "+jn(s)+" with contents = "+t.toString());if(zl(t))throw new Error(e+"contains "+t.toString()+" "+jn(s));if(typeof t=="string"&&t.length>Sa/3&&To(t)>Sa)throw new Error(e+"contains a string greater than "+Sa+" utf8 bytes "+jn(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,a=!1;if(se(t,(c,u)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!fc(c)))throw new Error(e+" contains an invalid key ("+c+") "+jn(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yw(s,c),Ao(e,u,s),ww(s)}),o&&a)throw new Error(e+' contains ".value" child '+jn(s)+" in addition to actual children.")}},rC=function(e,t){let i,s;for(i=0;i<t.length;i++){s=t[i];const a=Ws(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!fc(a[c]))throw new Error(e+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(gw);let o=null;for(i=0;i<t.length;i++){if(s=t[i],o!==null&&Ee(o,s))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}},oC=function(e,t,i,s){if(s&&t===void 0)return;const o=xo(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const a=[];se(t,(c,u)=>{const f=new Pt(c);if(Ao(o,u,Ft(i,f)),Vl(f)===".priority"&&!iC(u))throw new Error(o+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),rC(o,a)},Yf=function(e,t,i,s){if(!(s&&i===void 0)&&!Kf(i))throw new Error(xo(e,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},aC=function(e,t,i,s){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Yf(e,t,i,s)},lC=function(e,t){if(it(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},cC=function(e,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!fc(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!nC(i))throw new Error(xo(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Mo(e,t){let i=null;for(let s=0;s<t.length;s++){const o=t[s],a=o.getPath();i!==null&&!jl(a,i.path)&&(e.eventLists_.push(i),i=null),i===null&&(i={events:[],path:a}),i.events.push(o)}i&&e.eventLists_.push(i)}function _c(e,t,i){Mo(e,i),Qf(e,s=>jl(s,t))}function Be(e,t,i){Mo(e,i),Qf(e,s=>Ee(s,t)||Ee(t,s))}function Qf(e,t){e.recursionDepth_++;let i=!0;for(let s=0;s<e.eventLists_.length;s++){const o=e.eventLists_[s];if(o){const a=o.path;t(a)?(uC(e.eventLists_[s]),e.eventLists_[s]=null):i=!1}}i&&(e.eventLists_=[]),e.recursionDepth_--}function uC(e){for(let t=0;t<e.events.length;t++){const i=e.events[t];if(i!==null){e.events[t]=null;const s=i.getEventRunner();ii&&ne("event: "+i.toString()),Xi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="repo_interrupt",fC=25;class _C{constructor(t,i,s,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xr(),this.transactionQueueTree_=new uc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pC(e,t,i){if(e.stats_=Ul(e.repoInfo_),e.forceRestClient_||Wy())e.server_=new Qr(e.repoInfo_,(s,o,a,c)=>{Pu(e,s,o,a,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Iu(e,!0),0);else{if(typeof i!="undefined"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gt(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new _n(e.repoInfo_,t,(s,o,a,c)=>{Pu(e,s,o,a,c)},s=>{Iu(e,s)},s=>{gC(e,s)},e.authTokenProvider_,e.appCheckProvider_,i),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(s=>{e.server_.refreshAuthToken(s)}),e.appCheckProvider_.addTokenChangeListener(s=>{e.server_.refreshAppCheckToken(s.token)}),e.statsReporter_=qy(e.repoInfo_,()=>new qw(e.stats_,e.server_)),e.infoData_=new Uw,e.infoSyncTree_=new xu({startListening:(s,o,a,c)=>{let u=[];const f=e.infoData_.getNode(s._path);return f.isEmpty()||(u=Ys(e.infoSyncTree_,s._path,f),setTimeout(()=>{c("ok")},0)),u},stopListening:()=>{}}),pc(e,"connected",!1),e.serverSyncTree_=new xu({startListening:(s,o,a,c)=>(e.server_.listen(s,a,o,(u,f)=>{const _=c(u,f);Be(e.eventQueue_,s._path,_)}),[]),stopListening:(s,o)=>{e.server_.unlisten(s,o)}})}function mC(e){const i=e.infoData_.getNode(new Pt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function No(e){return Gb({timestamp:mC(e)})}function Pu(e,t,i,s,o){e.dataUpdateCount++;const a=new Pt(t);i=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,i):i;let c=[];if(o)if(s){const f=jr(i,_=>qt(_));c=Ub(e.serverSyncTree_,a,f,o)}else{const f=qt(i);c=Hb(e.serverSyncTree_,a,f,o)}else if(s){const f=jr(i,_=>qt(_));c=Fb(e.serverSyncTree_,a,f)}else{const f=qt(i);c=Ys(e.serverSyncTree_,a,f)}let u=a;c.length>0&&(u=$i(e,a)),Be(e.eventQueue_,u,c)}function Iu(e,t){pc(e,"connected",t),t===!1&&bC(e)}function gC(e,t){se(t,(i,s)=>{pc(e,i,s)})}function pc(e,t,i){const s=new Pt("/.info/"+t),o=qt(i);e.infoData_.updateSnapshot(s,o);const a=Ys(e.infoSyncTree_,s,o);Be(e.eventQueue_,s,a)}function mc(e){return e.nextWriteId_++}function vC(e,t){const i=Zb(e.serverSyncTree_,t);return i!=null?Promise.resolve(i):e.server_.get(t).then(s=>{const o=qt(s).withIndex(t._queryParams.getIndex()),a=Ys(e.serverSyncTree_,t._path,o);return _c(e.eventQueue_,t._path,a),Promise.resolve(o)},s=>(Xs(e,"get for query "+Gt(t)+" failed: "+s),Promise.reject(new Error(s))))}function yC(e,t,i,s,o){Xs(e,"set",{path:t.toString(),value:i,priority:s});const a=No(e),c=qt(i,s),u=sc(e.serverSyncTree_,t),f=Vf(c,u,a),_=mc(e),g=Wf(e.serverSyncTree_,t,f,_,!0);Mo(e.eventQueue_,g),e.server_.put(t.toString(),c.val(!0),(v,E)=>{const M=v==="ok";M||ce("set at "+t+" failed: "+v);const D=In(e.serverSyncTree_,_,!M);Be(e.eventQueue_,t,D),ll(e,o,v,E)});const m=vc(e,t);$i(e,m),Be(e.eventQueue_,m,[])}function wC(e,t,i,s){Xs(e,"update",{path:t.toString(),value:i});let o=!0;const a=No(e),c={};if(se(i,(u,f)=>{o=!1,c[u]=$f(Ft(t,u),qt(f),e.serverSyncTree_,a)}),o)ne("update() called with empty data.  Don't do anything."),ll(e,s,"ok",void 0);else{const u=mc(e),f=Bb(e.serverSyncTree_,t,c,u);Mo(e.eventQueue_,f),e.server_.merge(t.toString(),i,(_,g)=>{const m=_==="ok";m||ce("update at "+t+" failed: "+_);const v=In(e.serverSyncTree_,u,!m),E=v.length>0?$i(e,t):t;Be(e.eventQueue_,E,v),ll(e,s,_,g)}),se(i,_=>{const g=vc(e,Ft(t,_));$i(e,g)}),Be(e.eventQueue_,t,[])}}function bC(e){Xs(e,"onDisconnectEvents");const t=No(e),i=Xr();tl(e.onDisconnect_,vt(),(o,a)=>{const c=$f(o,a,e.serverSyncTree_,t);Ef(i,o,c)});let s=[];tl(i,vt(),(o,a)=>{s=s.concat(Ys(e.serverSyncTree_,o,a));const c=vc(e,o);$i(e,c)}),e.onDisconnect_=Xr(),Be(e.eventQueue_,vt(),s)}function CC(e,t,i){let s;it(t._path)===".info"?s=Tu(e.infoSyncTree_,t,i):s=Tu(e.serverSyncTree_,t,i),_c(e.eventQueue_,t._path,s)}function Su(e,t,i){let s;it(t._path)===".info"?s=ol(e.infoSyncTree_,t,i):s=ol(e.serverSyncTree_,t,i),_c(e.eventQueue_,t._path,s)}function xC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(dC)}function Xs(e,...t){let i="";e.persistentConnection_&&(i=e.persistentConnection_.id+":"),ne(i,...t)}function ll(e,t,i,s){t&&Xi(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let a=o;s&&(a+=": "+s);const c=new Error(a);c.code=o,t(c)}})}function Xf(e,t,i){return sc(e.serverSyncTree_,t,i)||K.EMPTY_NODE}function gc(e,t=e.transactionQueueTree_){if(t||Ro(e,t),ts(t)){const i=t_(e,t);O(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&TC(e,Qs(t),i)}else qf(t)&&Lo(t,i=>{gc(e,i)})}function TC(e,t,i){const s=i.map(_=>_.currentWriteId),o=Xf(e,t,s);let a=o;const c=o.hash();for(let _=0;_<i.length;_++){const g=i[_];O(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const m=le(t,g.path);a=a.updateChild(m,g.currentOutputSnapshotRaw)}const u=a.val(!0),f=t;e.server_.put(f.toString(),u,_=>{Xs(e,"transaction put response",{path:f.toString(),status:_});let g=[];if(_==="ok"){const m=[];for(let v=0;v<i.length;v++)i[v].status=2,g=g.concat(In(e.serverSyncTree_,i[v].currentWriteId)),i[v].onComplete&&m.push(()=>i[v].onComplete(null,!0,i[v].currentOutputSnapshotResolved)),i[v].unwatcher();Ro(e,dc(e.transactionQueueTree_,t)),gc(e,e.transactionQueueTree_),Be(e.eventQueue_,t,g);for(let v=0;v<m.length;v++)Xi(m[v])}else{if(_==="datastale")for(let m=0;m<i.length;m++)i[m].status===3?i[m].status=4:i[m].status=0;else{ce("transaction at "+f.toString()+" failed: "+_);for(let m=0;m<i.length;m++)i[m].status=4,i[m].abortReason=_}$i(e,t)}},c)}function $i(e,t){const i=Jf(e,t),s=Qs(i),o=t_(e,i);return EC(e,o,s),s}function EC(e,t,i){if(t.length===0)return;const s=[];let o=[];const c=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const f=t[u],_=le(i,f.path);let g=!1,m;if(O(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,m=f.abortReason,o=o.concat(In(e.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=fC)g=!0,m="maxretry",o=o.concat(In(e.serverSyncTree_,f.currentWriteId,!0));else{const v=Xf(e,f.path,c);f.currentInputSnapshot=v;const E=t[u].update(v.val());if(E!==void 0){Ao("transaction failed: Data returned ",E,f.path);let M=qt(E);typeof E=="object"&&E!=null&&Qe(E,".priority")||(M=M.updatePriority(v.getPriority()));const $=f.currentWriteId,tt=No(e),Mt=Vf(M,v,tt);f.currentOutputSnapshotRaw=M,f.currentOutputSnapshotResolved=Mt,f.currentWriteId=mc(e),c.splice(c.indexOf($),1),o=o.concat(Wf(e.serverSyncTree_,f.path,Mt,f.currentWriteId,f.applyLocally)),o=o.concat(In(e.serverSyncTree_,$,!0))}else g=!0,m="nodata",o=o.concat(In(e.serverSyncTree_,f.currentWriteId,!0))}Be(e.eventQueue_,i,o),o=[],g&&(t[u].status=2,function(v){setTimeout(v,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(m==="nodata"?s.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):s.push(()=>t[u].onComplete(new Error(m),!1,null))))}Ro(e,e.transactionQueueTree_);for(let u=0;u<s.length;u++)Xi(s[u]);gc(e,e.transactionQueueTree_)}function Jf(e,t){let i,s=e.transactionQueueTree_;for(i=it(t);i!==null&&ts(s)===void 0;)s=dc(s,i),t=At(t),i=it(t);return s}function t_(e,t){const i=[];return e_(e,t,i),i.sort((s,o)=>s.order-o.order),i}function e_(e,t,i){const s=ts(t);if(s)for(let o=0;o<s.length;o++)i.push(s[o]);Lo(t,o=>{e_(e,o,i)})}function Ro(e,t){const i=ts(t);if(i){let s=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[s]=i[o],s++);i.length=s,jf(t,i.length>0?i:void 0)}Lo(t,s=>{Ro(e,s)})}function vc(e,t){const i=Qs(Jf(e,t)),s=dc(e.transactionQueueTree_,t);return Xb(s,o=>{ka(e,o)}),ka(e,s),Gf(s,o=>{ka(e,o)}),i}function ka(e,t){const i=ts(t);if(i){const s=[];let o=[],a=-1;for(let c=0;c<i.length;c++)i[c].status===3||(i[c].status===1?(O(a===c-1,"All SENT items should be at beginning of queue."),a=c,i[c].status=3,i[c].abortReason="set"):(O(i[c].status===0,"Unexpected transaction status in abort"),i[c].unwatcher(),o=o.concat(In(e.serverSyncTree_,i[c].currentWriteId,!0)),i[c].onComplete&&s.push(i[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?jf(t,void 0):i.length=a+1,Be(e.eventQueue_,Qs(t),o);for(let c=0;c<s.length;c++)Xi(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(e){let t="";const i=e.split("/");for(let s=0;s<i.length;s++)if(i[s].length>0){let o=i[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function IC(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const i of e.split("&")){if(i.length===0)continue;const s=i.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ce(`Invalid query segment '${i}' in query '${e}'`)}return t}const ku=function(e,t){const i=SC(e),s=i.namespace;i.domain==="firebase.com"&&oi(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&i.domain!=="localhost"&&oi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||Ay();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new $y(i.host,i.secure,s,t,o,"",s!==i.subdomain),path:new Pt(i.pathString)}},SC=function(e){let t="",i="",s="",o="",a="",c=!0,u="https",f=443;if(typeof e=="string"){let _=e.indexOf("//");_>=0&&(u=e.substring(0,_-1),e=e.substring(_+2));let g=e.indexOf("/");g===-1&&(g=e.length);let m=e.indexOf("?");m===-1&&(m=e.length),t=e.substring(0,Math.min(g,m)),g<m&&(o=PC(e.substring(g,m)));const v=IC(e.substring(Math.min(e.length,m)));_=t.indexOf(":"),_>=0?(c=u==="https"||u==="wss",f=parseInt(t.substring(_+1),10)):_=t.length;const E=t.slice(0,_);if(E.toLowerCase()==="localhost")i="localhost";else if(E.split(".").length<=2)i=E;else{const M=t.indexOf(".");s=t.substring(0,M).toLowerCase(),i=t.substring(M+1),a=s}"ns"in v&&(a=v.ns)}return{host:t,port:f,domain:i,subdomain:s,secure:c,scheme:u,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(t,i,s,o){this.eventType=t,this.eventRegistration=i,this.snapshot=s,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Gt(this.snapshot.exportVal())}}class i_{constructor(t,i,s){this.eventRegistration=t,this.error=i,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return O(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,i,s,o){this._repo=t,this._path=i,this._queryParams=s,this._orderByCalled=o}get key(){return ht(this._path)?null:Vl(this._path)}get ref(){return new Xe(this._repo,this._path)}get _queryIdentifier(){const t=fu(this._queryParams),i=Wl(t);return i==="{}"?"default":i}get _queryObject(){return fu(this._queryParams)}isEqual(t){if(t=Qi(t),!(t instanceof yc))return!1;const i=this._repo===t._repo,s=jl(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+mw(this._path)}}class Xe extends yc{constructor(t,i){super(t,i,new Yl,!1)}get parent(){const t=gf(this._path);return t===null?null:new Xe(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Vi{constructor(t,i,s){this._node=t,this.ref=i,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Pt(t),s=ao(this.ref,t);return new Vi(this._node.getChild(i),s,zt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>t(new Vi(o,ao(this.ref,s),zt)))}hasChild(t){const i=new Pt(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pe(e,t){return e=Qi(e),e._checkNotDeleted("ref"),t!==void 0?ao(e._root,t):e._root}function ao(e,t){return e=Qi(e),it(e._path)===null?aC("child","path",t,!1):Yf("child","path",t,!1),new Xe(e._repo,Ft(e._path,t))}function cl(e,t){e=Qi(e),lC("set",e._path),sC("set",t,e._path,!1);const i=new mn;return yC(e._repo,e._path,t,null,i.wrapCallback(()=>{})),i.promise}function Ms(e,t){oC("update",t,e._path,!1);const i=new mn;return wC(e._repo,e._path,t,i.wrapCallback(()=>{})),i.promise}function Or(e){return e=Qi(e),vC(e._repo,e).then(t=>new Vi(t,new Xe(e._repo,e._path),e._queryParams.getIndex()))}class wc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const s=i._queryParams.getIndex();return new n_("value",this,new Vi(t.snapshotNode,new Xe(i._repo,i._path),s))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new i_(this,t,i):null}matches(t){return t instanceof wc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class bc{constructor(t,i){this.eventType=t,this.callbackContext=i}respondsTo(t){let i=t==="children_added"?"child_added":t;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new i_(this,t,i):null}createEvent(t,i){O(t.childName!=null,"Child events should have a childName.");const s=ao(new Xe(i._repo,i._path),t.childName),o=i._queryParams.getIndex();return new n_(t.type,this,new Vi(t.snapshotNode,s,o),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof bc?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function LC(e,t,i,s,o){let a;if(typeof s=="object"&&(a=void 0,o=s),typeof s=="function"&&(a=s),o&&o.onlyOnce){const f=i,_=(g,m)=>{Su(e._repo,e,u),f(g,m)};_.userCallback=i.userCallback,_.context=i.context,i=_}const c=new kC(i,a||void 0),u=t==="value"?new wc(c):new bc(t,c);return CC(e._repo,e,u),()=>Su(e._repo,e,u)}function AC(e,t,i,s){return LC(e,"value",t,i,s)}kb(Xe);Rb(Xe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="FIREBASE_DATABASE_EMULATOR_HOST",hl={};let NC=!1;function RC(e,t,i,s,o){let a=s||e.options.databaseURL;a===void 0&&(e.options.projectId||oi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ne("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=ku(a,o),u=c.repoInfo,f,_;typeof process!="undefined"&&(_=process.env[MC]),_?(f=!0,a=`http://${_}?ns=${u.namespace}`,c=ku(a,o),u=c.repoInfo):f=!c.repoInfo.secure;const g=o&&f?new Qa(Qa.OWNER):new Uy(e.name,e.options,t);cC("Invalid Firebase Database URL",c),ht(c.path)||oi("Database URL must point to the root of a Firebase Database (not including a child path).");const m=DC(u,e,g,new Hy(e.name,i));return new BC(m,e)}function OC(e,t){const i=hl[t];(!i||i[e.key]!==e)&&oi(`Database ${t}(${e.repoInfo_}) has already been deleted.`),xC(e),delete i[e.key]}function DC(e,t,i,s){let o=hl[t.name];o||(o={},hl[t.name]=o);let a=o[e.toURLString()];return a&&oi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new _C(e,NC,i,s),o[e.toURLString()]=a,a}class BC{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xe(this._repo,vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(OC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&oi("Cannot call "+t+" on a deleted database.")}}function s_(e=jd(),t){return Fl(e,"database").getImmediate({identifier:t})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(e){Py(_y),zi(new si("database",(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return RC(s,o,a,i)},"PUBLIC").setMultipleInstances(!0)),ni(Yh,Qh,e),ni(Yh,Qh,"esm2017")}_n.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};_n.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};FC();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=new Map,zC={activated:!1,tokenObservers:[]},WC={initialized:!1,enabled:!1};function oe(e){return r_.get(e)||zC}function gn(e,t){r_.set(e,t)}function Oo(){return WC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="https://content-firebaseappcheck.googleapis.com/v1beta",HC="exchangeRecaptchaToken",UC="exchangeDebugToken",Lu={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ZC=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,i,s,o,a){if(this.operation=t,this.retryPolicy=i,this.getWaitDuration=s,this.lowerBound=o,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=o,o>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new mn,await VC(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new mn,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}}function VC(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ge=new Ol("appCheck","AppCheck",jC);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function a_(e){if(!oe(e).activated)throw ge.create("use-before-activation",{appName:e.name})}function qC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function l_(e){const t=Math.round(e/1e3),i=Math.floor(t/(3600*24)),s=Math.floor((t-i*3600*24)/3600),o=Math.floor((t-i*3600*24-s*3600)/60),a=t-i*3600*24-s*3600-o*60;let c="";return i&&(c+=kr(i)+"d:"),s&&(c+=kr(s)+"h:"),c+=kr(o)+"m:"+kr(a)+"s",c}function kr(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_({url:e,body:t},i){const s={"Content-Type":"application/json"},o=i.getImmediate({optional:!0});if(o){const m=await o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}const a={method:"POST",body:JSON.stringify(t),headers:s};let c;try{c=await fetch(e,a)}catch(m){throw ge.create("fetch-network-error",{originalErrorMessage:m.message})}if(c.status!==200)throw ge.create("fetch-status-error",{httpStatus:c.status});let u;try{u=await c.json()}catch(m){throw ge.create("fetch-parse-error",{originalErrorMessage:m.message})}const f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw ge.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const _=Number(f[1])*1e3,g=Date.now();return{token:u.attestationToken,expireTimeMillis:g+_,issuedAtTimeMillis:g}}function GC(e,t){const{projectId:i,appId:s,apiKey:o}=e.options;return{url:`${o_}/projects/${i}/apps/${s}:${HC}?key=${o}`,body:{recaptcha_token:t}}}function KC(e,t){const{projectId:i,appId:s,apiKey:o}=e.options;return{url:`${o_}/projects/${i}/apps/${s}:${UC}?key=${o}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="firebase-app-check-database",QC=1,Vs="firebase-app-check-store",h_="debug-token";let Lr=null;function u_(){return Lr||(Lr=new Promise((e,t)=>{try{const i=indexedDB.open(YC,QC);i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{var o;t(ge.create("storage-open",{originalErrorMessage:(o=s.target.error)===null||o===void 0?void 0:o.message}))},i.onupgradeneeded=s=>{const o=s.target.result;switch(s.oldVersion){case 0:o.createObjectStore(Vs,{keyPath:"compositeKey"})}}}catch(i){t(ge.create("storage-open",{originalErrorMessage:i.message}))}}),Lr)}function XC(e){return f_(__(e))}function JC(e,t){return d_(__(e),t)}function tx(e){return d_(h_,e)}function ex(){return f_(h_)}async function d_(e,t){const s=(await u_()).transaction(Vs,"readwrite"),a=s.objectStore(Vs).put({compositeKey:e,value:t});return new Promise((c,u)=>{a.onsuccess=f=>{c()},s.onerror=f=>{var _;u(ge.create("storage-set",{originalErrorMessage:(_=f.target.error)===null||_===void 0?void 0:_.message}))}})}async function f_(e){const i=(await u_()).transaction(Vs,"readonly"),o=i.objectStore(Vs).get(e);return new Promise((a,c)=>{o.onsuccess=u=>{const f=u.target.result;a(f?f.value:void 0)},i.onerror=u=>{var f;c(ge.create("storage-get",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})}function __(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Dl("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(e){if(Nl()){let t;try{t=await XC(e)}catch(i){js.warn(`Failed to read token from IndexedDB. Error: ${i}`)}return t}}function Mu(e,t){return Nl()?JC(e,t).catch(i=>{js.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}async function ix(){let e;try{e=await ex()}catch{}if(e)return e;{const t=qC();return tx(t).catch(i=>js.warn(`Failed to persist debug token to IndexedDB. Error: ${i}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){return Oo().enabled}async function m_(){const e=Oo();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function sx(){const e=_v(),t=Oo();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const i=new mn;t.token=i,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?i.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):i.resolve(ix())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={error:"UNKNOWN_ERROR"};function ox(e){return Co.encodeString(JSON.stringify(e),!1)}async function ul(e,t=!1){const i=e.app;a_(i);const s=oe(i);let o=s.token,a;if(!o){const f=await s.cachedTokenPromise;f&&lo(f)&&(o=f)}if(!t&&o&&lo(o))return{token:o.token};let c=!1;if(p_()){s.exchangeTokenPromise||(s.exchangeTokenPromise=c_(KC(i,await m_()),e.heartbeatServiceProvider).then(_=>(s.exchangeTokenPromise=void 0,_)),c=!0);const f=await s.exchangeTokenPromise;return await Mu(i,f),gn(i,Object.assign(Object.assign({},s),{token:f})),{token:f.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(f=>(s.exchangeTokenPromise=void 0,f)),c=!0),o=await s.exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"?js.warn(f.message):js.error(f),a=f}let u;return o?(u={token:o.token},gn(i,Object.assign(Object.assign({},s),{token:o})),await Mu(i,o)):u=lx(a),c&&y_(i,u),u}function g_(e,t,i,s){const{app:o}=e,a=oe(o),c={next:i,error:s,type:t};if(gn(o,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&lo(a.token)){const u=a.token;Promise.resolve().then(()=>{i({token:u.token}),Nu(e)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Nu(e))}function v_(e,t){const i=oe(e),s=i.tokenObservers.filter(o=>o.next!==t);s.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),gn(e,Object.assign(Object.assign({},i),{tokenObservers:s}))}function Nu(e){const{app:t}=e,i=oe(t);let s=i.tokenRefresher;s||(s=ax(e),gn(t,Object.assign(Object.assign({},i),{tokenRefresher:s}))),!s.isRunning()&&i.isTokenAutoRefreshEnabled&&s.start()}function ax(e){const{app:t}=e;return new $C(async()=>{const i=oe(t);let s;if(i.token?s=await ul(e,!0):s=await ul(e),s.error)throw s.error},()=>!0,()=>{const i=oe(t);if(i.token){let s=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5;const o=i.token.expireTimeMillis-5*60*1e3;return s=Math.min(s,o),Math.max(0,s-Date.now())}else return 0},Lu.RETRIAL_MIN_WAIT,Lu.RETRIAL_MAX_WAIT)}function y_(e,t){const i=oe(e).tokenObservers;for(const s of i)try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}function lo(e){return e.expireTimeMillis-Date.now()>0}function lx(e){return{token:ox(rx),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(t,i){this.app=t,this.heartbeatServiceProvider=i}_delete(){const{tokenObservers:t}=oe(this.app);for(const i of t)v_(this.app,i.next);return Promise.resolve()}}function hx(e,t){return new cx(e,t)}function ux(e){return{getToken:t=>ul(e,t),addTokenListener:t=>g_(e,"INTERNAL",t),removeTokenListener:t=>v_(e.app,t)}}const dx="@firebase/app-check",fx="0.5.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="https://www.google.com/recaptcha/api.js";function px(e,t){const i=oe(e),s=new mn;gn(e,Object.assign(Object.assign({},i),{reCAPTCHAState:{initialized:s}}));const o=mx(e),a=Au(!1);return a?Ru(e,t,a,o,s):yx(()=>{const c=Au(!1);if(!c)throw new Error("no recaptcha");Ru(e,t,c,o,s)}),s.promise}function Ru(e,t,i,s,o){i.ready(()=>{vx(e,t,i,s),o.resolve(i)})}function mx(e){const t=`fire_app_check_${e.name}`,i=document.createElement("div");return i.id=t,i.style.display="none",document.body.appendChild(i),t}async function gx(e){a_(e);const i=await oe(e).reCAPTCHAState.initialized.promise;return new Promise((s,o)=>{const a=oe(e).reCAPTCHAState;i.ready(()=>{s(i.execute(a.widgetId,{action:"fire_app_check"}))})})}function vx(e,t,i,s){const o=i.render(s,{sitekey:t,size:"invisible"}),a=oe(e);gn(e,Object.assign(Object.assign({},a),{reCAPTCHAState:Object.assign(Object.assign({},a.reCAPTCHAState),{widgetId:o})}))}function yx(e){const t=document.createElement("script");t.src=_x,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t;bx(this._throttleData);const i=await gx(this._app).catch(o=>{throw ge.create("recaptcha-error")});let s;try{s=await c_(GC(this._app,i),this._heartbeatServiceProvider)}catch(o){throw o.code==="fetch-status-error"?(this._throttleData=wx(Number((t=o.customData)===null||t===void 0?void 0:t.httpStatus),this._throttleData),ge.create("throttled",{time:l_(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=Fl(t,"heartbeat"),px(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Do?this._siteKey===t._siteKey:!1}}function wx(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+ZC,httpStatus:e};{const i=t?t.backoffCount:0,s=Iv(i,1e3,2);return{backoffCount:i+1,allowRequestsAfter:Date.now()+s,httpStatus:e}}}function bx(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ge.create("throttled",{time:l_(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(e=jd(),t){e=Qi(e);const i=Fl(e,"app-check");if(Oo().initialized||sx(),p_()&&m_().then(o=>console.log(`App Check debug token: ${o}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),i.isInitialized()){const o=i.getImmediate(),a=i.getOptions();if(a.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&a.provider.isEqual(t.provider))return o;throw ge.create("already-initialized",{appName:e.name})}const s=i.initialize({options:t});return Cx(e,t.provider,t.isTokenAutoRefreshEnabled),oe(e).isTokenAutoRefreshEnabled&&g_(s,"INTERNAL",()=>{}),s}function Cx(e,t,i){const s=oe(e),o=Object.assign(Object.assign({},s),{activated:!0});o.provider=t,o.cachedTokenPromise=nx(e).then(a=>(a&&lo(a)&&(gn(e,Object.assign(Object.assign({},oe(e)),{token:a})),y_(e,{token:a.token})),a)),o.isTokenAutoRefreshEnabled=i===void 0?e.automaticDataCollectionEnabled:i,gn(e,o),o.provider.initialize(e)}const xx="app-check",Ou="app-check-internal";function Tx(){zi(new si(xx,e=>{const t=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat");return hx(t,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider(Ou).initialize()})),zi(new si(Ou,e=>{const t=e.getProvider("app-check").getImmediate();return ux(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ni(dx,fx)}Tx();var Ex=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},dl={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(i,s){s(t)})(Ex,function(i){var s="1.7.1";function o(n){var r,l,h,d;for(l=1,h=arguments.length;l<h;l++){d=arguments[l];for(r in d)n[r]=d[r]}return n}var a=Object.create||function(){function n(){}return function(r){return n.prototype=r,new n}}();function c(n,r){var l=Array.prototype.slice;if(n.bind)return n.bind.apply(n,l.call(arguments,1));var h=l.call(arguments,2);return function(){return n.apply(r,h.length?h.concat(l.call(arguments)):arguments)}}var u=0;function f(n){return n._leaflet_id=n._leaflet_id||++u,n._leaflet_id}function _(n,r,l){var h,d,p,w;return w=function(){h=!1,d&&(p.apply(l,d),d=!1)},p=function(){h?d=arguments:(n.apply(l,arguments),setTimeout(w,r),h=!0)},p}function g(n,r,l){var h=r[1],d=r[0],p=h-d;return n===h&&l?n:((n-d)%p+p)%p+d}function m(){return!1}function v(n,r){var l=Math.pow(10,r===void 0?6:r);return Math.round(n*l)/l}function E(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function M(n){return E(n).split(/\s+/)}function D(n,r){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?a(n.options):{});for(var l in r)n.options[l]=r[l];return n.options}function $(n,r,l){var h=[];for(var d in n)h.push(encodeURIComponent(l?d.toUpperCase():d)+"="+encodeURIComponent(n[d]));return(!r||r.indexOf("?")===-1?"?":"&")+h.join("&")}var tt=/\{ *([\w_-]+) *\}/g;function Mt(n,r){return n.replace(tt,function(l,h){var d=r[h];if(d===void 0)throw new Error("No value provided for variable "+l);return typeof d=="function"&&(d=d(r)),d})}var V=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function et(n,r){for(var l=0;l<n.length;l++)if(n[l]===r)return l;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Yt(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var ut=0;function Nt(n){var r=+new Date,l=Math.max(0,16-(r-ut));return ut=r+l,window.setTimeout(n,l)}var Y=window.requestAnimationFrame||Yt("RequestAnimationFrame")||Nt,U=window.cancelAnimationFrame||Yt("CancelAnimationFrame")||Yt("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function A(n,r,l){if(l&&Y===Nt)n.call(r);else return Y.call(window,c(n,r))}function dt(n){n&&U.call(window,n)}var Vt={extend:o,create:a,bind:c,lastId:u,stamp:f,throttle:_,wrapNum:g,falseFn:m,formatNum:v,trim:E,splitWords:M,setOptions:D,getParamString:$,template:Mt,isArray:V,indexOf:et,emptyImageUrl:X,requestFn:Y,cancelFn:U,requestAnimFrame:A,cancelAnimFrame:dt};function ye(){}ye.extend=function(n){var r=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=r.__super__=this.prototype,h=a(l);h.constructor=r,r.prototype=h;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(r[d]=this[d]);return n.statics&&(o(r,n.statics),delete n.statics),n.includes&&(es(n.includes),o.apply(null,[h].concat(n.includes)),delete n.includes),h.options&&(n.options=o(a(h.options),n.options)),o(h,n),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,w=h._initHooks.length;p<w;p++)h._initHooks[p].call(this)}},r},ye.include=function(n){return o(this.prototype,n),this},ye.mergeOptions=function(n){return o(this.prototype.options,n),this},ye.addInitHook=function(n){var r=Array.prototype.slice.call(arguments,1),l=typeof n=="function"?n:function(){this[n].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function es(n){if(!(typeof L=="undefined"||!L||!L.Mixin)){n=V(n)?n:[n];for(var r=0;r<n.length;r++)n[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ct={on:function(n,r,l){if(typeof n=="object")for(var h in n)this._on(h,n[h],r);else{n=M(n);for(var d=0,p=n.length;d<p;d++)this._on(n[d],r,l)}return this},off:function(n,r,l){if(!n)delete this._events;else if(typeof n=="object")for(var h in n)this._off(h,n[h],r);else{n=M(n);for(var d=0,p=n.length;d<p;d++)this._off(n[d],r,l)}return this},_on:function(n,r,l){this._events=this._events||{};var h=this._events[n];h||(h=[],this._events[n]=h),l===this&&(l=void 0);for(var d={fn:r,ctx:l},p=h,w=0,C=p.length;w<C;w++)if(p[w].fn===r&&p[w].ctx===l)return;p.push(d)},_off:function(n,r,l){var h,d,p;if(!!this._events&&(h=this._events[n],!!h)){if(!r){for(d=0,p=h.length;d<p;d++)h[d].fn=m;delete this._events[n];return}if(l===this&&(l=void 0),h)for(d=0,p=h.length;d<p;d++){var w=h[d];if(w.ctx===l&&w.fn===r){w.fn=m,this._firingCount&&(this._events[n]=h=h.slice()),h.splice(d,1);return}}}},fire:function(n,r,l){if(!this.listens(n,l))return this;var h=o({},r,{type:n,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var d=this._events[n];if(d){this._firingCount=this._firingCount+1||1;for(var p=0,w=d.length;p<w;p++){var C=d[p];C.fn.call(C.ctx||this,h)}this._firingCount--}}return l&&this._propagateEvent(h),this},listens:function(n,r){var l=this._events&&this._events[n];if(l&&l.length)return!0;if(r){for(var h in this._eventParents)if(this._eventParents[h].listens(n,r))return!0}return!1},once:function(n,r,l){if(typeof n=="object"){for(var h in n)this.once(h,n[h],r);return this}var d=c(function(){this.off(n,r,l).off(n,d,l)},this);return this.on(n,r,l).on(n,d,l)},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[f(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[f(n)],this},_propagateEvent:function(n){for(var r in this._eventParents)this._eventParents[r].fire(n.type,o({layer:n.target,propagatedFrom:n.target},n),!0)}};Ct.addEventListener=Ct.on,Ct.removeEventListener=Ct.clearAllEventListeners=Ct.off,Ct.addOneTimeEventListener=Ct.once,Ct.fireEvent=Ct.fire,Ct.hasEventListeners=Ct.listens;var xt=ye.extend(Ct);function H(n,r,l){this.x=l?Math.round(n):n,this.y=l?Math.round(r):r}var we=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(n){return this.clone()._add(ot(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(ot(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new H(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new H(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=we(this.x),this.y=we(this.y),this},distanceTo:function(n){n=ot(n);var r=n.x-this.x,l=n.y-this.y;return Math.sqrt(r*r+l*l)},equals:function(n){return n=ot(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=ot(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ot(n,r,l){return n instanceof H?n:V(n)?new H(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new H(n.x,n.y):new H(n,r,l)}function wt(n,r){if(!!n)for(var l=r?[n,r]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}wt.prototype={extend:function(n){return n=ot(n),!this.min&&!this.max?(this.min=n.clone(),this.max=n.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(n){return new H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new H(this.min.x,this.max.y)},getTopRight:function(){return new H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var r,l;return typeof n[0]=="number"||n instanceof H?n=ot(n):n=Qt(n),n instanceof wt?(r=n.min,l=n.max):r=l=n,r.x>=this.min.x&&l.x<=this.max.x&&r.y>=this.min.y&&l.y<=this.max.y},intersects:function(n){n=Qt(n);var r=this.min,l=this.max,h=n.min,d=n.max,p=d.x>=r.x&&h.x<=l.x,w=d.y>=r.y&&h.y<=l.y;return p&&w},overlaps:function(n){n=Qt(n);var r=this.min,l=this.max,h=n.min,d=n.max,p=d.x>r.x&&h.x<l.x,w=d.y>r.y&&h.y<l.y;return p&&w},isValid:function(){return!!(this.min&&this.max)}};function Qt(n,r){return!n||n instanceof wt?n:new wt(n,r)}function Ot(n,r){if(!!n)for(var l=r?[n,r]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}Ot.prototype={extend:function(n){var r=this._southWest,l=this._northEast,h,d;if(n instanceof bt)h=n,d=n;else if(n instanceof Ot){if(h=n._southWest,d=n._northEast,!h||!d)return this}else return n?this.extend(Rt(n)||Wt(n)):this;return!r&&!l?(this._southWest=new bt(h.lat,h.lng),this._northEast=new bt(d.lat,d.lng)):(r.lat=Math.min(h.lat,r.lat),r.lng=Math.min(h.lng,r.lng),l.lat=Math.max(d.lat,l.lat),l.lng=Math.max(d.lng,l.lng)),this},pad:function(n){var r=this._southWest,l=this._northEast,h=Math.abs(r.lat-l.lat)*n,d=Math.abs(r.lng-l.lng)*n;return new Ot(new bt(r.lat-h,r.lng-d),new bt(l.lat+h,l.lng+d))},getCenter:function(){return new bt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new bt(this.getNorth(),this.getWest())},getSouthEast:function(){return new bt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof bt||"lat"in n?n=Rt(n):n=Wt(n);var r=this._southWest,l=this._northEast,h,d;return n instanceof Ot?(h=n.getSouthWest(),d=n.getNorthEast()):h=d=n,h.lat>=r.lat&&d.lat<=l.lat&&h.lng>=r.lng&&d.lng<=l.lng},intersects:function(n){n=Wt(n);var r=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>=r.lat&&h.lat<=l.lat,w=d.lng>=r.lng&&h.lng<=l.lng;return p&&w},overlaps:function(n){n=Wt(n);var r=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>r.lat&&h.lat<l.lat,w=d.lng>r.lng&&h.lng<l.lng;return p&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,r){return n?(n=Wt(n),this._southWest.equals(n.getSouthWest(),r)&&this._northEast.equals(n.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Wt(n,r){return n instanceof Ot?n:new Ot(n,r)}function bt(n,r,l){if(isNaN(n)||isNaN(r))throw new Error("Invalid LatLng object: ("+n+", "+r+")");this.lat=+n,this.lng=+r,l!==void 0&&(this.alt=+l)}bt.prototype={equals:function(n,r){if(!n)return!1;n=Rt(n);var l=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return l<=(r===void 0?1e-9:r)},toString:function(n){return"LatLng("+v(this.lat,n)+", "+v(this.lng,n)+")"},distanceTo:function(n){return fe.distance(this,Rt(n))},wrap:function(){return fe.wrapLatLng(this)},toBounds:function(n){var r=180*n/40075017,l=r/Math.cos(Math.PI/180*this.lat);return Wt([this.lat-r,this.lng-l],[this.lat+r,this.lng+l])},clone:function(){return new bt(this.lat,this.lng,this.alt)}};function Rt(n,r,l){return n instanceof bt?n:V(n)&&typeof n[0]!="object"?n.length===3?new bt(n[0],n[1],n[2]):n.length===2?new bt(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new bt(n.lat,"lng"in n?n.lng:n.lon,n.alt):r===void 0?null:new bt(n,r,l)}var jt={latLngToPoint:function(n,r){var l=this.projection.project(n),h=this.scale(r);return this.transformation._transform(l,h)},pointToLatLng:function(n,r){var l=this.scale(r),h=this.transformation.untransform(n,l);return this.projection.unproject(h)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var r=this.projection.bounds,l=this.scale(n),h=this.transformation.transform(r.min,l),d=this.transformation.transform(r.max,l);return new wt(h,d)},infinite:!1,wrapLatLng:function(n){var r=this.wrapLng?g(n.lng,this.wrapLng,!0):n.lng,l=this.wrapLat?g(n.lat,this.wrapLat,!0):n.lat,h=n.alt;return new bt(l,r,h)},wrapLatLngBounds:function(n){var r=n.getCenter(),l=this.wrapLatLng(r),h=r.lat-l.lat,d=r.lng-l.lng;if(h===0&&d===0)return n;var p=n.getSouthWest(),w=n.getNorthEast(),C=new bt(p.lat-h,p.lng-d),x=new bt(w.lat-h,w.lng-d);return new Ot(C,x)}},fe=o({},jt,{wrapLng:[-180,180],R:6371e3,distance:function(n,r){var l=Math.PI/180,h=n.lat*l,d=r.lat*l,p=Math.sin((r.lat-n.lat)*l/2),w=Math.sin((r.lng-n.lng)*l/2),C=p*p+Math.cos(h)*Math.cos(d)*w*w,x=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*x}}),ns=6378137,Fe={R:ns,MAX_LATITUDE:85.0511287798,project:function(n){var r=Math.PI/180,l=this.MAX_LATITUDE,h=Math.max(Math.min(l,n.lat),-l),d=Math.sin(h*r);return new H(this.R*n.lng*r,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(n){var r=180/Math.PI;return new bt((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*r,n.x*r/this.R)},bounds:function(){var n=ns*Math.PI;return new wt([-n,-n],[n,n])}()};function Dn(n,r,l,h){if(V(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=r,this._c=l,this._d=h}Dn.prototype={transform:function(n,r){return this._transform(n.clone(),r)},_transform:function(n,r){return r=r||1,n.x=r*(this._a*n.x+this._b),n.y=r*(this._c*n.y+this._d),n},untransform:function(n,r){return r=r||1,new H((n.x/r-this._b)/this._a,(n.y/r-this._d)/this._c)}};function Je(n,r,l,h){return new Dn(n,r,l,h)}var y=o({},fe,{code:"EPSG:3857",projection:Fe,transformation:function(){var n=.5/(Math.PI*Fe.R);return Je(n,.5,-n,.5)}()}),b=o({},y,{code:"EPSG:900913"});function T(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function S(n,r){var l="",h,d,p,w,C,x;for(h=0,p=n.length;h<p;h++){for(C=n[h],d=0,w=C.length;d<w;d++)x=C[d],l+=(d?"L":"M")+x.x+" "+x.y;l+=r?tr?"z":"x":""}return l||"M0 0"}var I=document.documentElement.style,R="ActiveXObject"in window,F=R&&!document.addEventListener,N="msLaunchUri"in navigator&&!("documentMode"in document),B=He("webkit"),k=He("android"),j=He("android 2")||He("android 3"),Z=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),q=k&&He("Google")&&Z<537&&!("AudioNode"in window),Q=!!window.opera,at=!N&&He("chrome"),Tt=He("gecko")&&!B&&!Q&&!R,_t=!at&&He("safari"),Et=He("phantom"),he="OTransition"in I,tn=navigator.platform.indexOf("Win")===0,di=R&&"transition"in I,en="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!j,is="MozPerspective"in I,St=!window.L_DISABLE_3D&&(di||en||is)&&!he&&!Et,ee=typeof orientation!="undefined"||He("mobile"),Js=ee&&B,b_=ee&&en,yn=!window.PointerEvent&&window.MSPointerEvent,ze=!!(window.PointerEvent||yn),We=!window.L_NO_TOUCH&&(ze||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Cc=ee&&Q,C_=ee&&Tt,wn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,fi=function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",m,r),window.removeEventListener("testPassiveEventSupport",m,r)}catch{}return n}(),xc=function(){return!!document.createElement("canvas").getContext}(),tr=!!(document.createElementNS&&T("svg").createSVGRect),er=!tr&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var r=n.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}();function He(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var x_={ie:R,ielt9:F,edge:N,webkit:B,android:k,android23:j,androidStock:q,opera:Q,chrome:at,gecko:Tt,safari:_t,phantom:Et,opera12:he,win:tn,ie3d:di,webkit3d:en,gecko3d:is,any3d:St,mobile:ee,mobileWebkit:Js,mobileWebkit3d:b_,msPointer:yn,pointer:ze,touch:We,mobileOpera:Cc,mobileGecko:C_,retina:wn,passiveEvents:fi,canvas:xc,svg:tr,vml:er},Bo=yn?"MSPointerDown":"pointerdown",Fo=yn?"MSPointerMove":"pointermove",zo=yn?"MSPointerUp":"pointerup",Wo=yn?"MSPointerCancel":"pointercancel",_i={},Tc=!1;function T_(n,r,l,h){return r==="touchstart"?P_(n,l,h):r==="touchmove"?k_(n,l,h):r==="touchend"&&L_(n,l,h),this}function E_(n,r,l){var h=n["_leaflet_"+r+l];return r==="touchstart"?n.removeEventListener(Bo,h,!1):r==="touchmove"?n.removeEventListener(Fo,h,!1):r==="touchend"&&(n.removeEventListener(zo,h,!1),n.removeEventListener(Wo,h,!1)),this}function P_(n,r,l){var h=c(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Ce(d),Ho(d,r)});n["_leaflet_touchstart"+l]=h,n.addEventListener(Bo,h,!1),Tc||(document.addEventListener(Bo,I_,!0),document.addEventListener(Fo,S_,!0),document.addEventListener(zo,Ec,!0),document.addEventListener(Wo,Ec,!0),Tc=!0)}function I_(n){_i[n.pointerId]=n}function S_(n){_i[n.pointerId]&&(_i[n.pointerId]=n)}function Ec(n){delete _i[n.pointerId]}function Ho(n,r){n.touches=[];for(var l in _i)n.touches.push(_i[l]);n.changedTouches=[n],r(n)}function k_(n,r,l){var h=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||Ho(d,r)};n["_leaflet_touchmove"+l]=h,n.addEventListener(Fo,h,!1)}function L_(n,r,l){var h=function(d){Ho(d,r)};n["_leaflet_touchend"+l]=h,n.addEventListener(zo,h,!1),n.addEventListener(Wo,h,!1)}var nr=yn?"MSPointerDown":ze?"pointerdown":"touchstart",ir=yn?"MSPointerUp":ze?"pointerup":"touchend",pi="_leaflet_";function A_(n,r,l){var h,d,p=!1,w=250;function C(P){if(ze){if(!P.isPrimary||P.pointerType==="mouse")return}else if(P.touches.length>1)return;var W=Date.now(),G=W-(h||W);d=P.touches?P.touches[0]:P,p=G>0&&G<=w,h=W}function x(P){if(p&&!d.cancelBubble){if(ze){if(P.pointerType==="mouse")return;var W={},G,mt;for(mt in d)G=d[mt],W[mt]=G&&G.bind?G.bind(d):G;d=W}d.type="dblclick",d.button=0,r(d),h=null}}return n[pi+nr+l]=C,n[pi+ir+l]=x,n[pi+"dblclick"+l]=r,n.addEventListener(nr,C,fi?{passive:!1}:!1),n.addEventListener(ir,x,fi?{passive:!1}:!1),n.addEventListener("dblclick",r,!1),this}function M_(n,r){var l=n[pi+nr+r],h=n[pi+ir+r],d=n[pi+"dblclick"+r];return n.removeEventListener(nr,l,fi?{passive:!1}:!1),n.removeEventListener(ir,h,fi?{passive:!1}:!1),n.removeEventListener("dblclick",d,!1),this}var Uo=or(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ss=or(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Pc=ss==="webkitTransition"||ss==="OTransition"?ss+"End":"transitionend";function Ic(n){return typeof n=="string"?document.getElementById(n):n}function rs(n,r){var l=n.style[r]||n.currentStyle&&n.currentStyle[r];if((!l||l==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(n,null);l=h?h[r]:null}return l==="auto"?null:l}function pt(n,r,l){var h=document.createElement(n);return h.className=r||"",l&&l.appendChild(h),h}function Dt(n){var r=n.parentNode;r&&r.removeChild(n)}function sr(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function mi(n){var r=n.parentNode;r&&r.lastChild!==n&&r.appendChild(n)}function gi(n){var r=n.parentNode;r&&r.firstChild!==n&&r.insertBefore(n,r.firstChild)}function Zo(n,r){if(n.classList!==void 0)return n.classList.contains(r);var l=rr(n);return l.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(l)}function nt(n,r){if(n.classList!==void 0)for(var l=M(r),h=0,d=l.length;h<d;h++)n.classList.add(l[h]);else if(!Zo(n,r)){var p=rr(n);$o(n,(p?p+" ":"")+r)}}function Bt(n,r){n.classList!==void 0?n.classList.remove(r):$o(n,E((" "+rr(n)+" ").replace(" "+r+" "," ")))}function $o(n,r){n.className.baseVal===void 0?n.className=r:n.className.baseVal=r}function rr(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function be(n,r){"opacity"in n.style?n.style.opacity=r:"filter"in n.style&&N_(n,r)}function N_(n,r){var l=!1,h="DXImageTransform.Microsoft.Alpha";try{l=n.filters.item(h)}catch{if(r===1)return}r=Math.round(r*100),l?(l.Enabled=r!==100,l.Opacity=r):n.style.filter+=" progid:"+h+"(opacity="+r+")"}function or(n){for(var r=document.documentElement.style,l=0;l<n.length;l++)if(n[l]in r)return n[l];return!1}function Bn(n,r,l){var h=r||new H(0,0);n.style[Uo]=(di?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(l?" scale("+l+")":"")}function Ut(n,r){n._leaflet_pos=r,St?Bn(n,r):(n.style.left=r.x+"px",n.style.top=r.y+"px")}function bn(n){return n._leaflet_pos||new H(0,0)}var os,as,Vo;if("onselectstart"in document)os=function(){lt(window,"selectstart",Ce)},as=function(){Ht(window,"selectstart",Ce)};else{var ls=or(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);os=function(){if(ls){var n=document.documentElement.style;Vo=n[ls],n[ls]="none"}},as=function(){ls&&(document.documentElement.style[ls]=Vo,Vo=void 0)}}function jo(){lt(window,"dragstart",Ce)}function qo(){Ht(window,"dragstart",Ce)}var ar,Go;function Ko(n){for(;n.tabIndex===-1;)n=n.parentNode;!n.style||(lr(),ar=n,Go=n.style.outline,n.style.outline="none",lt(window,"keydown",lr))}function lr(){!ar||(ar.style.outline=Go,ar=void 0,Go=void 0,Ht(window,"keydown",lr))}function Sc(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Yo(n){var r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth||1,y:r.height/n.offsetHeight||1,boundingClientRect:r}}var R_={TRANSFORM:Uo,TRANSITION:ss,TRANSITION_END:Pc,get:Ic,getStyle:rs,create:pt,remove:Dt,empty:sr,toFront:mi,toBack:gi,hasClass:Zo,addClass:nt,removeClass:Bt,setClass:$o,getClass:rr,setOpacity:be,testProp:or,setTransform:Bn,setPosition:Ut,getPosition:bn,disableTextSelection:os,enableTextSelection:as,disableImageDrag:jo,enableImageDrag:qo,preventOutline:Ko,restoreOutline:lr,getSizedParentNode:Sc,getScale:Yo};function lt(n,r,l,h){if(typeof r=="object")for(var d in r)cr(n,d,r[d],l);else{r=M(r);for(var p=0,w=r.length;p<w;p++)cr(n,r[p],l,h)}return this}var Ie="_leaflet_events";function Ht(n,r,l,h){if(typeof r=="object")for(var d in r)Xo(n,d,r[d],l);else if(r){r=M(r);for(var p=0,w=r.length;p<w;p++)Xo(n,r[p],l,h)}else{for(var C in n[Ie])Xo(n,C,n[Ie][C]);delete n[Ie]}return this}function kc(){if(ze)return!(N||_t)}var Qo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cr(n,r,l,h){var d=r+f(l)+(h?"_"+f(h):"");if(n[Ie]&&n[Ie][d])return this;var p=function(C){return l.call(h||n,C||window.event)},w=p;ze&&r.indexOf("touch")===0?T_(n,r,p,d):We&&r==="dblclick"&&!kc()?A_(n,p,d):"addEventListener"in n?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?n.addEventListener(Qo[r]||r,p,fi?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(p=function(C){C=C||window.event,hr(n,C)&&w(C)},n.addEventListener(Qo[r],p,!1)):n.addEventListener(r,w,!1):"attachEvent"in n&&n.attachEvent("on"+r,p),n[Ie]=n[Ie]||{},n[Ie][d]=p}function Xo(n,r,l,h){var d=r+f(l)+(h?"_"+f(h):""),p=n[Ie]&&n[Ie][d];if(!p)return this;ze&&r.indexOf("touch")===0?E_(n,r,d):We&&r==="dblclick"&&!kc()?M_(n,d):"removeEventListener"in n?n.removeEventListener(Qo[r]||r,p,!1):"detachEvent"in n&&n.detachEvent("on"+r,p),n[Ie][d]=null}function Fn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,na(n),this}function Jo(n){return cr(n,"wheel",Fn),this}function cs(n){return lt(n,"mousedown touchstart dblclick",Fn),cr(n,"click",ea),this}function Ce(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function nn(n){return Ce(n),Fn(n),this}function Lc(n,r){if(!r)return new H(n.clientX,n.clientY);var l=Yo(r),h=l.boundingClientRect;return new H((n.clientX-h.left)/l.x-r.clientLeft,(n.clientY-h.top)/l.y-r.clientTop)}var O_=tn&&at?2*window.devicePixelRatio:Tt?window.devicePixelRatio:1;function Ac(n){return N?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/O_:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}var ta={};function ea(n){ta[n.type]=!0}function na(n){var r=ta[n.type];return ta[n.type]=!1,r}function hr(n,r){var l=r.relatedTarget;if(!l)return!0;try{for(;l&&l!==n;)l=l.parentNode}catch{return!1}return l!==n}var D_={on:lt,off:Ht,stopPropagation:Fn,disableScrollPropagation:Jo,disableClickPropagation:cs,preventDefault:Ce,stop:nn,getMousePosition:Lc,getWheelDelta:Ac,fakeStop:ea,skipped:na,isExternalTarget:hr,addListener:lt,removeListener:Ht},Mc=xt.extend({run:function(n,r,l,h){this.stop(),this._el=n,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=bn(n),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(n){var r=+new Date-this._startTime,l=this._duration*1e3;r<l?this._runFrame(this._easeOut(r/l),n):(this._runFrame(1),this._complete())},_runFrame:function(n,r){var l=this._startPos.add(this._offset.multiplyBy(n));r&&l._round(),Ut(this._el,l),this.fire("step")},_complete:function(){dt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),ft=xt.extend({options:{crs:y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,r){r=D(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(Rt(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ss&&St&&!Cc&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),lt(this._proxy,Pc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,r,l){if(r=r===void 0?this._zoom:this._limitZoom(r),n=this._limitCenter(Rt(n),r,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var h=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,r,l.zoom):this._tryAnimatedPan(n,l.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(n,r),this},setZoom:function(n,r){return this._loaded?this.setView(this.getCenter(),n,{zoom:r}):(this._zoom=n,this)},zoomIn:function(n,r){return n=n||(St?this.options.zoomDelta:1),this.setZoom(this._zoom+n,r)},zoomOut:function(n,r){return n=n||(St?this.options.zoomDelta:1),this.setZoom(this._zoom-n,r)},setZoomAround:function(n,r,l){var h=this.getZoomScale(r),d=this.getSize().divideBy(2),p=n instanceof H?n:this.latLngToContainerPoint(n),w=p.subtract(d).multiplyBy(1-1/h),C=this.containerPointToLatLng(d.add(w));return this.setView(C,r,{zoom:l})},_getBoundsCenterZoom:function(n,r){r=r||{},n=n.getBounds?n.getBounds():Wt(n);var l=ot(r.paddingTopLeft||r.padding||[0,0]),h=ot(r.paddingBottomRight||r.padding||[0,0]),d=this.getBoundsZoom(n,!1,l.add(h));if(d=typeof r.maxZoom=="number"?Math.min(r.maxZoom,d):d,d===1/0)return{center:n.getCenter(),zoom:d};var p=h.subtract(l).divideBy(2),w=this.project(n.getSouthWest(),d),C=this.project(n.getNorthEast(),d),x=this.unproject(w.add(C).divideBy(2).add(p),d);return{center:x,zoom:d}},fitBounds:function(n,r){if(n=Wt(n),!n.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(n,r);return this.setView(l.center,l.zoom,r)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,r){return this.setView(n,this._zoom,{pan:r})},panBy:function(n,r){if(n=ot(n).round(),r=r||{},!n.x&&!n.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Mc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){nt(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,l,r.duration||.25,r.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,r,l){if(l=l||{},l.animate===!1||!St)return this.setView(n,r,l);this._stop();var h=this.project(this.getCenter()),d=this.project(n),p=this.getSize(),w=this._zoom;n=Rt(n),r=r===void 0?w:r;var C=Math.max(p.x,p.y),x=C*this.getZoomScale(w,r),P=d.distanceTo(h)||1,W=1.42,G=W*W;function mt(Zt){var wr=Zt?-1:1,Cp=Zt?x:C,xp=x*x-C*C+wr*G*G*P*P,Tp=2*Cp*G*P,pa=xp/Tp,uh=Math.sqrt(pa*pa+1)-pa,Ep=uh<1e-9?-18:Math.log(uh);return Ep}function ln(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function Hn(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}function yr(Zt){return ln(Zt)/Hn(Zt)}var xn=mt(0);function _a(Zt){return C*(Hn(xn)/Hn(xn+W*Zt))}function vp(Zt){return C*(Hn(xn)*yr(xn+W*Zt)-ln(xn))/G}function yp(Zt){return 1-Math.pow(1-Zt,1.5)}var wp=Date.now(),ch=(mt(1)-xn)/W,bp=l.duration?1e3*l.duration:1e3*ch*.8;function hh(){var Zt=(Date.now()-wp)/bp,wr=yp(Zt)*ch;Zt<=1?(this._flyToFrame=A(hh,this),this._move(this.unproject(h.add(d.subtract(h).multiplyBy(vp(wr)/P)),w),this.getScaleZoom(C/_a(wr),w),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),hh.call(this),this},flyToBounds:function(n,r){var l=this._getBoundsCenterZoom(n,r);return this.flyTo(l.center,l.zoom,r)},setMaxBounds:function(n){if(n=Wt(n),n.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(n){var r=this.options.minZoom;return this.options.minZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var r=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,r){this._enforcingBounds=!0;var l=this.getCenter(),h=this._limitCenter(l,this._zoom,Wt(n));return l.equals(h)||this.panTo(h,r),this._enforcingBounds=!1,this},panInside:function(n,r){r=r||{};var l=ot(r.paddingTopLeft||r.padding||[0,0]),h=ot(r.paddingBottomRight||r.padding||[0,0]),d=this.getCenter(),p=this.project(d),w=this.project(n),C=this.getPixelBounds(),x=C.getSize().divideBy(2),P=Qt([C.min.add(l),C.max.subtract(h)]);if(!P.contains(w)){this._enforcingBounds=!0;var W=p.subtract(w),G=ot(w.x+W.x,w.y+W.y);(w.x<P.min.x||w.x>P.max.x)&&(G.x=p.x-W.x,W.x>0?G.x+=x.x-l.x:G.x-=x.x-h.x),(w.y<P.min.y||w.y>P.max.y)&&(G.y=p.y-W.y,W.y>0?G.y+=x.y-l.y:G.y-=x.y-h.y),this.panTo(this.unproject(G),r),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=o({animate:!1,pan:!0},n===!0?{animate:!0}:n);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),h=r.divideBy(2).round(),d=l.divideBy(2).round(),p=h.subtract(d);return!p.x&&!p.y?this:(n.animate&&n.pan?this.panBy(p):(n.pan&&this._rawPanBy(p),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=o({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=c(this._handleGeolocationResponse,this),l=c(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,l,n):navigator.geolocation.getCurrentPosition(r,l,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){var r=n.code,l=n.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+l+"."})},_handleGeolocationResponse:function(n){var r=n.coords.latitude,l=n.coords.longitude,h=new bt(r,l),d=h.toBounds(n.coords.accuracy*2),p=this._locateOptions;if(p.setView){var w=this.getBoundsZoom(d);this.setView(h,p.maxZoom?Math.min(w,p.maxZoom):w)}var C={latlng:h,bounds:d,timestamp:n.timestamp};for(var x in n.coords)typeof n.coords[x]=="number"&&(C[x]=n.coords[x]);this.fire("locationfound",C)},addHandler:function(n,r){if(!r)return this;var l=this[n]=new r(this);return this._handlers.push(l),this.options[n]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(dt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Dt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,r){var l="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),h=pt("div",l,r||this._mapPane);return n&&(this._panes[n]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),r=this.unproject(n.getBottomLeft()),l=this.unproject(n.getTopRight());return new Ot(r,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,r,l){n=Wt(n),l=ot(l||[0,0]);var h=this.getZoom()||0,d=this.getMinZoom(),p=this.getMaxZoom(),w=n.getNorthWest(),C=n.getSouthEast(),x=this.getSize().subtract(l),P=Qt(this.project(C,h),this.project(w,h)).getSize(),W=St?this.options.zoomSnap:1,G=x.x/P.x,mt=x.y/P.y,ln=r?Math.max(G,mt):Math.min(G,mt);return h=this.getScaleZoom(ln,h),W&&(h=Math.round(h/(W/100))*(W/100),h=r?Math.ceil(h/W)*W:Math.floor(h/W)*W),Math.max(d,Math.min(p,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,r){var l=this._getTopLeftPoint(n,r);return new wt(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,r){var l=this.options.crs;return r=r===void 0?this._zoom:r,l.scale(n)/l.scale(r)},getScaleZoom:function(n,r){var l=this.options.crs;r=r===void 0?this._zoom:r;var h=l.zoom(n*l.scale(r));return isNaN(h)?1/0:h},project:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(Rt(n),r)},unproject:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(ot(n),r)},layerPointToLatLng:function(n){var r=ot(n).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(n){var r=this.project(Rt(n))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Rt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Wt(n))},distance:function(n,r){return this.options.crs.distance(Rt(n),Rt(r))},containerPointToLayerPoint:function(n){return ot(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return ot(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var r=this.containerPointToLayerPoint(ot(n));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Rt(n)))},mouseEventToContainerPoint:function(n){return Lc(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var r=this._container=Ic(n);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");lt(r,"scroll",this._onScroll,this),this._containerId=f(r)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&St,nt(n,"leaflet-container"+(We?" leaflet-touch":"")+(wn?" leaflet-retina":"")+(F?" leaflet-oldie":"")+(_t?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=rs(n,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ut(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(nt(n.markerPane,"leaflet-zoom-hide"),nt(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,r){Ut(this._mapPane,new H(0,0));var l=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var h=this._zoom!==r;this._moveStart(h,!1)._move(n,r)._moveEnd(h),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(n,r){return n&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(n,r,l){r===void 0&&(r=this._zoom);var h=this._zoom!==r;return this._zoom=r,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),(h||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return dt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Ut(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[f(this._container)]=this;var r=n?Ht:lt;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),St&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){dt(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,r){for(var l=[],h,d=r==="mouseout"||r==="mouseover",p=n.target||n.srcElement,w=!1;p;){if(h=this._targets[f(p)],h&&(r==="click"||r==="preclick")&&!n._simulated&&this._draggableMoved(h)){w=!0;break}if(h&&h.listens(r,!0)&&(d&&!hr(p,n)||(l.push(h),d))||p===this._container)break;p=p.parentNode}return!l.length&&!w&&!d&&hr(p,n)&&(l=[this]),l},_handleDOMEvent:function(n){if(!(!this._loaded||na(n))){var r=n.type;(r==="mousedown"||r==="keypress"||r==="keyup"||r==="keydown")&&Ko(n.target||n.srcElement),this._fireDOMEvent(n,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,r,l){if(n.type==="click"){var h=o({},n);h.type="preclick",this._fireDOMEvent(h,h.type,l)}if(!n._stopped&&(l=(l||[]).concat(this._findEventTargets(n,r)),!!l.length)){var d=l[0];r==="contextmenu"&&d.listens(r,!0)&&Ce(n);var p={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var w=d.getLatLng&&(!d._radius||d._radius<=10);p.containerPoint=w?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(n),p.layerPoint=this.containerPointToLayerPoint(p.containerPoint),p.latlng=w?d.getLatLng():this.layerPointToLatLng(p.layerPoint)}for(var C=0;C<l.length;C++)if(l[C].fire(r,p,!0),p.originalEvent._stopped||l[C].options.bubblingMouseEvents===!1&&et(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,r=this._handlers.length;n<r;n++)this._handlers[n].disable()},whenReady:function(n,r){return this._loaded?n.call(r||this,{target:this}):this.on("load",n,r),this},_getMapPanePos:function(){return bn(this._mapPane)||new H(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,r){var l=n&&r!==void 0?this._getNewPixelOrigin(n,r):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,r){var l=this.getSize()._divideBy(2);return this.project(n,r)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,r,l){var h=this._getNewPixelOrigin(l,r);return this.project(n,r)._subtract(h)},_latLngBoundsToNewLayerBounds:function(n,r,l){var h=this._getNewPixelOrigin(l,r);return Qt([this.project(n.getSouthWest(),r)._subtract(h),this.project(n.getNorthWest(),r)._subtract(h),this.project(n.getSouthEast(),r)._subtract(h),this.project(n.getNorthEast(),r)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,r,l){if(!l)return n;var h=this.project(n,r),d=this.getSize().divideBy(2),p=new wt(h.subtract(d),h.add(d)),w=this._getBoundsOffset(p,l,r);return w.round().equals([0,0])?n:this.unproject(h.add(w),r)},_limitOffset:function(n,r){if(!r)return n;var l=this.getPixelBounds(),h=new wt(l.min.add(n),l.max.add(n));return n.add(this._getBoundsOffset(h,r))},_getBoundsOffset:function(n,r,l){var h=Qt(this.project(r.getNorthEast(),l),this.project(r.getSouthWest(),l)),d=h.min.subtract(n.min),p=h.max.subtract(n.max),w=this._rebound(d.x,-p.x),C=this._rebound(d.y,-p.y);return new H(w,C)},_rebound:function(n,r){return n+r>0?Math.round(n-r)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(r))},_limitZoom:function(n){var r=this.getMinZoom(),l=this.getMaxZoom(),h=St?this.options.zoomSnap:1;return h&&(n=Math.round(n/h)*h),Math.max(r,Math.min(l,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,r){var l=this._getCenterOffset(n)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,r),!0)},_createAnimProxy:function(){var n=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(r){var l=Uo,h=this._proxy.style[l];Bn(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),h===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),r=this.getZoom();Bn(this._proxy,this.project(n,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,r,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(r),d=this._getCenterOffset(n)._divideBy(1-1/h);return l.animate!==!0&&!this.getSize().contains(d)?!1:(A(function(){this._moveStart(!0,!1)._animateZoom(n,r,!0)},this),!0)},_animateZoom:function(n,r,l,h){!this._mapPane||(l&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=r,nt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:r,noUpdate:h}),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),A(function(){this._moveEnd(!0)},this))}});function B_(n,r){return new ft(n,r)}var Se=ye.extend({options:{position:"topright"},initialize:function(n){D(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var r=this._map;return r&&r.removeControl(this),this.options.position=n,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var r=this._container=this.onAdd(n),l=this.getPosition(),h=n._controlCorners[l];return nt(r,"leaflet-control"),l.indexOf("bottom")!==-1?h.insertBefore(r,h.firstChild):h.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),hs=function(n){return new Se(n)};ft.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",l=this._controlContainer=pt("div",r+"control-container",this._container);function h(d,p){var w=r+d+" "+r+p;n[d+p]=pt("div",w,l)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Dt(this._controlCorners[n]);Dt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Nc=Se.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,r,l,h){return l<h?-1:h<l?1:0}},initialize:function(n,r,l){D(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var h in n)this._addLayer(n[h],h);for(h in r)this._addLayer(r[h],h,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Se.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,r){return this._addLayer(n,r),this._map?this._update():this},addOverlay:function(n,r){return this._addLayer(n,r,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var r=this._getLayer(f(n));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){nt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(nt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",r=this._container=pt("div",n),l=this.options.collapsed;r.setAttribute("aria-haspopup",!0),cs(r),Jo(r);var h=this._section=pt("section",n+"-list");l&&(this._map.on("click",this.collapse,this),k||lt(r,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=pt("a",n+"-toggle",r);d.href="#",d.title="Layers",We?(lt(d,"click",nn),lt(d,"click",this.expand,this)):lt(d,"focus",this.expand,this),l||this.expand(),this._baseLayersList=pt("div",n+"-base",h),this._separator=pt("div",n+"-separator",h),this._overlaysList=pt("div",n+"-overlays",h),r.appendChild(h)},_getLayer:function(n){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&f(this._layers[r].layer)===n)return this._layers[r]},_addLayer:function(n,r,l){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:r,overlay:l}),this.options.sortLayers&&this._layers.sort(c(function(h,d){return this.options.sortFunction(h.layer,d.layer,h.name,d.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sr(this._baseLayersList),sr(this._overlaysList),this._layerControlInputs=[];var n,r,l,h,d=0;for(l=0;l<this._layers.length;l++)h=this._layers[l],this._addItem(h),r=r||h.overlay,n=n||!h.overlay,d+=h.overlay?0:1;return this.options.hideSingleBase&&(n=n&&d>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=r&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var r=this._getLayer(f(n.target)),l=r.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;l&&this._map.fire(l,r)},_createRadioElement:function(n,r){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(r?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=l,h.firstChild},_addItem:function(n){var r=document.createElement("label"),l=this._map.hasLayer(n.layer),h;n.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=l):h=this._createRadioElement("leaflet-base-layers_"+f(this),l),this._layerControlInputs.push(h),h.layerId=f(n.layer),lt(h,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+n.name;var p=document.createElement("div");r.appendChild(p),p.appendChild(h),p.appendChild(d);var w=n.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){var n=this._layerControlInputs,r,l,h=[],d=[];this._handlingClick=!0;for(var p=n.length-1;p>=0;p--)r=n[p],l=this._getLayer(r.layerId).layer,r.checked?h.push(l):r.checked||d.push(l);for(p=0;p<d.length;p++)this._map.hasLayer(d[p])&&this._map.removeLayer(d[p]);for(p=0;p<h.length;p++)this._map.hasLayer(h[p])||this._map.addLayer(h[p]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,r,l,h=this._map.getZoom(),d=n.length-1;d>=0;d--)r=n[d],l=this._getLayer(r.layerId).layer,r.disabled=l.options.minZoom!==void 0&&h<l.options.minZoom||l.options.maxZoom!==void 0&&h>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),F_=function(n,r,l){return new Nc(n,r,l)},ia=Se.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(n){var r="leaflet-control-zoom",l=pt("div",r+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,r+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,r+"-out",l,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,r,l,h,d){var p=pt("a",l,h);return p.innerHTML=n,p.href="#",p.title=r,p.setAttribute("role","button"),p.setAttribute("aria-label",r),cs(p),lt(p,"click",nn),lt(p,"click",d,this),lt(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var n=this._map,r="leaflet-disabled";Bt(this._zoomInButton,r),Bt(this._zoomOutButton,r),(this._disabled||n._zoom===n.getMinZoom())&&nt(this._zoomOutButton,r),(this._disabled||n._zoom===n.getMaxZoom())&&nt(this._zoomInButton,r)}});ft.mergeOptions({zoomControl:!0}),ft.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ia,this.addControl(this.zoomControl))});var z_=function(n){return new ia(n)},Rc=Se.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var r="leaflet-control-scale",l=pt("div",r),h=this.options;return this._addScales(h,r+"-line",l),n.on(h.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),l},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,r,l){n.metric&&(this._mScale=pt("div",r,l)),n.imperial&&(this._iScale=pt("div",r,l))},_update:function(){var n=this._map,r=n.getSize().y/2,l=n.distance(n.containerPointToLatLng([0,r]),n.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(l)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var r=this._getRoundNum(n),l=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,l,r/n)},_updateImperial:function(n){var r=n*3.2808399,l,h,d;r>5280?(l=r/5280,h=this._getRoundNum(l),this._updateScale(this._iScale,h+" mi",h/l)):(d=this._getRoundNum(r),this._updateScale(this._iScale,d+" ft",d/r))},_updateScale:function(n,r,l){n.style.width=Math.round(this.options.maxWidth*l)+"px",n.innerHTML=r},_getRoundNum:function(n){var r=Math.pow(10,(Math.floor(n)+"").length-1),l=n/r;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,r*l}}),W_=function(n){return new Rc(n)},sa=Se.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(n){D(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),cs(this._container);for(var r in n._layers)n._layers[r].getAttribution&&this.addAttribution(n._layers[r].getAttribution());return this._update(),this._container},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(!!this._map){var n=[];for(var r in this._attributions)this._attributions[r]&&n.push(r);var l=[];this.options.prefix&&l.push(this.options.prefix),n.length&&l.push(n.join(", ")),this._container.innerHTML=l.join(" | ")}}});ft.mergeOptions({attributionControl:!0}),ft.addInitHook(function(){this.options.attributionControl&&new sa().addTo(this)});var H_=function(n){return new sa(n)};Se.Layers=Nc,Se.Zoom=ia,Se.Scale=Rc,Se.Attribution=sa,hs.layers=F_,hs.zoom=z_,hs.scale=W_,hs.attribution=H_;var Ue=ye.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ue.addTo=function(n,r){return n.addHandler(r,this),this};var U_={Events:Ct},Oc=We?"touchstart mousedown":"mousedown",Dc={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ra={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},zn=xt.extend({options:{clickTolerance:3},initialize:function(n,r,l,h){D(this,h),this._element=n,this._dragStartTarget=r||n,this._preventOutline=l},enable:function(){this._enabled||(lt(this._dragStartTarget,Oc,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(zn._dragging===this&&this.finishDrag(),Ht(this._dragStartTarget,Oc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(!(n._simulated||!this._enabled)&&(this._moved=!1,!Zo(this._element,"leaflet-zoom-anim")&&!(zn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(zn._dragging=this,this._preventOutline&&Ko(this._element),jo(),os(),!this._moving))){this.fire("down");var r=n.touches?n.touches[0]:n,l=Sc(this._element);this._startPoint=new H(r.clientX,r.clientY),this._parentScale=Yo(l),lt(document,ra[n.type],this._onMove,this),lt(document,Dc[n.type],this._onUp,this)}},_onMove:function(n){if(!(n._simulated||!this._enabled)){if(n.touches&&n.touches.length>1){this._moved=!0;return}var r=n.touches&&n.touches.length===1?n.touches[0]:n,l=new H(r.clientX,r.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,Ce(n),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=bn(this._element).subtract(l),nt(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),nt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,dt(this._animRequest),this._lastEvent=n,this._animRequest=A(this._updatePosition,this,!0))}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Ut(this._element,this._newPos),this.fire("drag",n)},_onUp:function(n){n._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){Bt(document.body,"leaflet-dragging"),this._lastTarget&&(Bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var n in ra)Ht(document,ra[n],this._onMove,this),Ht(document,Dc[n],this._onUp,this);qo(),as(),this._moved&&this._moving&&(dt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,zn._dragging=!1}});function Bc(n,r){if(!r||!n.length)return n.slice();var l=r*r;return n=V_(n,l),n=$_(n,l),n}function Fc(n,r,l){return Math.sqrt(us(n,r,l,!0))}function Z_(n,r,l){return us(n,r,l)}function $_(n,r){var l=n.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new h(l);d[0]=d[l-1]=1,oa(n,d,r,0,l-1);var p,w=[];for(p=0;p<l;p++)d[p]&&w.push(n[p]);return w}function oa(n,r,l,h,d){var p=0,w,C,x;for(C=h+1;C<=d-1;C++)x=us(n[C],n[h],n[d],!0),x>p&&(w=C,p=x);p>l&&(r[w]=1,oa(n,r,l,h,w),oa(n,r,l,w,d))}function V_(n,r){for(var l=[n[0]],h=1,d=0,p=n.length;h<p;h++)j_(n[h],n[d])>r&&(l.push(n[h]),d=h);return d<p-1&&l.push(n[p-1]),l}var zc;function Wc(n,r,l,h,d){var p=h?zc:Wn(n,l),w=Wn(r,l),C,x,P;for(zc=w;;){if(!(p|w))return[n,r];if(p&w)return!1;C=p||w,x=ur(n,r,C,l,d),P=Wn(x,l),C===p?(n=x,p=P):(r=x,w=P)}}function ur(n,r,l,h,d){var p=r.x-n.x,w=r.y-n.y,C=h.min,x=h.max,P,W;return l&8?(P=n.x+p*(x.y-n.y)/w,W=x.y):l&4?(P=n.x+p*(C.y-n.y)/w,W=C.y):l&2?(P=x.x,W=n.y+w*(x.x-n.x)/p):l&1&&(P=C.x,W=n.y+w*(C.x-n.x)/p),new H(P,W,d)}function Wn(n,r){var l=0;return n.x<r.min.x?l|=1:n.x>r.max.x&&(l|=2),n.y<r.min.y?l|=4:n.y>r.max.y&&(l|=8),l}function j_(n,r){var l=r.x-n.x,h=r.y-n.y;return l*l+h*h}function us(n,r,l,h){var d=r.x,p=r.y,w=l.x-d,C=l.y-p,x=w*w+C*C,P;return x>0&&(P=((n.x-d)*w+(n.y-p)*C)/x,P>1?(d=l.x,p=l.y):P>0&&(d+=w*P,p+=C*P)),w=n.x-d,C=n.y-p,h?w*w+C*C:new H(d,p)}function sn(n){return!V(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]!="undefined"}function Hc(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),sn(n)}var q_={simplify:Bc,pointToSegmentDistance:Fc,closestPointOnSegment:Z_,clipSegment:Wc,_getEdgeIntersection:ur,_getBitCode:Wn,_sqClosestPointOnSegment:us,isFlat:sn,_flat:Hc};function Uc(n,r,l){var h,d=[1,4,2,8],p,w,C,x,P,W,G,mt;for(p=0,W=n.length;p<W;p++)n[p]._code=Wn(n[p],r);for(C=0;C<4;C++){for(G=d[C],h=[],p=0,W=n.length,w=W-1;p<W;w=p++)x=n[p],P=n[w],x._code&G?P._code&G||(mt=ur(P,x,G,r,l),mt._code=Wn(mt,r),h.push(mt)):(P._code&G&&(mt=ur(P,x,G,r,l),mt._code=Wn(mt,r),h.push(mt)),h.push(x));n=h}return n}var G_={clipPolygon:Uc},aa={project:function(n){return new H(n.lng,n.lat)},unproject:function(n){return new bt(n.y,n.x)},bounds:new wt([-180,-90],[180,90])},la={R:6378137,R_MINOR:6356752314245179e-9,bounds:new wt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var r=Math.PI/180,l=this.R,h=n.lat*r,d=this.R_MINOR/l,p=Math.sqrt(1-d*d),w=p*Math.sin(h),C=Math.tan(Math.PI/4-h/2)/Math.pow((1-w)/(1+w),p/2);return h=-l*Math.log(Math.max(C,1e-10)),new H(n.lng*r*l,h)},unproject:function(n){for(var r=180/Math.PI,l=this.R,h=this.R_MINOR/l,d=Math.sqrt(1-h*h),p=Math.exp(-n.y/l),w=Math.PI/2-2*Math.atan(p),C=0,x=.1,P;C<15&&Math.abs(x)>1e-7;C++)P=d*Math.sin(w),P=Math.pow((1-P)/(1+P),d/2),x=Math.PI/2-2*Math.atan(p*P)-w,w+=x;return new bt(w*r,n.x*r/l)}},K_={LonLat:aa,Mercator:la,SphericalMercator:Fe},Y_=o({},fe,{code:"EPSG:3395",projection:la,transformation:function(){var n=.5/(Math.PI*la.R);return Je(n,.5,-n,.5)}()}),Zc=o({},fe,{code:"EPSG:4326",projection:aa,transformation:Je(1/180,1,-1/180,.5)}),Q_=o({},jt,{projection:aa,transformation:Je(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,r){var l=r.lng-n.lng,h=r.lat-n.lat;return Math.sqrt(l*l+h*h)},infinite:!0});jt.Earth=fe,jt.EPSG3395=Y_,jt.EPSG3857=y,jt.EPSG900913=b,jt.EPSG4326=Zc,jt.Simple=Q_;var ke=xt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[f(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[f(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var r=n.target;if(!!r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var l=this.getEvents();r.on(l,this),this.once("remove",function(){r.off(l,this)},this)}this.onAdd(r),this.getAttribution&&r.attributionControl&&r.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),r.fire("layeradd",{layer:this})}}});ft.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var r=f(n);return this._layers[r]?this:(this._layers[r]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var r=f(n);return this._layers[r]?(this._loaded&&n.onRemove(this),n.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(n.getAttribution()),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return!!n&&f(n)in this._layers},eachLayer:function(n,r){for(var l in this._layers)n.call(r,this._layers[l]);return this},_addLayers:function(n){n=n?V(n)?n:[n]:[];for(var r=0,l=n.length;r<l;r++)this.addLayer(n[r])},_addZoomLimit:function(n){(isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[f(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var r=f(n);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,r=-1/0,l=this._getZoomSpan();for(var h in this._zoomBoundLayers){var d=this._zoomBoundLayers[h].options;n=d.minZoom===void 0?n:Math.min(n,d.minZoom),r=d.maxZoom===void 0?r:Math.max(r,d.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=n===1/0?void 0:n,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vi=ke.extend({initialize:function(n,r){D(this,r),this._layers={};var l,h;if(n)for(l=0,h=n.length;l<h;l++)this.addLayer(n[l])},addLayer:function(n){var r=this.getLayerId(n);return this._layers[r]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var r=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(n){if(!n)return!1;var r=typeof n=="number"?n:this.getLayerId(n);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),l,h;for(l in this._layers)h=this._layers[l],h[n]&&h[n].apply(h,r);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,r){for(var l in this._layers)n.call(r,this._layers[l]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return f(n)}}),X_=function(n,r){return new vi(n,r)},yi=vi.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),vi.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),vi.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Ot;for(var r in this._layers){var l=this._layers[r];n.extend(l.getBounds?l.getBounds():l.getLatLng())}return n}}),J_=function(n,r){return new yi(n,r)},wi=ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(n){D(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,r){var l=this._getIconUrl(n);if(!l){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(l,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(h,n),h},_setIconStyles:function(n,r){var l=this.options,h=l[r+"Size"];typeof h=="number"&&(h=[h,h]);var d=ot(h),p=ot(r==="shadow"&&l.shadowAnchor||l.iconAnchor||d&&d.divideBy(2,!0));n.className="leaflet-marker-"+r+" "+(l.className||""),p&&(n.style.marginLeft=-p.x+"px",n.style.marginTop=-p.y+"px"),d&&(n.style.width=d.x+"px",n.style.height=d.y+"px")},_createImg:function(n,r){return r=r||document.createElement("img"),r.src=n,r},_getIconUrl:function(n){return wn&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function tp(n){return new wi(n)}var ds=wi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return ds.imagePath||(ds.imagePath=this._detectIconPath()),(this.options.imagePath||ds.imagePath)+wi.prototype._getIconUrl.call(this,n)},_detectIconPath:function(){var n=pt("div","leaflet-default-icon-path",document.body),r=rs(n,"background-image")||rs(n,"backgroundImage");return document.body.removeChild(n),r===null||r.indexOf("url")!==0?r="":r=r.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),r}}),$c=Ue.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new zn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),nt(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var r=this._marker,l=r._map,h=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,p=bn(r._icon),w=l.getPixelBounds(),C=l.getPixelOrigin(),x=Qt(w.min._subtract(C).add(d),w.max._subtract(C).subtract(d));if(!x.contains(p)){var P=ot((Math.max(x.max.x,p.x)-x.max.x)/(w.max.x-x.max.x)-(Math.min(x.min.x,p.x)-x.min.x)/(w.min.x-x.min.x),(Math.max(x.max.y,p.y)-x.max.y)/(w.max.y-x.max.y)-(Math.min(x.min.y,p.y)-x.min.y)/(w.min.y-x.min.y)).multiplyBy(h);l.panBy(P,{animate:!1}),this._draggable._newPos._add(P),this._draggable._startPos._add(P),Ut(r._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=A(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(dt(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,n)))},_onDrag:function(n){var r=this._marker,l=r._shadow,h=bn(r._icon),d=r._map.layerPointToLatLng(h);l&&Ut(l,h),r._latlng=d,n.latlng=d,n.oldLatLng=this._oldLatLng,r.fire("move",n).fire("drag",n)},_onDragEnd:function(n){dt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),dr=ke.extend({options:{icon:new ds,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,r){D(this,r),this._latlng=Rt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var r=this._latlng;return this._latlng=Rt(n),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=n.icon.createIcon(this._icon),h=!1;l!==this._icon&&(this._icon&&this._removeIcon(),h=!0,n.title&&(l.title=n.title),l.tagName==="IMG"&&(l.alt=n.alt||"")),nt(l,r),n.keyboard&&(l.tabIndex="0"),this._icon=l,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=n.icon.createShadow(this._shadow),p=!1;d!==this._shadow&&(this._removeShadow(),p=!0),d&&(nt(d,r),d.alt=""),this._shadow=d,n.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&p&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Dt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Ut(this._icon,n),this._shadow&&Ut(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(r)},_initInteraction:function(){if(!!this.options.interactive&&(nt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$c)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $c(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&be(this._icon,n),this._shadow&&be(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ep(n,r){return new dr(n,r)}var Cn=ke.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return D(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),fr=Cn.extend({options:{fill:!0,radius:10},initialize:function(n,r){D(this,r),this._latlng=Rt(n),this._radius=this.options.radius},setLatLng:function(n){var r=this._latlng;return this._latlng=Rt(n),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var r=n&&n.radius||this._radius;return Cn.prototype.setStyle.call(this,n),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,r=this._radiusY||n,l=this._clickTolerance(),h=[n+l,r+l];this._pxBounds=new wt(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function np(n,r){return new fr(n,r)}var ca=fr.extend({initialize:function(n,r,l){if(typeof r=="number"&&(r=o({},l,{radius:r})),D(this,r),this._latlng=Rt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Ot(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:Cn.prototype.setStyle,_project:function(){var n=this._latlng.lng,r=this._latlng.lat,l=this._map,h=l.options.crs;if(h.distance===fe.distance){var d=Math.PI/180,p=this._mRadius/fe.R/d,w=l.project([r+p,n]),C=l.project([r-p,n]),x=w.add(C).divideBy(2),P=l.unproject(x).lat,W=Math.acos((Math.cos(p*d)-Math.sin(r*d)*Math.sin(P*d))/(Math.cos(r*d)*Math.cos(P*d)))/d;(isNaN(W)||W===0)&&(W=p/Math.cos(Math.PI/180*r)),this._point=x.subtract(l.getPixelOrigin()),this._radius=isNaN(W)?0:x.x-l.project([P,n-W]).x,this._radiusY=x.y-w.y}else{var G=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(G).x}this._updateBounds()}});function ip(n,r,l){return new ca(n,r,l)}var rn=Cn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,r){D(this,r),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var r=1/0,l=null,h=us,d,p,w=0,C=this._parts.length;w<C;w++)for(var x=this._parts[w],P=1,W=x.length;P<W;P++){d=x[P-1],p=x[P];var G=h(n,d,p,!0);G<r&&(r=G,l=h(n,d,p))}return l&&(l.distance=Math.sqrt(r)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,r,l,h,d,p,w,C=this._rings[0],x=C.length;if(!x)return null;for(n=0,r=0;n<x-1;n++)r+=C[n].distanceTo(C[n+1])/2;if(r===0)return this._map.layerPointToLatLng(C[0]);for(n=0,h=0;n<x-1;n++)if(d=C[n],p=C[n+1],l=d.distanceTo(p),h+=l,h>r)return w=(h-r)/l,this._map.layerPointToLatLng([p.x-w*(p.x-d.x),p.y-w*(p.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(n,r){return r=r||this._defaultShape(),n=Rt(n),r.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Ot,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return sn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var r=[],l=sn(n),h=0,d=n.length;h<d;h++)l?(r[h]=Rt(n[h]),this._bounds.extend(r[h])):r[h]=this._convertLatLngs(n[h]);return r},_project:function(){var n=new wt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),r=new H(n,n);this._pxBounds=new wt([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)])},_projectLatlngs:function(n,r,l){var h=n[0]instanceof bt,d=n.length,p,w;if(h){for(w=[],p=0;p<d;p++)w[p]=this._map.latLngToLayerPoint(n[p]),l.extend(w[p]);r.push(w)}else for(p=0;p<d;p++)this._projectLatlngs(n[p],r,l)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,l,h,d,p,w,C,x;for(l=0,d=0,p=this._rings.length;l<p;l++)for(x=this._rings[l],h=0,w=x.length;h<w-1;h++)C=Wc(x[h],x[h+1],n,h,!0),C&&(r[d]=r[d]||[],r[d].push(C[0]),(C[1]!==x[h+1]||h===w-2)&&(r[d].push(C[1]),d++))}},_simplifyPoints:function(){for(var n=this._parts,r=this.options.smoothFactor,l=0,h=n.length;l<h;l++)n[l]=Bc(n[l],r)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,r){var l,h,d,p,w,C,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(l=0,p=this._parts.length;l<p;l++)for(C=this._parts[l],h=0,w=C.length,d=w-1;h<w;d=h++)if(!(!r&&h===0)&&Fc(n,C[d],C[h])<=x)return!0;return!1}});function sp(n,r){return new rn(n,r)}rn._flat=Hc;var bi=rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,r,l,h,d,p,w,C,x,P=this._rings[0],W=P.length;if(!W)return null;for(p=w=C=0,n=0,r=W-1;n<W;r=n++)l=P[n],h=P[r],d=l.y*h.x-h.y*l.x,w+=(l.x+h.x)*d,C+=(l.y+h.y)*d,p+=d*3;return p===0?x=P[0]:x=[w/p,C/p],this._map.layerPointToLatLng(x)},_convertLatLngs:function(n){var r=rn.prototype._convertLatLngs.call(this,n),l=r.length;return l>=2&&r[0]instanceof bt&&r[0].equals(r[l-1])&&r.pop(),r},_setLatLngs:function(n){rn.prototype._setLatLngs.call(this,n),sn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return sn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,r=this.options.weight,l=new H(r,r);if(n=new wt(n.min.subtract(l),n.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,d=this._rings.length,p;h<d;h++)p=Uc(this._rings[h],n,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var r=!1,l,h,d,p,w,C,x,P;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(p=0,x=this._parts.length;p<x;p++)for(l=this._parts[p],w=0,P=l.length,C=P-1;w<P;C=w++)h=l[w],d=l[C],h.y>n.y!=d.y>n.y&&n.x<(d.x-h.x)*(n.y-h.y)/(d.y-h.y)+h.x&&(r=!r);return r||rn.prototype._containsPoint.call(this,n,!0)}});function rp(n,r){return new bi(n,r)}var on=yi.extend({initialize:function(n,r){D(this,r),this._layers={},n&&this.addData(n)},addData:function(n){var r=V(n)?n:n.features,l,h,d;if(r){for(l=0,h=r.length;l<h;l++)d=r[l],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var p=this.options;if(p.filter&&!p.filter(n))return this;var w=ha(n,p);return w?(w.feature=mr(n),w.defaultOptions=w.options,this.resetStyle(w),p.onEachFeature&&p.onEachFeature(n,w),this.addLayer(w)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=o({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(r){this._setLayerStyle(r,n)},this)},_setLayerStyle:function(n,r){n.setStyle&&(typeof r=="function"&&(r=r(n.feature)),n.setStyle(r))}});function ha(n,r){var l=n.type==="Feature"?n.geometry:n,h=l?l.coordinates:null,d=[],p=r&&r.pointToLayer,w=r&&r.coordsToLatLng||ua,C,x,P,W;if(!h&&!l)return null;switch(l.type){case"Point":return C=w(h),Vc(p,n,C,r);case"MultiPoint":for(P=0,W=h.length;P<W;P++)C=w(h[P]),d.push(Vc(p,n,C,r));return new yi(d);case"LineString":case"MultiLineString":return x=_r(h,l.type==="LineString"?0:1,w),new rn(x,r);case"Polygon":case"MultiPolygon":return x=_r(h,l.type==="Polygon"?1:2,w),new bi(x,r);case"GeometryCollection":for(P=0,W=l.geometries.length;P<W;P++){var G=ha({geometry:l.geometries[P],type:"Feature",properties:n.properties},r);G&&d.push(G)}return new yi(d);default:throw new Error("Invalid GeoJSON object.")}}function Vc(n,r,l,h){return n?n(r,l):new dr(l,h&&h.markersInheritOptions&&h)}function ua(n){return new bt(n[1],n[0],n[2])}function _r(n,r,l){for(var h=[],d=0,p=n.length,w;d<p;d++)w=r?_r(n[d],r-1,l):(l||ua)(n[d]),h.push(w);return h}function da(n,r){return r=typeof r=="number"?r:6,n.alt!==void 0?[v(n.lng,r),v(n.lat,r),v(n.alt,r)]:[v(n.lng,r),v(n.lat,r)]}function pr(n,r,l,h){for(var d=[],p=0,w=n.length;p<w;p++)d.push(r?pr(n[p],r-1,l,h):da(n[p],h));return!r&&l&&d.push(d[0]),d}function Ci(n,r){return n.feature?o({},n.feature,{geometry:r}):mr(r)}function mr(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var fa={toGeoJSON:function(n){return Ci(this,{type:"Point",coordinates:da(this.getLatLng(),n)})}};dr.include(fa),ca.include(fa),fr.include(fa),rn.include({toGeoJSON:function(n){var r=!sn(this._latlngs),l=pr(this._latlngs,r?1:0,!1,n);return Ci(this,{type:(r?"Multi":"")+"LineString",coordinates:l})}}),bi.include({toGeoJSON:function(n){var r=!sn(this._latlngs),l=r&&!sn(this._latlngs[0]),h=pr(this._latlngs,l?2:r?1:0,!0,n);return r||(h=[h]),Ci(this,{type:(l?"Multi":"")+"Polygon",coordinates:h})}}),vi.include({toMultiPoint:function(n){var r=[];return this.eachLayer(function(l){r.push(l.toGeoJSON(n).geometry.coordinates)}),Ci(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(n){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(n);var l=r==="GeometryCollection",h=[];return this.eachLayer(function(d){if(d.toGeoJSON){var p=d.toGeoJSON(n);if(l)h.push(p.geometry);else{var w=mr(p);w.type==="FeatureCollection"?h.push.apply(h,w.features):h.push(w)}}}),l?Ci(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function jc(n,r){return new on(n,r)}var op=jc,gr=ke.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,r,l){this._url=n,this._bounds=Wt(r),D(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(nt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&mi(this._image),this},bringToBack:function(){return this._map&&gi(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Wt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",r=this._image=n?this._url:pt("img");if(nt(r,"leaflet-image-layer"),this._zoomAnimated&&nt(r,"leaflet-zoom-animated"),this.options.className&&nt(r,this.options.className),r.onselectstart=m,r.onmousemove=m,r.onload=c(this.fire,this,"load"),r.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(n){var r=this._map.getZoomScale(n.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Bn(this._image,l,r)},_reset:function(){var n=this._image,r=new wt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=r.getSize();Ut(n,r.min),n.style.width=l.x+"px",n.style.height=l.y+"px"},_updateOpacity:function(){be(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)}}),ap=function(n,r,l){return new gr(n,r,l)},qc=gr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var n=this._url.tagName==="VIDEO",r=this._image=n?this._url:pt("video");if(nt(r,"leaflet-image-layer"),this._zoomAnimated&&nt(r,"leaflet-zoom-animated"),this.options.className&&nt(r,this.options.className),r.onselectstart=m,r.onmousemove=m,r.onloadeddata=c(this.fire,this,"load"),n){for(var l=r.getElementsByTagName("source"),h=[],d=0;d<l.length;d++)h.push(l[d].src);this._url=l.length>0?h:[r.src];return}V(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted;for(var p=0;p<this._url.length;p++){var w=pt("source");w.src=this._url[p],r.appendChild(w)}}});function lp(n,r,l){return new qc(n,r,l)}var Gc=gr.extend({_initImage:function(){var n=this._image=this._url;nt(n,"leaflet-image-layer"),this._zoomAnimated&&nt(n,"leaflet-zoom-animated"),this.options.className&&nt(n,this.options.className),n.onselectstart=m,n.onmousemove=m}});function cp(n,r,l){return new Gc(n,r,l)}var an=ke.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(n,r){D(this,n),this._source=r},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&be(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&be(this._container,1),this.bringToFront()},onRemove:function(n){n._fadeAnimated?(be(this._container,0),this._removeTimeout=setTimeout(c(Dt,void 0,this._container),200)):Dt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Rt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&mi(this._container),this},bringToBack:function(){return this._map&&gi(this._container),this},_prepareOpen:function(n,r,l){if(r instanceof ke||(l=r,r=n),r instanceof yi)for(var h in n._layers){r=n._layers[h];break}if(!l)if(r.getCenter)l=r.getCenter();else if(r.getLatLng)l=r.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=r,this.update(),l},_updateContent:function(){if(!!this._content){var n=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")n.innerHTML=r;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var n=this._map.latLngToLayerPoint(this._latlng),r=ot(this.options.offset),l=this._getAnchor();this._zoomAnimated?Ut(this._container,n.add(l)):r=r.add(n).add(l);var h=this._containerBottom=-r.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=h+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),xi=an.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n.openPopup(this),this},onAdd:function(n){an.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Cn||this._source.on("preclick",Fn))},onRemove:function(n){an.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Cn||this._source.off("preclick",Fn))},getEvents:function(){var n=an.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this._close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var n="leaflet-popup",r=this._container=pt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=pt("div",n+"-content-wrapper",r);if(this._contentNode=pt("div",n+"-content",l),cs(r),Jo(this._contentNode),lt(r,"contextmenu",Fn),this._tipContainer=pt("div",n+"-tip-container",r),this._tip=pt("div",n+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=pt("a",n+"-close-button",r);h.href="#close",h.innerHTML="&#215;",lt(h,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var n=this._contentNode,r=n.style;r.width="",r.whiteSpace="nowrap";var l=n.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),r.width=l+1+"px",r.whiteSpace="",r.height="";var h=n.offsetHeight,d=this.options.maxHeight,p="leaflet-popup-scrolled";d&&h>d?(r.height=d+"px",nt(n,p)):Bt(n,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),l=this._getAnchor();Ut(this._container,r.add(l))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var n=this._map,r=parseInt(rs(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+r,h=this._containerWidth,d=new H(this._containerLeft,-l-this._containerBottom);d._add(bn(this._container));var p=n.layerPointToContainerPoint(d),w=ot(this.options.autoPanPadding),C=ot(this.options.autoPanPaddingTopLeft||w),x=ot(this.options.autoPanPaddingBottomRight||w),P=n.getSize(),W=0,G=0;p.x+h+x.x>P.x&&(W=p.x+h-P.x+x.x),p.x-W-C.x<0&&(W=p.x-C.x),p.y+l+x.y>P.y&&(G=p.y+l-P.y+x.y),p.y-G-C.y<0&&(G=p.y-C.y),(W||G)&&n.fire("autopanstart").panBy([W,G])}},_onCloseButtonClick:function(n){this._close(),nn(n)},_getAnchor:function(){return ot(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),hp=function(n,r){return new xi(n,r)};ft.mergeOptions({closePopupOnClick:!0}),ft.include({openPopup:function(n,r,l){return n instanceof xi||(n=new xi(l).setContent(n)),r&&n.setLatLng(r),this.hasLayer(n)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=n,this.addLayer(n))},closePopup:function(n){return(!n||n===this._popup)&&(n=this._popup,this._popup=null),n&&this.removeLayer(n),this}}),ke.include({bindPopup:function(n,r){return n instanceof xi?(D(n,r),this._popup=n,n._source=this):((!this._popup||r)&&(this._popup=new xi(r,this)),this._popup.setContent(n)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n,r){return this._popup&&this._map&&(r=this._popup._prepareOpen(this,n,r),this._map.openPopup(this._popup,r)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(n){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(n)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){var r=n.layer||n.target;if(!!this._popup&&!!this._map){if(nn(n),r instanceof Cn){this.openPopup(n.layer||n.target,n.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===r?this.closePopup():this.openPopup(r,n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ti=an.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(n){an.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(n){an.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var n=an.prototype.getEvents.call(this);return We&&!this.options.permanent&&(n.preclick=this._close),n},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var n="leaflet-tooltip",r=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",r)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var r,l,h=this._map,d=this._container,p=h.latLngToContainerPoint(h.getCenter()),w=h.layerPointToContainerPoint(n),C=this.options.direction,x=d.offsetWidth,P=d.offsetHeight,W=ot(this.options.offset),G=this._getAnchor();C==="top"?(r=x/2,l=P):C==="bottom"?(r=x/2,l=0):C==="center"?(r=x/2,l=P/2):C==="right"?(r=0,l=P/2):C==="left"?(r=x,l=P/2):w.x<p.x?(C="right",r=0,l=P/2):(C="left",r=x+(W.x+G.x)*2,l=P/2),n=n.subtract(ot(r,l,!0)).add(W).add(G),Bt(d,"leaflet-tooltip-right"),Bt(d,"leaflet-tooltip-left"),Bt(d,"leaflet-tooltip-top"),Bt(d,"leaflet-tooltip-bottom"),nt(d,"leaflet-tooltip-"+C),Ut(d,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&be(this._container,n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(r)},_getAnchor:function(){return ot(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),up=function(n,r){return new Ti(n,r)};ft.include({openTooltip:function(n,r,l){return n instanceof Ti||(n=new Ti(l).setContent(n)),r&&n.setLatLng(r),this.hasLayer(n)?this:this.addLayer(n)},closeTooltip:function(n){return n&&this.removeLayer(n),this}}),ke.include({bindTooltip:function(n,r){return n instanceof Ti?(D(n,r),this._tooltip=n,n._source=this):((!this._tooltip||r)&&(this._tooltip=new Ti(r,this)),this._tooltip.setContent(n)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var r=n?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),We&&(l.click=this._openTooltip)),this[r](l),this._tooltipHandlersAdded=!n}},openTooltip:function(n,r){return this._tooltip&&this._map&&(r=this._tooltip._prepareOpen(this,n,r),this._map.openTooltip(this._tooltip,r),this._tooltip.options.interactive&&this._tooltip._container&&(nt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Bt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(n){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(n)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_openTooltip:function(n){var r=n.layer||n.target;!this._tooltip||!this._map||this.openTooltip(r,this._tooltip.options.sticky?n.latlng:void 0)},_moveTooltip:function(n){var r=n.latlng,l,h;this._tooltip.options.sticky&&n.originalEvent&&(l=this._map.mouseEventToContainerPoint(n.originalEvent),h=this._map.containerPointToLayerPoint(l),r=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(r)}});var Kc=wi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var r=n&&n.tagName==="DIV"?n:document.createElement("div"),l=this.options;if(l.html instanceof Element?(sr(r),r.appendChild(l.html)):r.innerHTML=l.html!==!1?l.html:"",l.bgPos){var h=ot(l.bgPos);r.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function dp(n){return new Kc(n)}wi.Default=ds;var fs=ke.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ee,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){D(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Dt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof H?n:new H(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r=this.getPane().children,l=-n(-1/0,1/0),h=0,d=r.length,p;h<d;h++)p=r[h].style.zIndex,r[h]!==this._container&&p&&(l=n(l,+p));isFinite(l)&&(this.options.zIndex=l+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!F){be(this._container,this.options.opacity);var n=+new Date,r=!1,l=!1;for(var h in this._tiles){var d=this._tiles[h];if(!(!d.current||!d.loaded)){var p=Math.min(1,(n-d.loaded)/200);be(d.el,p),p<1?r=!0:(d.active?l=!0:this._onOpaqueTile(d),d.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),r&&(dt(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,r=this.options.maxZoom;if(n!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===n?(this._levels[l].el.style.zIndex=r-Math.abs(n-l),this._onUpdateLevel(l)):(Dt(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var h=this._levels[n],d=this._map;return h||(h=this._levels[n]={},h.el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=r,h.origin=d.project(d.unproject(d.getPixelOrigin()),n).round(),h.zoom=n,this._setZoomTransform(h,d.getCenter(),d.getZoom()),m(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(!!this._map){var n,r,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)r=this._tiles[n],r.retain=r.current;for(n in this._tiles)if(r=this._tiles[n],r.current&&!r.active){var h=r.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var r in this._tiles)this._tiles[r].coords.z===n&&this._removeTile(r)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Dt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,r,l,h){var d=Math.floor(n/2),p=Math.floor(r/2),w=l-1,C=new H(+d,+p);C.z=+w;var x=this._tileCoordsToKey(C),P=this._tiles[x];return P&&P.active?(P.retain=!0,!0):(P&&P.loaded&&(P.retain=!0),w>h?this._retainParent(d,p,w,h):!1)},_retainChildren:function(n,r,l,h){for(var d=2*n;d<2*n+2;d++)for(var p=2*r;p<2*r+2;p++){var w=new H(d,p);w.z=l+1;var C=this._tileCoordsToKey(w),x=this._tiles[C];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);l+1<h&&this._retainChildren(d,p,l+1,h)}},_resetView:function(n){var r=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var r=this.options;return r.minNativeZoom!==void 0&&n<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<n?r.maxNativeZoom:n},_setView:function(n,r,l,h){var d=Math.round(r);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var p=this.options.updateWhenZooming&&d!==this._tileZoom;(!h||p)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(n),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(n,r)},_setZoomTransforms:function(n,r){for(var l in this._levels)this._setZoomTransform(this._levels[l],n,r)},_setZoomTransform:function(n,r,l){var h=this._map.getZoomScale(l,n.zoom),d=n.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(r,l)).round();St?Bn(n.el,d,h):Ut(n.el,d)},_resetGrid:function(){var n=this._map,r=n.options.crs,l=this._tileSize=this.getTileSize(),h=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,r.wrapLng[0]],h).x/l.x),Math.ceil(n.project([0,r.wrapLng[1]],h).x/l.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([r.wrapLat[0],0],h).y/l.x),Math.ceil(n.project([r.wrapLat[1],0],h).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var r=this._map,l=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),h=r.getZoomScale(l,this._tileZoom),d=r.project(n,this._tileZoom).floor(),p=r.getSize().divideBy(h*2);return new wt(d.subtract(p),d.add(p))},_update:function(n){var r=this._map;if(!!r){var l=this._clampZoom(r.getZoom());if(n===void 0&&(n=r.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(n),d=this._pxBoundsToTileRange(h),p=d.getCenter(),w=[],C=this.options.keepBuffer,x=new wt(d.getBottomLeft().subtract([C,-C]),d.getTopRight().add([C,-C]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var P in this._tiles){var W=this._tiles[P].coords;(W.z!==this._tileZoom||!x.contains(new H(W.x,W.y)))&&(this._tiles[P].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(n,l);return}for(var G=d.min.y;G<=d.max.y;G++)for(var mt=d.min.x;mt<=d.max.x;mt++){var ln=new H(mt,G);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var Hn=this._tiles[this._tileCoordsToKey(ln)];Hn?Hn.current=!0:w.push(ln)}}if(w.sort(function(xn,_a){return xn.distanceTo(p)-_a.distanceTo(p)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yr=document.createDocumentFragment();for(mt=0;mt<w.length;mt++)this._addTile(w[mt],yr);this._level.el.appendChild(yr)}}}},_isValidTile:function(n){var r=this._map.options.crs;if(!r.infinite){var l=this._globalTileRange;if(!r.wrapLng&&(n.x<l.min.x||n.x>l.max.x)||!r.wrapLat&&(n.y<l.min.y||n.y>l.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(n);return Wt(this.options.bounds).overlaps(h)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var r=this._map,l=this.getTileSize(),h=n.scaleBy(l),d=h.add(l),p=r.unproject(h,n.z),w=r.unproject(d,n.z);return[p,w]},_tileCoordsToBounds:function(n){var r=this._tileCoordsToNwSe(n),l=new Ot(r[0],r[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var r=n.split(":"),l=new H(+r[0],+r[1]);return l.z=+r[2],l},_removeTile:function(n){var r=this._tiles[n];!r||(Dt(r.el),delete this._tiles[n],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){nt(n,"leaflet-tile");var r=this.getTileSize();n.style.width=r.x+"px",n.style.height=r.y+"px",n.onselectstart=m,n.onmousemove=m,F&&this.options.opacity<1&&be(n,this.options.opacity),k&&!j&&(n.style.WebkitBackfaceVisibility="hidden")},_addTile:function(n,r){var l=this._getTilePos(n),h=this._tileCoordsToKey(n),d=this.createTile(this._wrapCoords(n),c(this._tileReady,this,n));this._initTile(d),this.createTile.length<2&&A(c(this._tileReady,this,n,null,d)),Ut(d,l),this._tiles[h]={el:d,coords:n,current:!0},r.appendChild(d),this.fire("tileloadstart",{tile:d,coords:n})},_tileReady:function(n,r,l){r&&this.fire("tileerror",{error:r,tile:l,coords:n});var h=this._tileCoordsToKey(n);l=this._tiles[h],l&&(l.loaded=+new Date,this._map._fadeAnimated?(be(l.el,0),dt(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),r||(nt(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),F||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var r=new H(this._wrapX?g(n.x,this._wrapX):n.x,this._wrapY?g(n.y,this._wrapY):n.y);return r.z=n.z,r},_pxBoundsToTileRange:function(n){var r=this.getTileSize();return new wt(n.min.unscaleBy(r).floor(),n.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function fp(n){return new fs(n)}var Ei=fs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(n,r){this._url=n,r=D(this,r),r.detectRetina&&wn&&r.maxZoom>0&&(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom++):(r.zoomOffset++,r.maxZoom--),r.minZoom=Math.max(0,r.minZoom)),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),k||this.on("tileunload",this._onTileRemove)},setUrl:function(n,r){return this._url===n&&r===void 0&&(r=!0),this._url=n,r||this.redraw(),this},createTile:function(n,r){var l=document.createElement("img");return lt(l,"load",c(this._tileOnLoad,this,r,l)),lt(l,"error",c(this._tileOnError,this,r,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l.alt="",l.setAttribute("role","presentation"),l.src=this.getTileUrl(n),l},getTileUrl:function(n){var r={r:wn?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-n.y;this.options.tms&&(r.y=l),r["-y"]=l}return Mt(this._url,o(r,this.options))},_tileOnLoad:function(n,r){F?setTimeout(c(n,this,null,r),0):n(null,r)},_tileOnError:function(n,r,l){var h=this.options.errorTileUrl;h&&r.getAttribute("src")!==h&&(r.src=h),n(l,r)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,r=this.options.maxZoom,l=this.options.zoomReverse,h=this.options.zoomOffset;return l&&(n=r-n),n+h},_getSubdomain:function(n){var r=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var n,r;for(n in this._tiles)this._tiles[n].coords.z!==this._tileZoom&&(r=this._tiles[n].el,r.onload=m,r.onerror=m,r.complete||(r.src=X,Dt(r),delete this._tiles[n]))},_removeTile:function(n){var r=this._tiles[n];if(!!r)return q||r.el.setAttribute("src",X),fs.prototype._removeTile.call(this,n)},_tileReady:function(n,r,l){if(!(!this._map||l&&l.getAttribute("src")===X))return fs.prototype._tileReady.call(this,n,r,l)}});function Yc(n,r){return new Ei(n,r)}var Qc=Ei.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,r){this._url=n;var l=o({},this.defaultWmsParams);for(var h in r)h in this.options||(l[h]=r[h]);r=D(this,r);var d=r.detectRetina&&wn?2:1,p=this.getTileSize();l.width=p.x*d,l.height=p.y*d,this.wmsParams=l},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,Ei.prototype.onAdd.call(this,n)},getTileUrl:function(n){var r=this._tileCoordsToNwSe(n),l=this._crs,h=Qt(l.project(r[0]),l.project(r[1])),d=h.min,p=h.max,w=(this._wmsVersion>=1.3&&this._crs===Zc?[d.y,d.x,p.y,p.x]:[d.x,d.y,p.x,p.y]).join(","),C=Ei.prototype.getTileUrl.call(this,n);return C+$(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(n,r){return o(this.wmsParams,n),r||this.redraw(),this}});function _p(n,r){return new Qc(n,r)}Ei.WMS=Qc,Yc.wms=_p;var Ze=ke.extend({options:{padding:.1,tolerance:0},initialize:function(n){D(this,n),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&nt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,r){var l=this._map.getZoomScale(r,this._zoom),h=bn(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,r),w=this._map.project(n,r),C=w.subtract(p),x=d.multiplyBy(-l).add(h).add(d).subtract(C);St?Bn(this._container,x,l):Ut(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,r=this._map.getSize(),l=this._map.containerPointToLayerPoint(r.multiplyBy(-n)).round();this._bounds=new wt(l,l.add(r.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Xc=Ze.extend({getEvents:function(){var n=Ze.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ze.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");lt(n,"mousemove",this._onMouseMove,this),lt(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),lt(n,"mouseout",this._handleMouseOut,this),this._ctx=n.getContext("2d")},_destroyContainer:function(){dt(this._redrawRequest),delete this._ctx,Dt(this._container),Ht(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var r in this._layers)n=this._layers[r],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ze.prototype._update.call(this);var n=this._bounds,r=this._container,l=n.getSize(),h=wn?2:1;Ut(r,n.min),r.width=h*l.x,r.height=h*l.y,r.style.width=l.x+"px",r.style.height=l.y+"px",wn&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){Ze.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[f(n)]=n;var r=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var r=n._order,l=r.next,h=r.prev;l?l.prev=h:this._drawLast=h,h?h.next=l:this._drawFirst=l,delete n._order,delete this._layers[f(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var r=n.options.dashArray.split(/[, ]+/),l=[],h,d;for(d=0;d<r.length;d++){if(h=Number(r[d]),isNaN(h))return;l.push(h)}n.options._dashArray=l}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){!this._map||(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var r=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new wt,this._redrawBounds.extend(n._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(n._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var r=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,r=this._redrawBounds;if(this._ctx.save(),r){var l=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)n=h.layer,(!r||n._pxBounds&&n._pxBounds.intersects(r))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,r){if(!!this._drawing){var l,h,d,p,w=n._parts,C=w.length,x=this._ctx;if(!!C){for(x.beginPath(),l=0;l<C;l++){for(h=0,d=w[l].length;h<d;h++)p=w[l][h],x[h?"lineTo":"moveTo"](p.x,p.y);r&&x.closePath()}this._fillStroke(x,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var r=n._point,l=this._ctx,h=Math.max(Math.round(n._radius),1),d=(Math.max(Math.round(n._radiusY),1)||h)/h;d!==1&&(l.save(),l.scale(1,d)),l.beginPath(),l.arc(r.x,r.y/d,h,0,Math.PI*2,!1),d!==1&&l.restore(),this._fillStroke(l,n)}},_fillStroke:function(n,r){var l=r.options;l.fill&&(n.globalAlpha=l.fillOpacity,n.fillStyle=l.fillColor||l.color,n.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(n.setLineDash&&n.setLineDash(r.options&&r.options._dashArray||[]),n.globalAlpha=l.opacity,n.lineWidth=l.weight,n.strokeStyle=l.color,n.lineCap=l.lineCap,n.lineJoin=l.lineJoin,n.stroke())},_onClick:function(n){for(var r=this._map.mouseEventToLayerPoint(n),l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(r)&&(!(n.type==="click"||n.type!=="preclick")||!this._map._draggableMoved(l))&&(h=l);h&&(ea(n),this._fireEvent([h],n))},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,r)}},_handleMouseOut:function(n){var r=this._hoveredLayer;r&&(Bt(this._container,"leaflet-interactive"),this._fireEvent([r],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,r){if(!this._mouseHoverThrottled){for(var l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(r)&&(h=l);h!==this._hoveredLayer&&(this._handleMouseOut(n),h&&(nt(this._container,"leaflet-interactive"),this._fireEvent([h],n,"mouseover"),this._hoveredLayer=h)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],n),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,r,l){this._map._fireDOMEvent(r,l||r.type,n)},_bringToFront:function(n){var r=n._order;if(!!r){var l=r.next,h=r.prev;if(l)l.prev=h;else return;h?h.next=l:l&&(this._drawFirst=l),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(n)}},_bringToBack:function(n){var r=n._order;if(!!r){var l=r.next,h=r.prev;if(h)h.next=l;else return;l?l.prev=h:h&&(this._drawLast=h),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(n)}}});function Jc(n){return xc?new Xc(n):null}var _s=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),pp={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ze.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var r=n._container=_s("shape");nt(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",n._path=_s("path"),r.appendChild(n._path),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){var r=n._container;this._container.appendChild(r),n.options.interactive&&n.addInteractiveTarget(r)},_removePath:function(n){var r=n._container;Dt(r),n.removeInteractiveTarget(r),delete this._layers[f(n)]},_updateStyle:function(n){var r=n._stroke,l=n._fill,h=n.options,d=n._container;d.stroked=!!h.stroke,d.filled=!!h.fill,h.stroke?(r||(r=n._stroke=_s("stroke")),d.appendChild(r),r.weight=h.weight+"px",r.color=h.color,r.opacity=h.opacity,h.dashArray?r.dashStyle=V(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=h.lineCap.replace("butt","flat"),r.joinstyle=h.lineJoin):r&&(d.removeChild(r),n._stroke=null),h.fill?(l||(l=n._fill=_s("fill")),d.appendChild(l),l.color=h.fillColor||h.color,l.opacity=h.fillOpacity):l&&(d.removeChild(l),n._fill=null)},_updateCircle:function(n){var r=n._point.round(),l=Math.round(n._radius),h=Math.round(n._radiusY||l);this._setPath(n,n._empty()?"M0 0":"AL "+r.x+","+r.y+" "+l+","+h+" 0,"+65535*360)},_setPath:function(n,r){n._path.v=r},_bringToFront:function(n){mi(n._container)},_bringToBack:function(n){gi(n._container)}},vr=er?_s:T,ps=Ze.extend({getEvents:function(){var n=Ze.prototype.getEvents.call(this);return n.zoomstart=this._onZoomStart,n},_initContainer:function(){this._container=vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dt(this._container),Ht(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ze.prototype._update.call(this);var n=this._bounds,r=n.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,l.setAttribute("width",r.x),l.setAttribute("height",r.y)),Ut(l,n.min),l.setAttribute("viewBox",[n.min.x,n.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(n){var r=n._path=vr("path");n.options.className&&nt(r,n.options.className),n.options.interactive&&nt(r,"leaflet-interactive"),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Dt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[f(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var r=n._path,l=n.options;!r||(l.stroke?(r.setAttribute("stroke",l.color),r.setAttribute("stroke-opacity",l.opacity),r.setAttribute("stroke-width",l.weight),r.setAttribute("stroke-linecap",l.lineCap),r.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?r.setAttribute("stroke-dasharray",l.dashArray):r.removeAttribute("stroke-dasharray"),l.dashOffset?r.setAttribute("stroke-dashoffset",l.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),l.fill?(r.setAttribute("fill",l.fillColor||l.color),r.setAttribute("fill-opacity",l.fillOpacity),r.setAttribute("fill-rule",l.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(n,r){this._setPath(n,S(n._parts,r))},_updateCircle:function(n){var r=n._point,l=Math.max(Math.round(n._radius),1),h=Math.max(Math.round(n._radiusY),1)||l,d="a"+l+","+h+" 0 1,0 ",p=n._empty()?"M0 0":"M"+(r.x-l)+","+r.y+d+l*2+",0 "+d+-l*2+",0 ";this._setPath(n,p)},_setPath:function(n,r){n._path.setAttribute("d",r)},_bringToFront:function(n){mi(n._path)},_bringToBack:function(n){gi(n._path)}});er&&ps.include(pp);function th(n){return tr||er?new ps(n):null}ft.include({getRenderer:function(n){var r=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var r=this._paneRenderers[n];return r===void 0&&(r=this._createRenderer({pane:n}),this._paneRenderers[n]=r),r},_createRenderer:function(n){return this.options.preferCanvas&&Jc(n)||th(n)}});var eh=bi.extend({initialize:function(n,r){bi.prototype.initialize.call(this,this._boundsToLatLngs(n),r)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Wt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function mp(n,r){return new eh(n,r)}ps.create=vr,ps.pointsToPath=S,on.geometryToLayer=ha,on.coordsToLatLng=ua,on.coordsToLatLngs=_r,on.latLngToCoords=da,on.latLngsToCoords=pr,on.getFeature=Ci,on.asFeature=mr,ft.mergeOptions({boxZoom:!0});var nh=Ue.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ht(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),os(),jo(),this._startPoint=this._map.mouseEventToContainerPoint(n),lt(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),nt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var r=new wt(this._point,this._startPoint),l=r.getSize();Ut(this._box,r.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Dt(this._box),Bt(this._container,"leaflet-crosshair")),as(),qo(),Ht(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var r=new Ot(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(n){n.keyCode===27&&this._finish()}});ft.addInitHook("addHandler","boxZoom",nh),ft.mergeOptions({doubleClickZoom:!0});var ih=Ue.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var r=this._map,l=r.getZoom(),h=r.options.zoomDelta,d=n.originalEvent.shiftKey?l-h:l+h;r.options.doubleClickZoom==="center"?r.setZoom(d):r.setZoomAround(n.containerPoint,d)}});ft.addInitHook("addHandler","doubleClickZoom",ih),ft.mergeOptions({dragging:!0,inertia:!j,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var sh=Ue.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new zn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}nt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Bt(this._map._container,"leaflet-grab"),Bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=Wt(this._map.options.maxBounds);this._offsetLimit=Qt(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var r=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(r),this._prunePositions(r)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,r){return n-(n-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;n.x<r.min.x&&(n.x=this._viscousLimit(n.x,r.min.x)),n.y<r.min.y&&(n.y=this._viscousLimit(n.y,r.min.y)),n.x>r.max.x&&(n.x=this._viscousLimit(n.x,r.max.x)),n.y>r.max.y&&(n.y=this._viscousLimit(n.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,r=Math.round(n/2),l=this._initialWorldOffset,h=this._draggable._newPos.x,d=(h-r+l)%n+r-l,p=(h+r+l)%n-r-l,w=Math.abs(d+l)<Math.abs(p+l)?d:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(n){var r=this._map,l=r.options,h=!l.inertia||this._times.length<2;if(r.fire("dragend",n),h)r.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,w=l.easeLinearity,C=d.multiplyBy(w/p),x=C.distanceTo([0,0]),P=Math.min(l.inertiaMaxSpeed,x),W=C.multiplyBy(P/x),G=P/(l.inertiaDeceleration*w),mt=W.multiplyBy(-G/2).round();!mt.x&&!mt.y?r.fire("moveend"):(mt=r._limitOffset(mt,r.options.maxBounds),A(function(){r.panBy(mt,{duration:G,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});ft.addInitHook("addHandler","dragging",sh),ft.mergeOptions({keyboard:!0,keyboardPanDelta:80});var rh=Ue.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),lt(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ht(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,r=document.documentElement,l=n.scrollTop||r.scrollTop,h=n.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(h,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var r=this._panKeys={},l=this.keyCodes,h,d;for(h=0,d=l.left.length;h<d;h++)r[l.left[h]]=[-1*n,0];for(h=0,d=l.right.length;h<d;h++)r[l.right[h]]=[n,0];for(h=0,d=l.down.length;h<d;h++)r[l.down[h]]=[0,n];for(h=0,d=l.up.length;h<d;h++)r[l.up[h]]=[0,-1*n]},_setZoomDelta:function(n){var r=this._zoomKeys={},l=this.keyCodes,h,d;for(h=0,d=l.zoomIn.length;h<d;h++)r[l.zoomIn[h]]=n;for(h=0,d=l.zoomOut.length;h<d;h++)r[l.zoomOut[h]]=-n},_addHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ht(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var r=n.keyCode,l=this._map,h;if(r in this._panKeys)(!l._panAnim||!l._panAnim._inProgress)&&(h=this._panKeys[r],n.shiftKey&&(h=ot(h).multiplyBy(3)),l.panBy(h),l.options.maxBounds&&l.panInsideBounds(l.options.maxBounds));else if(r in this._zoomKeys)l.setZoom(l.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;nn(n)}}});ft.addInitHook("addHandler","keyboard",rh),ft.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var oh=Ue.extend({addHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ht(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var r=Ac(n),l=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var h=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),h),nn(n)},_performZoom:function(){var n=this._map,r=n.getZoom(),l=this._map.options.zoomSnap||0;n._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,p=l?Math.ceil(d/l)*l:d,w=n._limitZoom(r+(this._delta>0?p:-p))-r;this._delta=0,this._startTime=null,w&&(n.options.scrollWheelZoom==="center"?n.setZoom(r+w):n.setZoomAround(this._lastMousePos,r+w))}});ft.addInitHook("addHandler","scrollWheelZoom",oh),ft.mergeOptions({tap:!0,tapTolerance:15});var ah=Ue.extend({addHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ht(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(!!n.touches){if(Ce(n),this._fireClick=!0,n.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var r=n.touches[0],l=r.target;this._startPos=this._newPos=new H(r.clientX,r.clientY),l.tagName&&l.tagName.toLowerCase()==="a"&&nt(l,"leaflet-active"),this._holdTimeout=setTimeout(c(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",r))},this),1e3),this._simulateEvent("mousedown",r),lt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(n){if(clearTimeout(this._holdTimeout),Ht(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&n&&n.changedTouches){var r=n.changedTouches[0],l=r.target;l&&l.tagName&&l.tagName.toLowerCase()==="a"&&Bt(l,"leaflet-active"),this._simulateEvent("mouseup",r),this._isTapValid()&&this._simulateEvent("click",r)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(n){var r=n.touches[0];this._newPos=new H(r.clientX,r.clientY),this._simulateEvent("mousemove",r)},_simulateEvent:function(n,r){var l=document.createEvent("MouseEvents");l._simulated=!0,r.target._simulatedClick=!0,l.initMouseEvent(n,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(l)}});We&&(!ze||_t)&&ft.addInitHook("addHandler","tap",ah),ft.mergeOptions({touchZoom:We&&!j,bounceAtZoomLimits:!0});var lh=Ue.extend({addHooks:function(){nt(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Bt(this._map._container,"leaflet-touch-zoom"),Ht(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var r=this._map;if(!(!n.touches||n.touches.length!==2||r._animatingZoom||this._zooming)){var l=r.mouseEventToContainerPoint(n.touches[0]),h=r.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(l.add(h)._divideBy(2))),this._startDist=l.distanceTo(h),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend",this._onTouchEnd,this),Ce(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var r=this._map,l=r.mouseEventToContainerPoint(n.touches[0]),h=r.mouseEventToContainerPoint(n.touches[1]),d=l.distanceTo(h)/this._startDist;if(this._zoom=r.getScaleZoom(d,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&d<1||this._zoom>r.getMaxZoom()&&d>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var p=l._add(h)._divideBy(2)._subtract(this._centerPoint);if(d===1&&p.x===0&&p.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),dt(this._animRequest);var w=c(r._move,r,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=A(w,this,!0),Ce(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,dt(this._animRequest),Ht(document,"touchmove",this._onTouchMove,this),Ht(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ft.addInitHook("addHandler","touchZoom",lh),ft.BoxZoom=nh,ft.DoubleClickZoom=ih,ft.Drag=sh,ft.Keyboard=rh,ft.ScrollWheelZoom=oh,ft.Tap=ah,ft.TouchZoom=lh,i.version=s,i.Control=Se,i.control=hs,i.Browser=x_,i.Evented=xt,i.Mixin=U_,i.Util=Vt,i.Class=ye,i.Handler=Ue,i.extend=o,i.bind=c,i.stamp=f,i.setOptions=D,i.DomEvent=D_,i.DomUtil=R_,i.PosAnimation=Mc,i.Draggable=zn,i.LineUtil=q_,i.PolyUtil=G_,i.Point=H,i.point=ot,i.Bounds=wt,i.bounds=Qt,i.Transformation=Dn,i.transformation=Je,i.Projection=K_,i.LatLng=bt,i.latLng=Rt,i.LatLngBounds=Ot,i.latLngBounds=Wt,i.CRS=jt,i.GeoJSON=on,i.geoJSON=jc,i.geoJson=op,i.Layer=ke,i.LayerGroup=vi,i.layerGroup=X_,i.FeatureGroup=yi,i.featureGroup=J_,i.ImageOverlay=gr,i.imageOverlay=ap,i.VideoOverlay=qc,i.videoOverlay=lp,i.SVGOverlay=Gc,i.svgOverlay=cp,i.DivOverlay=an,i.Popup=xi,i.popup=hp,i.Tooltip=Ti,i.tooltip=up,i.Icon=wi,i.icon=tp,i.DivIcon=Kc,i.divIcon=dp,i.Marker=dr,i.marker=ep,i.TileLayer=Ei,i.tileLayer=Yc,i.GridLayer=fs,i.gridLayer=fp,i.SVG=ps,i.svg=th,i.Renderer=Ze,i.Canvas=Xc,i.canvas=Jc,i.Path=Cn,i.CircleMarker=fr,i.circleMarker=np,i.Circle=ca,i.circle=ip,i.Polyline=rn,i.polyline=sp,i.Polygon=bi,i.polygon=rp,i.Rectangle=eh,i.rectangle=mp,i.Map=ft,i.map=B_;var gp=window.L;i.noConflict=function(){return window.L=gp,this},window.L=i})})(dl,dl.exports);var Te=dl.exports;const Px={class:"row me-auto"},Ix=z("div",{class:"col-8 mt-1 ps-1"},[z("div",{id:"map"})],-1),Sx={class:"col-4 ps-0 pe-2"},kx=z("div",{class:"row offset-3 my-1 ps-0 badge"},"Adding SanBau Data",-1),Lx={class:"row align-items-center mb-1"},Ax=z("div",{class:"col-3 ps-2"},"Nickname",-1),Mx={class:"row align-items-center mb-1"},Nx=z("div",{class:"col-3 ps-2"},"Plate",-1),Rx=z("option",{value:"human"},"Human",-1),Ox=z("option",{value:"car"},"Car",-1),Dx=z("option",{value:"motor"},"Motorcycle",-1),Bx=z("option",{value:"truck"},"Truck",-1),Fx=[Rx,Ox,Dx,Bx],zx={class:"row align-items-center mb-1"},Wx=z("div",{class:"col-3 ps-2"},"Date/Time",-1),Hx={class:"row align-items-center mb-1"},Ux=z("div",{class:"col-3 ps-2"},"Behavior",-1),Zx={class:"row align-items-center mb-1"},$x=z("div",{class:"col-3 ps-2"},"Address",-1),Vx={class:"row align-items-center mb-1"},jx=z("div",{class:"col-3 ps-2"},"Lat, Lng",-1),qx=z("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-geo-alt",viewBox:"0 0 16 16"},[z("path",{d:"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"}),z("path",{d:"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})],-1),Gx=[qx],Kx={class:"row align-items-center mb-1"},Yx=z("div",{class:"col-3 ps-2"},"appendix",-1),Qx=z("img",{class:"col mw-100",src:"https://s.imgur.com/images/favicon.png"},null,-1),Xx=[Qx],Jx={class:"row align-items-center"},tT=z("div",{class:"col-3 ps-2"},"News",-1),eT={setup(e){const i=Vd({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=s_(i);w_(i,{provider:new Do("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let o,a,c,u,f,_=Te.marker(),g=Te.marker(),m=Te.layerGroup(),v=un({type:"car"}),E=7;function M(){let Y,U={nickname:v.value.nickname,plate:v.value.plate,type:v.value.type,date:v.value.date,time:v.value.time,behavior:v.value.behavior,address:v.value.address,latlng:v.value.latlng,appendix:v.value.appendix,news:v.value.news};if(!(U.nickname==null||U.plate==null||U.date==null||U.time==null||U.behavior==null||U.latlng==null)&&!(U.plate!=null&&U.type=="human")){for(let A in U)U[A]==null&&(U[A]="");Or(pe(s,"/map/count")).then(A=>{try{Y=A.val()+1}catch{Y=1}cl(pe(s,`/map/${Y}`),{nickname:U.nickname,plate:U.plate,type:U.type,behavior:U.behavior,address:U.address,date:U.date,time:U.time,latlng:U.latlng,appendix:U.appendix,news:U.news}),Ms(pe(s,"/map/"),{count:Y})}),tt()}}function D(){navigator.geolocation.getCurrentPosition(Y=>{a=Y.coords.latitude,c=Y.coords.longitude}),o.setView([a,c]),o.removeLayer(g),v.value.latlng=`${a.toFixed(E)}, ${c.toFixed(E)}`,g=Te.marker([a,c]).addTo(o).bindPopup("you're here").openPopup(),V()}function $(){window.open("https://imgur.com/upload")}function tt(){v.value=[],v.value.type="car",o.removeLayer(_)}async function Mt(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(async Y=>{a=Y.coords.latitude,c=Y.coords.longitude,o=Te.map("map",{center:[a,c],zoom:10,attributionControl:!0,zoomControl:!0}),Te.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(o),g=Te.marker([a,c]).addTo(o).bindPopup("you're here").openPopup(),await V(),o.on("click",et),o.on("moveend",V)})}async function V(){o.removeLayer(m),f=await o.getCenter(),m=Te.layerGroup().addTo(o),await ut()}function et(Y){u=Y,X(),v.value.latlng=`${Y.latlng.lat.toFixed(E)}, ${Y.latlng.lng.toFixed(E)}`}function X(){let Y=v.value.type;o.removeLayer(_),_=Te.marker(u.latlng,{icon:Yt(Y)}).addTo(o).bindPopup("SamBao is here").openPopup()}function Yt(Y){return Te.icon({iconUrl:`./pic/${Y}.png`,iconSize:[40,40],popupAnchor:[0,-15]})}async function ut(){let Y=[],U=await Or(pe(s,"/map/count"));if(U.val()==null){U=0;return}else for(let A=1;A<=U.val();A++){let dt=await Or(pe(s,`/map/${A}`));Y.push(dt.val())}Y.forEach(A=>{if(Te.latLng(A.latlng.split(",")).distanceTo(f)/1e3<=50){let Vt='<table style="width:350px">';A.nickname!=""&&(Vt+=`<tr><td style="width:150px">Nickname</td><td style="width:200px">${A.nickname}</td></tr>`),A.plate!=""&&(Vt+=`<tr><td>Plate</td><td>${A.plate}</td></tr>`),A.date!=""&&(Vt+=`<tr><td>Date</td><td>${A.date}</td></tr>`),A.time!=""&&(Vt+=`<tr><td>Time</td><td>${A.time}</td></tr>`),A.behavior!=""&&(Vt+=`<tr><td>Behavior</td><td>${A.behavior}</td></tr>`),A.address!=""&&(Vt+=`<tr><td>Address</td><td>${A.address}</td></tr>`),A.appendix!=""&&(Vt+=`<tr><td>Image/Video</td><td><a href=${A.appendix} target="_blank">Link</a></td></tr>`),A.news!=""&&(Vt+=`<tr><td>News</td><td><a href=${A.news} target="_blank">News</a></td></tr>`),Vt+="</table>",Te.marker(A.latlng.split(","),{icon:Yt(A.type)}).addTo(m).bindPopup(Vt)}})}function Nt(){function Y(){let A=["human","car","motor","truck"],dt=Math.round(Math.random()*3);return A[dt]}function U(){let A=Math.random()*3+22,dt=Math.random()*2+120;return`${A}, ${dt}`}for(let A=1;A<100;A++)cl(pe(s,`/map/${A}`),{nickname:`name-${A}`,plate:`ABC-${A}`,type:Y(),behavior:`bbb-${A}`,address:`nnn-${A}`,date:"2022/2/2",time:"44:44:44",latlng:U(),appendix:"nnn",news:"nnn"}),A%2==0&&Ms(pe(s,`/map/${A}`),{appendix:"",news:""}),Ms(pe(s,"/map/"),{count:A})}return Ki(async()=>{Nt(),await Mt()}),(Y,U)=>_e((Ve(),hn("div",Px,[Ix,z("div",Sx,[kx,z("div",Lx,[Ax,_e(z("input",{class:"col rounded border py-2 bg-dark text-light border-secondary",type:"text",placeholder:"C300\u54E5/\u796D\u592E\u4E42/\u99AC\u7DAD\u62C9/\u97D3\u7E3D\u6A5F","onUpdate:modelValue":U[0]||(U[0]=A=>ct(v).nickname=A),maxlength:"20"},null,512),[[Le,ct(v).nickname]])]),z("div",Mx,[Nx,_e(z("input",{class:"col rounded border py-2 bg-dark border-secondary text-light me-1 text-uppercase",type:"text",placeholder:"ABC-1234","onUpdate:modelValue":U[1]||(U[1]=A=>ct(v).plate=A)},null,512),[[Le,ct(v).plate]]),_e(z("select",{class:"col-4 py-2 rounded border-secondary border bg-dark text-light","onUpdate:modelValue":U[2]||(U[2]=A=>ct(v).type=A),onChange:X},Fx,544),[[Jg,ct(v).type]])]),z("div",zx,[Wx,_e(z("input",{class:"col border rounded py-2 me-1 bg-dark text-light border-secondary","onUpdate:modelValue":U[3]||(U[3]=A=>ct(v).date=A),type:"date"},null,512),[[Le,ct(v).date]]),_e(z("input",{class:"border-secondary col-4 border rounded py-2 bg-dark text-light","onUpdate:modelValue":U[4]||(U[4]=A=>ct(v).time=A),type:"time"},null,512),[[Le,ct(v).time]])]),z("div",Hx,[Ux,_e(z("textarea",{class:"col py-2 border rounded bg-dark text-light border-secondary",type:"text",placeholder:"How SanBau?",maxlength:"100","onUpdate:modelValue":U[5]||(U[5]=A=>ct(v).behavior=A)},null,512),[[Le,ct(v).behavior]])]),z("div",Zx,[$x,_e(z("textarea",{class:"col py-2 border rounded bg-dark text-light border-secondary",type:"text",placeholder:"Where? (option)",maxlength:"100","onUpdate:modelValue":U[6]||(U[6]=A=>ct(v).address=A)},null,512),[[Le,ct(v).address]])]),z("div",Vx,[jx,_e(z("input",{class:"col border rounded bg-dark text-light py-2 border-secondary",type:"text",placeholder:"Location","onUpdate:modelValue":U[7]||(U[7]=A=>ct(v).latlng=A),maxlength:"30"},null,512),[[Le,ct(v).latlng]]),z("div",{class:"badge col-2 text-warning",title:"get currten latlng",type:"button",onClick:D},Gx)]),z("div",Kx,[Yx,_e(z("input",{class:"col border border-secondary rounded py-2 bg-dark text-secondary",type:"url",placeholder:"Imgur Image/Video (option)","onUpdate:modelValue":U[8]||(U[8]=A=>ct(v).link=A)},null,512),[[Le,ct(v).link]]),z("div",{class:"col-2 text-center",onClick:$,type:"button",title:"link to imgur"},Xx)]),z("div",Jx,[tT,_e(z("input",{class:"col border border-secondary rounded py-2 bg-dark text-secondary",type:"url",placeholder:"News Link (option)","onUpdate:modelValue":U[9]||(U[9]=A=>ct(v).news=A)},null,512),[[Le,ct(v).news]])]),z("div",{class:"row mt-1 justify-content-center"},[z("div",{class:"col-3 badge fs-6 border border-secondary text-success me-1 ms-1 py-1",type:"button",onClick:M},"Add"),z("div",{class:"col-3 badge fs-6 border border-secondary text-danger py-1",type:"button",onClick:tt}," Clear")])])],512)),[[tv,ct(ei).show_map==!0]])}};const nT={key:0,class:"container-fluid px-3 hate"},iT=vg('<div class="fs-1 my-1"> Author: <span class="text-warning">OrzOGC</span></div><div class="fs-1 my-1">\u6D3B\u7684\u7CBE\u5F69,\u4FEE\u7684\u75DB\u5FEB,Fix On RoaD</div><div class="fs-1 my-1 mx-1">\u9055\u898F\u9B54\u4EBA\u90FD\u53BB\u6B7B\u4E00\u6B7B\u5566\u5E79</div><div class="fs-1 my-1 mx-2">\u81C9\u76AE\u90FD\u6BD4\u6211\u963F\u5B24\u7684\u8173\u5E95\u76AE\u9084\u539A\u5566\u5E79</div><div class="fs-1 my-1 mx-3">\u4E09\u5BF6\u90FD\u4ED6\u5ABD\u7684\u53BB\u5403\u5C4E\u5566\u5E79</div><div class="fs-1 my-1 mx-4">\u9F9C\u4ED4\u958B\u90A3\u9EBC\u6162\u9084\u4E0D\u6EFE\u53BB\u9A0E\u52C1\u6230\u5566\u5E79</div><div class="fs-1 my-2 mx-5">\u4ED6\u5ABD\u7684\u5357\u90E8\u9109\u4E0B\u5F70\u5316\u8C93\u5974\u5C31\u662F\u64CD\u4F60\u5A18\u7684\u6C92\u6C34\u6E96\u5566\u5E79</div>',7),sT={setup(e){let t=un(["","","",""]);function i(o){t.value[o]==""?t.value[o]="fuck-top":t.value[o]=""}function s(){setTimeout(async()=>{if(ei.value.show_about==!0){let o=Math.round(Math.random()*3);i(o)}s()},Math.round(Math.random()*1e4))}return Ki(async()=>{s()}),(o,a)=>ct(ei).show_about==!0?(Ve(),hn("div",nT,[iT,z("div",{class:qe(["text-black lh-1 fuck fuck-1",ct(t)[0]])},"\u5E79",2),z("div",{class:qe(["text-black lh-1 fuck fuck-2",ct(t)[1]])},"\u6041",2),z("div",{class:qe(["text-black lh-1 fuck fuck-3",ct(t)[2]])},"\u5A18",2),z("div",{class:qe(["text-black lh-1 fuck fuck-4",ct(t)[3]])},"\u5566",2)])):xs("",!0)}};const rT={key:0,class:"txt"},oT={key:0,class:"bg-dark border border-secondary input"},aT={class:"row w-100 h-75 mx-auto mt-3"},lT={class:"col-9"},cT={class:"form-floating"},hT={for:"input",class:"text-light"},uT={class:"row my-2 mx-2 align-items-center"},dT=z("div",{class:"col-2"},"Author",-1),fT={class:"row h-100"},_T=["onClick"],pT={key:0,class:"zero text-light h-75 mt-2 overflow-auto text-break text-wrap txt lh-sm"},mT={key:1,class:"zero text-light d-flex align-self-center justify-content-end fw-light small"},gT={setup(e){const i=Vd({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=s_(i);w_(i,{provider:new Do("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let o=36,a=un(""),c=un(""),u=un(""),f=un({}),_=un(0);Ki(()=>{D()});function g(V,et){_.value=1,c.value="message",a.value=V,u.value=et}function m(){_.value==0?_.value=1:_.value=0}function v(){let V=Math.ceil(Math.random()*360),et=Math.ceil(Math.random()*75)+25,X=Math.ceil(Math.random()*25)+5;return`background-color:hsla(${V},${et}%,${X}%)`}function E(V){AC(pe(s,`/msg/${V}`),et=>{let X=et.val();try{f.value[V]={msg:X.msg,date:X.date,bg:X.bg,nic:X.nic}}catch{f.value[V]={msg:"",date:"",bg:v(),nic:""}}})}function M(){let V=`author: OrzOGC
	non-professional developer
	senior mechanical designer
	senior part-time gofer
	and road rage monster`;a.value=V,c.value="about",u.value="OrzOGC"}function D(){tt();for(let V=1;V<=o;V++)E(V)}function $(){let V=a.value,et,X=u.value;X==null&&(X=""),V==""&&(c.value="Oops!"),V!=""&&Or(pe(s,"/msg/flag")).then(Yt=>{let ut=Yt.val();ut>=o?et=1:et=ut+1;let Nt={day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};cl(pe(s,`/msg/${et}`),{msg:V,date:new Date().toLocaleString("en-US",Nt),bg:v(),nic:X}),Ms(pe(s,"/msg/"),{flag:et}),D(),_.value=0})}function tt(){a.value="",c.value="Write some messages",u.value=""}function Mt(){for(let V=1;V<=o;V++)Ms(pe(s,`/msg/${V}`),{bg:v()});tt()}return(V,et)=>ct(ei).show_msg==!0?(Ve(),hn("div",rT,[z("div",{class:"bg-dark fab text-warning fs-1 lh-1 fw-bolder text-center",type:"button",onClick:m},"+"),ct(_)==1?(Ve(),hn("div",oT,[z("div",{type:"button",class:"position-absolute top-0 end-0 btn-close btn-close-white",onClick:m}),z("div",aT,[z("div",lT,[z("div",cT,[_e(z("textarea",{id:"input",class:"zero text-light border-secondary bg-dark h-100 lh-base form-control txt","onUpdate:modelValue":et[0]||(et[0]=X=>Kt(a)?a.value=X:a=X)},br(ct(a)),513),[[Le,ct(a)]]),z("label",hT,br(ct(c)),1)])]),z("div",{class:"col ps-0 me-3 flex-column d-flex"},[z("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-center text-success",onClick:$},"Post"),z("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-danger text-center",onClick:tt},"Clear"),z("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-warning text-center",onClick:Mt},"Reset"),z("div",{type:"button",class:"border btn-block border-secondary text-center rounded my-2 text-info",onClick:M},"About")])]),z("div",uT,[dT,_e(z("input",{class:"col-5 py-2 bg-dark rounded border border-secondary text-light px-2",type:"text",placeholder:"\u516B\u5366\u5C71\u4E0B\u75E3\u4E5D",maxlength:"50","onUpdate:modelValue":et[1]||(et[1]=X=>Kt(u)?u.value=X:u=X)},null,512),[[Le,ct(u)]])])])):xs("",!0),z("div",fT,[(Ve(!0),hn(Ae,null,wg(ct(f),X=>(Ve(),hn("div",{class:"col-2 h-25",style:co(X.bg),onClick:Yt=>g(X.msg,X.nic)},[X.msg!=""?(Ve(),hn("div",pT,br(X.msg),1)):xs("",!0),X.date!=""?(Ve(),hn("div",mT,br(X.date),1)):xs("",!0)],12,_T))),256))])])):xs("",!0)}};bo(av).mount("#navbar");bo(eT).mount("#map-frame");bo(sT).mount("#about");bo(gT).mount("#msg");
