const Pp=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}};Pp();function dl(e,t){const i=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)i[s[o]]=!0;return t?o=>!!i[o.toLowerCase()]:o=>!!i[o]}const Ip="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sp=dl(Ip);function Ou(e){return!!e||e===""}function lo(e){if(J(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],o=Qt(s)?Ap(s):lo(s);if(o)for(const a in o)t[a]=o[a]}return t}else{if(Qt(e))return e;if(Zt(e))return e}}const kp=/;(?![^(]*\))/g,Lp=/:(.+)/;function Ap(e){const t={};return e.split(kp).forEach(i=>{if(i){const s=i.split(Lp);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ve(e){let t="";if(Qt(e))t=e;else if(J(e))for(let i=0;i<e.length;i++){const s=Ve(e[i]);s&&(t+=s+" ")}else if(Zt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function Mp(e,t){if(e.length!==t.length)return!1;let i=!0;for(let s=0;i&&s<e.length;s++)i=co(e[s],t[s]);return i}function co(e,t){if(e===t)return!0;let i=uh(e),s=uh(t);if(i||s)return i&&s?e.getTime()===t.getTime():!1;if(i=J(e),s=J(t),i||s)return i&&s?Mp(e,t):!1;if(i=Zt(e),s=Zt(t),i||s){if(!i||!s)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const c in e){const u=e.hasOwnProperty(c),f=t.hasOwnProperty(c);if(u&&!f||!u&&f||!co(e[c],t[c]))return!1}}return String(e)===String(t)}function Np(e,t){return e.findIndex(i=>co(i,t))}const wr=e=>Qt(e)?e:e==null?"":J(e)||Zt(e)&&(e.toString===Fu||!st(e.toString))?JSON.stringify(e,Du,2):String(e),Du=(e,t)=>t&&t.__v_isRef?Du(e,t.value):Ai(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,o])=>(i[`${s} =>`]=o,i),{})}:uo(t)?{[`Set(${t.size})`]:[...t.values()]}:Zt(t)&&!J(t)&&!zu(t)?String(t):t,Pt={},Li=[],Ae=()=>{},Rp=()=>!1,Op=/^on[^a-z]/,ho=e=>Op.test(e),fl=e=>e.startsWith("onUpdate:"),se=Object.assign,_l=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Dp=Object.prototype.hasOwnProperty,pt=(e,t)=>Dp.call(e,t),J=Array.isArray,Ai=e=>fo(e)==="[object Map]",uo=e=>fo(e)==="[object Set]",uh=e=>e instanceof Date,st=e=>typeof e=="function",Qt=e=>typeof e=="string",pl=e=>typeof e=="symbol",Zt=e=>e!==null&&typeof e=="object",Bu=e=>Zt(e)&&st(e.then)&&st(e.catch),Fu=Object.prototype.toString,fo=e=>Fu.call(e),Bp=e=>fo(e).slice(8,-1),zu=e=>fo(e)==="[object Object]",ml=e=>Qt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Lr=dl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_o=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Fp=/-(\w)/g,Oi=_o(e=>e.replace(Fp,(t,i)=>i?i.toUpperCase():"")),zp=/\B([A-Z])/g,ji=_o(e=>e.replace(zp,"-$1").toLowerCase()),Wu=_o(e=>e.charAt(0).toUpperCase()+e.slice(1)),pa=_o(e=>e?`on${Wu(e)}`:""),Ms=(e,t)=>!Object.is(e,t),Ar=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},Or=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Dr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let dh;const Wp=()=>dh||(dh=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ln;class Hp{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ln&&(this.parent=ln,this.index=(ln.scopes||(ln.scopes=[])).push(this)-1)}run(t){if(this.active)try{return ln=this,t()}finally{ln=this.parent}}on(){ln=this}off(){ln=this.parent}stop(t){if(this.active){let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.scopes)for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function Up(e,t=ln){t&&t.active&&t.effects.push(e)}const gl=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Hu=e=>(e.w&Nn)>0,Uu=e=>(e.n&Nn)>0,Zp=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Nn},$p=e=>{const{deps:t}=e;if(t.length){let i=0;for(let s=0;s<t.length;s++){const o=t[s];Hu(o)&&!Uu(o)?o.delete(e):t[i++]=o,o.w&=~Nn,o.n&=~Nn}t.length=i}},ka=new WeakMap;let bs=0,Nn=1;const La=30;let je;const Jn=Symbol(""),Aa=Symbol("");class vl{constructor(t,i=null,s){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Up(this,s)}run(){if(!this.active)return this.fn();let t=je,i=Sn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=je,je=this,Sn=!0,Nn=1<<++bs,bs<=La?Zp(this):fh(this),this.fn()}finally{bs<=La&&$p(this),Nn=1<<--bs,je=this.parent,Sn=i,this.parent=void 0}}stop(){this.active&&(fh(this),this.onStop&&this.onStop(),this.active=!1)}}function fh(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Sn=!0;const Zu=[];function qi(){Zu.push(Sn),Sn=!1}function Gi(){const e=Zu.pop();Sn=e===void 0?!0:e}function pe(e,t,i){if(Sn&&je){let s=ka.get(e);s||ka.set(e,s=new Map);let o=s.get(i);o||s.set(i,o=gl()),$u(o)}}function $u(e,t){let i=!1;bs<=La?Uu(e)||(e.n|=Nn,i=!Hu(e)):i=!e.has(je),i&&(e.add(je),je.deps.push(e))}function _n(e,t,i,s,o,a){const c=ka.get(e);if(!c)return;let u=[];if(t==="clear")u=[...c.values()];else if(i==="length"&&J(e))c.forEach((f,_)=>{(_==="length"||_>=s)&&u.push(f)});else switch(i!==void 0&&u.push(c.get(i)),t){case"add":J(e)?ml(i)&&u.push(c.get("length")):(u.push(c.get(Jn)),Ai(e)&&u.push(c.get(Aa)));break;case"delete":J(e)||(u.push(c.get(Jn)),Ai(e)&&u.push(c.get(Aa)));break;case"set":Ai(e)&&u.push(c.get(Jn));break}if(u.length===1)u[0]&&Ma(u[0]);else{const f=[];for(const _ of u)_&&f.push(..._);Ma(gl(f))}}function Ma(e,t){for(const i of J(e)?e:[...e])(i!==je||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const Vp=dl("__proto__,__v_isRef,__isVue"),Vu=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(pl)),jp=yl(),qp=yl(!1,!0),Gp=yl(!0),_h=Kp();function Kp(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const s=gt(this);for(let a=0,c=this.length;a<c;a++)pe(s,"get",a+"");const o=s[t](...i);return o===-1||o===!1?s[t](...i.map(gt)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){qi();const s=gt(this)[t].apply(this,i);return Gi(),s}}),e}function yl(e=!1,t=!1){return function(s,o,a){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&a===(e?t?um:Yu:t?Ku:Gu).get(s))return s;const c=J(s);if(!e&&c&&pt(_h,o))return Reflect.get(_h,o,a);const u=Reflect.get(s,o,a);return(pl(o)?Vu.has(o):Vp(o))||(e||pe(s,"get",o),t)?u:qt(u)?!c||!ml(o)?u.value:u:Zt(u)?e?Qu(u):Cl(u):u}}const Yp=ju(),Qp=ju(!0);function ju(e=!1){return function(i,s,o,a){let c=i[s];if(Ns(c)&&qt(c)&&!qt(o))return!1;if(!e&&!Ns(o)&&(Xu(o)||(o=gt(o),c=gt(c)),!J(i)&&qt(c)&&!qt(o)))return c.value=o,!0;const u=J(i)&&ml(s)?Number(s)<i.length:pt(i,s),f=Reflect.set(i,s,o,a);return i===gt(a)&&(u?Ms(o,c)&&_n(i,"set",s,o):_n(i,"add",s,o)),f}}function Xp(e,t){const i=pt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&_n(e,"delete",t,void 0),s}function Jp(e,t){const i=Reflect.has(e,t);return(!pl(t)||!Vu.has(t))&&pe(e,"has",t),i}function tm(e){return pe(e,"iterate",J(e)?"length":Jn),Reflect.ownKeys(e)}const qu={get:jp,set:Yp,deleteProperty:Xp,has:Jp,ownKeys:tm},em={get:Gp,set(e,t){return!0},deleteProperty(e,t){return!0}},nm=se({},qu,{get:qp,set:Qp}),wl=e=>e,po=e=>Reflect.getPrototypeOf(e);function br(e,t,i=!1,s=!1){e=e.__v_raw;const o=gt(e),a=gt(t);t!==a&&!i&&pe(o,"get",t),!i&&pe(o,"get",a);const{has:c}=po(o),u=s?wl:i?Tl:Rs;if(c.call(o,t))return u(e.get(t));if(c.call(o,a))return u(e.get(a));e!==o&&e.get(t)}function Cr(e,t=!1){const i=this.__v_raw,s=gt(i),o=gt(e);return e!==o&&!t&&pe(s,"has",e),!t&&pe(s,"has",o),e===o?i.has(e):i.has(e)||i.has(o)}function xr(e,t=!1){return e=e.__v_raw,!t&&pe(gt(e),"iterate",Jn),Reflect.get(e,"size",e)}function ph(e){e=gt(e);const t=gt(this);return po(t).has.call(t,e)||(t.add(e),_n(t,"add",e,e)),this}function mh(e,t){t=gt(t);const i=gt(this),{has:s,get:o}=po(i);let a=s.call(i,e);a||(e=gt(e),a=s.call(i,e));const c=o.call(i,e);return i.set(e,t),a?Ms(t,c)&&_n(i,"set",e,t):_n(i,"add",e,t),this}function gh(e){const t=gt(this),{has:i,get:s}=po(t);let o=i.call(t,e);o||(e=gt(e),o=i.call(t,e)),s&&s.call(t,e);const a=t.delete(e);return o&&_n(t,"delete",e,void 0),a}function vh(){const e=gt(this),t=e.size!==0,i=e.clear();return t&&_n(e,"clear",void 0,void 0),i}function Tr(e,t){return function(s,o){const a=this,c=a.__v_raw,u=gt(c),f=t?wl:e?Tl:Rs;return!e&&pe(u,"iterate",Jn),c.forEach((_,g)=>s.call(o,f(_),f(g),a))}}function Er(e,t,i){return function(...s){const o=this.__v_raw,a=gt(o),c=Ai(a),u=e==="entries"||e===Symbol.iterator&&c,f=e==="keys"&&c,_=o[e](...s),g=i?wl:t?Tl:Rs;return!t&&pe(a,"iterate",f?Aa:Jn),{next(){const{value:m,done:w}=_.next();return w?{value:m,done:w}:{value:u?[g(m[0]),g(m[1])]:g(m),done:w}},[Symbol.iterator](){return this}}}}function Tn(e){return function(...t){return e==="delete"?!1:this}}function im(){const e={get(a){return br(this,a)},get size(){return xr(this)},has:Cr,add:ph,set:mh,delete:gh,clear:vh,forEach:Tr(!1,!1)},t={get(a){return br(this,a,!1,!0)},get size(){return xr(this)},has:Cr,add:ph,set:mh,delete:gh,clear:vh,forEach:Tr(!1,!0)},i={get(a){return br(this,a,!0)},get size(){return xr(this,!0)},has(a){return Cr.call(this,a,!0)},add:Tn("add"),set:Tn("set"),delete:Tn("delete"),clear:Tn("clear"),forEach:Tr(!0,!1)},s={get(a){return br(this,a,!0,!0)},get size(){return xr(this,!0)},has(a){return Cr.call(this,a,!0)},add:Tn("add"),set:Tn("set"),delete:Tn("delete"),clear:Tn("clear"),forEach:Tr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Er(a,!1,!1),i[a]=Er(a,!0,!1),t[a]=Er(a,!1,!0),s[a]=Er(a,!0,!0)}),[e,i,t,s]}const[sm,rm,om,am]=im();function bl(e,t){const i=t?e?am:om:e?rm:sm;return(s,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(pt(i,o)&&o in s?i:s,o,a)}const lm={get:bl(!1,!1)},cm={get:bl(!1,!0)},hm={get:bl(!0,!1)},Gu=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,um=new WeakMap;function dm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fm(e){return e.__v_skip||!Object.isExtensible(e)?0:dm(Bp(e))}function Cl(e){return Ns(e)?e:xl(e,!1,qu,lm,Gu)}function _m(e){return xl(e,!1,nm,cm,Ku)}function Qu(e){return xl(e,!0,em,hm,Yu)}function xl(e,t,i,s,o){if(!Zt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const c=fm(e);if(c===0)return e;const u=new Proxy(e,c===2?s:i);return o.set(e,u),u}function Mi(e){return Ns(e)?Mi(e.__v_raw):!!(e&&e.__v_isReactive)}function Ns(e){return!!(e&&e.__v_isReadonly)}function Xu(e){return!!(e&&e.__v_isShallow)}function Ju(e){return Mi(e)||Ns(e)}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}function td(e){return Or(e,"__v_skip",!0),e}const Rs=e=>Zt(e)?Cl(e):e,Tl=e=>Zt(e)?Qu(e):e;function ed(e){Sn&&je&&(e=gt(e),$u(e.dep||(e.dep=gl())))}function nd(e,t){e=gt(e),e.dep&&Ma(e.dep)}function qt(e){return!!(e&&e.__v_isRef===!0)}function hn(e){return pm(e,!1)}function pm(e,t){return qt(e)?e:new mm(e,t)}class mm{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:gt(t),this._value=i?t:Rs(t)}get value(){return ed(this),this._value}set value(t){t=this.__v_isShallow?t:gt(t),Ms(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Rs(t),nd(this))}}function ht(e){return qt(e)?e.value:e}const gm={get:(e,t,i)=>ht(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const o=e[t];return qt(o)&&!qt(i)?(o.value=i,!0):Reflect.set(e,t,i,s)}};function id(e){return Mi(e)?e:new Proxy(e,gm)}class vm{constructor(t,i,s,o){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new vl(t,()=>{this._dirty||(this._dirty=!0,nd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=gt(this);return ed(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function ym(e,t,i=!1){let s,o;const a=st(e);return a?(s=e,o=Ae):(s=e.get,o=e.set),new vm(s,o,a||!o,i)}Promise.resolve();function kn(e,t,i,s){let o;try{o=s?e(...s):e()}catch(a){mo(a,t,i)}return o}function xe(e,t,i,s){if(st(e)){const a=kn(e,t,i,s);return a&&Bu(a)&&a.catch(c=>{mo(c,t,i)}),a}const o=[];for(let a=0;a<e.length;a++)o.push(xe(e[a],t,i,s));return o}function mo(e,t,i,s=!0){const o=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,u=i;for(;a;){const _=a.ec;if(_){for(let g=0;g<_.length;g++)if(_[g](e,c,u)===!1)return}a=a.parent}const f=t.appContext.config.errorHandler;if(f){kn(f,null,10,[e,c,u]);return}}wm(e,i,o,s)}function wm(e,t,i,s=!0){console.error(e)}let Br=!1,Na=!1;const fe=[];let un=0;const Es=[];let Cs=null,Ii=0;const Ps=[];let En=null,Si=0;const sd=Promise.resolve();let El=null,Ra=null;function bm(e){const t=El||sd;return e?t.then(this?e.bind(this):e):t}function Cm(e){let t=un+1,i=fe.length;for(;t<i;){const s=t+i>>>1;Os(fe[s])<e?t=s+1:i=s}return t}function rd(e){(!fe.length||!fe.includes(e,Br&&e.allowRecurse?un+1:un))&&e!==Ra&&(e.id==null?fe.push(e):fe.splice(Cm(e.id),0,e),od())}function od(){!Br&&!Na&&(Na=!0,El=sd.then(cd))}function xm(e){const t=fe.indexOf(e);t>un&&fe.splice(t,1)}function ad(e,t,i,s){J(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&i.push(e),od()}function Tm(e){ad(e,Cs,Es,Ii)}function Em(e){ad(e,En,Ps,Si)}function Pl(e,t=null){if(Es.length){for(Ra=t,Cs=[...new Set(Es)],Es.length=0,Ii=0;Ii<Cs.length;Ii++)Cs[Ii]();Cs=null,Ii=0,Ra=null,Pl(e,t)}}function ld(e){if(Ps.length){const t=[...new Set(Ps)];if(Ps.length=0,En){En.push(...t);return}for(En=t,En.sort((i,s)=>Os(i)-Os(s)),Si=0;Si<En.length;Si++)En[Si]();En=null,Si=0}}const Os=e=>e.id==null?1/0:e.id;function cd(e){Na=!1,Br=!0,Pl(e),fe.sort((i,s)=>Os(i)-Os(s));const t=Ae;try{for(un=0;un<fe.length;un++){const i=fe[un];i&&i.active!==!1&&kn(i,null,14)}}finally{un=0,fe.length=0,ld(),Br=!1,El=null,(fe.length||Es.length||Ps.length)&&cd(e)}}function Pm(e,t,...i){const s=e.vnode.props||Pt;let o=i;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:m,trim:w}=s[g]||Pt;w?o=i.map(E=>E.trim()):m&&(o=i.map(Dr))}let u,f=s[u=pa(t)]||s[u=pa(Oi(t))];!f&&a&&(f=s[u=pa(ji(t))]),f&&xe(f,e,6,o);const _=s[u+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,xe(_,e,6,o)}}function hd(e,t,i=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const a=e.emits;let c={},u=!1;if(!st(e)){const f=_=>{const g=hd(_,t,!0);g&&(u=!0,se(c,g))};!i&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!a&&!u?(s.set(e,null),null):(J(a)?a.forEach(f=>c[f]=null):se(c,a),s.set(e,c),c)}function Il(e,t){return!e||!ho(t)?!1:(t=t.slice(2).replace(/Once$/,""),pt(e,t[0].toLowerCase()+t.slice(1))||pt(e,ji(t))||pt(e,t))}let ke=null,ud=null;function Fr(e){const t=ke;return ke=e,ud=e&&e.type.__scopeId||null,t}function Im(e,t=ke,i){if(!t||e._n)return e;const s=(...o)=>{s._d&&Sh(-1);const a=Fr(t),c=e(...o);return Fr(a),s._d&&Sh(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function ma(e){const{type:t,vnode:i,proxy:s,withProxy:o,props:a,propsOptions:[c],slots:u,attrs:f,emit:_,render:g,renderCache:m,data:w,setupState:E,ctx:A,inheritAttrs:O}=e;let $,et;const Mt=Fr(e);try{if(i.shapeFlag&4){const tt=o||s;$=Ze(g.call(tt,tt,m,a,E,w,A)),et=f}else{const tt=t;$=Ze(tt.length>1?tt(a,{attrs:f,slots:u,emit:_}):tt(a,null)),et=t.props?f:Sm(f)}}catch(tt){Is.length=0,mo(tt,e,1),$=qe(Ge)}let q=$;if(et&&O!==!1){const tt=Object.keys(et),{shapeFlag:X}=q;tt.length&&X&7&&(c&&tt.some(fl)&&(et=km(et,c)),q=Di(q,et))}return i.dirs&&(q.dirs=q.dirs?q.dirs.concat(i.dirs):i.dirs),i.transition&&(q.transition=i.transition),$=q,Fr(Mt),$}const Sm=e=>{let t;for(const i in e)(i==="class"||i==="style"||ho(i))&&((t||(t={}))[i]=e[i]);return t},km=(e,t)=>{const i={};for(const s in e)(!fl(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function Lm(e,t,i){const{props:s,children:o,component:a}=e,{props:c,children:u,patchFlag:f}=t,_=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&f>=0){if(f&1024)return!0;if(f&16)return s?yh(s,c,_):!!c;if(f&8){const g=t.dynamicProps;for(let m=0;m<g.length;m++){const w=g[m];if(c[w]!==s[w]&&!Il(_,w))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:s===c?!1:s?c?yh(s,c,_):!0:!!c;return!1}function yh(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const a=s[o];if(t[a]!==e[a]&&!Il(i,a))return!0}return!1}function Am({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Mm=e=>e.__isSuspense;function Nm(e,t){t&&t.pendingBranch?J(e)?t.effects.push(...e):t.effects.push(e):Em(e)}function Rm(e,t){if(ne){let i=ne.provides;const s=ne.parent&&ne.parent.provides;s===i&&(i=ne.provides=Object.create(s)),i[e]=t}}function ga(e,t,i=!1){const s=ne||ke;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return i&&st(t)?t.call(s.proxy):t}}const wh={};function va(e,t,i){return dd(e,t,i)}function dd(e,t,{immediate:i,deep:s,flush:o,onTrack:a,onTrigger:c}=Pt){const u=ne;let f,_=!1,g=!1;if(qt(e)?(f=()=>e.value,_=Xu(e)):Mi(e)?(f=()=>e,s=!0):J(e)?(g=!0,_=e.some(Mi),f=()=>e.map(et=>{if(qt(et))return et.value;if(Mi(et))return Qn(et);if(st(et))return kn(et,u,2)})):st(e)?t?f=()=>kn(e,u,2):f=()=>{if(!(u&&u.isUnmounted))return m&&m(),xe(e,u,3,[w])}:f=Ae,t&&s){const et=f;f=()=>Qn(et())}let m,w=et=>{m=$.onStop=()=>{kn(et,u,4)}};if(Ds)return w=Ae,t?i&&xe(t,u,3,[f(),g?[]:void 0,w]):f(),Ae;let E=g?[]:wh;const A=()=>{if(!!$.active)if(t){const et=$.run();(s||_||(g?et.some((Mt,q)=>Ms(Mt,E[q])):Ms(et,E)))&&(m&&m(),xe(t,u,3,[et,E===wh?void 0:E,w]),E=et)}else $.run()};A.allowRecurse=!!t;let O;o==="sync"?O=A:o==="post"?O=()=>he(A,u&&u.suspense):O=()=>{!u||u.isMounted?Tm(A):A()};const $=new vl(f,O);return t?i?A():E=$.run():o==="post"?he($.run.bind($),u&&u.suspense):$.run(),()=>{$.stop(),u&&u.scope&&_l(u.scope.effects,$)}}function Om(e,t,i){const s=this.proxy,o=Qt(e)?e.includes(".")?fd(s,e):()=>s[e]:e.bind(s,s);let a;st(t)?a=t:(a=t.handler,i=t);const c=ne;Bi(this);const u=dd(o,a.bind(s),i);return c?Bi(c):ei(),u}function fd(e,t){const i=t.split(".");return()=>{let s=e;for(let o=0;o<i.length&&s;o++)s=s[i[o]];return s}}function Qn(e,t){if(!Zt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),qt(e))Qn(e.value,t);else if(J(e))for(let i=0;i<e.length;i++)Qn(e[i],t);else if(uo(e)||Ai(e))e.forEach(i=>{Qn(i,t)});else if(zu(e))for(const i in e)Qn(e[i],t);return e}function Dm(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ki(()=>{e.isMounted=!0}),gd(()=>{e.isUnmounting=!0}),e}const we=[Function,Array],Bm={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:we,onEnter:we,onAfterEnter:we,onEnterCancelled:we,onBeforeLeave:we,onLeave:we,onAfterLeave:we,onLeaveCancelled:we,onBeforeAppear:we,onAppear:we,onAfterAppear:we,onAppearCancelled:we},setup(e,{slots:t}){const i=Eg(),s=Dm();let o;return()=>{const a=t.default&&pd(t.default(),!0);if(!a||!a.length)return;const c=gt(e),{mode:u}=c,f=a[0];if(s.isLeaving)return ya(f);const _=bh(f);if(!_)return ya(f);const g=Oa(_,c,s,i);Da(_,g);const m=i.subTree,w=m&&bh(m);let E=!1;const{getTransitionKey:A}=_.type;if(A){const O=A();o===void 0?o=O:O!==o&&(o=O,E=!0)}if(w&&w.type!==Ge&&(!Gn(_,w)||E)){const O=Oa(w,c,s,i);if(Da(w,O),u==="out-in")return s.isLeaving=!0,O.afterLeave=()=>{s.isLeaving=!1,i.update()},ya(f);u==="in-out"&&_.type!==Ge&&(O.delayLeave=($,et,Mt)=>{const q=_d(s,w);q[String(w.key)]=w,$._leaveCb=()=>{et(),$._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=Mt})}return f}}},Fm=Bm;function _d(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function Oa(e,t,i,s){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:_,onEnterCancelled:g,onBeforeLeave:m,onLeave:w,onAfterLeave:E,onLeaveCancelled:A,onBeforeAppear:O,onAppear:$,onAfterAppear:et,onAppearCancelled:Mt}=t,q=String(e.key),tt=_d(i,e),X=(j,H)=>{j&&xe(j,s,9,H)},Xt={mode:a,persisted:c,beforeEnter(j){let H=u;if(!i.isMounted)if(o)H=O||u;else return;j._leaveCb&&j._leaveCb(!0);const U=tt[q];U&&Gn(e,U)&&U.el._leaveCb&&U.el._leaveCb(),X(H,[j])},enter(j){let H=f,U=_,Jt=g;if(!i.isMounted)if(o)H=$||f,U=et||_,Jt=Mt||g;else return;let vt=!1;const It=j._enterCb=vn=>{vt||(vt=!0,vn?X(Jt,[j]):X(U,[j]),Xt.delayedLeave&&Xt.delayedLeave(),j._enterCb=void 0)};H?(H(j,It),H.length<=1&&It()):It()},leave(j,H){const U=String(e.key);if(j._enterCb&&j._enterCb(!0),i.isUnmounting)return H();X(m,[j]);let Jt=!1;const vt=j._leaveCb=It=>{Jt||(Jt=!0,H(),It?X(A,[j]):X(E,[j]),j._leaveCb=void 0,tt[U]===e&&delete tt[U])};tt[U]=e,w?(w(j,vt),w.length<=1&&vt()):vt()},clone(j){return Oa(j,t,i,s)}};return Xt}function ya(e){if(go(e))return e=Di(e),e.children=null,e}function bh(e){return go(e)?e.children?e.children[0]:void 0:e}function Da(e,t){e.shapeFlag&6&&e.component?Da(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function pd(e,t=!1){let i=[],s=0;for(let o=0;o<e.length;o++){const a=e[o];a.type===Ie?(a.patchFlag&128&&s++,i=i.concat(pd(a.children,t))):(t||a.type!==Ge)&&i.push(a)}if(s>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}const Ba=e=>!!e.type.__asyncLoader,go=e=>e.type.__isKeepAlive;function zm(e,t){md(e,"a",t)}function Wm(e,t){md(e,"da",t)}function md(e,t,i=ne){const s=e.__wdc||(e.__wdc=()=>{let o=i;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(vo(t,s,i),i){let o=i.parent;for(;o&&o.parent;)go(o.parent.vnode)&&Hm(s,t,i,o),o=o.parent}}function Hm(e,t,i,s){const o=vo(t,e,s,!0);vd(()=>{_l(s[t],o)},i)}function vo(e,t,i=ne,s=!1){if(i){const o=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...c)=>{if(i.isUnmounted)return;qi(),Bi(i);const u=xe(t,i,e,c);return ei(),Gi(),u});return s?o.unshift(a):o.push(a),a}}const gn=e=>(t,i=ne)=>(!Ds||e==="sp")&&vo(e,t,i),Um=gn("bm"),Ki=gn("m"),Zm=gn("bu"),$m=gn("u"),gd=gn("bum"),vd=gn("um"),Vm=gn("sp"),jm=gn("rtg"),qm=gn("rtc");function Gm(e,t=ne){vo("ec",e,t)}let Fa=!0;function Km(e){const t=wd(e),i=e.proxy,s=e.ctx;Fa=!1,t.beforeCreate&&Ch(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:u,provide:f,inject:_,created:g,beforeMount:m,mounted:w,beforeUpdate:E,updated:A,activated:O,deactivated:$,beforeDestroy:et,beforeUnmount:Mt,destroyed:q,unmounted:tt,render:X,renderTracked:Xt,renderTriggered:j,errorCaptured:H,serverPrefetch:U,expose:Jt,inheritAttrs:vt,components:It,directives:vn,filters:me}=t;if(_&&Ym(_,s,null,e.appContext.config.unwrapInjectedRef),c)for(const Ct in c){const W=c[Ct];st(W)&&(s[Ct]=W.bind(i))}if(o){const Ct=o.call(i,i);Zt(Ct)&&(e.data=Cl(Ct))}if(Fa=!0,a)for(const Ct in a){const W=a[Ct],ge=st(W)?W.bind(i,i):st(W.get)?W.get.bind(i,i):Ae,ot=!st(W)&&st(W.set)?W.set.bind(i):Ae,yt=Ag({get:ge,set:ot});Object.defineProperty(s,Ct,{enumerable:!0,configurable:!0,get:()=>yt.value,set:Gt=>yt.value=Gt})}if(u)for(const Ct in u)yd(u[Ct],s,i,Ct);if(f){const Ct=st(f)?f.call(i):f;Reflect.ownKeys(Ct).forEach(W=>{Rm(W,Ct[W])})}g&&Ch(g,e,"c");function bt(Ct,W){J(W)?W.forEach(ge=>Ct(ge.bind(i))):W&&Ct(W.bind(i))}if(bt(Um,m),bt(Ki,w),bt(Zm,E),bt($m,A),bt(zm,O),bt(Wm,$),bt(Gm,H),bt(qm,Xt),bt(jm,j),bt(gd,Mt),bt(vd,tt),bt(Vm,U),J(Jt))if(Jt.length){const Ct=e.exposed||(e.exposed={});Jt.forEach(W=>{Object.defineProperty(Ct,W,{get:()=>i[W],set:ge=>i[W]=ge})})}else e.exposed||(e.exposed={});X&&e.render===Ae&&(e.render=X),vt!=null&&(e.inheritAttrs=vt),It&&(e.components=It),vn&&(e.directives=vn)}function Ym(e,t,i=Ae,s=!1){J(e)&&(e=za(e));for(const o in e){const a=e[o];let c;Zt(a)?"default"in a?c=ga(a.from||o,a.default,!0):c=ga(a.from||o):c=ga(a),qt(c)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>c.value,set:u=>c.value=u}):t[o]=c}}function Ch(e,t,i){xe(J(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function yd(e,t,i,s){const o=s.includes(".")?fd(i,s):()=>i[s];if(Qt(e)){const a=t[e];st(a)&&va(o,a)}else if(st(e))va(o,e.bind(i));else if(Zt(e))if(J(e))e.forEach(a=>yd(a,t,i,s));else{const a=st(e.handler)?e.handler.bind(i):t[e.handler];st(a)&&va(o,a,e)}}function wd(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,u=a.get(t);let f;return u?f=u:!o.length&&!i&&!s?f=t:(f={},o.length&&o.forEach(_=>zr(f,_,c,!0)),zr(f,t,c)),a.set(t,f),f}function zr(e,t,i,s=!1){const{mixins:o,extends:a}=t;a&&zr(e,a,i,!0),o&&o.forEach(c=>zr(e,c,i,!0));for(const c in t)if(!(s&&c==="expose")){const u=Qm[c]||i&&i[c];e[c]=u?u(e[c],t[c]):t[c]}return e}const Qm={data:xh,props:Vn,emits:Vn,methods:Vn,computed:Vn,beforeCreate:oe,created:oe,beforeMount:oe,mounted:oe,beforeUpdate:oe,updated:oe,beforeDestroy:oe,beforeUnmount:oe,destroyed:oe,unmounted:oe,activated:oe,deactivated:oe,errorCaptured:oe,serverPrefetch:oe,components:Vn,directives:Vn,watch:Jm,provide:xh,inject:Xm};function xh(e,t){return t?e?function(){return se(st(e)?e.call(this,this):e,st(t)?t.call(this,this):t)}:t:e}function Xm(e,t){return Vn(za(e),za(t))}function za(e){if(J(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function oe(e,t){return e?[...new Set([].concat(e,t))]:t}function Vn(e,t){return e?se(se(Object.create(null),e),t):t}function Jm(e,t){if(!e)return t;if(!t)return e;const i=se(Object.create(null),e);for(const s in t)i[s]=oe(e[s],t[s]);return i}function tg(e,t,i,s=!1){const o={},a={};Or(a,yo,1),e.propsDefaults=Object.create(null),bd(e,t,o,a);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);i?e.props=s?o:_m(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function eg(e,t,i,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,u=gt(o),[f]=e.propsOptions;let _=!1;if((s||c>0)&&!(c&16)){if(c&8){const g=e.vnode.dynamicProps;for(let m=0;m<g.length;m++){let w=g[m];const E=t[w];if(f)if(pt(a,w))E!==a[w]&&(a[w]=E,_=!0);else{const A=Oi(w);o[A]=Wa(f,u,A,E,e,!1)}else E!==a[w]&&(a[w]=E,_=!0)}}}else{bd(e,t,o,a)&&(_=!0);let g;for(const m in u)(!t||!pt(t,m)&&((g=ji(m))===m||!pt(t,g)))&&(f?i&&(i[m]!==void 0||i[g]!==void 0)&&(o[m]=Wa(f,u,m,void 0,e,!0)):delete o[m]);if(a!==u)for(const m in a)(!t||!pt(t,m)&&!0)&&(delete a[m],_=!0)}_&&_n(e,"set","$attrs")}function bd(e,t,i,s){const[o,a]=e.propsOptions;let c=!1,u;if(t)for(let f in t){if(Lr(f))continue;const _=t[f];let g;o&&pt(o,g=Oi(f))?!a||!a.includes(g)?i[g]=_:(u||(u={}))[g]=_:Il(e.emitsOptions,f)||(!(f in s)||_!==s[f])&&(s[f]=_,c=!0)}if(a){const f=gt(i),_=u||Pt;for(let g=0;g<a.length;g++){const m=a[g];i[m]=Wa(o,f,m,_[m],e,!pt(_,m))}}return c}function Wa(e,t,i,s,o,a){const c=e[i];if(c!=null){const u=pt(c,"default");if(u&&s===void 0){const f=c.default;if(c.type!==Function&&st(f)){const{propsDefaults:_}=o;i in _?s=_[i]:(Bi(o),s=_[i]=f.call(null,t),ei())}else s=f}c[0]&&(a&&!u?s=!1:c[1]&&(s===""||s===ji(i))&&(s=!0))}return s}function Cd(e,t,i=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const a=e.props,c={},u=[];let f=!1;if(!st(e)){const g=m=>{f=!0;const[w,E]=Cd(m,t,!0);se(c,w),E&&u.push(...E)};!i&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!f)return s.set(e,Li),Li;if(J(a))for(let g=0;g<a.length;g++){const m=Oi(a[g]);Th(m)&&(c[m]=Pt)}else if(a)for(const g in a){const m=Oi(g);if(Th(m)){const w=a[g],E=c[m]=J(w)||st(w)?{type:w}:w;if(E){const A=Ih(Boolean,E.type),O=Ih(String,E.type);E[0]=A>-1,E[1]=O<0||A<O,(A>-1||pt(E,"default"))&&u.push(m)}}}const _=[c,u];return s.set(e,_),_}function Th(e){return e[0]!=="$"}function Eh(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Ph(e,t){return Eh(e)===Eh(t)}function Ih(e,t){return J(t)?t.findIndex(i=>Ph(i,e)):st(t)&&Ph(t,e)?0:-1}const xd=e=>e[0]==="_"||e==="$stable",Sl=e=>J(e)?e.map(Ze):[Ze(e)],ng=(e,t,i)=>{const s=Im((...o)=>Sl(t(...o)),i);return s._c=!1,s},Td=(e,t,i)=>{const s=e._ctx;for(const o in e){if(xd(o))continue;const a=e[o];if(st(a))t[o]=ng(o,a,s);else if(a!=null){const c=Sl(a);t[o]=()=>c}}},Ed=(e,t)=>{const i=Sl(t);e.slots.default=()=>i},ig=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=gt(t),Or(t,"_",i)):Td(t,e.slots={})}else e.slots={},t&&Ed(e,t);Or(e.slots,yo,1)},sg=(e,t,i)=>{const{vnode:s,slots:o}=e;let a=!0,c=Pt;if(s.shapeFlag&32){const u=t._;u?i&&u===1?a=!1:(se(o,t),!i&&u===1&&delete o._):(a=!t.$stable,Td(t,o)),c=t}else t&&(Ed(e,t),c={default:1});if(a)for(const u in o)!xd(u)&&!(u in c)&&delete o[u]};function be(e,t){const i=ke;if(i===null)return e;const s=i.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[c,u,f,_=Pt]=t[a];st(c)&&(c={mounted:c,updated:c}),c.deep&&Qn(u),o.push({dir:c,instance:s,value:u,oldValue:void 0,arg:f,modifiers:_})}return e}function Zn(e,t,i,s){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const u=o[c];a&&(u.oldValue=a[c].value);let f=u.dir[s];f&&(qi(),xe(f,i,8,[e.el,u,e,t]),Gi())}}function Pd(){return{app:null,config:{isNativeTag:Rp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rg=0;function og(e,t){return function(s,o=null){o!=null&&!Zt(o)&&(o=null);const a=Pd(),c=new Set;let u=!1;const f=a.app={_uid:rg++,_component:s,_props:o,_container:null,_context:a,_instance:null,version:Mg,get config(){return a.config},set config(_){},use(_,...g){return c.has(_)||(_&&st(_.install)?(c.add(_),_.install(f,...g)):st(_)&&(c.add(_),_(f,...g))),f},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),f},component(_,g){return g?(a.components[_]=g,f):a.components[_]},directive(_,g){return g?(a.directives[_]=g,f):a.directives[_]},mount(_,g,m){if(!u){const w=qe(s,o);return w.appContext=a,g&&t?t(w,_):e(w,_,m),u=!0,f._container=_,_.__vue_app__=f,Al(w.component)||w.component.proxy}},unmount(){u&&(e(null,f._container),delete f._container.__vue_app__)},provide(_,g){return a.provides[_]=g,f}};return f}}function Ha(e,t,i,s,o=!1){if(J(e)){e.forEach((w,E)=>Ha(w,t&&(J(t)?t[E]:t),i,s,o));return}if(Ba(s)&&!o)return;const a=s.shapeFlag&4?Al(s.component)||s.component.proxy:s.el,c=o?null:a,{i:u,r:f}=e,_=t&&t.r,g=u.refs===Pt?u.refs={}:u.refs,m=u.setupState;if(_!=null&&_!==f&&(Qt(_)?(g[_]=null,pt(m,_)&&(m[_]=null)):qt(_)&&(_.value=null)),st(f))kn(f,u,12,[c,g]);else{const w=Qt(f),E=qt(f);if(w||E){const A=()=>{if(e.f){const O=w?g[f]:f.value;o?J(O)&&_l(O,a):J(O)?O.includes(a)||O.push(a):w?g[f]=[a]:(f.value=[a],e.k&&(g[e.k]=f.value))}else w?(g[f]=c,pt(m,f)&&(m[f]=c)):qt(f)&&(f.value=c,e.k&&(g[e.k]=c))};c?(A.id=-1,he(A,i)):A()}}}const he=Nm;function ag(e){return lg(e)}function lg(e,t){const i=Wp();i.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:u,createComment:f,setText:_,setElementText:g,parentNode:m,nextSibling:w,setScopeId:E=Ae,cloneNode:A,insertStaticContent:O}=e,$=(v,b,T,S=null,I=null,N=null,B=!1,M=null,D=!!b.dynamicChildren)=>{if(v===b)return;v&&!Gn(v,b)&&(S=de(v),Rt(v,I,N,!0),v=null),b.patchFlag===-2&&(D=!1,b.dynamicChildren=null);const{type:k,ref:V,shapeFlag:Z}=b;switch(k){case kl:et(v,b,T,S);break;case Ge:Mt(v,b,T,S);break;case Mr:v==null&&q(b,T,S,B);break;case Ie:vn(v,b,T,S,I,N,B,M,D);break;default:Z&1?Xt(v,b,T,S,I,N,B,M,D):Z&6?me(v,b,T,S,I,N,B,M,D):(Z&64||Z&128)&&k.process(v,b,T,S,I,N,B,M,D,Re)}V!=null&&I&&Ha(V,v&&v.ref,N,b||v,!b)},et=(v,b,T,S)=>{if(v==null)s(b.el=u(b.children),T,S);else{const I=b.el=v.el;b.children!==v.children&&_(I,b.children)}},Mt=(v,b,T,S)=>{v==null?s(b.el=f(b.children||""),T,S):b.el=v.el},q=(v,b,T,S)=>{[v.el,v.anchor]=O(v.children,b,T,S,v.el,v.anchor)},tt=({el:v,anchor:b},T,S)=>{let I;for(;v&&v!==b;)I=w(v),s(v,T,S),v=I;s(b,T,S)},X=({el:v,anchor:b})=>{let T;for(;v&&v!==b;)T=w(v),o(v),v=T;o(b)},Xt=(v,b,T,S,I,N,B,M,D)=>{B=B||b.type==="svg",v==null?j(b,T,S,I,N,B,M,D):Jt(v,b,I,N,B,M,D)},j=(v,b,T,S,I,N,B,M)=>{let D,k;const{type:V,props:Z,shapeFlag:G,transition:Q,patchFlag:at,dirs:xt}=v;if(v.el&&A!==void 0&&at===-1)D=v.el=A(v.el);else{if(D=v.el=c(v.type,N,Z&&Z.is,Z),G&8?g(D,v.children):G&16&&U(v.children,D,null,S,I,N&&V!=="foreignObject",B,M),xt&&Zn(v,null,S,"created"),Z){for(const Tt in Z)Tt!=="value"&&!Lr(Tt)&&a(D,Tt,null,Z[Tt],N,v.children,S,I,$t);"value"in Z&&a(D,"value",null,Z.value),(k=Z.onVnodeBeforeMount)&&We(k,S,v)}H(D,v,v.scopeId,B,S)}xt&&Zn(v,null,S,"beforeMount");const dt=(!I||I&&!I.pendingBranch)&&Q&&!Q.persisted;dt&&Q.beforeEnter(D),s(D,b,T),((k=Z&&Z.onVnodeMounted)||dt||xt)&&he(()=>{k&&We(k,S,v),dt&&Q.enter(D),xt&&Zn(v,null,S,"mounted")},I)},H=(v,b,T,S,I)=>{if(T&&E(v,T),S)for(let N=0;N<S.length;N++)E(v,S[N]);if(I){let N=I.subTree;if(b===N){const B=I.vnode;H(v,B,B.scopeId,B.slotScopeIds,I.parent)}}},U=(v,b,T,S,I,N,B,M,D=0)=>{for(let k=D;k<v.length;k++){const V=v[k]=M?Pn(v[k]):Ze(v[k]);$(null,V,b,T,S,I,N,B,M)}},Jt=(v,b,T,S,I,N,B)=>{const M=b.el=v.el;let{patchFlag:D,dynamicChildren:k,dirs:V}=b;D|=v.patchFlag&16;const Z=v.props||Pt,G=b.props||Pt;let Q;T&&$n(T,!1),(Q=G.onVnodeBeforeUpdate)&&We(Q,T,b,v),V&&Zn(b,v,T,"beforeUpdate"),T&&$n(T,!0);const at=I&&b.type!=="foreignObject";if(k?vt(v.dynamicChildren,k,M,T,S,at,N):B||ge(v,b,M,null,T,S,at,N,!1),D>0){if(D&16)It(M,b,Z,G,T,S,I);else if(D&2&&Z.class!==G.class&&a(M,"class",null,G.class,I),D&4&&a(M,"style",Z.style,G.style,I),D&8){const xt=b.dynamicProps;for(let dt=0;dt<xt.length;dt++){const Tt=xt[dt],ce=Z[Tt],Xe=G[Tt];(Xe!==ce||Tt==="value")&&a(M,Tt,ce,Xe,I,v.children,T,S,$t)}}D&1&&v.children!==b.children&&g(M,b.children)}else!B&&k==null&&It(M,b,Z,G,T,S,I);((Q=G.onVnodeUpdated)||V)&&he(()=>{Q&&We(Q,T,b,v),V&&Zn(b,v,T,"updated")},S)},vt=(v,b,T,S,I,N,B)=>{for(let M=0;M<b.length;M++){const D=v[M],k=b[M],V=D.el&&(D.type===Ie||!Gn(D,k)||D.shapeFlag&70)?m(D.el):T;$(D,k,V,null,S,I,N,B,!0)}},It=(v,b,T,S,I,N,B)=>{if(T!==S){for(const M in S){if(Lr(M))continue;const D=S[M],k=T[M];D!==k&&M!=="value"&&a(v,M,k,D,B,b.children,I,N,$t)}if(T!==Pt)for(const M in T)!Lr(M)&&!(M in S)&&a(v,M,T[M],null,B,b.children,I,N,$t);"value"in S&&a(v,"value",T.value,S.value)}},vn=(v,b,T,S,I,N,B,M,D)=>{const k=b.el=v?v.el:u(""),V=b.anchor=v?v.anchor:u("");let{patchFlag:Z,dynamicChildren:G,slotScopeIds:Q}=b;Q&&(M=M?M.concat(Q):Q),v==null?(s(k,T,S),s(V,T,S),U(b.children,T,V,I,N,B,M,D)):Z>0&&Z&64&&G&&v.dynamicChildren?(vt(v.dynamicChildren,G,T,I,N,B,M),(b.key!=null||I&&b===I.subTree)&&Id(v,b,!0)):ge(v,b,T,V,I,N,B,M,D)},me=(v,b,T,S,I,N,B,M,D)=>{b.slotScopeIds=M,v==null?b.shapeFlag&512?I.ctx.activate(b,T,S,B,D):es(b,T,S,I,N,B,D):bt(v,b,D)},es=(v,b,T,S,I,N,B)=>{const M=v.component=Tg(v,S,I);if(go(v)&&(M.ctx.renderer=Re),Pg(M),M.asyncDep){if(I&&I.registerDep(M,Ct),!v.el){const D=M.subTree=qe(Ge);Mt(null,D,b,T)}return}Ct(M,v,b,T,I,N,B)},bt=(v,b,T)=>{const S=b.component=v.component;if(Lm(v,b,T))if(S.asyncDep&&!S.asyncResolved){W(S,b,T);return}else S.next=b,xm(S.update),S.update();else b.component=v.component,b.el=v.el,S.vnode=b},Ct=(v,b,T,S,I,N,B)=>{const M=()=>{if(v.isMounted){let{next:V,bu:Z,u:G,parent:Q,vnode:at}=v,xt=V,dt;$n(v,!1),V?(V.el=at.el,W(v,V,B)):V=at,Z&&Ar(Z),(dt=V.props&&V.props.onVnodeBeforeUpdate)&&We(dt,Q,V,at),$n(v,!0);const Tt=ma(v),ce=v.subTree;v.subTree=Tt,$(ce,Tt,m(ce.el),de(ce),v,I,N),V.el=Tt.el,xt===null&&Am(v,Tt.el),G&&he(G,I),(dt=V.props&&V.props.onVnodeUpdated)&&he(()=>We(dt,Q,V,at),I)}else{let V;const{el:Z,props:G}=b,{bm:Q,m:at,parent:xt}=v,dt=Ba(b);if($n(v,!1),Q&&Ar(Q),!dt&&(V=G&&G.onVnodeBeforeMount)&&We(V,xt,b),$n(v,!0),Z&&Qe){const Tt=()=>{v.subTree=ma(v),Qe(Z,v.subTree,v,I,null)};dt?b.type.__asyncLoader().then(()=>!v.isUnmounted&&Tt()):Tt()}else{const Tt=v.subTree=ma(v);$(null,Tt,T,S,v,I,N),b.el=Tt.el}if(at&&he(at,I),!dt&&(V=G&&G.onVnodeMounted)){const Tt=b;he(()=>We(V,xt,Tt),I)}b.shapeFlag&256&&v.a&&he(v.a,I),v.isMounted=!0,b=T=S=null}},D=v.effect=new vl(M,()=>rd(v.update),v.scope),k=v.update=D.run.bind(D);k.id=v.uid,$n(v,!0),k()},W=(v,b,T)=>{b.component=v;const S=v.vnode.props;v.vnode=b,v.next=null,eg(v,b.props,S,T),sg(v,b.children,T),qi(),Pl(void 0,v.update),Gi()},ge=(v,b,T,S,I,N,B,M,D=!1)=>{const k=v&&v.children,V=v?v.shapeFlag:0,Z=b.children,{patchFlag:G,shapeFlag:Q}=b;if(G>0){if(G&128){yt(k,Z,T,S,I,N,B,M,D);return}else if(G&256){ot(k,Z,T,S,I,N,B,M,D);return}}Q&8?(V&16&&$t(k,I,N),Z!==k&&g(T,Z)):V&16?Q&16?yt(k,Z,T,S,I,N,B,M,D):$t(k,I,N,!0):(V&8&&g(T,""),Q&16&&U(Z,T,S,I,N,B,M,D))},ot=(v,b,T,S,I,N,B,M,D)=>{v=v||Li,b=b||Li;const k=v.length,V=b.length,Z=Math.min(k,V);let G;for(G=0;G<Z;G++){const Q=b[G]=D?Pn(b[G]):Ze(b[G]);$(v[G],Q,T,null,I,N,B,M,D)}k>V?$t(v,I,N,!0,!1,Z):U(b,T,S,I,N,B,M,D,Z)},yt=(v,b,T,S,I,N,B,M,D)=>{let k=0;const V=b.length;let Z=v.length-1,G=V-1;for(;k<=Z&&k<=G;){const Q=v[k],at=b[k]=D?Pn(b[k]):Ze(b[k]);if(Gn(Q,at))$(Q,at,T,null,I,N,B,M,D);else break;k++}for(;k<=Z&&k<=G;){const Q=v[Z],at=b[G]=D?Pn(b[G]):Ze(b[G]);if(Gn(Q,at))$(Q,at,T,null,I,N,B,M,D);else break;Z--,G--}if(k>Z){if(k<=G){const Q=G+1,at=Q<V?b[Q].el:S;for(;k<=G;)$(null,b[k]=D?Pn(b[k]):Ze(b[k]),T,at,I,N,B,M,D),k++}}else if(k>G)for(;k<=Z;)Rt(v[k],I,N,!0),k++;else{const Q=k,at=k,xt=new Map;for(k=at;k<=G;k++){const St=b[k]=D?Pn(b[k]):Ze(b[k]);St.key!=null&&xt.set(St.key,k)}let dt,Tt=0;const ce=G-at+1;let Xe=!1,di=0;const Je=new Array(ce);for(k=0;k<ce;k++)Je[k]=0;for(k=Q;k<=Z;k++){const St=v[k];if(Tt>=ce){Rt(St,I,N,!0);continue}let te;if(St.key!=null)te=xt.get(St.key);else for(dt=at;dt<=G;dt++)if(Je[dt-at]===0&&Gn(St,b[dt])){te=dt;break}te===void 0?Rt(St,I,N,!0):(Je[te-at]=k+1,te>=di?di=te:Xe=!0,$(St,b[te],T,null,I,N,B,M,D),Tt++)}const is=Xe?cg(Je):Li;for(dt=is.length-1,k=ce-1;k>=0;k--){const St=at+k,te=b[St],Xs=St+1<V?b[St+1].el:S;Je[k]===0?$(null,te,T,Xs,I,N,B,M,D):Xe&&(dt<0||k!==is[dt]?Gt(te,T,Xs,2):dt--)}}},Gt=(v,b,T,S,I=null)=>{const{el:N,type:B,transition:M,children:D,shapeFlag:k}=v;if(k&6){Gt(v.component.subTree,b,T,S);return}if(k&128){v.suspense.move(b,T,S);return}if(k&64){B.move(v,b,T,Re);return}if(B===Ie){s(N,b,T);for(let Z=0;Z<D.length;Z++)Gt(D[Z],b,T,S);s(v.anchor,b,T);return}if(B===Mr){tt(v,b,T);return}if(S!==2&&k&1&&M)if(S===0)M.beforeEnter(N),s(N,b,T),he(()=>M.enter(N),I);else{const{leave:Z,delayLeave:G,afterLeave:Q}=M,at=()=>s(N,b,T),xt=()=>{Z(N,()=>{at(),Q&&Q()})};G?G(N,at,xt):xt()}else s(N,b,T)},Rt=(v,b,T,S=!1,I=!1)=>{const{type:N,props:B,ref:M,children:D,dynamicChildren:k,shapeFlag:V,patchFlag:Z,dirs:G}=v;if(M!=null&&Ha(M,null,T,v,!0),V&256){b.ctx.deactivate(v);return}const Q=V&1&&G,at=!Ba(v);let xt;if(at&&(xt=B&&B.onVnodeBeforeUnmount)&&We(xt,b,v),V&6)Nt(v.component,T,S);else{if(V&128){v.suspense.unmount(T,S);return}Q&&Zn(v,null,b,"beforeUnmount"),V&64?v.type.remove(v,b,T,I,Re,S):k&&(N!==Ie||Z>0&&Z&64)?$t(k,b,T,!1,!0):(N===Ie&&Z&384||!I&&V&16)&&$t(D,b,T),S&&zt(v)}(at&&(xt=B&&B.onVnodeUnmounted)||Q)&&he(()=>{xt&&We(xt,b,v),Q&&Zn(v,null,b,"unmounted")},T)},zt=v=>{const{type:b,el:T,anchor:S,transition:I}=v;if(b===Ie){wt(T,S);return}if(b===Mr){X(v);return}const N=()=>{o(T),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(v.shapeFlag&1&&I&&!I.persisted){const{leave:B,delayLeave:M}=I,D=()=>B(T,N);M?M(v.el,N,D):D()}else N()},wt=(v,b)=>{let T;for(;v!==b;)T=w(v),o(v),v=T;o(b)},Nt=(v,b,T)=>{const{bum:S,scope:I,update:N,subTree:B,um:M}=v;S&&Ar(S),I.stop(),N&&(N.active=!1,Rt(B,v,b,T)),M&&he(M,b),he(()=>{v.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},$t=(v,b,T,S=!1,I=!1,N=0)=>{for(let B=N;B<v.length;B++)Rt(v[B],b,T,S,I)},de=v=>v.shapeFlag&6?de(v.component.subTree):v.shapeFlag&128?v.suspense.next():w(v.anchor||v.el),ns=(v,b,T)=>{v==null?b._vnode&&Rt(b._vnode,null,null,!0):$(b._vnode||null,v,b,null,null,null,T),ld(),b._vnode=v},Re={p:$,um:Rt,m:Gt,r:zt,mt:es,mc:U,pc:ge,pbc:vt,n:de,o:e};let Bn,Qe;return t&&([Bn,Qe]=t(Re)),{render:ns,hydrate:Bn,createApp:og(ns,Bn)}}function $n({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function Id(e,t,i=!1){const s=e.children,o=t.children;if(J(s)&&J(o))for(let a=0;a<s.length;a++){const c=s[a];let u=o[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[a]=Pn(o[a]),u.el=c.el),i||Id(c,u))}}function cg(e){const t=e.slice(),i=[0];let s,o,a,c,u;const f=e.length;for(s=0;s<f;s++){const _=e[s];if(_!==0){if(o=i[i.length-1],e[o]<_){t[s]=o,i.push(s);continue}for(a=0,c=i.length-1;a<c;)u=a+c>>1,e[i[u]]<_?a=u+1:c=u;_<e[i[a]]&&(a>0&&(t[s]=i[a-1]),i[a]=s)}}for(a=i.length,c=i[a-1];a-- >0;)i[a]=c,c=t[c];return i}const hg=e=>e.__isTeleport,ug=Symbol(),Ie=Symbol(void 0),kl=Symbol(void 0),Ge=Symbol(void 0),Mr=Symbol(void 0),Is=[];let ti=null;function Ue(e=!1){Is.push(ti=e?null:[])}function dg(){Is.pop(),ti=Is[Is.length-1]||null}let Wr=1;function Sh(e){Wr+=e}function Sd(e){return e.dynamicChildren=Wr>0?ti||Li:null,dg(),Wr>0&&ti&&ti.push(e),e}function cn(e,t,i,s,o,a){return Sd(z(e,t,i,s,o,a,!0))}function fg(e,t,i,s,o){return Sd(qe(e,t,i,s,o,!0))}function _g(e){return e?e.__v_isVNode===!0:!1}function Gn(e,t){return e.type===t.type&&e.key===t.key}const yo="__vInternal",kd=({key:e})=>e!=null?e:null,Nr=({ref:e,ref_key:t,ref_for:i})=>e!=null?Qt(e)||qt(e)||st(e)?{i:ke,r:e,k:t,f:!!i}:e:null;function z(e,t=null,i=null,s=0,o=null,a=e===Ie?0:1,c=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&kd(t),ref:t&&Nr(t),scopeId:ud,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return u?(Ll(f,i),a&128&&e.normalize(f)):i&&(f.shapeFlag|=Qt(i)?8:16),Wr>0&&!c&&ti&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&ti.push(f),f}const qe=pg;function pg(e,t=null,i=null,s=0,o=null,a=!1){if((!e||e===ug)&&(e=Ge),_g(e)){const u=Di(e,t,!0);return i&&Ll(u,i),u}if(Lg(e)&&(e=e.__vccOpts),t){t=mg(t);let{class:u,style:f}=t;u&&!Qt(u)&&(t.class=Ve(u)),Zt(f)&&(Ju(f)&&!J(f)&&(f=se({},f)),t.style=lo(f))}const c=Qt(e)?1:Mm(e)?128:hg(e)?64:Zt(e)?4:st(e)?2:0;return z(e,t,i,s,o,c,a,!0)}function mg(e){return e?Ju(e)||yo in e?se({},e):e:null}function Di(e,t,i=!1){const{props:s,ref:o,patchFlag:a,children:c}=e,u=t?yg(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&kd(u),ref:t&&t.ref?i&&o?J(o)?o.concat(Nr(t)):[o,Nr(t)]:Nr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ie?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Di(e.ssContent),ssFallback:e.ssFallback&&Di(e.ssFallback),el:e.el,anchor:e.anchor}}function gg(e=" ",t=0){return qe(kl,null,e,t)}function vg(e,t){const i=qe(Mr,null,e);return i.staticCount=t,i}function xs(e="",t=!1){return t?(Ue(),fg(Ge,null,e)):qe(Ge,null,e)}function Ze(e){return e==null||typeof e=="boolean"?qe(Ge):J(e)?qe(Ie,null,e.slice()):typeof e=="object"?Pn(e):qe(kl,null,String(e))}function Pn(e){return e.el===null||e.memo?e:Di(e)}function Ll(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(J(t))i=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Ll(e,o()),o._c&&(o._d=!0));return}else{i=32;const o=t._;!o&&!(yo in t)?t._ctx=ke:o===3&&ke&&(ke.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else st(t)?(t={default:t,_ctx:ke},i=32):(t=String(t),s&64?(i=16,t=[gg(t)]):i=8);e.children=t,e.shapeFlag|=i}function yg(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Ve([t.class,s.class]));else if(o==="style")t.style=lo([t.style,s.style]);else if(ho(o)){const a=t[o],c=s[o];c&&a!==c&&!(J(a)&&a.includes(c))&&(t[o]=a?[].concat(a,c):c)}else o!==""&&(t[o]=s[o])}return t}function We(e,t,i,s=null){xe(e,t,7,[i,s])}function wg(e,t,i,s){let o;const a=i&&i[s];if(J(e)||Qt(e)){o=new Array(e.length);for(let c=0,u=e.length;c<u;c++)o[c]=t(e[c],c,void 0,a&&a[c])}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,a&&a[c])}else if(Zt(e))if(e[Symbol.iterator])o=Array.from(e,(c,u)=>t(c,u,void 0,a&&a[u]));else{const c=Object.keys(e);o=new Array(c.length);for(let u=0,f=c.length;u<f;u++){const _=c[u];o[u]=t(e[_],_,u,a&&a[u])}}else o=[];return i&&(i[s]=o),o}const Ua=e=>e?Ld(e)?Al(e)||e.proxy:Ua(e.parent):null,Hr=se(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ua(e.parent),$root:e=>Ua(e.root),$emit:e=>e.emit,$options:e=>wd(e),$forceUpdate:e=>()=>rd(e.update),$nextTick:e=>bm.bind(e.proxy),$watch:e=>Om.bind(e)}),bg={get({_:e},t){const{ctx:i,setupState:s,data:o,props:a,accessCache:c,type:u,appContext:f}=e;let _;if(t[0]!=="$"){const E=c[t];if(E!==void 0)switch(E){case 1:return s[t];case 2:return o[t];case 4:return i[t];case 3:return a[t]}else{if(s!==Pt&&pt(s,t))return c[t]=1,s[t];if(o!==Pt&&pt(o,t))return c[t]=2,o[t];if((_=e.propsOptions[0])&&pt(_,t))return c[t]=3,a[t];if(i!==Pt&&pt(i,t))return c[t]=4,i[t];Fa&&(c[t]=0)}}const g=Hr[t];let m,w;if(g)return t==="$attrs"&&pe(e,"get",t),g(e);if((m=u.__cssModules)&&(m=m[t]))return m;if(i!==Pt&&pt(i,t))return c[t]=4,i[t];if(w=f.config.globalProperties,pt(w,t))return w[t]},set({_:e},t,i){const{data:s,setupState:o,ctx:a}=e;return o!==Pt&&pt(o,t)?(o[t]=i,!0):s!==Pt&&pt(s,t)?(s[t]=i,!0):pt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:o,propsOptions:a}},c){let u;return!!i[c]||e!==Pt&&pt(e,c)||t!==Pt&&pt(t,c)||(u=a[0])&&pt(u,c)||pt(s,c)||pt(Hr,c)||pt(o.config.globalProperties,c)},defineProperty(e,t,i){return i.get!=null?this.set(e,t,i.get(),null):i.value!=null&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},Cg=Pd();let xg=0;function Tg(e,t,i){const s=e.type,o=(t?t.appContext:e.appContext)||Cg,a={uid:xg++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cd(s,o),emitsOptions:hd(s,o),emit:null,emitted:null,propsDefaults:Pt,inheritAttrs:s.inheritAttrs,ctx:Pt,data:Pt,props:Pt,attrs:Pt,slots:Pt,refs:Pt,setupState:Pt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Pm.bind(null,a),e.ce&&e.ce(a),a}let ne=null;const Eg=()=>ne||ke,Bi=e=>{ne=e,e.scope.on()},ei=()=>{ne&&ne.scope.off(),ne=null};function Ld(e){return e.vnode.shapeFlag&4}let Ds=!1;function Pg(e,t=!1){Ds=t;const{props:i,children:s}=e.vnode,o=Ld(e);tg(e,i,o,t),ig(e,s);const a=o?Ig(e,t):void 0;return Ds=!1,a}function Ig(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=td(new Proxy(e.ctx,bg));const{setup:s}=i;if(s){const o=e.setupContext=s.length>1?kg(e):null;Bi(e),qi();const a=kn(s,e,0,[e.props,o]);if(Gi(),ei(),Bu(a)){if(a.then(ei,ei),t)return a.then(c=>{kh(e,c,t)}).catch(c=>{mo(c,e,0)});e.asyncDep=a}else kh(e,a,t)}else Ad(e,t)}function kh(e,t,i){st(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Zt(t)&&(e.setupState=id(t)),Ad(e,i)}let Lh;function Ad(e,t,i){const s=e.type;if(!e.render){if(!t&&Lh&&!s.render){const o=s.template;if(o){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:u,compilerOptions:f}=s,_=se(se({isCustomElement:a,delimiters:u},c),f);s.render=Lh(o,_)}}e.render=s.render||Ae}Bi(e),qi(),Km(e),Gi(),ei()}function Sg(e){return new Proxy(e.attrs,{get(t,i){return pe(e,"get","$attrs"),t[i]}})}function kg(e){const t=s=>{e.exposed=s||{}};let i;return{get attrs(){return i||(i=Sg(e))},slots:e.slots,emit:e.emit,expose:t}}function Al(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(id(td(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Hr)return Hr[i](e)}}))}function Lg(e){return st(e)&&"__vccOpts"in e}const Ag=(e,t)=>ym(e,t,Ds),Mg="3.2.31",Ng="http://www.w3.org/2000/svg",Kn=typeof document!="undefined"?document:null,Ah=Kn&&Kn.createElement("template"),Rg={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const o=t?Kn.createElementNS(Ng,e):Kn.createElement(e,i?{is:i}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Kn.createTextNode(e),createComment:e=>Kn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Kn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,s,o,a){const c=i?i.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),i),!(o===a||!(o=o.nextSibling)););else{Ah.innerHTML=s?`<svg>${e}</svg>`:e;const u=Ah.content;if(s){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}t.insertBefore(u,i)}return[c?c.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Og(e,t,i){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Dg(e,t,i){const s=e.style,o=Qt(i);if(i&&!o){for(const a in i)Za(s,a,i[a]);if(t&&!Qt(t))for(const a in t)i[a]==null&&Za(s,a,"")}else{const a=s.display;o?t!==i&&(s.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=a)}}const Mh=/\s*!important$/;function Za(e,t,i){if(J(i))i.forEach(s=>Za(e,t,s));else if(t.startsWith("--"))e.setProperty(t,i);else{const s=Bg(e,t);Mh.test(i)?e.setProperty(ji(s),i.replace(Mh,""),"important"):e[s]=i}}const Nh=["Webkit","Moz","ms"],wa={};function Bg(e,t){const i=wa[t];if(i)return i;let s=Oi(t);if(s!=="filter"&&s in e)return wa[t]=s;s=Wu(s);for(let o=0;o<Nh.length;o++){const a=Nh[o]+s;if(a in e)return wa[t]=a}return t}const Rh="http://www.w3.org/1999/xlink";function Fg(e,t,i,s,o){if(s&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Rh,t.slice(6,t.length)):e.setAttributeNS(Rh,t,i);else{const a=Sp(t);i==null||a&&!Ou(i)?e.removeAttribute(t):e.setAttribute(t,a?"":i)}}function zg(e,t,i,s,o,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,o,a),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const u=i==null?"":i;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const u=typeof e[t];if(u==="boolean"){e[t]=Ou(i);return}else if(i==null&&u==="string"){e[t]="",e.removeAttribute(t);return}else if(u==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let Ur=Date.now,Md=!1;if(typeof window!="undefined"){Ur()>document.createEvent("Event").timeStamp&&(Ur=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Md=!!(e&&Number(e[1])<=53)}let $a=0;const Wg=Promise.resolve(),Hg=()=>{$a=0},Ug=()=>$a||(Wg.then(Hg),$a=Ur());function Yn(e,t,i,s){e.addEventListener(t,i,s)}function Zg(e,t,i,s){e.removeEventListener(t,i,s)}function $g(e,t,i,s,o=null){const a=e._vei||(e._vei={}),c=a[t];if(s&&c)c.value=s;else{const[u,f]=Vg(t);if(s){const _=a[t]=jg(s,o);Yn(e,u,_,f)}else c&&(Zg(e,u,c,f),a[t]=void 0)}}const Oh=/(?:Once|Passive|Capture)$/;function Vg(e){let t;if(Oh.test(e)){t={};let i;for(;i=e.match(Oh);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[ji(e.slice(2)),t]}function jg(e,t){const i=s=>{const o=s.timeStamp||Ur();(Md||o>=i.attached-1)&&xe(qg(s,i.value),t,5,[s])};return i.value=e,i.attached=Ug(),i}function qg(e,t){if(J(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Dh=/^on[a-z]/,Gg=(e,t,i,s,o=!1,a,c,u,f)=>{t==="class"?Og(e,s,o):t==="style"?Dg(e,i,s):ho(t)?fl(t)||$g(e,t,i,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Kg(e,t,s,o))?zg(e,t,s,a,c,u,f):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Fg(e,t,s,o))};function Kg(e,t,i,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&Dh.test(t)&&st(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Dh.test(t)&&Qt(i)?!1:t in e}const Yg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Fm.props;const Zr=e=>{const t=e.props["onUpdate:modelValue"];return J(t)?i=>Ar(t,i):t};function Qg(e){e.target.composing=!0}function Bh(e){const t=e.target;t.composing&&(t.composing=!1,Xg(t,"input"))}function Xg(e,t){const i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}const He={created(e,{modifiers:{lazy:t,trim:i,number:s}},o){e._assign=Zr(o);const a=s||o.props&&o.props.type==="number";Yn(e,t?"change":"input",c=>{if(c.target.composing)return;let u=e.value;i?u=u.trim():a&&(u=Dr(u)),e._assign(u)}),i&&Yn(e,"change",()=>{e.value=e.value.trim()}),t||(Yn(e,"compositionstart",Qg),Yn(e,"compositionend",Bh),Yn(e,"change",Bh))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:s,number:o}},a){if(e._assign=Zr(a),e.composing||document.activeElement===e&&(i||s&&e.value.trim()===t||(o||e.type==="number")&&Dr(e.value)===t))return;const c=t==null?"":t;e.value!==c&&(e.value=c)}},Jg={deep:!0,created(e,{value:t,modifiers:{number:i}},s){const o=uo(t);Yn(e,"change",()=>{const a=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>i?Dr($r(c)):$r(c));e._assign(e.multiple?o?new Set(a):a:a[0])}),e._assign=Zr(s)},mounted(e,{value:t}){Fh(e,t)},beforeUpdate(e,t,i){e._assign=Zr(i)},updated(e,{value:t}){Fh(e,t)}};function Fh(e,t){const i=e.multiple;if(!(i&&!J(t)&&!uo(t))){for(let s=0,o=e.options.length;s<o;s++){const a=e.options[s],c=$r(a);if(i)J(t)?a.selected=Np(t,c)>-1:a.selected=t.has(c);else if(co($r(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function $r(e){return"_value"in e?e._value:e.value}const tv={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):ms(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:s}){!t!=!i&&(s?t?(s.beforeEnter(e),ms(e,!0),s.enter(e)):s.leave(e,()=>{ms(e,!1)}):ms(e,t))},beforeUnmount(e,{value:t}){ms(e,t)}};function ms(e,t){e.style.display=t?e._vod:"none"}const ev=se({patchProp:Gg},Rg);let zh;function nv(){return zh||(zh=ag(ev))}const wo=(...e)=>{const t=nv().createApp(...e),{mount:i}=t;return t.mount=s=>{const o=iv(s);if(!o)return;const a=t._component;!st(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const c=i(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},t};function iv(e){return Qt(e)?document.querySelector(e):e}const Ln=hn({show_map:!1,show_about:!1,show_msg:!1});const sv={class:"container-fluid d-flex pe-0 navtxt"},rv=z("div",{class:"col-4 align-self-center text-light"},"Finding SanBau",-1),ov=z("input",{class:"col-6 px-3 py-2 border border-secondary rounded bg-dark text-light",type:"text",placeholder:"Plate/Nickname",maxlength:"20"},null,-1),av={setup(e){let t=hn({map:"",about:"",msg:""});function i(f){for(let _ in Ln.value)Ln.value[_]=!1;for(let _ in t.value)t.value[_]="";Ln.value[`show_${f}`]=!0,t.value[f]="text-warning"}function s(){i("map")}function o(){i("about")}function a(){i("msg")}function c(){window.open("https://github.com/OGC-Fever")}function u(){}return Ki(()=>{s()}),(f,_)=>(Ue(),cn("div",sv,[z("div",{class:"navbar-brand text-light",type:"button",onClick:s},"Cyber Butchers"),z("div",{class:Ve(["navbar-brand fs-6",ht(t).map]),type:"button",onClick:s},"SanBau Map",2),z("div",{class:Ve(["navbar-brand fs-6",ht(t).about]),type:"button",onClick:o},"About",2),z("div",{class:Ve(["navbar-brand fs-6",ht(t).msg]),type:"button",onClick:a},"Message Board",2),z("div",{class:"navbar-brand fs-6",type:"button",onClick:c},"GitHub"),z("div",{class:"d-flex col-4 my-1 ms-auto"},[rv,ov,z("div",{class:"col fs-4 px-0 badge align-self-center text-warning",type:"button",onClick:u},"Go")])]))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R=function(e,t){if(!e)throw Yi(t)},Yi=function(e){return new Error("Firebase Database ("+Nd.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let o=e.charCodeAt(s);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++s)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},lv=function(e){const t=[];let i=0,s=0;for(;i<e.length;){const o=e[i++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=e[i++];t[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=e[i++],c=e[i++],u=e[i++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;t[s++]=String.fromCharCode(55296+(f>>10)),t[s++]=String.fromCharCode(56320+(f&1023))}else{const a=e[i++],c=e[i++];t[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return t.join("")},bo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<e.length;o+=3){const a=e[o],c=o+1<e.length,u=c?e[o+1]:0,f=o+2<e.length,_=f?e[o+2]:0,g=a>>2,m=(a&3)<<4|u>>4;let w=(u&15)<<2|_>>6,E=_&63;f||(E=64,c||(w=64)),s.push(i[g],i[m],i[w],i[E])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Rd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lv(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<e.length;){const a=i[e.charAt(o++)],u=o<e.length?i[e.charAt(o)]:0;++o;const _=o<e.length?i[e.charAt(o)]:64;++o;const m=o<e.length?i[e.charAt(o)]:64;if(++o,a==null||u==null||_==null||m==null)throw Error();const w=a<<2|u>>4;if(s.push(w),_!==64){const E=u<<4&240|_>>2;if(s.push(E),m!==64){const A=_<<6&192|m;s.push(A)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Od=function(e){const t=Rd(e);return bo.encodeByteArray(t,!0)},Dd=function(e){return Od(e).replace(/\./g,"")},Wh=function(e){try{return bo.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){return Bd(void 0,e)}function Bd(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!hv(i)||(e[i]=Bd(e[i],t[i]));return e}function hv(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fd(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(uv())}function dv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zd(){return Nd.NODE_ADMIN===!0}function Ml(){return typeof indexedDB=="object"}function fv(){return new Promise((e,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(s),e(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var a;t(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(i){t(i)}})}function _v(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="FirebaseError";class Nl extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=pv,Object.setPrototypeOf(this,Nl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rl.prototype.create)}}class Rl{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},o=`${this.service}/${t}`,a=this.errors[t],c=a?mv(a,s):"Error",u=`${this.serviceName}: ${c} (${o}).`;return new Nl(o,u,s)}}function mv(e,t){return e.replace(gv,(i,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const gv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e){return JSON.parse(e)}function jt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=function(e){let t={},i={},s={},o="";try{const a=e.split(".");t=Bs(Wh(a[0])||""),i=Bs(Wh(a[1])||""),o=a[2],s=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:s,signature:o}},vv=function(e){const t=Wd(e),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},yv=function(e){const t=Wd(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Hh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vr(e,t,i){const s={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s[o]=t.call(i,e[o],o,e));return s}function Va(e,t){if(e===t)return!0;const i=Object.keys(e),s=Object.keys(t);for(const o of i){if(!s.includes(o))return!1;const a=e[o],c=t[o];if(Uh(a)&&Uh(c)){if(!Va(a,c))return!1}else if(a!==c)return!1}for(const o of s)if(!i.includes(o))return!1;return!0}function Uh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(e){const t=[];for(const[i,s]of Object.entries(e))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const s=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)s[m]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let m=0;m<16;m++)s[m]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let m=16;m<80;m++){const w=s[m-3]^s[m-8]^s[m-14]^s[m-16];s[m]=(w<<1|w>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],u=this.chain_[3],f=this.chain_[4],_,g;for(let m=0;m<80;m++){m<40?m<20?(_=u^a&(c^u),g=1518500249):(_=a^c^u,g=1859775393):m<60?(_=a&c|u&(a|c),g=2400959708):(_=a^c^u,g=3395469782);const w=(o<<5|o>>>27)+_+f+g+s[m]&4294967295;f=u,u=c,c=(a<<30|a>>>2)&4294967295,a=o,o=w}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const s=i-this.blockSize;let o=0;const a=this.buf_;let c=this.inbuf_;for(;o<i;){if(c===0)for(;o<=s;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<i;)if(a[c]=t.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}else for(;o<i;)if(a[c]=t[o],++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)t[s]=this.chain_[o]>>a&255,++s;return t}}function Co(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let o=e.charCodeAt(s);if(o>=55296&&o<=56319){const a=o-55296;s++,R(s<e.length,"Surrogate pair missing trail surrogate.");const c=e.charCodeAt(s)-56320;o=65536+(a<<10)+c}o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):o<65536?(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},xo=function(e){let t=0;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=1e3,Tv=2,Ev=4*60*60*1e3,Pv=.5;function Iv(e,t=xv,i=Tv){const s=t*Math.pow(i,e),o=Math.round(Pv*s*(Math.random()-.5)*2);return Math.min(Ev,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(e,t){return new Promise((i,s)=>{e.onsuccess=o=>{i(o.target.result)},e.onerror=o=>{var a;s(`${t}: ${(a=o.target.error)===null||a===void 0?void 0:a.message}`)}})}class Zh{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,i){return new Hd(this._db.transaction.call(this._db,t,i))}createObjectStore(t,i){return new Ud(this._db.createObjectStore(t,i))}close(){this._db.close()}}class Hd{constructor(t){this._transaction=t,this.complete=new Promise((i,s)=>{this._transaction.oncomplete=function(){i()},this._transaction.onerror=()=>{s(this._transaction.error)},this._transaction.onabort=()=>{s(this._transaction.error)}})}objectStore(t){return new Ud(this._transaction.objectStore(t))}}class Ud{constructor(t){this._store=t}index(t){return new $h(this._store.index(t))}createIndex(t,i,s){return new $h(this._store.createIndex(t,i,s))}get(t){const i=this._store.get(t);return Ts(i,"Error reading from IndexedDB")}put(t,i){const s=this._store.put(t,i);return Ts(s,"Error writing to IndexedDB")}delete(t){const i=this._store.delete(t);return Ts(i,"Error deleting from IndexedDB")}clear(){const t=this._store.clear();return Ts(t,"Error clearing IndexedDB object store")}}class $h{constructor(t){this._index=t}get(t){const i=this._index.get(t);return Ts(i,"Error reading from IndexedDB")}}function Sv(e,t,i){return new Promise((s,o)=>{try{const a=indexedDB.open(e,t);a.onsuccess=c=>{s(new Zh(c.target.result))},a.onerror=c=>{var u;o(`Error opening indexedDB: ${(u=c.target.error)===null||u===void 0?void 0:u.message}`)},a.onupgradeneeded=c=>{i(new Zh(a.result),c.oldVersion,c.newVersion,new Hd(a.transaction))}}catch(a){o(`Error opening indexedDB: ${a.message}`)}})}class si{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new pn;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Av(t))try{this.getOrInitializeService({instanceIdentifier:jn})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(t=jn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=jn){return this.instances.has(t)}getOptions(t=jn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);s===u&&c.resolve(o)}return o}onInit(t,i){var s;const o=this.normalizeInstanceIdentifier(i),a=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&t(c,o),()=>{a.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(!!s)for(const o of s)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Lv(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=jn){return this.component?this.component.multipleInstances?t:jn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lv(e){return e===jn?void 0:e}function Av(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new kv(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Lt||(Lt={}));const Nv={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},Rv=Lt.INFO,Ov={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},Dv=(e,t,...i)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),o=Ov[t];if(o)console[o](`[${s}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ol{constructor(t){this.name=t,this._logLevel=Rv,this._logHandler=Dv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Nv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(Fv(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function Fv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ja="@firebase/app",Vh="0.7.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Ol("@firebase/app"),zv="@firebase/app-compat",Wv="@firebase/analytics-compat",Hv="@firebase/analytics",Uv="@firebase/app-check-compat",Zv="@firebase/app-check",$v="@firebase/auth",Vv="@firebase/auth-compat",jv="@firebase/database",qv="@firebase/database-compat",Gv="@firebase/functions",Kv="@firebase/functions-compat",Yv="@firebase/installations",Qv="@firebase/installations-compat",Xv="@firebase/messaging",Jv="@firebase/messaging-compat",ty="@firebase/performance",ey="@firebase/performance-compat",ny="@firebase/remote-config",iy="@firebase/remote-config-compat",sy="@firebase/storage",ry="@firebase/storage-compat",oy="@firebase/firestore",ay="@firebase/firestore-compat",ly="firebase",cy="9.6.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="[DEFAULT]",hy={[ja]:"fire-core",[zv]:"fire-core-compat",[Hv]:"fire-analytics",[Wv]:"fire-analytics-compat",[Zv]:"fire-app-check",[Uv]:"fire-app-check-compat",[$v]:"fire-auth",[Vv]:"fire-auth-compat",[jv]:"fire-rtdb",[qv]:"fire-rtdb-compat",[Gv]:"fire-fn",[Kv]:"fire-fn-compat",[Yv]:"fire-iid",[Qv]:"fire-iid-compat",[Xv]:"fire-fcm",[Jv]:"fire-fcm-compat",[ty]:"fire-perf",[ey]:"fire-perf-compat",[ny]:"fire-rc",[iy]:"fire-rc-compat",[sy]:"fire-gcs",[ry]:"fire-gcs-compat",[oy]:"fire-fst",[ay]:"fire-fst-compat","fire-js":"fire-js",[ly]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Map,qa=new Map;function uy(e,t){try{e.container.addComponent(t)}catch(i){Dl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function zi(e){const t=e.name;if(qa.has(t))return Dl.debug(`There were multiple attempts to register component ${t}.`),!1;qa.set(t,e);for(const i of jr.values())uy(i,e);return!0}function Bl(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},ri=new Rl("app","Firebase",dy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t,i,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=cy;function $d(e,t={}){typeof t!="object"&&(t={name:t});const i=Object.assign({name:Zd,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw ri.create("bad-app-name",{appName:String(s)});const o=jr.get(s);if(o){if(Va(e,o.options)&&Va(i,o.config))return o;throw ri.create("duplicate-app",{appName:s})}const a=new Mv(s);for(const u of qa.values())a.addComponent(u);const c=new fy(e,i,a);return jr.set(s,c),c}function Vd(e=Zd){const t=jr.get(e);if(!t)throw ri.create("no-app",{appName:e});return t}function ni(e,t,i){var s;let o=(s=hy[e])!==null&&s!==void 0?s:e;i&&(o+=`-${i}`);const a=o.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const u=[`Unable to register library "${o}" with version "${t}":`];a&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Dl.warn(u.join(" "));return}zi(new si(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="firebase-heartbeat-database",my=1,Fs="firebase-heartbeat-store";let ba=null;function jd(){return ba||(ba=Sv(py,my,(e,t)=>{switch(t){case 0:e.createObjectStore(Fs)}}).catch(e=>{throw ri.create("storage-open",{originalErrorMessage:e.message})})),ba}async function gy(e){try{return(await jd()).transaction(Fs).objectStore(Fs).get(qd(e))}catch(t){throw ri.create("storage-get",{originalErrorMessage:t.message})}}async function jh(e,t){try{const s=(await jd()).transaction(Fs,"readwrite");return await s.objectStore(Fs).put(t,qd(e)),s.complete}catch(i){throw ri.create("storage-set",{originalErrorMessage:i.message})}}function qd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=1024,yy=30*24*60*60*1e3;class wy{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Cy(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qh();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=yy}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qh(),{heartbeatsToSend:i,unsentEntries:s}=by(this._heartbeatsCache.heartbeats),o=Dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function qh(){return new Date().toISOString().substring(0,10)}function by(e,t=vy){const i=[];let s=e.slice();for(const o of e){const a=i.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Gh(i)>t){a.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Gh(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class Cy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ml()?fv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await gy(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return jh(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return jh(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Gh(e){return Dd(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(e){zi(new si("platform-logger",t=>new Bv(t),"PRIVATE")),zi(new si("heartbeat",t=>new wy(t),"PRIVATE")),ni(ja,Vh,e),ni(ja,Vh,"esm2017"),ni("fire-js","")}xy("");var Ty="firebase",Ey="9.6.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(Ty,Ey,"app");const Kh="@firebase/database",Yh="0.12.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd="";function Py(e){Gd=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),jt(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Bs(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return Ke(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=function(e){try{if(typeof window!="undefined"&&typeof window[e]!="undefined"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Iy(t)}}catch{}return new Sy},Xn=Kd("localStorage"),Ga=Kd("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new Ol("@firebase/database"),ky=function(){let e=1;return function(){return e++}}(),Yd=function(e){const t=Cv(e),i=new bv;i.update(t);const s=i.digest();return bo.encodeByteArray(s)},js=function(...e){let t="";for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=js.apply(null,s):typeof s=="object"?t+=jt(s):t+=s,t+=" "}return t};let ii=null,Qh=!0;const Ly=function(e,t){R(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Ni.logLevel=Lt.VERBOSE,ii=Ni.log.bind(Ni),t&&Ga.set("logging_enabled",!0)):typeof e=="function"?ii=e:(ii=null,Ga.remove("logging_enabled"))},ee=function(...e){if(Qh===!0&&(Qh=!1,ii===null&&Ga.get("logging_enabled")===!0&&Ly(!0)),ii){const t=js.apply(null,e);ii(t)}},qs=function(e){return function(...t){ee(e,...t)}},Ka=function(...e){const t="FIREBASE INTERNAL ERROR: "+js(...e);Ni.error(t)},oi=function(...e){const t=`FIREBASE FATAL ERROR: ${js(...e)}`;throw Ni.error(t),new Error(t)},le=function(...e){const t="FIREBASE WARNING: "+js(...e);Ni.warn(t)},Ay=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&le("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fl=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},My=function(e){if(document.readyState==="complete")e();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Wi="[MIN_NAME]",ai="[MAX_NAME]",hi=function(e,t){if(e===t)return 0;if(e===Wi||t===ai)return-1;if(t===Wi||e===ai)return 1;{const i=Xh(e),s=Xh(t);return i!==null?s!==null?i-s===0?e.length-t.length:i-s:-1:s!==null?1:e<t?-1:1}},Ny=function(e,t){return e===t?0:e<t?-1:1},gs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+jt(t))},zl=function(e){if(typeof e!="object"||e===null)return jt(e);const t=[];for(const s in e)t.push(s);t.sort();let i="{";for(let s=0;s<t.length;s++)s!==0&&(i+=","),i+=jt(t[s]),i+=":",i+=zl(e[t[s]]);return i+="}",i},Qd=function(e,t){const i=e.length;if(i<=t)return[e];const s=[];for(let o=0;o<i;o+=t)o+t>i?s.push(e.substring(o,i)):s.push(e.substring(o,o+t));return s};function ie(e,t){for(const i in e)e.hasOwnProperty(i)&&t(i,e[i])}const Xd=function(e){R(!Fl(e),"Invalid JSON number");const t=11,i=52,s=(1<<t-1)-1;let o,a,c,u,f;e===0?(a=0,c=0,o=1/e===-1/0?1:0):(o=e<0,e=Math.abs(e),e>=Math.pow(2,1-s)?(u=Math.min(Math.floor(Math.log(e)/Math.LN2),s),a=u+s,c=Math.round(e*Math.pow(2,i-u)-Math.pow(2,i))):(a=0,c=Math.round(e/Math.pow(2,1-s-i))));const _=[];for(f=i;f;f-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(f=t;f;f-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(o?1:0),_.reverse();const g=_.join("");let m="";for(f=0;f<64;f+=8){let w=parseInt(g.substr(f,8),2).toString(16);w.length===1&&(w="0"+w),m=m+w}return m.toLowerCase()},Ry=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Oy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Dy(e,t){let i="Unknown Error";e==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?i="Client doesn't have permission to access the desired data.":e==="unavailable"&&(i="The service is unavailable");const s=new Error(e+" at "+t._path.toString()+": "+i);return s.code=e.toUpperCase(),s}const By=new RegExp("^-?(0*)\\d{1,10}$"),Fy=-2147483648,zy=2147483647,Xh=function(e){if(By.test(e)){const t=Number(e);if(t>=Fy&&t<=zy)return t}return null},Xi=function(e){try{e()}catch(t){setTimeout(()=>{const i=t.stack||"";throw le("Exception was thrown by user callback.",i),t},Math.floor(0))}},Wy=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ss=function(e,t){const i=setTimeout(e,t);return typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){le(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,i,s){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(ee("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',le(t)}}class Ya{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Ya.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl="5",Jd="v",tf="s",ef="r",nf="f",sf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rf="ls",Zy="p",Qa="ac",of="websocket",af="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(t,i,s,o,a=!1,c="",u=!1){this.secure=i,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Xn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function Vy(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function lf(e,t,i){R(typeof t=="string","typeof type must == string"),R(typeof i=="object","typeof params must == object");let s;if(t===of)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===af)s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Vy(e)&&(i.ns=e.namespace);const o=[];return ie(i,(a,c)=>{o.push(a+"="+c)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.counters_={}}incrementCounter(t,i=1){Ke(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return cv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca={},xa={};function Hl(e){const t=e.toString();return Ca[t]||(Ca[t]=new jy),Ca[t]}function qy(e,t){const i=e.toString();return xa[i]||(xa[i]=t()),xa[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Xi(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="start",Ky="close",Yy="pLPCommand",Qy="pRTLPCB",cf="id",hf="pw",uf="ser",Xy="cb",Jy="seg",tw="ts",ew="d",nw="dframe",df=1870,ff=30,iw=df-ff,sw=25e3,rw=3e4;class ki{constructor(t,i,s,o,a,c,u){this.connId=t,this.repoInfo=i,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.transportSessionId=c,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qs(t),this.stats_=Hl(i),this.urlFn=f=>(this.appCheckToken&&(f[Qa]=this.appCheckToken),lf(i,af,f))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new Gy(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(rw)),My(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ul((...a)=>{const[c,u,f,_,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Jh)this.id=u,this.password=f;else if(c===Ky)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,u)},()=>{this.onClosed_()},this.urlFn);const s={};s[Jh]="t",s[uf]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Xy]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Jd]=Wl,this.transportSessionId&&(s[tf]=this.transportSessionId),this.lastSessionId&&(s[rf]=this.lastSessionId),this.applicationId&&(s[Zy]=this.applicationId),this.appCheckToken&&(s[Qa]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&sf.test(location.hostname)&&(s[ef]=nf);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ki.forceAllow_=!0}static forceDisallow(){ki.forceDisallow_=!0}static isAvailable(){return ki.forceAllow_?!0:!ki.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Ry()&&!Oy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=jt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Od(i),o=Qd(s,iw);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const s={};s[nw]="t",s[cf]=t,s[hf]=i,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=jt(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Ul{constructor(t,i,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ky(),window[Yy+this.uniqueCallbackIdentifier]=t,window[Qy+this.uniqueCallbackIdentifier]=i,this.myIFrame=Ul.createIFrame_();let a="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const u=document.domain;a='<script>document.domain="'+u+'";<\/script>'}const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(u){ee("frame writing exception"),u.stack&&ee(u.stack),ee(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ee("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[cf]=this.myID,t[hf]=this.myPW,t[uf]=this.currentSerial;let i=this.urlFn(t),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ff+s.length<=df;){const c=this.pendingSegs.shift();s=s+"&"+Jy+o+"="+c.seg+"&"+tw+o+"="+c.ts+"&"+ew+o+"="+c.d,o++}return i=i+s,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,s){this.pendingSegs.push({seg:t,ts:i,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const s=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(s,Math.floor(sw)),a=()=>{clearTimeout(o),s()};this.addTag(t,a)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),i())},s.onerror=()=>{ee("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=16384,aw=45e3;let qr=null;typeof MozWebSocket!="undefined"?qr=MozWebSocket:typeof WebSocket!="undefined"&&(qr=WebSocket);class Se{constructor(t,i,s,o,a,c,u){this.connId=t,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qs(this.connId),this.stats_=Hl(i),this.connURL=Se.connectionURL_(i,c,u,o),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,o){const a={};return a[Jd]=Wl,typeof location!="undefined"&&location.hostname&&sf.test(location.hostname)&&(a[ef]=nf),i&&(a[tf]=i),s&&(a[rf]=s),o&&(a[Qa]=o),lf(t,of,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xn.set("previous_websocket_failure",!0);try{if(!zd()){const s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new qr(this.connURL,[],s)}}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Se.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&qr!==null&&!Se.forceDisallow_}static previouslyFailed(){return Xn.isInMemoryStorage||Xn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Xn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=Bs(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(R(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=jt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Qd(i,ow);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aw))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Se.responsesRequiredToBeHealthy=2;Se.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ki,Se]}initTransports_(t){const i=Se&&Se.isAvailable();let s=i&&!Se.previouslyFailed();if(t.webSocketOnly&&(i||le("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Se];else{const o=this.transports_=[];for(const a of Zl.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=6e4,cw=5e3,hw=10*1024,uw=100*1024,Ta="t",tu="d",dw="s",eu="r",fw="e",nu="o",iu="a",su="n",ru="p",_w="h";class pw{constructor(t,i,s,o,a,c,u,f,_,g){this.id=t,this.repoInfo_=i,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=c,this.onReady_=u,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qs("c:"+this.id+":"),this.transportManager_=new Zl(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,s)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ss(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Ta in t){const i=t[Ta];i===iu?this.upgradeIfSecondaryHealthy_():i===eu?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===nu&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=gs("t",t),s=gs("d",t);if(i==="c")this.onSecondaryControl_(s);else if(i==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ru,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:iu,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:su,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=gs("t",t),s=gs("d",t);i==="c"?this.onControl_(s):i==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=gs(Ta,t);if(tu in t){const s=t[tu];if(i===_w)this.onHandshake_(s);else if(i===su){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===dw?this.onConnectionShutdown_(s):i===eu?this.onReset_(s):i===fw?Ka("Server Error: "+s):i===nu?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ka("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,s=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Wl!==s&&le("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,s),Ss(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ss(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(cw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ru,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{put(t,i,s,o){}merge(t,i,s,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,s){}onDisconnectMerge(t,i,s){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(t){this.allowedEvents_=t,this.listeners_={},R(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,i)}}on(t,i,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:s});const o=this.getInitialEvent(t);o&&i.apply(s,o)}off(t,i,s){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let a=0;a<o.length;a++)if(o[a].callback===i&&(!s||s===o[a].context)){o.splice(a,1);return}}validateEventType_(t){R(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends pf{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Fd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Gr}getInitialEvent(t){return R(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=32,au=768;class Et{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function mt(){return new Et("")}function it(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Rn(e){return e.pieces_.length-e.pieceNum_}function At(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Et(e.pieces_,t)}function $l(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function mw(e){let t="";for(let i=e.pieceNum_;i<e.pieces_.length;i++)e.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[i])));return t||"/"}function zs(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function mf(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let i=e.pieceNum_;i<e.pieces_.length-1;i++)t.push(e.pieces_[i]);return new Et(t,0)}function Bt(e,t){const i=[];for(let s=e.pieceNum_;s<e.pieces_.length;s++)i.push(e.pieces_[s]);if(t instanceof Et)for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);else{const s=t.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&i.push(s[o])}return new Et(i,0)}function ct(e){return e.pieceNum_>=e.pieces_.length}function ae(e,t){const i=it(e),s=it(t);if(i===null)return t;if(i===s)return ae(At(e),At(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function gw(e,t){const i=zs(e,0),s=zs(t,0);for(let o=0;o<i.length&&o<s.length;o++){const a=hi(i[o],s[o]);if(a!==0)return a}return i.length===s.length?0:i.length<s.length?-1:1}function Vl(e,t){if(Rn(e)!==Rn(t))return!1;for(let i=e.pieceNum_,s=t.pieceNum_;i<=e.pieces_.length;i++,s++)if(e.pieces_[i]!==t.pieces_[s])return!1;return!0}function Ce(e,t){let i=e.pieceNum_,s=t.pieceNum_;if(Rn(e)>Rn(t))return!1;for(;i<e.pieces_.length;){if(e.pieces_[i]!==t.pieces_[s])return!1;++i,++s}return!0}class vw{constructor(t,i){this.errorPrefix_=i,this.parts_=zs(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=xo(this.parts_[s]);gf(this)}}function yw(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=xo(t),gf(e)}function ww(e){const t=e.parts_.pop();e.byteLength_-=xo(t),e.parts_.length>0&&(e.byteLength_-=1)}function gf(e){if(e.byteLength_>au)throw new Error(e.errorPrefix_+"has a key path longer than "+au+" bytes ("+e.byteLength_+").");if(e.parts_.length>ou)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ou+") or object contains a cycle "+qn(e))}function qn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends pf{constructor(){super(["visible"]);let t,i;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(i="visibilitychange",t="hidden"):typeof document.mozHidden!="undefined"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden!="undefined"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden!="undefined"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new jl}getInitialEvent(t){return R(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=1e3,bw=60*5*1e3,Cw=3*1e3,lu=30*1e3,xw=1.3,Tw=3e4,Ew="server_kill",cu=3;class fn extends _f{constructor(t,i,s,o,a,c,u,f){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=u,this.authOverride_=f,this.id=fn.nextPersistentConnectionId_++,this.log_=qs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vs,this.maxReconnectDelay_=bw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!zd())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");jl.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Gr.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const o=++this.requestNumber_,a={r:o,a:t,b:i};this.log_(jt(a)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[o]=s)}get(t){this.initConnection_();const i=new pn,s={p:t._path.toString(),q:t._queryObject},o={action:"g",request:s,onComplete:c=>{const u=c.d;c.s==="ok"?(this.onDataUpdate_(s.p,u,!1,null),i.resolve(u)):i.reject(u)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const c=this.outstandingGets_[a];c===void 0||o!==c||(delete this.outstandingGets_[a],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+a+" timed out on connection"),i.reject(new Error("Client is offline.")))},Cw),this.connected_&&this.sendGet_(a),i.promise}listen(t,i,s,o){this.initConnection_();const a=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),R(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const u={onComplete:o,hashFn:i,query:t,tag:s};this.listens.get(c).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+s+" for "+o);const a={p:s},c="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(c,a,u=>{const f=u.d,_=u.s;fn.warnOnListenWarnings_(f,i),(this.listens.get(s)&&this.listens.get(s).get(o))===t&&(this.log_("listen response",u),_!=="ok"&&this.removeListen_(s,o),t.onComplete&&t.onComplete(_,f))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Ke(t,"w")){const s=Fi(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();le(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||yv(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=lu)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=vv(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,o=>{const a=o.s,c=o.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),R(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,t._queryObject,i)}sendUnlisten_(t,i,s,o){this.log_("Unlisten on "+t+" for "+i);const a={p:t},c="n";o&&(a.q=s,a.t=o),this.sendRequest(c,a)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,o){const a={p:i,d:s};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(t,i,s,o){this.putInternal("p",t,i,s,o)}merge(t,i,s,o){this.putInternal("m",t,i,s,o)}putInternal(t,i,s,o,a){this.initConnection_();const c={p:i,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:t,request:c,onComplete:o}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+jt(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Ka("Unrecognized action received from server: "+jt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Tw&&(this.reconnectDelay_=vs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*xw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+fn.nextConnectionId_++,a=this.lastSessionId;let c=!1,u=null;const f=function(){u?u.close():(c=!0,s())},_=function(m){R(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:f,sendRequest:_};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,w]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);c?ee("getToken() completed but was canceled"):(ee("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=w&&w.token,u=new pw(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,s,E=>{le(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ew)},a))}catch(m){this.log_("Failed to get token: "+m),c||(this.repoInfo_.nodeAdmin&&le(m),f())}}}interrupt(t){ee("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ee("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Hh(this.interruptReasons_)&&(this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;i?s=i.map(a=>zl(a)).join("$"):s="default";const o=this.removeListen_(t,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const s=new Et(t).toString();let o;if(this.listens.has(s)){const a=this.listens.get(s);o=a.get(i),a.delete(i),a.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(t,i){ee("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=cu&&(this.reconnectDelay_=lu,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ee("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=cu&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+Gd.replace(/\./g,"-")]=1,Fd()?t["framework.cordova"]=1:dv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Gr.getInstance().currentlyOnline();return Hh(this.interruptReasons_)&&t}}fn.nextPersistentConnectionId_=0;fn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new rt(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const s=new rt(Wi,t),o=new rt(Wi,i);return this.compare(s,o)!==0}minPost(){return rt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pr;class vf extends To{static get __EMPTY_NODE(){return Pr}static set __EMPTY_NODE(t){Pr=t}compare(t,i){return hi(t.name,i.name)}isDefinedOn(t){throw Yi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return rt.MIN}maxPost(){return new rt(ai,Pr)}makePost(t,i){return R(typeof t=="string","KeyIndex indexValue must always be a string."),new rt(t,Pr)}toString(){return".key"}}const Ri=new vf;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t,i,s,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=i?s(t.key,i):1,o&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Yt{constructor(t,i,s,o,a){this.key=t,this.value=i,this.color=s!=null?s:Yt.RED,this.left=o!=null?o:ue.EMPTY_NODE,this.right=a!=null?a:ue.EMPTY_NODE}copy(t,i,s,o,a){return new Yt(t!=null?t:this.key,i!=null?i:this.value,s!=null?s:this.color,o!=null?o:this.left,a!=null?a:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let o=this;const a=s(t,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(t,i,s),null):a===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ue.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,o;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(t,s.key)===0){if(s.right.isEmpty())return ue.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Yt.RED=!0;Yt.BLACK=!1;class Pw{copy(t,i,s,o,a){return this}insert(t,i,s){return new Yt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ue{constructor(t,i=ue.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new ue(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,Yt.BLACK,null,null))}remove(t){return new ue(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Yt.BLACK,null,null))}get(t){let i,s=this.root_;for(;!s.isEmpty();){if(i=this.comparator_(t,s.key),i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}getPredecessorKey(t){let i,s=this.root_,o=null;for(;!s.isEmpty();)if(i=this.comparator_(t,s.key),i===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else i<0?s=s.left:i>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ir(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Ir(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Ir(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Ir(this.root_,null,this.comparator_,!0,t)}}ue.EMPTY_NODE=new Pw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(e,t){return hi(e.name,t.name)}function ql(e,t){return hi(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa;function Sw(e){Xa=e}const yf=function(e){return typeof e=="number"?"number:"+Xd(e):"string:"+e},wf=function(e){if(e.isLeafNode()){const t=e.val();R(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ke(t,".sv"),"Priority must be a string or number.")}else R(e===Xa||e.isEmpty(),"priority of unexpected type.");R(e===Xa||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu;class Kt{constructor(t,i=Kt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wf(this.priorityNode_)}static set __childrenNodeConstructor(t){hu=t}static get __childrenNodeConstructor(){return hu}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Kt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ct(t)?this:it(t)===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:Kt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=it(t);return s===null?i:i.isEmpty()&&s!==".priority"?this:(R(s!==".priority"||Rn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Kt.__childrenNodeConstructor.EMPTY_NODE.updateChild(At(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yf(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=Xd(this.value_):t+=this.value_,this.lazyHash_=Yd(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Kt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Kt.__childrenNodeConstructor?-1:(R(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,o=Kt.VALUE_TYPE_ORDER.indexOf(i),a=Kt.VALUE_TYPE_ORDER.indexOf(s);return R(o>=0,"Unknown leaf type: "+i),R(a>=0,"Unknown leaf type: "+s),o===a?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}Kt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf,Cf;function kw(e){bf=e}function Lw(e){Cf=e}class Aw extends To{compare(t,i){const s=t.node.getPriority(),o=i.node.getPriority(),a=s.compareTo(o);return a===0?hi(t.name,i.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return rt.MIN}maxPost(){return new rt(ai,new Kt("[PRIORITY-POST]",Cf))}makePost(t,i){const s=bf(t);return new rt(i,new Kt("[PRIORITY-POST]",s))}toString(){return".priority"}}const Ft=new Aw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=Math.log(2);class Nw{constructor(t){const i=a=>parseInt(Math.log(a)/Mw,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=s(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Kr=function(e,t,i,s){e.sort(t);const o=function(f,_){const g=_-f;let m,w;if(g===0)return null;if(g===1)return m=e[f],w=i?i(m):m,new Yt(w,m.node,Yt.BLACK,null,null);{const E=parseInt(g/2,10)+f,A=o(f,E),O=o(E+1,_);return m=e[E],w=i?i(m):m,new Yt(w,m.node,Yt.BLACK,A,O)}},a=function(f){let _=null,g=null,m=e.length;const w=function(A,O){const $=m-A,et=m;m-=A;const Mt=o($+1,et),q=e[$],tt=i?i(q):q;E(new Yt(tt,q.node,O,null,Mt))},E=function(A){_?(_.left=A,_=A):(g=A,_=A)};for(let A=0;A<f.count;++A){const O=f.nextBitIsOne(),$=Math.pow(2,f.count-(A+1));O?w($,Yt.BLACK):(w($,Yt.BLACK),w($,Yt.RED))}return g},c=new Nw(e.length),u=a(c);return new ue(s||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea;const Pi={};class dn{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return R(Pi&&Ft,"ChildrenNode.ts has not been loaded"),Ea=Ea||new dn({".priority":Pi},{".priority":Ft}),Ea}get(t){const i=Fi(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof ue?i:null}hasIndex(t){return Ke(this.indexSet_,t.toString())}addIndex(t,i){R(t!==Ri,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const a=i.getIterator(rt.Wrap);let c=a.getNext();for(;c;)o=o||t.isDefinedOn(c.node),s.push(c),c=a.getNext();let u;o?u=Kr(s,t.getCompare()):u=Pi;const f=t.toString(),_=Object.assign({},this.indexSet_);_[f]=t;const g=Object.assign({},this.indexes_);return g[f]=u,new dn(g,_)}addToIndexes(t,i){const s=Vr(this.indexes_,(o,a)=>{const c=Fi(this.indexSet_,a);if(R(c,"Missing index implementation for "+a),o===Pi)if(c.isDefinedOn(t.node)){const u=[],f=i.getIterator(rt.Wrap);let _=f.getNext();for(;_;)_.name!==t.name&&u.push(_),_=f.getNext();return u.push(t),Kr(u,c.getCompare())}else return Pi;else{const u=i.get(t.name);let f=o;return u&&(f=f.remove(new rt(t.name,u))),f.insert(t,t.node)}});return new dn(s,this.indexSet_)}removeFromIndexes(t,i){const s=Vr(this.indexes_,o=>{if(o===Pi)return o;{const a=i.get(t.name);return a?o.remove(new rt(t.name,a)):o}});return new dn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys;class Y{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&wf(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ys||(ys=new Y(new ue(ql),null,dn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ys}updatePriority(t){return this.children_.isEmpty()?this:new Y(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?ys:i}}getChild(t){const i=it(t);return i===null?this:this.getImmediateChild(i).getChild(At(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(R(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const s=new rt(t,i);let o,a;i.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(s,this.children_));const c=o.isEmpty()?ys:this.priorityNode_;return new Y(o,c,a)}}updateChild(t,i){const s=it(t);if(s===null)return i;{R(it(t)!==".priority"||Rn(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(At(t),i);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,o=0,a=!0;if(this.forEachChild(Ft,(c,u)=>{i[c]=u.val(t),s++,a&&Y.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!t&&a&&o<2*s){const c=[];for(const u in i)c[u]=i[u];return c}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+yf(this.getPriority().val())+":"),this.forEachChild(Ft,(i,s)=>{const o=s.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":Yd(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const o=this.resolveIndex_(s);if(o){const a=o.getPredecessorKey(new rt(t,i));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new rt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new rt(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,rt.Wrap);let a=o.peek();for(;a!=null&&i.compare(a,t)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,rt.Wrap);let a=o.peek();for(;a!=null&&i.compare(a,t)>0;)o.getNext(),a=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gs?-1:0}withIndex(t){if(t===Ri||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new Y(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ri||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const s=this.getIterator(Ft),o=i.getIterator(Ft);let a=s.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=o.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===Ri?null:this.indexMap_.get(t.toString())}}Y.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Rw extends Y{constructor(){super(new ue(ql),Y.EMPTY_NODE,dn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Y.EMPTY_NODE}isEmpty(){return!1}}const Gs=new Rw;Object.defineProperties(rt,{MIN:{value:new rt(Wi,Y.EMPTY_NODE)},MAX:{value:new rt(ai,Gs)}});vf.__EMPTY_NODE=Y.EMPTY_NODE;Kt.__childrenNodeConstructor=Y;Sw(Gs);Lw(Gs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=!0;function Vt(e,t=null){if(e===null)return Y.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),R(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const i=e;return new Kt(i,Vt(t))}if(!(e instanceof Array)&&Ow){const i=[];let s=!1;if(ie(e,(c,u)=>{if(c.substring(0,1)!=="."){const f=Vt(u);f.isEmpty()||(s=s||!f.getPriority().isEmpty(),i.push(new rt(c,f)))}}),i.length===0)return Y.EMPTY_NODE;const a=Kr(i,Iw,c=>c.name,ql);if(s){const c=Kr(i,Ft.getCompare());return new Y(a,Vt(t),new dn({".priority":c},{".priority":Ft}))}else return new Y(a,Vt(t),dn.Default)}else{let i=Y.EMPTY_NODE;return ie(e,(s,o)=>{if(Ke(e,s)&&s.substring(0,1)!=="."){const a=Vt(o);(a.isLeafNode()||!a.isEmpty())&&(i=i.updateImmediateChild(s,a))}}),i.updatePriority(Vt(t))}}kw(Vt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends To{constructor(t){super(),this.indexPath_=t,R(!ct(t)&&it(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const s=this.extractChild(t.node),o=this.extractChild(i.node),a=s.compareTo(o);return a===0?hi(t.name,i.name):a}makePost(t,i){const s=Vt(t),o=Y.EMPTY_NODE.updateChild(this.indexPath_,s);return new rt(i,o)}maxPost(){const t=Y.EMPTY_NODE.updateChild(this.indexPath_,Gs);return new rt(ai,t)}toString(){return zs(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends To{compare(t,i){const s=t.node.compareTo(i.node);return s===0?hi(t.name,i.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return rt.MIN}maxPost(){return rt.MAX}makePost(t,i){const s=Vt(t);return new rt(i,s)}toString(){return".value"}}const Fw=new Bw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(e){return{type:"value",snapshotNode:e}}function Hi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ws(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Hs(e,t,i){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:i}}function zw(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t){this.index_=t}updateChild(t,i,s,o,a,c){R(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(i);return u.getChild(o).equals(s.getChild(o))&&u.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?t.hasChild(i)?c.trackChildChange(Ws(i,u)):R(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?c.trackChildChange(Hi(i,s)):c.trackChildChange(Hs(i,s,u))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(i,s).withIndex(this.index_)}updateFullNode(t,i,s){return s!=null&&(t.isLeafNode()||t.forEachChild(Ft,(o,a)=>{i.hasChild(o)||s.trackChildChange(Ws(o,a))}),i.isLeafNode()||i.forEachChild(Ft,(o,a)=>{if(t.hasChild(o)){const c=t.getImmediateChild(o);c.equals(a)||s.trackChildChange(Hs(o,a,c))}else s.trackChildChange(Hi(o,a))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?Y.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t){this.indexedFilter_=new Gl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Us.getStartPost_(t),this.endPost_=Us.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,i,s,o,a,c){return this.matches(new rt(i,s))||(s=Y.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,s,o,a,c)}updateFullNode(t,i,s){i.isLeafNode()&&(i=Y.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(Y.EMPTY_NODE);const a=this;return i.forEachChild(Ft,(c,u)=>{a.matches(new rt(c,u))||(o=o.updateImmediateChild(c,Y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t){this.rangedFilter_=new Us(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,i,s,o,a,c){return this.rangedFilter_.matches(new rt(i,s))||(s=Y.EMPTY_NODE),t.getImmediateChild(i).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,s,o,a,c):this.fullLimitUpdateChild_(t,i,s,a,c)}updateFullNode(t,i,s){let o;if(i.isLeafNode()||i.isEmpty())o=Y.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=Y.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const u=a.getNext();let f;if(this.reverse_?f=this.index_.compare(this.rangedFilter_.getStartPost(),u)<=0:f=this.index_.compare(u,this.rangedFilter_.getEndPost())<=0,f)o=o.updateImmediateChild(u.name,u.node),c++;else break}}else{o=i.withIndex(this.index_),o=o.updatePriority(Y.EMPTY_NODE);let a,c,u,f;if(this.reverse_){f=o.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const m=this.index_.getCompare();u=(w,E)=>m(E,w)}else f=o.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();let _=0,g=!1;for(;f.hasNext();){const m=f.getNext();!g&&u(a,m)<=0&&(g=!0),g&&_<this.limit_&&u(m,c)<=0?_++:o=o.updateImmediateChild(m.name,Y.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,s,o,a){let c;if(this.reverse_){const m=this.index_.getCompare();c=(w,E)=>m(E,w)}else c=this.index_.getCompare();const u=t;R(u.numChildren()===this.limit_,"");const f=new rt(i,s),_=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(u.hasChild(i)){const m=u.getImmediateChild(i);let w=o.getChildAfterChild(this.index_,_,this.reverse_);for(;w!=null&&(w.name===i||u.hasChild(w.name));)w=o.getChildAfterChild(this.index_,w,this.reverse_);const E=w==null?1:c(w,f);if(g&&!s.isEmpty()&&E>=0)return a!=null&&a.trackChildChange(Hs(i,s,m)),u.updateImmediateChild(i,s);{a!=null&&a.trackChildChange(Ws(i,m));const O=u.updateImmediateChild(i,Y.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(a!=null&&a.trackChildChange(Hi(w.name,w.node)),O.updateImmediateChild(w.name,w.node)):O}}else return s.isEmpty()?t:g&&c(_,f)>=0?(a!=null&&(a.trackChildChange(Ws(_.name,_.node)),a.trackChildChange(Hi(i,s))),u.updateImmediateChild(i,s).updateImmediateChild(_.name,Y.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ft}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wi}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ai}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ft}copy(){const t=new Kl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Hw(e){return e.loadsAllData()?new Gl(e.getIndex()):e.hasLimit()?new Ww(e):new Us(e)}function uu(e){const t={};if(e.isDefault())return t;let i;return e.index_===Ft?i="$priority":e.index_===Fw?i="$value":e.index_===Ri?i="$key":(R(e.index_ instanceof Dw,"Unrecognized index type!"),i=e.index_.toString()),t.orderBy=jt(i),e.startSet_&&(t.startAt=jt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+jt(e.indexStartName_))),e.endSet_&&(t.endAt=jt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+jt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function du(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let i=e.viewFrom_;i===""&&(e.isViewFromLeft()?i="l":i="r"),t.vf=i}return e.index_!==Ft&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends _f{constructor(t,i,s,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=qs("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(R(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,s,o){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const c=Yr.getListenId_(t,s),u={};this.listens_[c]=u;const f=uu(t._queryParams);this.restRequest_(a+".json",f,(_,g)=>{let m=g;if(_===404&&(m=null,_=null),_===null&&this.onDataUpdate_(a,m,!1,s),Fi(this.listens_,c)===u){let w;_?_===401?w="permission_denied":w="rest_error:"+_:w="ok",o(w,null)}})}unlisten(t,i){const s=Yr.getListenId_(t,i);delete this.listens_[s]}get(t){const i=uu(t._queryParams),s=t._path.toString(),o=new pn;return this.restRequest_(s+".json",i,(a,c)=>{let u=c;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(s,u,!1,null),o.resolve(u)):o.reject(new Error(u))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},s){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(i.auth=o.accessToken),a&&a.token&&(i.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+wv(i);this.log_("Sending REST request for "+c);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(s&&u.readyState===4){this.log_("REST Response for "+c+" received. status:",u.status,"response:",u.responseText);let f=null;if(u.status>=200&&u.status<300){try{f=Bs(u.responseText)}catch{le("Failed to parse JSON response for "+c+": "+u.responseText)}s(null,f)}else u.status!==401&&u.status!==404&&le("Got unsuccessful REST response for "+c+" Status: "+u.status),s(u.status);s=null}},u.open("GET",c,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.rootNode_=Y.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return{value:null,children:new Map}}function Tf(e,t,i){if(ct(t))e.value=i,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,i);else{const s=it(t);e.children.has(s)||e.children.set(s,Qr());const o=e.children.get(s);t=At(t),Tf(o,t,i)}}function Ja(e,t,i){e.value!==null?i(t,e.value):Zw(e,(s,o)=>{const a=new Et(t.toString()+"/"+s);Ja(o,a,i)})}function Zw(e,t){e.children.forEach((i,s)=>{t(s,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&ie(this.last_,(s,o)=>{i[s]=i[s]-o}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=10*1e3,Vw=30*1e3,jw=5*60*1e3;class qw{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new $w(t);const s=fu+(Vw-fu)*Math.random();Ss(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),i={};let s=!1;ie(t,(o,a)=>{a>0&&Ke(this.statsToReport_,o)&&(i[o]=a,s=!0)}),s&&this.server_.reportStats(i),Ss(this.reportStats_.bind(this),Math.floor(Math.random()*2*jw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Le||(Le={}));function Yl(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ql(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Xl(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,i,s){this.path=t,this.affectedTree=i,this.revert=s,this.type=Le.ACK_USER_WRITE,this.source=Yl()}operationForChild(t){if(ct(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Et(t));return new Xr(mt(),i,this.revert)}}else return R(it(this.path)===t,"operationForChild called for unrelated child."),new Xr(At(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,i){this.source=t,this.path=i,this.type=Le.LISTEN_COMPLETE}operationForChild(t){return ct(this.path)?new Zs(this.source,mt()):new Zs(this.source,At(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t,i,s){this.source=t,this.path=i,this.snap=s,this.type=Le.OVERWRITE}operationForChild(t){return ct(this.path)?new li(this.source,mt(),this.snap.getImmediateChild(t)):new li(this.source,At(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,i,s){this.source=t,this.path=i,this.children=s,this.type=Le.MERGE}operationForChild(t){if(ct(this.path)){const i=this.children.subtree(new Et(t));return i.isEmpty()?null:i.value?new li(this.source,mt(),i.value):new Ui(this.source,mt(),i)}else return R(it(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ui(this.source,At(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t,i,s){this.node_=t,this.fullyInitialized_=i,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ct(t))return this.isFullyInitialized()&&!this.filtered_;const i=it(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Kw(e,t,i,s){const o=[],a=[];return t.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(zw(c.childName,c.snapshotNode))}),ws(e,o,"child_removed",t,s,i),ws(e,o,"child_added",t,s,i),ws(e,o,"child_moved",a,s,i),ws(e,o,"child_changed",t,s,i),ws(e,o,"value",t,s,i),o}function ws(e,t,i,s,o,a){const c=s.filter(u=>u.type===i);c.sort((u,f)=>Qw(e,u,f)),c.forEach(u=>{const f=Yw(e,u,a);o.forEach(_=>{_.respondsTo(u.type)&&t.push(_.createEvent(f,e.query_))})})}function Yw(e,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Qw(e,t,i){if(t.childName==null||i.childName==null)throw Yi("Should only compare child_ events.");const s=new rt(t.childName,t.snapshotNode),o=new rt(i.childName,i.snapshotNode);return e.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(e,t){return{eventCache:e,serverCache:t}}function ks(e,t,i,s){return Eo(new On(t,i,s),e.serverCache)}function Ef(e,t,i,s){return Eo(e.eventCache,new On(t,i,s))}function Jr(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ci(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa;const Xw=()=>(Pa||(Pa=new ue(Ny)),Pa);class kt{constructor(t,i=Xw()){this.value=t,this.children=i}static fromObject(t){let i=new kt(null);return ie(t,(s,o)=>{i=i.set(new Et(s),o)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:mt(),value:this.value};if(ct(t))return null;{const s=it(t),o=this.children.get(s);if(o!==null){const a=o.findRootMostMatchingPathAndValue(At(t),i);return a!=null?{path:Bt(new Et(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ct(t))return this;{const i=it(t),s=this.children.get(i);return s!==null?s.subtree(At(t)):new kt(null)}}set(t,i){if(ct(t))return new kt(i,this.children);{const s=it(t),a=(this.children.get(s)||new kt(null)).set(At(t),i),c=this.children.insert(s,a);return new kt(this.value,c)}}remove(t){if(ct(t))return this.children.isEmpty()?new kt(null):new kt(null,this.children);{const i=it(t),s=this.children.get(i);if(s){const o=s.remove(At(t));let a;return o.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,o),this.value===null&&a.isEmpty()?new kt(null):new kt(this.value,a)}else return this}}get(t){if(ct(t))return this.value;{const i=it(t),s=this.children.get(i);return s?s.get(At(t)):null}}setTree(t,i){if(ct(t))return i;{const s=it(t),a=(this.children.get(s)||new kt(null)).setTree(At(t),i);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new kt(this.value,c)}}fold(t){return this.fold_(mt(),t)}fold_(t,i){const s={};return this.children.inorderTraversal((o,a)=>{s[o]=a.fold_(Bt(t,o),i)}),i(t,this.value,s)}findOnPath(t,i){return this.findOnPath_(t,mt(),i)}findOnPath_(t,i,s){const o=this.value?s(i,this.value):!1;if(o)return o;if(ct(t))return null;{const a=it(t),c=this.children.get(a);return c?c.findOnPath_(At(t),Bt(i,a),s):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,mt(),i)}foreachOnPath_(t,i,s){if(ct(t))return this;{this.value&&s(i,this.value);const o=it(t),a=this.children.get(o);return a?a.foreachOnPath_(At(t),Bt(i,o),s):new kt(null)}}foreach(t){this.foreach_(mt(),t)}foreach_(t,i){this.children.inorderTraversal((s,o)=>{o.foreach_(Bt(t,s),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,s)=>{s.value&&t(i,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.writeTree_=t}static empty(){return new Me(new kt(null))}}function Ls(e,t,i){if(ct(t))return new Me(new kt(i));{const s=e.writeTree_.findRootMostValueAndPath(t);if(s!=null){const o=s.path;let a=s.value;const c=ae(o,t);return a=a.updateChild(c,i),new Me(e.writeTree_.set(o,a))}else{const o=new kt(i),a=e.writeTree_.setTree(t,o);return new Me(a)}}}function tl(e,t,i){let s=e;return ie(i,(o,a)=>{s=Ls(s,Bt(t,o),a)}),s}function _u(e,t){if(ct(t))return Me.empty();{const i=e.writeTree_.setTree(t,new kt(null));return new Me(i)}}function el(e,t){return ui(e,t)!=null}function ui(e,t){const i=e.writeTree_.findRootMostValueAndPath(t);return i!=null?e.writeTree_.get(i.path).getChild(ae(i.path,t)):null}function pu(e){const t=[],i=e.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Ft,(s,o)=>{t.push(new rt(s,o))}):e.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&t.push(new rt(s,o.value))}),t}function An(e,t){if(ct(t))return e;{const i=ui(e,t);return i!=null?new Me(new kt(i)):new Me(e.writeTree_.subtree(t))}}function nl(e){return e.writeTree_.isEmpty()}function Zi(e,t){return Pf(mt(),e.writeTree_,t)}function Pf(e,t,i){if(t.value!=null)return i.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal((o,a)=>{o===".priority"?(R(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):i=Pf(Bt(e,o),a,i)}),!i.getChild(e).isEmpty()&&s!==null&&(i=i.updateChild(Bt(e,".priority"),s)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(e,t){return Lf(t,e)}function Jw(e,t,i,s,o){R(s>e.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),e.allWrites.push({path:t,snap:i,writeId:s,visible:o}),o&&(e.visibleWrites=Ls(e.visibleWrites,t,i)),e.lastWriteId=s}function tb(e,t,i,s){R(s>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:i,writeId:s,visible:!0}),e.visibleWrites=tl(e.visibleWrites,t,i),e.lastWriteId=s}function eb(e,t){for(let i=0;i<e.allWrites.length;i++){const s=e.allWrites[i];if(s.writeId===t)return s}return null}function nb(e,t){const i=e.allWrites.findIndex(u=>u.writeId===t);R(i>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[i];e.allWrites.splice(i,1);let o=s.visible,a=!1,c=e.allWrites.length-1;for(;o&&c>=0;){const u=e.allWrites[c];u.visible&&(c>=i&&ib(u,s.path)?o=!1:Ce(s.path,u.path)&&(a=!0)),c--}if(o){if(a)return sb(e),!0;if(s.snap)e.visibleWrites=_u(e.visibleWrites,s.path);else{const u=s.children;ie(u,f=>{e.visibleWrites=_u(e.visibleWrites,Bt(s.path,f))})}return!0}else return!1}function ib(e,t){if(e.snap)return Ce(e.path,t);for(const i in e.children)if(e.children.hasOwnProperty(i)&&Ce(Bt(e.path,i),t))return!0;return!1}function sb(e){e.visibleWrites=If(e.allWrites,rb,mt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function rb(e){return e.visible}function If(e,t,i){let s=Me.empty();for(let o=0;o<e.length;++o){const a=e[o];if(t(a)){const c=a.path;let u;if(a.snap)Ce(i,c)?(u=ae(i,c),s=Ls(s,u,a.snap)):Ce(c,i)&&(u=ae(c,i),s=Ls(s,mt(),a.snap.getChild(u)));else if(a.children){if(Ce(i,c))u=ae(i,c),s=tl(s,u,a.children);else if(Ce(c,i))if(u=ae(c,i),ct(u))s=tl(s,mt(),a.children);else{const f=Fi(a.children,it(u));if(f){const _=f.getChild(At(u));s=Ls(s,mt(),_)}}}else throw Yi("WriteRecord should have .snap or .children")}}return s}function Sf(e,t,i,s,o){if(!s&&!o){const a=ui(e.visibleWrites,t);if(a!=null)return a;{const c=An(e.visibleWrites,t);if(nl(c))return i;if(i==null&&!el(c,mt()))return null;{const u=i||Y.EMPTY_NODE;return Zi(c,u)}}}else{const a=An(e.visibleWrites,t);if(!o&&nl(a))return i;if(!o&&i==null&&!el(a,mt()))return null;{const c=function(_){return(_.visible||o)&&(!s||!~s.indexOf(_.writeId))&&(Ce(_.path,t)||Ce(t,_.path))},u=If(e.allWrites,c,t),f=i||Y.EMPTY_NODE;return Zi(u,f)}}}function ob(e,t,i){let s=Y.EMPTY_NODE;const o=ui(e.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Ft,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(i){const a=An(e.visibleWrites,t);return i.forEachChild(Ft,(c,u)=>{const f=Zi(An(a,new Et(c)),u);s=s.updateImmediateChild(c,f)}),pu(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=An(e.visibleWrites,t);return pu(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function ab(e,t,i,s,o){R(s||o,"Either existingEventSnap or existingServerSnap must exist");const a=Bt(t,i);if(el(e.visibleWrites,a))return null;{const c=An(e.visibleWrites,a);return nl(c)?o.getChild(i):Zi(c,o.getChild(i))}}function lb(e,t,i,s){const o=Bt(t,i),a=ui(e.visibleWrites,o);if(a!=null)return a;if(s.isCompleteForChild(i)){const c=An(e.visibleWrites,o);return Zi(c,s.getNode().getImmediateChild(i))}else return null}function cb(e,t){return ui(e.visibleWrites,t)}function hb(e,t,i,s,o,a,c){let u;const f=An(e.visibleWrites,t),_=ui(f,mt());if(_!=null)u=_;else if(i!=null)u=Zi(f,i);else return[];if(u=u.withIndex(c),!u.isEmpty()&&!u.isLeafNode()){const g=[],m=c.getCompare(),w=a?u.getReverseIteratorFrom(s,c):u.getIteratorFrom(s,c);let E=w.getNext();for(;E&&g.length<o;)m(E,s)!==0&&g.push(E),E=w.getNext();return g}else return[]}function ub(){return{visibleWrites:Me.empty(),allWrites:[],lastWriteId:-1}}function to(e,t,i,s){return Sf(e.writeTree,e.treePath,t,i,s)}function Jl(e,t){return ob(e.writeTree,e.treePath,t)}function mu(e,t,i,s){return ab(e.writeTree,e.treePath,t,i,s)}function eo(e,t){return cb(e.writeTree,Bt(e.treePath,t))}function db(e,t,i,s,o,a){return hb(e.writeTree,e.treePath,t,i,s,o,a)}function tc(e,t,i){return lb(e.writeTree,e.treePath,t,i)}function kf(e,t){return Lf(Bt(e.treePath,t),e.writeTree)}function Lf(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,s=t.childName;R(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),R(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const a=o.type;if(i==="child_added"&&a==="child_removed")this.changeMap.set(s,Hs(s,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(i==="child_removed"&&a==="child_changed")this.changeMap.set(s,Ws(s,o.oldSnap));else if(i==="child_changed"&&a==="child_added")this.changeMap.set(s,Hi(s,t.snapshotNode));else if(i==="child_changed"&&a==="child_changed")this.changeMap.set(s,Hs(s,t.snapshotNode,o.oldSnap));else throw Yi("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{getCompleteChild(t){return null}getChildAfterChild(t,i,s){return null}}const Af=new _b;class ec{constructor(t,i,s=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=s}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new On(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tc(this.writes_,t,s)}}getChildAfterChild(t,i,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ci(this.viewCache_),a=db(this.writes_,o,i,1,s,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(e){return{filter:e}}function mb(e,t){R(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),R(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function gb(e,t,i,s,o){const a=new fb;let c,u;if(i.type===Le.OVERWRITE){const _=i;_.source.fromUser?c=il(e,t,_.path,_.snap,s,o,a):(R(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered()&&!ct(_.path),c=no(e,t,_.path,_.snap,s,o,u,a))}else if(i.type===Le.MERGE){const _=i;_.source.fromUser?c=yb(e,t,_.path,_.children,s,o,a):(R(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered(),c=sl(e,t,_.path,_.children,s,o,u,a))}else if(i.type===Le.ACK_USER_WRITE){const _=i;_.revert?c=Cb(e,t,_.path,s,o,a):c=wb(e,t,_.path,_.affectedTree,s,o,a)}else if(i.type===Le.LISTEN_COMPLETE)c=bb(e,t,i.path,s,a);else throw Yi("Unknown operation type: "+i.type);const f=a.getChanges();return vb(t,c,f),{viewCache:c,changes:f}}function vb(e,t,i){const s=t.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=Jr(e);(i.length>0||!e.eventCache.isFullyInitialized()||o&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&i.push(xf(Jr(t)))}}function Mf(e,t,i,s,o,a){const c=t.eventCache;if(eo(s,i)!=null)return t;{let u,f;if(ct(i))if(R(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=ci(t),g=_ instanceof Y?_:Y.EMPTY_NODE,m=Jl(s,g);u=e.filter.updateFullNode(t.eventCache.getNode(),m,a)}else{const _=to(s,ci(t));u=e.filter.updateFullNode(t.eventCache.getNode(),_,a)}else{const _=it(i);if(_===".priority"){R(Rn(i)===1,"Can't have a priority with additional path components");const g=c.getNode();f=t.serverCache.getNode();const m=mu(s,i,g,f);m!=null?u=e.filter.updatePriority(g,m):u=c.getNode()}else{const g=At(i);let m;if(c.isCompleteForChild(_)){f=t.serverCache.getNode();const w=mu(s,i,c.getNode(),f);w!=null?m=c.getNode().getImmediateChild(_).updateChild(g,w):m=c.getNode().getImmediateChild(_)}else m=tc(s,_,t.serverCache);m!=null?u=e.filter.updateChild(c.getNode(),_,m,g,o,a):u=c.getNode()}}return ks(t,u,c.isFullyInitialized()||ct(i),e.filter.filtersNodes())}}function no(e,t,i,s,o,a,c,u){const f=t.serverCache;let _;const g=c?e.filter:e.filter.getIndexedFilter();if(ct(i))_=g.updateFullNode(f.getNode(),s,null);else if(g.filtersNodes()&&!f.isFiltered()){const E=f.getNode().updateChild(i,s);_=g.updateFullNode(f.getNode(),E,null)}else{const E=it(i);if(!f.isCompleteForPath(i)&&Rn(i)>1)return t;const A=At(i),$=f.getNode().getImmediateChild(E).updateChild(A,s);E===".priority"?_=g.updatePriority(f.getNode(),$):_=g.updateChild(f.getNode(),E,$,A,Af,null)}const m=Ef(t,_,f.isFullyInitialized()||ct(i),g.filtersNodes()),w=new ec(o,m,a);return Mf(e,m,i,o,w,u)}function il(e,t,i,s,o,a,c){const u=t.eventCache;let f,_;const g=new ec(o,t,a);if(ct(i))_=e.filter.updateFullNode(t.eventCache.getNode(),s,c),f=ks(t,_,!0,e.filter.filtersNodes());else{const m=it(i);if(m===".priority")_=e.filter.updatePriority(t.eventCache.getNode(),s),f=ks(t,_,u.isFullyInitialized(),u.isFiltered());else{const w=At(i),E=u.getNode().getImmediateChild(m);let A;if(ct(w))A=s;else{const O=g.getCompleteChild(m);O!=null?$l(w)===".priority"&&O.getChild(mf(w)).isEmpty()?A=O:A=O.updateChild(w,s):A=Y.EMPTY_NODE}if(E.equals(A))f=t;else{const O=e.filter.updateChild(u.getNode(),m,A,w,g,c);f=ks(t,O,u.isFullyInitialized(),e.filter.filtersNodes())}}}return f}function gu(e,t){return e.eventCache.isCompleteForChild(t)}function yb(e,t,i,s,o,a,c){let u=t;return s.foreach((f,_)=>{const g=Bt(i,f);gu(t,it(g))&&(u=il(e,u,g,_,o,a,c))}),s.foreach((f,_)=>{const g=Bt(i,f);gu(t,it(g))||(u=il(e,u,g,_,o,a,c))}),u}function vu(e,t,i){return i.foreach((s,o)=>{t=t.updateChild(s,o)}),t}function sl(e,t,i,s,o,a,c,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let f=t,_;ct(i)?_=s:_=new kt(null).setTree(i,s);const g=t.serverCache.getNode();return _.children.inorderTraversal((m,w)=>{if(g.hasChild(m)){const E=t.serverCache.getNode().getImmediateChild(m),A=vu(e,E,w);f=no(e,f,new Et(m),A,o,a,c,u)}}),_.children.inorderTraversal((m,w)=>{const E=!t.serverCache.isCompleteForChild(m)&&w.value===void 0;if(!g.hasChild(m)&&!E){const A=t.serverCache.getNode().getImmediateChild(m),O=vu(e,A,w);f=no(e,f,new Et(m),O,o,a,c,u)}}),f}function wb(e,t,i,s,o,a,c){if(eo(o,i)!=null)return t;const u=t.serverCache.isFiltered(),f=t.serverCache;if(s.value!=null){if(ct(i)&&f.isFullyInitialized()||f.isCompleteForPath(i))return no(e,t,i,f.getNode().getChild(i),o,a,u,c);if(ct(i)){let _=new kt(null);return f.getNode().forEachChild(Ri,(g,m)=>{_=_.set(new Et(g),m)}),sl(e,t,i,_,o,a,u,c)}else return t}else{let _=new kt(null);return s.foreach((g,m)=>{const w=Bt(i,g);f.isCompleteForPath(w)&&(_=_.set(g,f.getNode().getChild(w)))}),sl(e,t,i,_,o,a,u,c)}}function bb(e,t,i,s,o){const a=t.serverCache,c=Ef(t,a.getNode(),a.isFullyInitialized()||ct(i),a.isFiltered());return Mf(e,c,i,s,Af,o)}function Cb(e,t,i,s,o,a){let c;if(eo(s,i)!=null)return t;{const u=new ec(s,t,o),f=t.eventCache.getNode();let _;if(ct(i)||it(i)===".priority"){let g;if(t.serverCache.isFullyInitialized())g=to(s,ci(t));else{const m=t.serverCache.getNode();R(m instanceof Y,"serverChildren would be complete if leaf node"),g=Jl(s,m)}g=g,_=e.filter.updateFullNode(f,g,a)}else{const g=it(i);let m=tc(s,g,t.serverCache);m==null&&t.serverCache.isCompleteForChild(g)&&(m=f.getImmediateChild(g)),m!=null?_=e.filter.updateChild(f,g,m,At(i),u,a):t.eventCache.getNode().hasChild(g)?_=e.filter.updateChild(f,g,Y.EMPTY_NODE,At(i),u,a):_=f,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=to(s,ci(t)),c.isLeafNode()&&(_=e.filter.updateFullNode(_,c,a)))}return c=t.serverCache.isFullyInitialized()||eo(s,mt())!=null,ks(t,_,c,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new Gl(s.getIndex()),a=Hw(s);this.processor_=pb(a);const c=i.serverCache,u=i.eventCache,f=o.updateFullNode(Y.EMPTY_NODE,c.getNode(),null),_=a.updateFullNode(Y.EMPTY_NODE,u.getNode(),null),g=new On(f,c.isFullyInitialized(),o.filtersNodes()),m=new On(_,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=Eo(m,g),this.eventGenerator_=new Gw(this.query_)}get query(){return this.query_}}function Tb(e){return e.viewCache_.serverCache.getNode()}function Eb(e){return Jr(e.viewCache_)}function Pb(e,t){const i=ci(e.viewCache_);return i&&(e.query._queryParams.loadsAllData()||!ct(t)&&!i.getImmediateChild(it(t)).isEmpty())?i.getChild(t):null}function yu(e){return e.eventRegistrations_.length===0}function Ib(e,t){e.eventRegistrations_.push(t)}function wu(e,t,i){const s=[];if(i){R(t==null,"A cancel should cancel all event registrations.");const o=e.query._path;e.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(i,o);c&&s.push(c)})}if(t){let o=[];for(let a=0;a<e.eventRegistrations_.length;++a){const c=e.eventRegistrations_[a];if(!c.matches(t))o.push(c);else if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}e.eventRegistrations_=o}else e.eventRegistrations_=[];return s}function bu(e,t,i,s){t.type===Le.MERGE&&t.source.queryId!==null&&(R(ci(e.viewCache_),"We should always have a full cache before handling merges"),R(Jr(e.viewCache_),"Missing event cache, even though we have a server cache"));const o=e.viewCache_,a=gb(e.processor_,o,t,i,s);return mb(e.processor_,a.viewCache),R(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Nf(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Sb(e,t){const i=e.viewCache_.eventCache,s=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Ft,(a,c)=>{s.push(Hi(a,c))}),i.isFullyInitialized()&&s.push(xf(i.getNode())),Nf(e,s,i.getNode(),t)}function Nf(e,t,i,s){const o=s?[s]:e.eventRegistrations_;return Kw(e.eventGenerator_,t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io;class Rf{constructor(){this.views=new Map}}function kb(e){R(!io,"__referenceConstructor has already been defined"),io=e}function Lb(){return R(io,"Reference.ts has not been loaded"),io}function Ab(e){return e.views.size===0}function nc(e,t,i,s){const o=t.source.queryId;if(o!==null){const a=e.views.get(o);return R(a!=null,"SyncTree gave us an op for an invalid query."),bu(a,t,i,s)}else{let a=[];for(const c of e.views.values())a=a.concat(bu(c,t,i,s));return a}}function Of(e,t,i,s,o){const a=t._queryIdentifier,c=e.views.get(a);if(!c){let u=to(i,o?s:null),f=!1;u?f=!0:s instanceof Y?(u=Jl(i,s),f=!1):(u=Y.EMPTY_NODE,f=!1);const _=Eo(new On(u,f,!1),new On(s,o,!1));return new xb(t,_)}return c}function Mb(e,t,i,s,o,a){const c=Of(e,t,s,o,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,c),Ib(c,i),Sb(c,i)}function Nb(e,t,i,s){const o=t._queryIdentifier,a=[];let c=[];const u=Dn(e);if(o==="default")for(const[f,_]of e.views.entries())c=c.concat(wu(_,i,s)),yu(_)&&(e.views.delete(f),_.query._queryParams.loadsAllData()||a.push(_.query));else{const f=e.views.get(o);f&&(c=c.concat(wu(f,i,s)),yu(f)&&(e.views.delete(o),f.query._queryParams.loadsAllData()||a.push(f.query)))}return u&&!Dn(e)&&a.push(new(Lb())(t._repo,t._path)),{removed:a,events:c}}function Df(e){const t=[];for(const i of e.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function Mn(e,t){let i=null;for(const s of e.views.values())i=i||Pb(s,t);return i}function Bf(e,t){if(t._queryParams.loadsAllData())return Io(e);{const s=t._queryIdentifier;return e.views.get(s)}}function Ff(e,t){return Bf(e,t)!=null}function Dn(e){return Io(e)!=null}function Io(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so;function Rb(e){R(!so,"__referenceConstructor has already been defined"),so=e}function Ob(){return R(so,"Reference.ts has not been loaded"),so}let Db=1;class Cu{constructor(t){this.listenProvider_=t,this.syncPointTree_=new kt(null),this.pendingWriteTree_=ub(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zf(e,t,i,s,o){return Jw(e.pendingWriteTree_,t,i,s,o),o?Ji(e,new li(Yl(),t,i)):[]}function Bb(e,t,i,s){tb(e.pendingWriteTree_,t,i,s);const o=kt.fromObject(i);return Ji(e,new Ui(Yl(),t,o))}function In(e,t,i=!1){const s=eb(e.pendingWriteTree_,t);if(nb(e.pendingWriteTree_,t)){let a=new kt(null);return s.snap!=null?a=a.set(mt(),!0):ie(s.children,c=>{a=a.set(new Et(c),!0)}),Ji(e,new Xr(s.path,a,i))}else return[]}function Ks(e,t,i){return Ji(e,new li(Ql(),t,i))}function Fb(e,t,i){const s=kt.fromObject(i);return Ji(e,new Ui(Ql(),t,s))}function zb(e,t){return Ji(e,new Zs(Ql(),t))}function Wb(e,t,i){const s=sc(e,i);if(s){const o=rc(s),a=o.path,c=o.queryId,u=ae(a,t),f=new Zs(Xl(c),u);return oc(e,a,f)}else return[]}function rl(e,t,i,s){const o=t._path,a=e.syncPointTree_.get(o);let c=[];if(a&&(t._queryIdentifier==="default"||Ff(a,t))){const u=Nb(a,t,i,s);Ab(a)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const f=u.removed;c=u.events;const _=f.findIndex(m=>m._queryParams.loadsAllData())!==-1,g=e.syncPointTree_.findOnPath(o,(m,w)=>Dn(w));if(_&&!g){const m=e.syncPointTree_.subtree(o);if(!m.isEmpty()){const w=$b(m);for(let E=0;E<w.length;++E){const A=w[E],O=A.query,$=Uf(e,A);e.listenProvider_.startListening(As(O),ro(e,O),$.hashFn,$.onComplete)}}}!g&&f.length>0&&!s&&(_?e.listenProvider_.stopListening(As(t),null):f.forEach(m=>{const w=e.queryToTagMap.get(So(m));e.listenProvider_.stopListening(As(m),w)})),Vb(e,f)}return c}function Hb(e,t,i,s){const o=sc(e,s);if(o!=null){const a=rc(o),c=a.path,u=a.queryId,f=ae(c,t),_=new li(Xl(u),f,i);return oc(e,c,_)}else return[]}function Ub(e,t,i,s){const o=sc(e,s);if(o){const a=rc(o),c=a.path,u=a.queryId,f=ae(c,t),_=kt.fromObject(i),g=new Ui(Xl(u),f,_);return oc(e,c,g)}else return[]}function xu(e,t,i){const s=t._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(s,(m,w)=>{const E=ae(m,s);o=o||Mn(w,E),a=a||Dn(w)});let c=e.syncPointTree_.get(s);c?(a=a||Dn(c),o=o||Mn(c,mt())):(c=new Rf,e.syncPointTree_=e.syncPointTree_.set(s,c));let u;o!=null?u=!0:(u=!1,o=Y.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((w,E)=>{const A=Mn(E,mt());A&&(o=o.updateImmediateChild(w,A))}));const f=Ff(c,t);if(!f&&!t._queryParams.loadsAllData()){const m=So(t);R(!e.queryToTagMap.has(m),"View does not exist, but we have a tag");const w=jb();e.queryToTagMap.set(m,w),e.tagToQueryMap.set(w,m)}const _=Po(e.pendingWriteTree_,s);let g=Mb(c,t,i,_,o,u);if(!f&&!a){const m=Bf(c,t);g=g.concat(qb(e,t,m))}return g}function ic(e,t,i){const o=e.pendingWriteTree_,a=e.syncPointTree_.findOnPath(t,(c,u)=>{const f=ae(c,t),_=Mn(u,f);if(_)return _});return Sf(o,t,a,i,!0)}function Zb(e,t){const i=t._path;let s=null;e.syncPointTree_.foreachOnPath(i,(_,g)=>{const m=ae(_,i);s=s||Mn(g,m)});let o=e.syncPointTree_.get(i);o?s=s||Mn(o,mt()):(o=new Rf,e.syncPointTree_=e.syncPointTree_.set(i,o));const a=s!=null,c=a?new On(s,!0,!1):null,u=Po(e.pendingWriteTree_,t._path),f=Of(o,t,u,a?c.getNode():Y.EMPTY_NODE,a);return Eb(f)}function Ji(e,t){return Wf(t,e.syncPointTree_,null,Po(e.pendingWriteTree_,mt()))}function Wf(e,t,i,s){if(ct(e.path))return Hf(e,t,i,s);{const o=t.get(mt());i==null&&o!=null&&(i=Mn(o,mt()));let a=[];const c=it(e.path),u=e.operationForChild(c),f=t.children.get(c);if(f&&u){const _=i?i.getImmediateChild(c):null,g=kf(s,c);a=a.concat(Wf(u,f,_,g))}return o&&(a=a.concat(nc(o,e,s,i))),a}}function Hf(e,t,i,s){const o=t.get(mt());i==null&&o!=null&&(i=Mn(o,mt()));let a=[];return t.children.inorderTraversal((c,u)=>{const f=i?i.getImmediateChild(c):null,_=kf(s,c),g=e.operationForChild(c);g&&(a=a.concat(Hf(g,u,f,_)))}),o&&(a=a.concat(nc(o,e,s,i))),a}function Uf(e,t){const i=t.query,s=ro(e,i);return{hashFn:()=>(Tb(t)||Y.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?Wb(e,i._path,s):zb(e,i._path);{const a=Dy(o,i);return rl(e,i,null,a)}}}}function ro(e,t){const i=So(t);return e.queryToTagMap.get(i)}function So(e){return e._path.toString()+"$"+e._queryIdentifier}function sc(e,t){return e.tagToQueryMap.get(t)}function rc(e){const t=e.indexOf("$");return R(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Et(e.substr(0,t))}}function oc(e,t,i){const s=e.syncPointTree_.get(t);R(s,"Missing sync point for query tag that we're tracking");const o=Po(e.pendingWriteTree_,t);return nc(s,i,o,null)}function $b(e){return e.fold((t,i,s)=>{if(i&&Dn(i))return[Io(i)];{let o=[];return i&&(o=Df(i)),ie(s,(a,c)=>{o=o.concat(c)}),o}})}function As(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ob())(e._repo,e._path):e}function Vb(e,t){for(let i=0;i<t.length;++i){const s=t[i];if(!s._queryParams.loadsAllData()){const o=So(s),a=e.queryToTagMap.get(o);e.queryToTagMap.delete(o),e.tagToQueryMap.delete(a)}}}function jb(){return Db++}function qb(e,t,i){const s=t._path,o=ro(e,t),a=Uf(e,i),c=e.listenProvider_.startListening(As(t),o,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(s);if(o)R(!Dn(u.value),"If we're adding a query, it shouldn't be shadowed");else{const f=u.fold((_,g,m)=>{if(!ct(_)&&g&&Dn(g))return[Io(g).query];{let w=[];return g&&(w=w.concat(Df(g).map(E=>E.query))),ie(m,(E,A)=>{w=w.concat(A)}),w}});for(let _=0;_<f.length;++_){const g=f[_];e.listenProvider_.stopListening(As(g),ro(e,g))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new ac(i)}node(){return this.node_}}class lc{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=Bt(this.path_,t);return new lc(this.syncTree_,i)}node(){return ic(this.syncTree_,this.path_)}}const Gb=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Tu=function(e,t,i){if(!e||typeof e!="object")return e;if(R(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Kb(e[".sv"],t,i);if(typeof e[".sv"]=="object")return Yb(e[".sv"],t);R(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Kb=function(e,t,i){switch(e){case"timestamp":return i.timestamp;default:R(!1,"Unexpected server value: "+e)}},Yb=function(e,t,i){e.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;typeof s!="number"&&R(!1,"Unexpected increment value: "+s);const o=t.node();if(R(o!==null&&typeof o!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const c=o.getValue();return typeof c!="number"?s:c+s},Zf=function(e,t,i,s){return cc(t,new lc(i,e),s)},$f=function(e,t,i){return cc(e,new ac(t),i)};function cc(e,t,i){const s=e.getPriority().val(),o=Tu(s,t.getImmediateChild(".priority"),i);let a;if(e.isLeafNode()){const c=e,u=Tu(c.getValue(),t,i);return u!==c.getValue()||o!==c.getPriority().val()?new Kt(u,Vt(o)):e}else{const c=e;return a=c,o!==c.getPriority().val()&&(a=a.updatePriority(new Kt(o))),c.forEachChild(Ft,(u,f)=>{const _=cc(f,t.getImmediateChild(u),i);_!==f&&(a=a.updateImmediateChild(u,_))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t="",i=null,s={children:{},childCount:0}){this.name=t,this.parent=i,this.node=s}}function uc(e,t){let i=t instanceof Et?t:new Et(t),s=e,o=it(i);for(;o!==null;){const a=Fi(s.node.children,o)||{children:{},childCount:0};s=new hc(o,s,a),i=At(i),o=it(i)}return s}function ts(e){return e.node.value}function Vf(e,t){e.node.value=t,ol(e)}function jf(e){return e.node.childCount>0}function Qb(e){return ts(e)===void 0&&!jf(e)}function ko(e,t){ie(e.node.children,(i,s)=>{t(new hc(i,e,s))})}function qf(e,t,i,s){i&&!s&&t(e),ko(e,o=>{qf(o,t,!0,s)}),i&&s&&t(e)}function Xb(e,t,i){let s=i?e:e.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function Ys(e){return new Et(e.parent===null?e.name:Ys(e.parent)+"/"+e.name)}function ol(e){e.parent!==null&&Jb(e.parent,e.name,e)}function Jb(e,t,i){const s=Qb(i),o=Ke(e.node.children,t);s&&o?(delete e.node.children[t],e.node.childCount--,ol(e)):!s&&!o&&(e.node.children[t]=i.node,e.node.childCount++,ol(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=/[\[\].#$\/\u0000-\u001F\u007F]/,eC=/[\[\].#$\u0000-\u001F\u007F]/,Ia=10*1024*1024,dc=function(e){return typeof e=="string"&&e.length!==0&&!tC.test(e)},Gf=function(e){return typeof e=="string"&&e.length!==0&&!eC.test(e)},nC=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Gf(e)},iC=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Fl(e)||e&&typeof e=="object"&&Ke(e,".sv")},sC=function(e,t,i,s){s&&t===void 0||Lo(Co(e,"value"),t,i)},Lo=function(e,t,i){const s=i instanceof Et?new vw(i,e):i;if(t===void 0)throw new Error(e+"contains undefined "+qn(s));if(typeof t=="function")throw new Error(e+"contains a function "+qn(s)+" with contents = "+t.toString());if(Fl(t))throw new Error(e+"contains "+t.toString()+" "+qn(s));if(typeof t=="string"&&t.length>Ia/3&&xo(t)>Ia)throw new Error(e+"contains a string greater than "+Ia+" utf8 bytes "+qn(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,a=!1;if(ie(t,(c,u)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!dc(c)))throw new Error(e+" contains an invalid key ("+c+") "+qn(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yw(s,c),Lo(e,u,s),ww(s)}),o&&a)throw new Error(e+' contains ".value" child '+qn(s)+" in addition to actual children.")}},rC=function(e,t){let i,s;for(i=0;i<t.length;i++){s=t[i];const a=zs(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!dc(a[c]))throw new Error(e+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(gw);let o=null;for(i=0;i<t.length;i++){if(s=t[i],o!==null&&Ce(o,s))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}},oC=function(e,t,i,s){if(s&&t===void 0)return;const o=Co(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const a=[];ie(t,(c,u)=>{const f=new Et(c);if(Lo(o,u,Bt(i,f)),$l(f)===".priority"&&!iC(u))throw new Error(o+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),rC(o,a)},Kf=function(e,t,i,s){if(!(s&&i===void 0)&&!Gf(i))throw new Error(Co(e,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},aC=function(e,t,i,s){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Kf(e,t,i,s)},lC=function(e,t){if(it(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},cC=function(e,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!dc(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!nC(i))throw new Error(Co(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ao(e,t){let i=null;for(let s=0;s<t.length;s++){const o=t[s],a=o.getPath();i!==null&&!Vl(a,i.path)&&(e.eventLists_.push(i),i=null),i===null&&(i={events:[],path:a}),i.events.push(o)}i&&e.eventLists_.push(i)}function fc(e,t,i){Ao(e,i),Yf(e,s=>Vl(s,t))}function Ne(e,t,i){Ao(e,i),Yf(e,s=>Ce(s,t)||Ce(t,s))}function Yf(e,t){e.recursionDepth_++;let i=!0;for(let s=0;s<e.eventLists_.length;s++){const o=e.eventLists_[s];if(o){const a=o.path;t(a)?(uC(e.eventLists_[s]),e.eventLists_[s]=null):i=!1}}i&&(e.eventLists_=[]),e.recursionDepth_--}function uC(e){for(let t=0;t<e.events.length;t++){const i=e.events[t];if(i!==null){e.events[t]=null;const s=i.getEventRunner();ii&&ee("event: "+i.toString()),Xi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="repo_interrupt",fC=25;class _C{constructor(t,i,s,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qr(),this.transactionQueueTree_=new hc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pC(e,t,i){if(e.stats_=Hl(e.repoInfo_),e.forceRestClient_||Wy())e.server_=new Yr(e.repoInfo_,(s,o,a,c)=>{Eu(e,s,o,a,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Pu(e,!0),0);else{if(typeof i!="undefined"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{jt(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new fn(e.repoInfo_,t,(s,o,a,c)=>{Eu(e,s,o,a,c)},s=>{Pu(e,s)},s=>{gC(e,s)},e.authTokenProvider_,e.appCheckProvider_,i),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(s=>{e.server_.refreshAuthToken(s)}),e.appCheckProvider_.addTokenChangeListener(s=>{e.server_.refreshAppCheckToken(s.token)}),e.statsReporter_=qy(e.repoInfo_,()=>new qw(e.stats_,e.server_)),e.infoData_=new Uw,e.infoSyncTree_=new Cu({startListening:(s,o,a,c)=>{let u=[];const f=e.infoData_.getNode(s._path);return f.isEmpty()||(u=Ks(e.infoSyncTree_,s._path,f),setTimeout(()=>{c("ok")},0)),u},stopListening:()=>{}}),_c(e,"connected",!1),e.serverSyncTree_=new Cu({startListening:(s,o,a,c)=>(e.server_.listen(s,a,o,(u,f)=>{const _=c(u,f);Ne(e.eventQueue_,s._path,_)}),[]),stopListening:(s,o)=>{e.server_.unlisten(s,o)}})}function mC(e){const i=e.infoData_.getNode(new Et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Mo(e){return Gb({timestamp:mC(e)})}function Eu(e,t,i,s,o){e.dataUpdateCount++;const a=new Et(t);i=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,i):i;let c=[];if(o)if(s){const f=Vr(i,_=>Vt(_));c=Ub(e.serverSyncTree_,a,f,o)}else{const f=Vt(i);c=Hb(e.serverSyncTree_,a,f,o)}else if(s){const f=Vr(i,_=>Vt(_));c=Fb(e.serverSyncTree_,a,f)}else{const f=Vt(i);c=Ks(e.serverSyncTree_,a,f)}let u=a;c.length>0&&(u=$i(e,a)),Ne(e.eventQueue_,u,c)}function Pu(e,t){_c(e,"connected",t),t===!1&&bC(e)}function gC(e,t){ie(t,(i,s)=>{_c(e,i,s)})}function _c(e,t,i){const s=new Et("/.info/"+t),o=Vt(i);e.infoData_.updateSnapshot(s,o);const a=Ks(e.infoSyncTree_,s,o);Ne(e.eventQueue_,s,a)}function pc(e){return e.nextWriteId_++}function vC(e,t){const i=Zb(e.serverSyncTree_,t);return i!=null?Promise.resolve(i):e.server_.get(t).then(s=>{const o=Vt(s).withIndex(t._queryParams.getIndex()),a=Ks(e.serverSyncTree_,t._path,o);return fc(e.eventQueue_,t._path,a),Promise.resolve(o)},s=>(Qs(e,"get for query "+jt(t)+" failed: "+s),Promise.reject(new Error(s))))}function yC(e,t,i,s,o){Qs(e,"set",{path:t.toString(),value:i,priority:s});const a=Mo(e),c=Vt(i,s),u=ic(e.serverSyncTree_,t),f=$f(c,u,a),_=pc(e),g=zf(e.serverSyncTree_,t,f,_,!0);Ao(e.eventQueue_,g),e.server_.put(t.toString(),c.val(!0),(w,E)=>{const A=w==="ok";A||le("set at "+t+" failed: "+w);const O=In(e.serverSyncTree_,_,!A);Ne(e.eventQueue_,t,O),al(e,o,w,E)});const m=gc(e,t);$i(e,m),Ne(e.eventQueue_,m,[])}function wC(e,t,i,s){Qs(e,"update",{path:t.toString(),value:i});let o=!0;const a=Mo(e),c={};if(ie(i,(u,f)=>{o=!1,c[u]=Zf(Bt(t,u),Vt(f),e.serverSyncTree_,a)}),o)ee("update() called with empty data.  Don't do anything."),al(e,s,"ok",void 0);else{const u=pc(e),f=Bb(e.serverSyncTree_,t,c,u);Ao(e.eventQueue_,f),e.server_.merge(t.toString(),i,(_,g)=>{const m=_==="ok";m||le("update at "+t+" failed: "+_);const w=In(e.serverSyncTree_,u,!m),E=w.length>0?$i(e,t):t;Ne(e.eventQueue_,E,w),al(e,s,_,g)}),ie(i,_=>{const g=gc(e,Bt(t,_));$i(e,g)}),Ne(e.eventQueue_,t,[])}}function bC(e){Qs(e,"onDisconnectEvents");const t=Mo(e),i=Qr();Ja(e.onDisconnect_,mt(),(o,a)=>{const c=Zf(o,a,e.serverSyncTree_,t);Tf(i,o,c)});let s=[];Ja(i,mt(),(o,a)=>{s=s.concat(Ks(e.serverSyncTree_,o,a));const c=gc(e,o);$i(e,c)}),e.onDisconnect_=Qr(),Ne(e.eventQueue_,mt(),s)}function CC(e,t,i){let s;it(t._path)===".info"?s=xu(e.infoSyncTree_,t,i):s=xu(e.serverSyncTree_,t,i),fc(e.eventQueue_,t._path,s)}function Iu(e,t,i){let s;it(t._path)===".info"?s=rl(e.infoSyncTree_,t,i):s=rl(e.serverSyncTree_,t,i),fc(e.eventQueue_,t._path,s)}function xC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(dC)}function Qs(e,...t){let i="";e.persistentConnection_&&(i=e.persistentConnection_.id+":"),ee(i,...t)}function al(e,t,i,s){t&&Xi(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let a=o;s&&(a+=": "+s);const c=new Error(a);c.code=o,t(c)}})}function Qf(e,t,i){return ic(e.serverSyncTree_,t,i)||Y.EMPTY_NODE}function mc(e,t=e.transactionQueueTree_){if(t||No(e,t),ts(t)){const i=Jf(e,t);R(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&TC(e,Ys(t),i)}else jf(t)&&ko(t,i=>{mc(e,i)})}function TC(e,t,i){const s=i.map(_=>_.currentWriteId),o=Qf(e,t,s);let a=o;const c=o.hash();for(let _=0;_<i.length;_++){const g=i[_];R(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const m=ae(t,g.path);a=a.updateChild(m,g.currentOutputSnapshotRaw)}const u=a.val(!0),f=t;e.server_.put(f.toString(),u,_=>{Qs(e,"transaction put response",{path:f.toString(),status:_});let g=[];if(_==="ok"){const m=[];for(let w=0;w<i.length;w++)i[w].status=2,g=g.concat(In(e.serverSyncTree_,i[w].currentWriteId)),i[w].onComplete&&m.push(()=>i[w].onComplete(null,!0,i[w].currentOutputSnapshotResolved)),i[w].unwatcher();No(e,uc(e.transactionQueueTree_,t)),mc(e,e.transactionQueueTree_),Ne(e.eventQueue_,t,g);for(let w=0;w<m.length;w++)Xi(m[w])}else{if(_==="datastale")for(let m=0;m<i.length;m++)i[m].status===3?i[m].status=4:i[m].status=0;else{le("transaction at "+f.toString()+" failed: "+_);for(let m=0;m<i.length;m++)i[m].status=4,i[m].abortReason=_}$i(e,t)}},c)}function $i(e,t){const i=Xf(e,t),s=Ys(i),o=Jf(e,i);return EC(e,o,s),s}function EC(e,t,i){if(t.length===0)return;const s=[];let o=[];const c=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const f=t[u],_=ae(i,f.path);let g=!1,m;if(R(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,m=f.abortReason,o=o.concat(In(e.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=fC)g=!0,m="maxretry",o=o.concat(In(e.serverSyncTree_,f.currentWriteId,!0));else{const w=Qf(e,f.path,c);f.currentInputSnapshot=w;const E=t[u].update(w.val());if(E!==void 0){Lo("transaction failed: Data returned ",E,f.path);let A=Vt(E);typeof E=="object"&&E!=null&&Ke(E,".priority")||(A=A.updatePriority(w.getPriority()));const $=f.currentWriteId,et=Mo(e),Mt=$f(A,w,et);f.currentOutputSnapshotRaw=A,f.currentOutputSnapshotResolved=Mt,f.currentWriteId=pc(e),c.splice(c.indexOf($),1),o=o.concat(zf(e.serverSyncTree_,f.path,Mt,f.currentWriteId,f.applyLocally)),o=o.concat(In(e.serverSyncTree_,$,!0))}else g=!0,m="nodata",o=o.concat(In(e.serverSyncTree_,f.currentWriteId,!0))}Ne(e.eventQueue_,i,o),o=[],g&&(t[u].status=2,function(w){setTimeout(w,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(m==="nodata"?s.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):s.push(()=>t[u].onComplete(new Error(m),!1,null))))}No(e,e.transactionQueueTree_);for(let u=0;u<s.length;u++)Xi(s[u]);mc(e,e.transactionQueueTree_)}function Xf(e,t){let i,s=e.transactionQueueTree_;for(i=it(t);i!==null&&ts(s)===void 0;)s=uc(s,i),t=At(t),i=it(t);return s}function Jf(e,t){const i=[];return t_(e,t,i),i.sort((s,o)=>s.order-o.order),i}function t_(e,t,i){const s=ts(t);if(s)for(let o=0;o<s.length;o++)i.push(s[o]);ko(t,o=>{t_(e,o,i)})}function No(e,t){const i=ts(t);if(i){let s=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[s]=i[o],s++);i.length=s,Vf(t,i.length>0?i:void 0)}ko(t,s=>{No(e,s)})}function gc(e,t){const i=Ys(Xf(e,t)),s=uc(e.transactionQueueTree_,t);return Xb(s,o=>{Sa(e,o)}),Sa(e,s),qf(s,o=>{Sa(e,o)}),i}function Sa(e,t){const i=ts(t);if(i){const s=[];let o=[],a=-1;for(let c=0;c<i.length;c++)i[c].status===3||(i[c].status===1?(R(a===c-1,"All SENT items should be at beginning of queue."),a=c,i[c].status=3,i[c].abortReason="set"):(R(i[c].status===0,"Unexpected transaction status in abort"),i[c].unwatcher(),o=o.concat(In(e.serverSyncTree_,i[c].currentWriteId,!0)),i[c].onComplete&&s.push(i[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?Vf(t,void 0):i.length=a+1,Ne(e.eventQueue_,Ys(t),o);for(let c=0;c<s.length;c++)Xi(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(e){let t="";const i=e.split("/");for(let s=0;s<i.length;s++)if(i[s].length>0){let o=i[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function IC(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const i of e.split("&")){if(i.length===0)continue;const s=i.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):le(`Invalid query segment '${i}' in query '${e}'`)}return t}const Su=function(e,t){const i=SC(e),s=i.namespace;i.domain==="firebase.com"&&oi(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&i.domain!=="localhost"&&oi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||Ay();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new $y(i.host,i.secure,s,t,o,"",s!==i.subdomain),path:new Et(i.pathString)}},SC=function(e){let t="",i="",s="",o="",a="",c=!0,u="https",f=443;if(typeof e=="string"){let _=e.indexOf("//");_>=0&&(u=e.substring(0,_-1),e=e.substring(_+2));let g=e.indexOf("/");g===-1&&(g=e.length);let m=e.indexOf("?");m===-1&&(m=e.length),t=e.substring(0,Math.min(g,m)),g<m&&(o=PC(e.substring(g,m)));const w=IC(e.substring(Math.min(e.length,m)));_=t.indexOf(":"),_>=0?(c=u==="https"||u==="wss",f=parseInt(t.substring(_+1),10)):_=t.length;const E=t.slice(0,_);if(E.toLowerCase()==="localhost")i="localhost";else if(E.split(".").length<=2)i=E;else{const A=t.indexOf(".");s=t.substring(0,A).toLowerCase(),i=t.substring(A+1),a=s}"ns"in w&&(a=w.ns)}return{host:t,port:f,domain:i,subdomain:s,secure:c,scheme:u,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(t,i,s,o){this.eventType=t,this.eventRegistration=i,this.snapshot=s,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+jt(this.snapshot.exportVal())}}class n_{constructor(t,i,s){this.eventRegistration=t,this.error=i,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,i,s,o){this._repo=t,this._path=i,this._queryParams=s,this._orderByCalled=o}get key(){return ct(this._path)?null:$l(this._path)}get ref(){return new Ye(this._repo,this._path)}get _queryIdentifier(){const t=du(this._queryParams),i=zl(t);return i==="{}"?"default":i}get _queryObject(){return du(this._queryParams)}isEqual(t){if(t=Qi(t),!(t instanceof vc))return!1;const i=this._repo===t._repo,s=Vl(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+mw(this._path)}}class Ye extends vc{constructor(t,i){super(t,i,new Kl,!1)}get parent(){const t=mf(this._path);return t===null?null:new Ye(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Vi{constructor(t,i,s){this._node=t,this.ref=i,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Et(t),s=oo(this.ref,t);return new Vi(this._node.getChild(i),s,Ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>t(new Vi(o,oo(this.ref,s),Ft)))}hasChild(t){const i=new Et(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function $e(e,t){return e=Qi(e),e._checkNotDeleted("ref"),t!==void 0?oo(e._root,t):e._root}function oo(e,t){return e=Qi(e),it(e._path)===null?aC("child","path",t,!1):Kf("child","path",t,!1),new Ye(e._repo,Bt(e._path,t))}function i_(e,t){e=Qi(e),lC("set",e._path),sC("set",t,e._path,!1);const i=new pn;return yC(e._repo,e._path,t,null,i.wrapCallback(()=>{})),i.promise}function ll(e,t){oC("update",t,e._path,!1);const i=new pn;return wC(e._repo,e._path,t,i.wrapCallback(()=>{})),i.promise}function Rr(e){return e=Qi(e),vC(e._repo,e).then(t=>new Vi(t,new Ye(e._repo,e._path),e._queryParams.getIndex()))}class yc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const s=i._queryParams.getIndex();return new e_("value",this,new Vi(t.snapshotNode,new Ye(i._repo,i._path),s))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new n_(this,t,i):null}matches(t){return t instanceof yc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class wc{constructor(t,i){this.eventType=t,this.callbackContext=i}respondsTo(t){let i=t==="children_added"?"child_added":t;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new n_(this,t,i):null}createEvent(t,i){R(t.childName!=null,"Child events should have a childName.");const s=oo(new Ye(i._repo,i._path),t.childName),o=i._queryParams.getIndex();return new e_(t.type,this,new Vi(t.snapshotNode,s,o),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof wc?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function LC(e,t,i,s,o){let a;if(typeof s=="object"&&(a=void 0,o=s),typeof s=="function"&&(a=s),o&&o.onlyOnce){const f=i,_=(g,m)=>{Iu(e._repo,e,u),f(g,m)};_.userCallback=i.userCallback,_.context=i.context,i=_}const c=new kC(i,a||void 0),u=t==="value"?new yc(c):new wc(t,c);return CC(e._repo,e,u),()=>Iu(e._repo,e,u)}function AC(e,t,i,s){return LC(e,"value",t,i,s)}kb(Ye);Rb(Ye);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="FIREBASE_DATABASE_EMULATOR_HOST",cl={};let NC=!1;function RC(e,t,i,s,o){let a=s||e.options.databaseURL;a===void 0&&(e.options.projectId||oi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ee("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=Su(a,o),u=c.repoInfo,f,_;typeof process!="undefined"&&(_=process.env[MC]),_?(f=!0,a=`http://${_}?ns=${u.namespace}`,c=Su(a,o),u=c.repoInfo):f=!c.repoInfo.secure;const g=o&&f?new Ya(Ya.OWNER):new Uy(e.name,e.options,t);cC("Invalid Firebase Database URL",c),ct(c.path)||oi("Database URL must point to the root of a Firebase Database (not including a child path).");const m=DC(u,e,g,new Hy(e.name,i));return new BC(m,e)}function OC(e,t){const i=cl[t];(!i||i[e.key]!==e)&&oi(`Database ${t}(${e.repoInfo_}) has already been deleted.`),xC(e),delete i[e.key]}function DC(e,t,i,s){let o=cl[t.name];o||(o={},cl[t.name]=o);let a=o[e.toURLString()];return a&&oi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new _C(e,NC,i,s),o[e.toURLString()]=a,a}class BC{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ye(this._repo,mt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(OC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&oi("Cannot call "+t+" on a deleted database.")}}function s_(e=Vd(),t){return Bl(e,"database").getImmediate({identifier:t})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(e){Py(_y),zi(new si("database",(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return RC(s,o,a,i)},"PUBLIC").setMultipleInstances(!0)),ni(Kh,Yh,e),ni(Kh,Yh,"esm2017")}fn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};fn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};FC();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=new Map,zC={activated:!1,tokenObservers:[]},WC={initialized:!1,enabled:!1};function re(e){return r_.get(e)||zC}function mn(e,t){r_.set(e,t)}function Ro(){return WC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="https://content-firebaseappcheck.googleapis.com/v1beta",HC="exchangeRecaptchaToken",UC="exchangeDebugToken",ku={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ZC=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,i,s,o,a){if(this.operation=t,this.retryPolicy=i,this.getWaitDuration=s,this.lowerBound=o,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=o,o>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new pn,await VC(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new pn,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}}function VC(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},_e=new Rl("appCheck","AppCheck",jC);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function a_(e){if(!re(e).activated)throw _e.create("use-before-activation",{appName:e.name})}function qC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function l_(e){const t=Math.round(e/1e3),i=Math.floor(t/(3600*24)),s=Math.floor((t-i*3600*24)/3600),o=Math.floor((t-i*3600*24-s*3600)/60),a=t-i*3600*24-s*3600-o*60;let c="";return i&&(c+=Sr(i)+"d:"),s&&(c+=Sr(s)+"h:"),c+=Sr(o)+"m:"+Sr(a)+"s",c}function Sr(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_({url:e,body:t},i){const s={"Content-Type":"application/json"},o=i.getImmediate({optional:!0});if(o){const m=await o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}const a={method:"POST",body:JSON.stringify(t),headers:s};let c;try{c=await fetch(e,a)}catch(m){throw _e.create("fetch-network-error",{originalErrorMessage:m.message})}if(c.status!==200)throw _e.create("fetch-status-error",{httpStatus:c.status});let u;try{u=await c.json()}catch(m){throw _e.create("fetch-parse-error",{originalErrorMessage:m.message})}const f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw _e.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const _=Number(f[1])*1e3,g=Date.now();return{token:u.attestationToken,expireTimeMillis:g+_,issuedAtTimeMillis:g}}function GC(e,t){const{projectId:i,appId:s,apiKey:o}=e.options;return{url:`${o_}/projects/${i}/apps/${s}:${HC}?key=${o}`,body:{recaptcha_token:t}}}function KC(e,t){const{projectId:i,appId:s,apiKey:o}=e.options;return{url:`${o_}/projects/${i}/apps/${s}:${UC}?key=${o}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="firebase-app-check-database",QC=1,$s="firebase-app-check-store",h_="debug-token";let kr=null;function u_(){return kr||(kr=new Promise((e,t)=>{try{const i=indexedDB.open(YC,QC);i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{var o;t(_e.create("storage-open",{originalErrorMessage:(o=s.target.error)===null||o===void 0?void 0:o.message}))},i.onupgradeneeded=s=>{const o=s.target.result;switch(s.oldVersion){case 0:o.createObjectStore($s,{keyPath:"compositeKey"})}}}catch(i){t(_e.create("storage-open",{originalErrorMessage:i.message}))}}),kr)}function XC(e){return f_(__(e))}function JC(e,t){return d_(__(e),t)}function tx(e){return d_(h_,e)}function ex(){return f_(h_)}async function d_(e,t){const s=(await u_()).transaction($s,"readwrite"),a=s.objectStore($s).put({compositeKey:e,value:t});return new Promise((c,u)=>{a.onsuccess=f=>{c()},s.onerror=f=>{var _;u(_e.create("storage-set",{originalErrorMessage:(_=f.target.error)===null||_===void 0?void 0:_.message}))}})}async function f_(e){const i=(await u_()).transaction($s,"readonly"),o=i.objectStore($s).get(e);return new Promise((a,c)=>{o.onsuccess=u=>{const f=u.target.result;a(f?f.value:void 0)},i.onerror=u=>{var f;c(_e.create("storage-get",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})}function __(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Ol("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(e){if(Ml()){let t;try{t=await XC(e)}catch(i){Vs.warn(`Failed to read token from IndexedDB. Error: ${i}`)}return t}}function Au(e,t){return Ml()?JC(e,t).catch(i=>{Vs.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}async function ix(){let e;try{e=await ex()}catch{}if(e)return e;{const t=qC();return tx(t).catch(i=>Vs.warn(`Failed to persist debug token to IndexedDB. Error: ${i}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){return Ro().enabled}async function m_(){const e=Ro();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function sx(){const e=_v(),t=Ro();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const i=new pn;t.token=i,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?i.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):i.resolve(ix())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={error:"UNKNOWN_ERROR"};function ox(e){return bo.encodeString(JSON.stringify(e),!1)}async function hl(e,t=!1){const i=e.app;a_(i);const s=re(i);let o=s.token,a;if(!o){const f=await s.cachedTokenPromise;f&&ao(f)&&(o=f)}if(!t&&o&&ao(o))return{token:o.token};let c=!1;if(p_()){s.exchangeTokenPromise||(s.exchangeTokenPromise=c_(KC(i,await m_()),e.heartbeatServiceProvider).then(_=>(s.exchangeTokenPromise=void 0,_)),c=!0);const f=await s.exchangeTokenPromise;return await Au(i,f),mn(i,Object.assign(Object.assign({},s),{token:f})),{token:f.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(f=>(s.exchangeTokenPromise=void 0,f)),c=!0),o=await s.exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"?Vs.warn(f.message):Vs.error(f),a=f}let u;return o?(u={token:o.token},mn(i,Object.assign(Object.assign({},s),{token:o})),await Au(i,o)):u=lx(a),c&&y_(i,u),u}function g_(e,t,i,s){const{app:o}=e,a=re(o),c={next:i,error:s,type:t};if(mn(o,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&ao(a.token)){const u=a.token;Promise.resolve().then(()=>{i({token:u.token}),Mu(e)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Mu(e))}function v_(e,t){const i=re(e),s=i.tokenObservers.filter(o=>o.next!==t);s.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),mn(e,Object.assign(Object.assign({},i),{tokenObservers:s}))}function Mu(e){const{app:t}=e,i=re(t);let s=i.tokenRefresher;s||(s=ax(e),mn(t,Object.assign(Object.assign({},i),{tokenRefresher:s}))),!s.isRunning()&&i.isTokenAutoRefreshEnabled&&s.start()}function ax(e){const{app:t}=e;return new $C(async()=>{const i=re(t);let s;if(i.token?s=await hl(e,!0):s=await hl(e),s.error)throw s.error},()=>!0,()=>{const i=re(t);if(i.token){let s=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5;const o=i.token.expireTimeMillis-5*60*1e3;return s=Math.min(s,o),Math.max(0,s-Date.now())}else return 0},ku.RETRIAL_MIN_WAIT,ku.RETRIAL_MAX_WAIT)}function y_(e,t){const i=re(e).tokenObservers;for(const s of i)try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}function ao(e){return e.expireTimeMillis-Date.now()>0}function lx(e){return{token:ox(rx),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(t,i){this.app=t,this.heartbeatServiceProvider=i}_delete(){const{tokenObservers:t}=re(this.app);for(const i of t)v_(this.app,i.next);return Promise.resolve()}}function hx(e,t){return new cx(e,t)}function ux(e){return{getToken:t=>hl(e,t),addTokenListener:t=>g_(e,"INTERNAL",t),removeTokenListener:t=>v_(e.app,t)}}const dx="@firebase/app-check",fx="0.5.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="https://www.google.com/recaptcha/api.js";function px(e,t){const i=re(e),s=new pn;mn(e,Object.assign(Object.assign({},i),{reCAPTCHAState:{initialized:s}}));const o=mx(e),a=Lu(!1);return a?Nu(e,t,a,o,s):yx(()=>{const c=Lu(!1);if(!c)throw new Error("no recaptcha");Nu(e,t,c,o,s)}),s.promise}function Nu(e,t,i,s,o){i.ready(()=>{vx(e,t,i,s),o.resolve(i)})}function mx(e){const t=`fire_app_check_${e.name}`,i=document.createElement("div");return i.id=t,i.style.display="none",document.body.appendChild(i),t}async function gx(e){a_(e);const i=await re(e).reCAPTCHAState.initialized.promise;return new Promise((s,o)=>{const a=re(e).reCAPTCHAState;i.ready(()=>{s(i.execute(a.widgetId,{action:"fire_app_check"}))})})}function vx(e,t,i,s){const o=i.render(s,{sitekey:t,size:"invisible"}),a=re(e);mn(e,Object.assign(Object.assign({},a),{reCAPTCHAState:Object.assign(Object.assign({},a.reCAPTCHAState),{widgetId:o})}))}function yx(e){const t=document.createElement("script");t.src=_x,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t;bx(this._throttleData);const i=await gx(this._app).catch(o=>{throw _e.create("recaptcha-error")});let s;try{s=await c_(GC(this._app,i),this._heartbeatServiceProvider)}catch(o){throw o.code==="fetch-status-error"?(this._throttleData=wx(Number((t=o.customData)===null||t===void 0?void 0:t.httpStatus),this._throttleData),_e.create("throttled",{time:l_(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=Bl(t,"heartbeat"),px(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Oo?this._siteKey===t._siteKey:!1}}function wx(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+ZC,httpStatus:e};{const i=t?t.backoffCount:0,s=Iv(i,1e3,2);return{backoffCount:i+1,allowRequestsAfter:Date.now()+s,httpStatus:e}}}function bx(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw _e.create("throttled",{time:l_(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(e=Vd(),t){e=Qi(e);const i=Bl(e,"app-check");if(Ro().initialized||sx(),p_()&&m_().then(o=>console.log(`App Check debug token: ${o}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),i.isInitialized()){const o=i.getImmediate(),a=i.getOptions();if(a.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&a.provider.isEqual(t.provider))return o;throw _e.create("already-initialized",{appName:e.name})}const s=i.initialize({options:t});return Cx(e,t.provider,t.isTokenAutoRefreshEnabled),re(e).isTokenAutoRefreshEnabled&&g_(s,"INTERNAL",()=>{}),s}function Cx(e,t,i){const s=re(e),o=Object.assign(Object.assign({},s),{activated:!0});o.provider=t,o.cachedTokenPromise=nx(e).then(a=>(a&&ao(a)&&(mn(e,Object.assign(Object.assign({},re(e)),{token:a})),y_(e,{token:a.token})),a)),o.isTokenAutoRefreshEnabled=i===void 0?e.automaticDataCollectionEnabled:i,mn(e,o),o.provider.initialize(e)}const xx="app-check",Ru="app-check-internal";function Tx(){zi(new si(xx,e=>{const t=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat");return hx(t,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider(Ru).initialize()})),zi(new si(Ru,e=>{const t=e.getProvider("app-check").getImmediate();return ux(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ni(dx,fx)}Tx();var Ex=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ul={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(i,s){s(t)})(Ex,function(i){var s="1.7.1";function o(n){var r,l,h,d;for(l=1,h=arguments.length;l<h;l++){d=arguments[l];for(r in d)n[r]=d[r]}return n}var a=Object.create||function(){function n(){}return function(r){return n.prototype=r,new n}}();function c(n,r){var l=Array.prototype.slice;if(n.bind)return n.bind.apply(n,l.call(arguments,1));var h=l.call(arguments,2);return function(){return n.apply(r,h.length?h.concat(l.call(arguments)):arguments)}}var u=0;function f(n){return n._leaflet_id=n._leaflet_id||++u,n._leaflet_id}function _(n,r,l){var h,d,p,y;return y=function(){h=!1,d&&(p.apply(l,d),d=!1)},p=function(){h?d=arguments:(n.apply(l,arguments),setTimeout(y,r),h=!0)},p}function g(n,r,l){var h=r[1],d=r[0],p=h-d;return n===h&&l?n:((n-d)%p+p)%p+d}function m(){return!1}function w(n,r){var l=Math.pow(10,r===void 0?6:r);return Math.round(n*l)/l}function E(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function A(n){return E(n).split(/\s+/)}function O(n,r){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?a(n.options):{});for(var l in r)n.options[l]=r[l];return n.options}function $(n,r,l){var h=[];for(var d in n)h.push(encodeURIComponent(l?d.toUpperCase():d)+"="+encodeURIComponent(n[d]));return(!r||r.indexOf("?")===-1?"?":"&")+h.join("&")}var et=/\{ *([\w_-]+) *\}/g;function Mt(n,r){return n.replace(et,function(l,h){var d=r[h];if(d===void 0)throw new Error("No value provided for variable "+l);return typeof d=="function"&&(d=d(r)),d})}var q=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function tt(n,r){for(var l=0;l<n.length;l++)if(n[l]===r)return l;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Xt(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var j=0;function H(n){var r=+new Date,l=Math.max(0,16-(r-j));return j=r+l,window.setTimeout(n,l)}var U=window.requestAnimationFrame||Xt("RequestAnimationFrame")||H,Jt=window.cancelAnimationFrame||Xt("CancelAnimationFrame")||Xt("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function vt(n,r,l){if(l&&U===H)n.call(r);else return U.call(window,c(n,r))}function It(n){n&&Jt.call(window,n)}var vn={extend:o,create:a,bind:c,lastId:u,stamp:f,throttle:_,wrapNum:g,falseFn:m,formatNum:w,trim:E,splitWords:A,setOptions:O,getParamString:$,template:Mt,isArray:q,indexOf:tt,emptyImageUrl:X,requestFn:U,cancelFn:Jt,requestAnimFrame:vt,cancelAnimFrame:It};function me(){}me.extend=function(n){var r=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=r.__super__=this.prototype,h=a(l);h.constructor=r,r.prototype=h;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(r[d]=this[d]);return n.statics&&(o(r,n.statics),delete n.statics),n.includes&&(es(n.includes),o.apply(null,[h].concat(n.includes)),delete n.includes),h.options&&(n.options=o(a(h.options),n.options)),o(h,n),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,y=h._initHooks.length;p<y;p++)h._initHooks[p].call(this)}},r},me.include=function(n){return o(this.prototype,n),this},me.mergeOptions=function(n){return o(this.prototype.options,n),this},me.addInitHook=function(n){var r=Array.prototype.slice.call(arguments,1),l=typeof n=="function"?n:function(){this[n].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function es(n){if(!(typeof L=="undefined"||!L||!L.Mixin)){n=q(n)?n:[n];for(var r=0;r<n.length;r++)n[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var bt={on:function(n,r,l){if(typeof n=="object")for(var h in n)this._on(h,n[h],r);else{n=A(n);for(var d=0,p=n.length;d<p;d++)this._on(n[d],r,l)}return this},off:function(n,r,l){if(!n)delete this._events;else if(typeof n=="object")for(var h in n)this._off(h,n[h],r);else{n=A(n);for(var d=0,p=n.length;d<p;d++)this._off(n[d],r,l)}return this},_on:function(n,r,l){this._events=this._events||{};var h=this._events[n];h||(h=[],this._events[n]=h),l===this&&(l=void 0);for(var d={fn:r,ctx:l},p=h,y=0,C=p.length;y<C;y++)if(p[y].fn===r&&p[y].ctx===l)return;p.push(d)},_off:function(n,r,l){var h,d,p;if(!!this._events&&(h=this._events[n],!!h)){if(!r){for(d=0,p=h.length;d<p;d++)h[d].fn=m;delete this._events[n];return}if(l===this&&(l=void 0),h)for(d=0,p=h.length;d<p;d++){var y=h[d];if(y.ctx===l&&y.fn===r){y.fn=m,this._firingCount&&(this._events[n]=h=h.slice()),h.splice(d,1);return}}}},fire:function(n,r,l){if(!this.listens(n,l))return this;var h=o({},r,{type:n,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var d=this._events[n];if(d){this._firingCount=this._firingCount+1||1;for(var p=0,y=d.length;p<y;p++){var C=d[p];C.fn.call(C.ctx||this,h)}this._firingCount--}}return l&&this._propagateEvent(h),this},listens:function(n,r){var l=this._events&&this._events[n];if(l&&l.length)return!0;if(r){for(var h in this._eventParents)if(this._eventParents[h].listens(n,r))return!0}return!1},once:function(n,r,l){if(typeof n=="object"){for(var h in n)this.once(h,n[h],r);return this}var d=c(function(){this.off(n,r,l).off(n,d,l)},this);return this.on(n,r,l).on(n,d,l)},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[f(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[f(n)],this},_propagateEvent:function(n){for(var r in this._eventParents)this._eventParents[r].fire(n.type,o({layer:n.target,propagatedFrom:n.target},n),!0)}};bt.addEventListener=bt.on,bt.removeEventListener=bt.clearAllEventListeners=bt.off,bt.addOneTimeEventListener=bt.once,bt.fireEvent=bt.fire,bt.hasEventListeners=bt.listens;var Ct=me.extend(bt);function W(n,r,l){this.x=l?Math.round(n):n,this.y=l?Math.round(r):r}var ge=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(n){return this.clone()._add(ot(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(ot(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new W(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new W(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ge(this.x),this.y=ge(this.y),this},distanceTo:function(n){n=ot(n);var r=n.x-this.x,l=n.y-this.y;return Math.sqrt(r*r+l*l)},equals:function(n){return n=ot(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=ot(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function ot(n,r,l){return n instanceof W?n:q(n)?new W(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new W(n.x,n.y):new W(n,r,l)}function yt(n,r){if(!!n)for(var l=r?[n,r]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}yt.prototype={extend:function(n){return n=ot(n),!this.min&&!this.max?(this.min=n.clone(),this.max=n.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(n){return new W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new W(this.min.x,this.max.y)},getTopRight:function(){return new W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var r,l;return typeof n[0]=="number"||n instanceof W?n=ot(n):n=Gt(n),n instanceof yt?(r=n.min,l=n.max):r=l=n,r.x>=this.min.x&&l.x<=this.max.x&&r.y>=this.min.y&&l.y<=this.max.y},intersects:function(n){n=Gt(n);var r=this.min,l=this.max,h=n.min,d=n.max,p=d.x>=r.x&&h.x<=l.x,y=d.y>=r.y&&h.y<=l.y;return p&&y},overlaps:function(n){n=Gt(n);var r=this.min,l=this.max,h=n.min,d=n.max,p=d.x>r.x&&h.x<l.x,y=d.y>r.y&&h.y<l.y;return p&&y},isValid:function(){return!!(this.min&&this.max)}};function Gt(n,r){return!n||n instanceof yt?n:new yt(n,r)}function Rt(n,r){if(!!n)for(var l=r?[n,r]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}Rt.prototype={extend:function(n){var r=this._southWest,l=this._northEast,h,d;if(n instanceof wt)h=n,d=n;else if(n instanceof Rt){if(h=n._southWest,d=n._northEast,!h||!d)return this}else return n?this.extend(Nt(n)||zt(n)):this;return!r&&!l?(this._southWest=new wt(h.lat,h.lng),this._northEast=new wt(d.lat,d.lng)):(r.lat=Math.min(h.lat,r.lat),r.lng=Math.min(h.lng,r.lng),l.lat=Math.max(d.lat,l.lat),l.lng=Math.max(d.lng,l.lng)),this},pad:function(n){var r=this._southWest,l=this._northEast,h=Math.abs(r.lat-l.lat)*n,d=Math.abs(r.lng-l.lng)*n;return new Rt(new wt(r.lat-h,r.lng-d),new wt(l.lat+h,l.lng+d))},getCenter:function(){return new wt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new wt(this.getNorth(),this.getWest())},getSouthEast:function(){return new wt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof wt||"lat"in n?n=Nt(n):n=zt(n);var r=this._southWest,l=this._northEast,h,d;return n instanceof Rt?(h=n.getSouthWest(),d=n.getNorthEast()):h=d=n,h.lat>=r.lat&&d.lat<=l.lat&&h.lng>=r.lng&&d.lng<=l.lng},intersects:function(n){n=zt(n);var r=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>=r.lat&&h.lat<=l.lat,y=d.lng>=r.lng&&h.lng<=l.lng;return p&&y},overlaps:function(n){n=zt(n);var r=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>r.lat&&h.lat<l.lat,y=d.lng>r.lng&&h.lng<l.lng;return p&&y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,r){return n?(n=zt(n),this._southWest.equals(n.getSouthWest(),r)&&this._northEast.equals(n.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function zt(n,r){return n instanceof Rt?n:new Rt(n,r)}function wt(n,r,l){if(isNaN(n)||isNaN(r))throw new Error("Invalid LatLng object: ("+n+", "+r+")");this.lat=+n,this.lng=+r,l!==void 0&&(this.alt=+l)}wt.prototype={equals:function(n,r){if(!n)return!1;n=Nt(n);var l=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return l<=(r===void 0?1e-9:r)},toString:function(n){return"LatLng("+w(this.lat,n)+", "+w(this.lng,n)+")"},distanceTo:function(n){return de.distance(this,Nt(n))},wrap:function(){return de.wrapLatLng(this)},toBounds:function(n){var r=180*n/40075017,l=r/Math.cos(Math.PI/180*this.lat);return zt([this.lat-r,this.lng-l],[this.lat+r,this.lng+l])},clone:function(){return new wt(this.lat,this.lng,this.alt)}};function Nt(n,r,l){return n instanceof wt?n:q(n)&&typeof n[0]!="object"?n.length===3?new wt(n[0],n[1],n[2]):n.length===2?new wt(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new wt(n.lat,"lng"in n?n.lng:n.lon,n.alt):r===void 0?null:new wt(n,r,l)}var $t={latLngToPoint:function(n,r){var l=this.projection.project(n),h=this.scale(r);return this.transformation._transform(l,h)},pointToLatLng:function(n,r){var l=this.scale(r),h=this.transformation.untransform(n,l);return this.projection.unproject(h)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var r=this.projection.bounds,l=this.scale(n),h=this.transformation.transform(r.min,l),d=this.transformation.transform(r.max,l);return new yt(h,d)},infinite:!1,wrapLatLng:function(n){var r=this.wrapLng?g(n.lng,this.wrapLng,!0):n.lng,l=this.wrapLat?g(n.lat,this.wrapLat,!0):n.lat,h=n.alt;return new wt(l,r,h)},wrapLatLngBounds:function(n){var r=n.getCenter(),l=this.wrapLatLng(r),h=r.lat-l.lat,d=r.lng-l.lng;if(h===0&&d===0)return n;var p=n.getSouthWest(),y=n.getNorthEast(),C=new wt(p.lat-h,p.lng-d),x=new wt(y.lat-h,y.lng-d);return new Rt(C,x)}},de=o({},$t,{wrapLng:[-180,180],R:6371e3,distance:function(n,r){var l=Math.PI/180,h=n.lat*l,d=r.lat*l,p=Math.sin((r.lat-n.lat)*l/2),y=Math.sin((r.lng-n.lng)*l/2),C=p*p+Math.cos(h)*Math.cos(d)*y*y,x=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*x}}),ns=6378137,Re={R:ns,MAX_LATITUDE:85.0511287798,project:function(n){var r=Math.PI/180,l=this.MAX_LATITUDE,h=Math.max(Math.min(l,n.lat),-l),d=Math.sin(h*r);return new W(this.R*n.lng*r,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(n){var r=180/Math.PI;return new wt((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*r,n.x*r/this.R)},bounds:function(){var n=ns*Math.PI;return new yt([-n,-n],[n,n])}()};function Bn(n,r,l,h){if(q(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=r,this._c=l,this._d=h}Bn.prototype={transform:function(n,r){return this._transform(n.clone(),r)},_transform:function(n,r){return r=r||1,n.x=r*(this._a*n.x+this._b),n.y=r*(this._c*n.y+this._d),n},untransform:function(n,r){return r=r||1,new W((n.x/r-this._b)/this._a,(n.y/r-this._d)/this._c)}};function Qe(n,r,l,h){return new Bn(n,r,l,h)}var v=o({},de,{code:"EPSG:3857",projection:Re,transformation:function(){var n=.5/(Math.PI*Re.R);return Qe(n,.5,-n,.5)}()}),b=o({},v,{code:"EPSG:900913"});function T(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function S(n,r){var l="",h,d,p,y,C,x;for(h=0,p=n.length;h<p;h++){for(C=n[h],d=0,y=C.length;d<y;d++)x=C[d],l+=(d?"L":"M")+x.x+" "+x.y;l+=r?Js?"z":"x":""}return l||"M0 0"}var I=document.documentElement.style,N="ActiveXObject"in window,B=N&&!document.addEventListener,M="msLaunchUri"in navigator&&!("documentMode"in document),D=Be("webkit"),k=Be("android"),V=Be("android 2")||Be("android 3"),Z=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),G=k&&Be("Google")&&Z<537&&!("AudioNode"in window),Q=!!window.opera,at=!M&&Be("chrome"),xt=Be("gecko")&&!D&&!Q&&!N,dt=!at&&Be("safari"),Tt=Be("phantom"),ce="OTransition"in I,Xe=navigator.platform.indexOf("Win")===0,di=N&&"transition"in I,Je="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!V,is="MozPerspective"in I,St=!window.L_DISABLE_3D&&(di||Je||is)&&!ce&&!Tt,te=typeof orientation!="undefined"||Be("mobile"),Xs=te&&D,b_=te&&Je,yn=!window.PointerEvent&&window.MSPointerEvent,Oe=!!(window.PointerEvent||yn),De=!window.L_NO_TOUCH&&(Oe||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),bc=te&&Q,C_=te&&xt,wn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,fi=function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",m,r),window.removeEventListener("testPassiveEventSupport",m,r)}catch{}return n}(),Cc=function(){return!!document.createElement("canvas").getContext}(),Js=!!(document.createElementNS&&T("svg").createSVGRect),tr=!Js&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var r=n.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}();function Be(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var x_={ie:N,ielt9:B,edge:M,webkit:D,android:k,android23:V,androidStock:G,opera:Q,chrome:at,gecko:xt,safari:dt,phantom:Tt,opera12:ce,win:Xe,ie3d:di,webkit3d:Je,gecko3d:is,any3d:St,mobile:te,mobileWebkit:Xs,mobileWebkit3d:b_,msPointer:yn,pointer:Oe,touch:De,mobileOpera:bc,mobileGecko:C_,retina:wn,passiveEvents:fi,canvas:Cc,svg:Js,vml:tr},Do=yn?"MSPointerDown":"pointerdown",Bo=yn?"MSPointerMove":"pointermove",Fo=yn?"MSPointerUp":"pointerup",zo=yn?"MSPointerCancel":"pointercancel",_i={},xc=!1;function T_(n,r,l,h){return r==="touchstart"?P_(n,l,h):r==="touchmove"?k_(n,l,h):r==="touchend"&&L_(n,l,h),this}function E_(n,r,l){var h=n["_leaflet_"+r+l];return r==="touchstart"?n.removeEventListener(Do,h,!1):r==="touchmove"?n.removeEventListener(Bo,h,!1):r==="touchend"&&(n.removeEventListener(Fo,h,!1),n.removeEventListener(zo,h,!1)),this}function P_(n,r,l){var h=c(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&ye(d),Wo(d,r)});n["_leaflet_touchstart"+l]=h,n.addEventListener(Do,h,!1),xc||(document.addEventListener(Do,I_,!0),document.addEventListener(Bo,S_,!0),document.addEventListener(Fo,Tc,!0),document.addEventListener(zo,Tc,!0),xc=!0)}function I_(n){_i[n.pointerId]=n}function S_(n){_i[n.pointerId]&&(_i[n.pointerId]=n)}function Tc(n){delete _i[n.pointerId]}function Wo(n,r){n.touches=[];for(var l in _i)n.touches.push(_i[l]);n.changedTouches=[n],r(n)}function k_(n,r,l){var h=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||Wo(d,r)};n["_leaflet_touchmove"+l]=h,n.addEventListener(Bo,h,!1)}function L_(n,r,l){var h=function(d){Wo(d,r)};n["_leaflet_touchend"+l]=h,n.addEventListener(Fo,h,!1),n.addEventListener(zo,h,!1)}var er=yn?"MSPointerDown":Oe?"pointerdown":"touchstart",nr=yn?"MSPointerUp":Oe?"pointerup":"touchend",pi="_leaflet_";function A_(n,r,l){var h,d,p=!1,y=250;function C(P){if(Oe){if(!P.isPrimary||P.pointerType==="mouse")return}else if(P.touches.length>1)return;var F=Date.now(),K=F-(h||F);d=P.touches?P.touches[0]:P,p=K>0&&K<=y,h=F}function x(P){if(p&&!d.cancelBubble){if(Oe){if(P.pointerType==="mouse")return;var F={},K,_t;for(_t in d)K=d[_t],F[_t]=K&&K.bind?K.bind(d):K;d=F}d.type="dblclick",d.button=0,r(d),h=null}}return n[pi+er+l]=C,n[pi+nr+l]=x,n[pi+"dblclick"+l]=r,n.addEventListener(er,C,fi?{passive:!1}:!1),n.addEventListener(nr,x,fi?{passive:!1}:!1),n.addEventListener("dblclick",r,!1),this}function M_(n,r){var l=n[pi+er+r],h=n[pi+nr+r],d=n[pi+"dblclick"+r];return n.removeEventListener(er,l,fi?{passive:!1}:!1),n.removeEventListener(nr,h,fi?{passive:!1}:!1),n.removeEventListener("dblclick",d,!1),this}var Ho=rr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ss=rr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ec=ss==="webkitTransition"||ss==="OTransition"?ss+"End":"transitionend";function Pc(n){return typeof n=="string"?document.getElementById(n):n}function rs(n,r){var l=n.style[r]||n.currentStyle&&n.currentStyle[r];if((!l||l==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(n,null);l=h?h[r]:null}return l==="auto"?null:l}function ft(n,r,l){var h=document.createElement(n);return h.className=r||"",l&&l.appendChild(h),h}function Ot(n){var r=n.parentNode;r&&r.removeChild(n)}function ir(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function mi(n){var r=n.parentNode;r&&r.lastChild!==n&&r.appendChild(n)}function gi(n){var r=n.parentNode;r&&r.firstChild!==n&&r.insertBefore(n,r.firstChild)}function Uo(n,r){if(n.classList!==void 0)return n.classList.contains(r);var l=sr(n);return l.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(l)}function nt(n,r){if(n.classList!==void 0)for(var l=A(r),h=0,d=l.length;h<d;h++)n.classList.add(l[h]);else if(!Uo(n,r)){var p=sr(n);Zo(n,(p?p+" ":"")+r)}}function Dt(n,r){n.classList!==void 0?n.classList.remove(r):Zo(n,E((" "+sr(n)+" ").replace(" "+r+" "," ")))}function Zo(n,r){n.className.baseVal===void 0?n.className=r:n.className.baseVal=r}function sr(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function ve(n,r){"opacity"in n.style?n.style.opacity=r:"filter"in n.style&&N_(n,r)}function N_(n,r){var l=!1,h="DXImageTransform.Microsoft.Alpha";try{l=n.filters.item(h)}catch{if(r===1)return}r=Math.round(r*100),l?(l.Enabled=r!==100,l.Opacity=r):n.style.filter+=" progid:"+h+"(opacity="+r+")"}function rr(n){for(var r=document.documentElement.style,l=0;l<n.length;l++)if(n[l]in r)return n[l];return!1}function Fn(n,r,l){var h=r||new W(0,0);n.style[Ho]=(di?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(l?" scale("+l+")":"")}function Ht(n,r){n._leaflet_pos=r,St?Fn(n,r):(n.style.left=r.x+"px",n.style.top=r.y+"px")}function bn(n){return n._leaflet_pos||new W(0,0)}var os,as,$o;if("onselectstart"in document)os=function(){lt(window,"selectstart",ye)},as=function(){Wt(window,"selectstart",ye)};else{var ls=rr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);os=function(){if(ls){var n=document.documentElement.style;$o=n[ls],n[ls]="none"}},as=function(){ls&&(document.documentElement.style[ls]=$o,$o=void 0)}}function Vo(){lt(window,"dragstart",ye)}function jo(){Wt(window,"dragstart",ye)}var or,qo;function Go(n){for(;n.tabIndex===-1;)n=n.parentNode;!n.style||(ar(),or=n,qo=n.style.outline,n.style.outline="none",lt(window,"keydown",ar))}function ar(){!or||(or.style.outline=qo,or=void 0,qo=void 0,Wt(window,"keydown",ar))}function Ic(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Ko(n){var r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth||1,y:r.height/n.offsetHeight||1,boundingClientRect:r}}var R_={TRANSFORM:Ho,TRANSITION:ss,TRANSITION_END:Ec,get:Pc,getStyle:rs,create:ft,remove:Ot,empty:ir,toFront:mi,toBack:gi,hasClass:Uo,addClass:nt,removeClass:Dt,setClass:Zo,getClass:sr,setOpacity:ve,testProp:rr,setTransform:Fn,setPosition:Ht,getPosition:bn,disableTextSelection:os,enableTextSelection:as,disableImageDrag:Vo,enableImageDrag:jo,preventOutline:Go,restoreOutline:ar,getSizedParentNode:Ic,getScale:Ko};function lt(n,r,l,h){if(typeof r=="object")for(var d in r)lr(n,d,r[d],l);else{r=A(r);for(var p=0,y=r.length;p<y;p++)lr(n,r[p],l,h)}return this}var Te="_leaflet_events";function Wt(n,r,l,h){if(typeof r=="object")for(var d in r)Qo(n,d,r[d],l);else if(r){r=A(r);for(var p=0,y=r.length;p<y;p++)Qo(n,r[p],l,h)}else{for(var C in n[Te])Qo(n,C,n[Te][C]);delete n[Te]}return this}function Sc(){if(Oe)return!(M||dt)}var Yo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function lr(n,r,l,h){var d=r+f(l)+(h?"_"+f(h):"");if(n[Te]&&n[Te][d])return this;var p=function(C){return l.call(h||n,C||window.event)},y=p;Oe&&r.indexOf("touch")===0?T_(n,r,p,d):De&&r==="dblclick"&&!Sc()?A_(n,p,d):"addEventListener"in n?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?n.addEventListener(Yo[r]||r,p,fi?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(p=function(C){C=C||window.event,cr(n,C)&&y(C)},n.addEventListener(Yo[r],p,!1)):n.addEventListener(r,y,!1):"attachEvent"in n&&n.attachEvent("on"+r,p),n[Te]=n[Te]||{},n[Te][d]=p}function Qo(n,r,l,h){var d=r+f(l)+(h?"_"+f(h):""),p=n[Te]&&n[Te][d];if(!p)return this;Oe&&r.indexOf("touch")===0?E_(n,r,d):De&&r==="dblclick"&&!Sc()?M_(n,d):"removeEventListener"in n?n.removeEventListener(Yo[r]||r,p,!1):"detachEvent"in n&&n.detachEvent("on"+r,p),n[Te][d]=null}function zn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,ea(n),this}function Xo(n){return lr(n,"wheel",zn),this}function cs(n){return lt(n,"mousedown touchstart dblclick",zn),lr(n,"click",ta),this}function ye(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function tn(n){return ye(n),zn(n),this}function kc(n,r){if(!r)return new W(n.clientX,n.clientY);var l=Ko(r),h=l.boundingClientRect;return new W((n.clientX-h.left)/l.x-r.clientLeft,(n.clientY-h.top)/l.y-r.clientTop)}var O_=Xe&&at?2*window.devicePixelRatio:xt?window.devicePixelRatio:1;function Lc(n){return M?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/O_:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}var Jo={};function ta(n){Jo[n.type]=!0}function ea(n){var r=Jo[n.type];return Jo[n.type]=!1,r}function cr(n,r){var l=r.relatedTarget;if(!l)return!0;try{for(;l&&l!==n;)l=l.parentNode}catch{return!1}return l!==n}var D_={on:lt,off:Wt,stopPropagation:zn,disableScrollPropagation:Xo,disableClickPropagation:cs,preventDefault:ye,stop:tn,getMousePosition:kc,getWheelDelta:Lc,fakeStop:ta,skipped:ea,isExternalTarget:cr,addListener:lt,removeListener:Wt},Ac=Ct.extend({run:function(n,r,l,h){this.stop(),this._el=n,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=bn(n),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=vt(this._animate,this),this._step()},_step:function(n){var r=+new Date-this._startTime,l=this._duration*1e3;r<l?this._runFrame(this._easeOut(r/l),n):(this._runFrame(1),this._complete())},_runFrame:function(n,r){var l=this._startPos.add(this._offset.multiplyBy(n));r&&l._round(),Ht(this._el,l),this.fire("step")},_complete:function(){It(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),ut=Ct.extend({options:{crs:v,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,r){r=O(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(Nt(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ss&&St&&!bc&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),lt(this._proxy,Ec,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,r,l){if(r=r===void 0?this._zoom:this._limitZoom(r),n=this._limitCenter(Nt(n),r,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var h=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,r,l.zoom):this._tryAnimatedPan(n,l.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(n,r),this},setZoom:function(n,r){return this._loaded?this.setView(this.getCenter(),n,{zoom:r}):(this._zoom=n,this)},zoomIn:function(n,r){return n=n||(St?this.options.zoomDelta:1),this.setZoom(this._zoom+n,r)},zoomOut:function(n,r){return n=n||(St?this.options.zoomDelta:1),this.setZoom(this._zoom-n,r)},setZoomAround:function(n,r,l){var h=this.getZoomScale(r),d=this.getSize().divideBy(2),p=n instanceof W?n:this.latLngToContainerPoint(n),y=p.subtract(d).multiplyBy(1-1/h),C=this.containerPointToLatLng(d.add(y));return this.setView(C,r,{zoom:l})},_getBoundsCenterZoom:function(n,r){r=r||{},n=n.getBounds?n.getBounds():zt(n);var l=ot(r.paddingTopLeft||r.padding||[0,0]),h=ot(r.paddingBottomRight||r.padding||[0,0]),d=this.getBoundsZoom(n,!1,l.add(h));if(d=typeof r.maxZoom=="number"?Math.min(r.maxZoom,d):d,d===1/0)return{center:n.getCenter(),zoom:d};var p=h.subtract(l).divideBy(2),y=this.project(n.getSouthWest(),d),C=this.project(n.getNorthEast(),d),x=this.unproject(y.add(C).divideBy(2).add(p),d);return{center:x,zoom:d}},fitBounds:function(n,r){if(n=zt(n),!n.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(n,r);return this.setView(l.center,l.zoom,r)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,r){return this.setView(n,this._zoom,{pan:r})},panBy:function(n,r){if(n=ot(n).round(),r=r||{},!n.x&&!n.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ac,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){nt(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,l,r.duration||.25,r.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,r,l){if(l=l||{},l.animate===!1||!St)return this.setView(n,r,l);this._stop();var h=this.project(this.getCenter()),d=this.project(n),p=this.getSize(),y=this._zoom;n=Nt(n),r=r===void 0?y:r;var C=Math.max(p.x,p.y),x=C*this.getZoomScale(y,r),P=d.distanceTo(h)||1,F=1.42,K=F*F;function _t(Ut){var yr=Ut?-1:1,Cp=Ut?x:C,xp=x*x-C*C+yr*K*K*P*P,Tp=2*Cp*K*P,_a=xp/Tp,hh=Math.sqrt(_a*_a+1)-_a,Ep=hh<1e-9?-18:Math.log(hh);return Ep}function on(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function Un(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}function vr(Ut){return on(Ut)/Un(Ut)}var xn=_t(0);function fa(Ut){return C*(Un(xn)/Un(xn+F*Ut))}function vp(Ut){return C*(Un(xn)*vr(xn+F*Ut)-on(xn))/K}function yp(Ut){return 1-Math.pow(1-Ut,1.5)}var wp=Date.now(),lh=(_t(1)-xn)/F,bp=l.duration?1e3*l.duration:1e3*lh*.8;function ch(){var Ut=(Date.now()-wp)/bp,yr=yp(Ut)*lh;Ut<=1?(this._flyToFrame=vt(ch,this),this._move(this.unproject(h.add(d.subtract(h).multiplyBy(vp(yr)/P)),y),this.getScaleZoom(C/fa(yr),y),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),ch.call(this),this},flyToBounds:function(n,r){var l=this._getBoundsCenterZoom(n,r);return this.flyTo(l.center,l.zoom,r)},setMaxBounds:function(n){if(n=zt(n),n.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(n){var r=this.options.minZoom;return this.options.minZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var r=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,r){this._enforcingBounds=!0;var l=this.getCenter(),h=this._limitCenter(l,this._zoom,zt(n));return l.equals(h)||this.panTo(h,r),this._enforcingBounds=!1,this},panInside:function(n,r){r=r||{};var l=ot(r.paddingTopLeft||r.padding||[0,0]),h=ot(r.paddingBottomRight||r.padding||[0,0]),d=this.getCenter(),p=this.project(d),y=this.project(n),C=this.getPixelBounds(),x=C.getSize().divideBy(2),P=Gt([C.min.add(l),C.max.subtract(h)]);if(!P.contains(y)){this._enforcingBounds=!0;var F=p.subtract(y),K=ot(y.x+F.x,y.y+F.y);(y.x<P.min.x||y.x>P.max.x)&&(K.x=p.x-F.x,F.x>0?K.x+=x.x-l.x:K.x-=x.x-h.x),(y.y<P.min.y||y.y>P.max.y)&&(K.y=p.y-F.y,F.y>0?K.y+=x.y-l.y:K.y-=x.y-h.y),this.panTo(this.unproject(K),r),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=o({animate:!1,pan:!0},n===!0?{animate:!0}:n);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),h=r.divideBy(2).round(),d=l.divideBy(2).round(),p=h.subtract(d);return!p.x&&!p.y?this:(n.animate&&n.pan?this.panBy(p):(n.pan&&this._rawPanBy(p),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=o({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=c(this._handleGeolocationResponse,this),l=c(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,l,n):navigator.geolocation.getCurrentPosition(r,l,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){var r=n.code,l=n.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+l+"."})},_handleGeolocationResponse:function(n){var r=n.coords.latitude,l=n.coords.longitude,h=new wt(r,l),d=h.toBounds(n.coords.accuracy*2),p=this._locateOptions;if(p.setView){var y=this.getBoundsZoom(d);this.setView(h,p.maxZoom?Math.min(y,p.maxZoom):y)}var C={latlng:h,bounds:d,timestamp:n.timestamp};for(var x in n.coords)typeof n.coords[x]=="number"&&(C[x]=n.coords[x]);this.fire("locationfound",C)},addHandler:function(n,r){if(!r)return this;var l=this[n]=new r(this);return this._handlers.push(l),this.options[n]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ot(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(It(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Ot(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,r){var l="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),h=ft("div",l,r||this._mapPane);return n&&(this._panes[n]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),r=this.unproject(n.getBottomLeft()),l=this.unproject(n.getTopRight());return new Rt(r,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,r,l){n=zt(n),l=ot(l||[0,0]);var h=this.getZoom()||0,d=this.getMinZoom(),p=this.getMaxZoom(),y=n.getNorthWest(),C=n.getSouthEast(),x=this.getSize().subtract(l),P=Gt(this.project(C,h),this.project(y,h)).getSize(),F=St?this.options.zoomSnap:1,K=x.x/P.x,_t=x.y/P.y,on=r?Math.max(K,_t):Math.min(K,_t);return h=this.getScaleZoom(on,h),F&&(h=Math.round(h/(F/100))*(F/100),h=r?Math.ceil(h/F)*F:Math.floor(h/F)*F),Math.max(d,Math.min(p,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,r){var l=this._getTopLeftPoint(n,r);return new yt(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,r){var l=this.options.crs;return r=r===void 0?this._zoom:r,l.scale(n)/l.scale(r)},getScaleZoom:function(n,r){var l=this.options.crs;r=r===void 0?this._zoom:r;var h=l.zoom(n*l.scale(r));return isNaN(h)?1/0:h},project:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(Nt(n),r)},unproject:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(ot(n),r)},layerPointToLatLng:function(n){var r=ot(n).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(n){var r=this.project(Nt(n))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Nt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(zt(n))},distance:function(n,r){return this.options.crs.distance(Nt(n),Nt(r))},containerPointToLayerPoint:function(n){return ot(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return ot(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var r=this.containerPointToLayerPoint(ot(n));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Nt(n)))},mouseEventToContainerPoint:function(n){return kc(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var r=this._container=Pc(n);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");lt(r,"scroll",this._onScroll,this),this._containerId=f(r)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&St,nt(n,"leaflet-container"+(De?" leaflet-touch":"")+(wn?" leaflet-retina":"")+(B?" leaflet-oldie":"")+(dt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=rs(n,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ht(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(nt(n.markerPane,"leaflet-zoom-hide"),nt(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,r){Ht(this._mapPane,new W(0,0));var l=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var h=this._zoom!==r;this._moveStart(h,!1)._move(n,r)._moveEnd(h),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(n,r){return n&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(n,r,l){r===void 0&&(r=this._zoom);var h=this._zoom!==r;return this._zoom=r,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),(h||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return It(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Ht(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[f(this._container)]=this;var r=n?Wt:lt;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),St&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){It(this._resizeRequest),this._resizeRequest=vt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,r){for(var l=[],h,d=r==="mouseout"||r==="mouseover",p=n.target||n.srcElement,y=!1;p;){if(h=this._targets[f(p)],h&&(r==="click"||r==="preclick")&&!n._simulated&&this._draggableMoved(h)){y=!0;break}if(h&&h.listens(r,!0)&&(d&&!cr(p,n)||(l.push(h),d))||p===this._container)break;p=p.parentNode}return!l.length&&!y&&!d&&cr(p,n)&&(l=[this]),l},_handleDOMEvent:function(n){if(!(!this._loaded||ea(n))){var r=n.type;(r==="mousedown"||r==="keypress"||r==="keyup"||r==="keydown")&&Go(n.target||n.srcElement),this._fireDOMEvent(n,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,r,l){if(n.type==="click"){var h=o({},n);h.type="preclick",this._fireDOMEvent(h,h.type,l)}if(!n._stopped&&(l=(l||[]).concat(this._findEventTargets(n,r)),!!l.length)){var d=l[0];r==="contextmenu"&&d.listens(r,!0)&&ye(n);var p={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var y=d.getLatLng&&(!d._radius||d._radius<=10);p.containerPoint=y?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(n),p.layerPoint=this.containerPointToLayerPoint(p.containerPoint),p.latlng=y?d.getLatLng():this.layerPointToLatLng(p.layerPoint)}for(var C=0;C<l.length;C++)if(l[C].fire(r,p,!0),p.originalEvent._stopped||l[C].options.bubblingMouseEvents===!1&&tt(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,r=this._handlers.length;n<r;n++)this._handlers[n].disable()},whenReady:function(n,r){return this._loaded?n.call(r||this,{target:this}):this.on("load",n,r),this},_getMapPanePos:function(){return bn(this._mapPane)||new W(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,r){var l=n&&r!==void 0?this._getNewPixelOrigin(n,r):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,r){var l=this.getSize()._divideBy(2);return this.project(n,r)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,r,l){var h=this._getNewPixelOrigin(l,r);return this.project(n,r)._subtract(h)},_latLngBoundsToNewLayerBounds:function(n,r,l){var h=this._getNewPixelOrigin(l,r);return Gt([this.project(n.getSouthWest(),r)._subtract(h),this.project(n.getNorthWest(),r)._subtract(h),this.project(n.getSouthEast(),r)._subtract(h),this.project(n.getNorthEast(),r)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,r,l){if(!l)return n;var h=this.project(n,r),d=this.getSize().divideBy(2),p=new yt(h.subtract(d),h.add(d)),y=this._getBoundsOffset(p,l,r);return y.round().equals([0,0])?n:this.unproject(h.add(y),r)},_limitOffset:function(n,r){if(!r)return n;var l=this.getPixelBounds(),h=new yt(l.min.add(n),l.max.add(n));return n.add(this._getBoundsOffset(h,r))},_getBoundsOffset:function(n,r,l){var h=Gt(this.project(r.getNorthEast(),l),this.project(r.getSouthWest(),l)),d=h.min.subtract(n.min),p=h.max.subtract(n.max),y=this._rebound(d.x,-p.x),C=this._rebound(d.y,-p.y);return new W(y,C)},_rebound:function(n,r){return n+r>0?Math.round(n-r)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(r))},_limitZoom:function(n){var r=this.getMinZoom(),l=this.getMaxZoom(),h=St?this.options.zoomSnap:1;return h&&(n=Math.round(n/h)*h),Math.max(r,Math.min(l,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Dt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,r){var l=this._getCenterOffset(n)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,r),!0)},_createAnimProxy:function(){var n=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(r){var l=Ho,h=this._proxy.style[l];Fn(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),h===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ot(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),r=this.getZoom();Fn(this._proxy,this.project(n,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,r,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(r),d=this._getCenterOffset(n)._divideBy(1-1/h);return l.animate!==!0&&!this.getSize().contains(d)?!1:(vt(function(){this._moveStart(!0,!1)._animateZoom(n,r,!0)},this),!0)},_animateZoom:function(n,r,l,h){!this._mapPane||(l&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=r,nt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:r,noUpdate:h}),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Dt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),vt(function(){this._moveEnd(!0)},this))}});function B_(n,r){return new ut(n,r)}var Ee=me.extend({options:{position:"topright"},initialize:function(n){O(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var r=this._map;return r&&r.removeControl(this),this.options.position=n,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var r=this._container=this.onAdd(n),l=this.getPosition(),h=n._controlCorners[l];return nt(r,"leaflet-control"),l.indexOf("bottom")!==-1?h.insertBefore(r,h.firstChild):h.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ot(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),hs=function(n){return new Ee(n)};ut.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",l=this._controlContainer=ft("div",r+"control-container",this._container);function h(d,p){var y=r+d+" "+r+p;n[d+p]=ft("div",y,l)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Ot(this._controlCorners[n]);Ot(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mc=Ee.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,r,l,h){return l<h?-1:h<l?1:0}},initialize:function(n,r,l){O(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var h in n)this._addLayer(n[h],h);for(h in r)this._addLayer(r[h],h,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Ee.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,r){return this._addLayer(n,r),this._map?this._update():this},addOverlay:function(n,r){return this._addLayer(n,r,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var r=this._getLayer(f(n));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){nt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(nt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Dt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Dt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",r=this._container=ft("div",n),l=this.options.collapsed;r.setAttribute("aria-haspopup",!0),cs(r),Xo(r);var h=this._section=ft("section",n+"-list");l&&(this._map.on("click",this.collapse,this),k||lt(r,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=ft("a",n+"-toggle",r);d.href="#",d.title="Layers",De?(lt(d,"click",tn),lt(d,"click",this.expand,this)):lt(d,"focus",this.expand,this),l||this.expand(),this._baseLayersList=ft("div",n+"-base",h),this._separator=ft("div",n+"-separator",h),this._overlaysList=ft("div",n+"-overlays",h),r.appendChild(h)},_getLayer:function(n){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&f(this._layers[r].layer)===n)return this._layers[r]},_addLayer:function(n,r,l){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:r,overlay:l}),this.options.sortLayers&&this._layers.sort(c(function(h,d){return this.options.sortFunction(h.layer,d.layer,h.name,d.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ir(this._baseLayersList),ir(this._overlaysList),this._layerControlInputs=[];var n,r,l,h,d=0;for(l=0;l<this._layers.length;l++)h=this._layers[l],this._addItem(h),r=r||h.overlay,n=n||!h.overlay,d+=h.overlay?0:1;return this.options.hideSingleBase&&(n=n&&d>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=r&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var r=this._getLayer(f(n.target)),l=r.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;l&&this._map.fire(l,r)},_createRadioElement:function(n,r){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(r?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=l,h.firstChild},_addItem:function(n){var r=document.createElement("label"),l=this._map.hasLayer(n.layer),h;n.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=l):h=this._createRadioElement("leaflet-base-layers_"+f(this),l),this._layerControlInputs.push(h),h.layerId=f(n.layer),lt(h,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+n.name;var p=document.createElement("div");r.appendChild(p),p.appendChild(h),p.appendChild(d);var y=n.overlay?this._overlaysList:this._baseLayersList;return y.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){var n=this._layerControlInputs,r,l,h=[],d=[];this._handlingClick=!0;for(var p=n.length-1;p>=0;p--)r=n[p],l=this._getLayer(r.layerId).layer,r.checked?h.push(l):r.checked||d.push(l);for(p=0;p<d.length;p++)this._map.hasLayer(d[p])&&this._map.removeLayer(d[p]);for(p=0;p<h.length;p++)this._map.hasLayer(h[p])||this._map.addLayer(h[p]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,r,l,h=this._map.getZoom(),d=n.length-1;d>=0;d--)r=n[d],l=this._getLayer(r.layerId).layer,r.disabled=l.options.minZoom!==void 0&&h<l.options.minZoom||l.options.maxZoom!==void 0&&h>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),F_=function(n,r,l){return new Mc(n,r,l)},na=Ee.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(n){var r="leaflet-control-zoom",l=ft("div",r+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,r+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,r+"-out",l,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,r,l,h,d){var p=ft("a",l,h);return p.innerHTML=n,p.href="#",p.title=r,p.setAttribute("role","button"),p.setAttribute("aria-label",r),cs(p),lt(p,"click",tn),lt(p,"click",d,this),lt(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var n=this._map,r="leaflet-disabled";Dt(this._zoomInButton,r),Dt(this._zoomOutButton,r),(this._disabled||n._zoom===n.getMinZoom())&&nt(this._zoomOutButton,r),(this._disabled||n._zoom===n.getMaxZoom())&&nt(this._zoomInButton,r)}});ut.mergeOptions({zoomControl:!0}),ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new na,this.addControl(this.zoomControl))});var z_=function(n){return new na(n)},Nc=Ee.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var r="leaflet-control-scale",l=ft("div",r),h=this.options;return this._addScales(h,r+"-line",l),n.on(h.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),l},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,r,l){n.metric&&(this._mScale=ft("div",r,l)),n.imperial&&(this._iScale=ft("div",r,l))},_update:function(){var n=this._map,r=n.getSize().y/2,l=n.distance(n.containerPointToLatLng([0,r]),n.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(l)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var r=this._getRoundNum(n),l=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,l,r/n)},_updateImperial:function(n){var r=n*3.2808399,l,h,d;r>5280?(l=r/5280,h=this._getRoundNum(l),this._updateScale(this._iScale,h+" mi",h/l)):(d=this._getRoundNum(r),this._updateScale(this._iScale,d+" ft",d/r))},_updateScale:function(n,r,l){n.style.width=Math.round(this.options.maxWidth*l)+"px",n.innerHTML=r},_getRoundNum:function(n){var r=Math.pow(10,(Math.floor(n)+"").length-1),l=n/r;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,r*l}}),W_=function(n){return new Nc(n)},ia=Ee.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(n){O(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),cs(this._container);for(var r in n._layers)n._layers[r].getAttribution&&this.addAttribution(n._layers[r].getAttribution());return this._update(),this._container},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(!!this._map){var n=[];for(var r in this._attributions)this._attributions[r]&&n.push(r);var l=[];this.options.prefix&&l.push(this.options.prefix),n.length&&l.push(n.join(", ")),this._container.innerHTML=l.join(" | ")}}});ut.mergeOptions({attributionControl:!0}),ut.addInitHook(function(){this.options.attributionControl&&new ia().addTo(this)});var H_=function(n){return new ia(n)};Ee.Layers=Mc,Ee.Zoom=na,Ee.Scale=Nc,Ee.Attribution=ia,hs.layers=F_,hs.zoom=z_,hs.scale=W_,hs.attribution=H_;var Fe=me.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fe.addTo=function(n,r){return n.addHandler(r,this),this};var U_={Events:bt},Rc=De?"touchstart mousedown":"mousedown",Oc={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},sa={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Wn=Ct.extend({options:{clickTolerance:3},initialize:function(n,r,l,h){O(this,h),this._element=n,this._dragStartTarget=r||n,this._preventOutline=l},enable:function(){this._enabled||(lt(this._dragStartTarget,Rc,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Wn._dragging===this&&this.finishDrag(),Wt(this._dragStartTarget,Rc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(!(n._simulated||!this._enabled)&&(this._moved=!1,!Uo(this._element,"leaflet-zoom-anim")&&!(Wn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Wn._dragging=this,this._preventOutline&&Go(this._element),Vo(),os(),!this._moving))){this.fire("down");var r=n.touches?n.touches[0]:n,l=Ic(this._element);this._startPoint=new W(r.clientX,r.clientY),this._parentScale=Ko(l),lt(document,sa[n.type],this._onMove,this),lt(document,Oc[n.type],this._onUp,this)}},_onMove:function(n){if(!(n._simulated||!this._enabled)){if(n.touches&&n.touches.length>1){this._moved=!0;return}var r=n.touches&&n.touches.length===1?n.touches[0]:n,l=new W(r.clientX,r.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,ye(n),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=bn(this._element).subtract(l),nt(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),nt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,It(this._animRequest),this._lastEvent=n,this._animRequest=vt(this._updatePosition,this,!0))}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Ht(this._element,this._newPos),this.fire("drag",n)},_onUp:function(n){n._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){Dt(document.body,"leaflet-dragging"),this._lastTarget&&(Dt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var n in sa)Wt(document,sa[n],this._onMove,this),Wt(document,Oc[n],this._onUp,this);jo(),as(),this._moved&&this._moving&&(It(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Wn._dragging=!1}});function Dc(n,r){if(!r||!n.length)return n.slice();var l=r*r;return n=V_(n,l),n=$_(n,l),n}function Bc(n,r,l){return Math.sqrt(us(n,r,l,!0))}function Z_(n,r,l){return us(n,r,l)}function $_(n,r){var l=n.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new h(l);d[0]=d[l-1]=1,ra(n,d,r,0,l-1);var p,y=[];for(p=0;p<l;p++)d[p]&&y.push(n[p]);return y}function ra(n,r,l,h,d){var p=0,y,C,x;for(C=h+1;C<=d-1;C++)x=us(n[C],n[h],n[d],!0),x>p&&(y=C,p=x);p>l&&(r[y]=1,ra(n,r,l,h,y),ra(n,r,l,y,d))}function V_(n,r){for(var l=[n[0]],h=1,d=0,p=n.length;h<p;h++)j_(n[h],n[d])>r&&(l.push(n[h]),d=h);return d<p-1&&l.push(n[p-1]),l}var Fc;function zc(n,r,l,h,d){var p=h?Fc:Hn(n,l),y=Hn(r,l),C,x,P;for(Fc=y;;){if(!(p|y))return[n,r];if(p&y)return!1;C=p||y,x=hr(n,r,C,l,d),P=Hn(x,l),C===p?(n=x,p=P):(r=x,y=P)}}function hr(n,r,l,h,d){var p=r.x-n.x,y=r.y-n.y,C=h.min,x=h.max,P,F;return l&8?(P=n.x+p*(x.y-n.y)/y,F=x.y):l&4?(P=n.x+p*(C.y-n.y)/y,F=C.y):l&2?(P=x.x,F=n.y+y*(x.x-n.x)/p):l&1&&(P=C.x,F=n.y+y*(C.x-n.x)/p),new W(P,F,d)}function Hn(n,r){var l=0;return n.x<r.min.x?l|=1:n.x>r.max.x&&(l|=2),n.y<r.min.y?l|=4:n.y>r.max.y&&(l|=8),l}function j_(n,r){var l=r.x-n.x,h=r.y-n.y;return l*l+h*h}function us(n,r,l,h){var d=r.x,p=r.y,y=l.x-d,C=l.y-p,x=y*y+C*C,P;return x>0&&(P=((n.x-d)*y+(n.y-p)*C)/x,P>1?(d=l.x,p=l.y):P>0&&(d+=y*P,p+=C*P)),y=n.x-d,C=n.y-p,h?y*y+C*C:new W(d,p)}function en(n){return!q(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]!="undefined"}function Wc(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),en(n)}var q_={simplify:Dc,pointToSegmentDistance:Bc,closestPointOnSegment:Z_,clipSegment:zc,_getEdgeIntersection:hr,_getBitCode:Hn,_sqClosestPointOnSegment:us,isFlat:en,_flat:Wc};function Hc(n,r,l){var h,d=[1,4,2,8],p,y,C,x,P,F,K,_t;for(p=0,F=n.length;p<F;p++)n[p]._code=Hn(n[p],r);for(C=0;C<4;C++){for(K=d[C],h=[],p=0,F=n.length,y=F-1;p<F;y=p++)x=n[p],P=n[y],x._code&K?P._code&K||(_t=hr(P,x,K,r,l),_t._code=Hn(_t,r),h.push(_t)):(P._code&K&&(_t=hr(P,x,K,r,l),_t._code=Hn(_t,r),h.push(_t)),h.push(x));n=h}return n}var G_={clipPolygon:Hc},oa={project:function(n){return new W(n.lng,n.lat)},unproject:function(n){return new wt(n.y,n.x)},bounds:new yt([-180,-90],[180,90])},aa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new yt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var r=Math.PI/180,l=this.R,h=n.lat*r,d=this.R_MINOR/l,p=Math.sqrt(1-d*d),y=p*Math.sin(h),C=Math.tan(Math.PI/4-h/2)/Math.pow((1-y)/(1+y),p/2);return h=-l*Math.log(Math.max(C,1e-10)),new W(n.lng*r*l,h)},unproject:function(n){for(var r=180/Math.PI,l=this.R,h=this.R_MINOR/l,d=Math.sqrt(1-h*h),p=Math.exp(-n.y/l),y=Math.PI/2-2*Math.atan(p),C=0,x=.1,P;C<15&&Math.abs(x)>1e-7;C++)P=d*Math.sin(y),P=Math.pow((1-P)/(1+P),d/2),x=Math.PI/2-2*Math.atan(p*P)-y,y+=x;return new wt(y*r,n.x*r/l)}},K_={LonLat:oa,Mercator:aa,SphericalMercator:Re},Y_=o({},de,{code:"EPSG:3395",projection:aa,transformation:function(){var n=.5/(Math.PI*aa.R);return Qe(n,.5,-n,.5)}()}),Uc=o({},de,{code:"EPSG:4326",projection:oa,transformation:Qe(1/180,1,-1/180,.5)}),Q_=o({},$t,{projection:oa,transformation:Qe(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,r){var l=r.lng-n.lng,h=r.lat-n.lat;return Math.sqrt(l*l+h*h)},infinite:!0});$t.Earth=de,$t.EPSG3395=Y_,$t.EPSG3857=v,$t.EPSG900913=b,$t.EPSG4326=Uc,$t.Simple=Q_;var Pe=Ct.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[f(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[f(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var r=n.target;if(!!r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var l=this.getEvents();r.on(l,this),this.once("remove",function(){r.off(l,this)},this)}this.onAdd(r),this.getAttribution&&r.attributionControl&&r.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),r.fire("layeradd",{layer:this})}}});ut.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var r=f(n);return this._layers[r]?this:(this._layers[r]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var r=f(n);return this._layers[r]?(this._loaded&&n.onRemove(this),n.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(n.getAttribution()),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return!!n&&f(n)in this._layers},eachLayer:function(n,r){for(var l in this._layers)n.call(r,this._layers[l]);return this},_addLayers:function(n){n=n?q(n)?n:[n]:[];for(var r=0,l=n.length;r<l;r++)this.addLayer(n[r])},_addZoomLimit:function(n){(isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[f(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var r=f(n);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,r=-1/0,l=this._getZoomSpan();for(var h in this._zoomBoundLayers){var d=this._zoomBoundLayers[h].options;n=d.minZoom===void 0?n:Math.min(n,d.minZoom),r=d.maxZoom===void 0?r:Math.max(r,d.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=n===1/0?void 0:n,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vi=Pe.extend({initialize:function(n,r){O(this,r),this._layers={};var l,h;if(n)for(l=0,h=n.length;l<h;l++)this.addLayer(n[l])},addLayer:function(n){var r=this.getLayerId(n);return this._layers[r]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var r=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(n){if(!n)return!1;var r=typeof n=="number"?n:this.getLayerId(n);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),l,h;for(l in this._layers)h=this._layers[l],h[n]&&h[n].apply(h,r);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,r){for(var l in this._layers)n.call(r,this._layers[l]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return f(n)}}),X_=function(n,r){return new vi(n,r)},yi=vi.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),vi.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),vi.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Rt;for(var r in this._layers){var l=this._layers[r];n.extend(l.getBounds?l.getBounds():l.getLatLng())}return n}}),J_=function(n,r){return new yi(n,r)},wi=me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(n){O(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,r){var l=this._getIconUrl(n);if(!l){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(l,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(h,n),h},_setIconStyles:function(n,r){var l=this.options,h=l[r+"Size"];typeof h=="number"&&(h=[h,h]);var d=ot(h),p=ot(r==="shadow"&&l.shadowAnchor||l.iconAnchor||d&&d.divideBy(2,!0));n.className="leaflet-marker-"+r+" "+(l.className||""),p&&(n.style.marginLeft=-p.x+"px",n.style.marginTop=-p.y+"px"),d&&(n.style.width=d.x+"px",n.style.height=d.y+"px")},_createImg:function(n,r){return r=r||document.createElement("img"),r.src=n,r},_getIconUrl:function(n){return wn&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function tp(n){return new wi(n)}var ds=wi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return ds.imagePath||(ds.imagePath=this._detectIconPath()),(this.options.imagePath||ds.imagePath)+wi.prototype._getIconUrl.call(this,n)},_detectIconPath:function(){var n=ft("div","leaflet-default-icon-path",document.body),r=rs(n,"background-image")||rs(n,"backgroundImage");return document.body.removeChild(n),r===null||r.indexOf("url")!==0?r="":r=r.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),r}}),Zc=Fe.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Wn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),nt(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Dt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var r=this._marker,l=r._map,h=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,p=bn(r._icon),y=l.getPixelBounds(),C=l.getPixelOrigin(),x=Gt(y.min._subtract(C).add(d),y.max._subtract(C).subtract(d));if(!x.contains(p)){var P=ot((Math.max(x.max.x,p.x)-x.max.x)/(y.max.x-x.max.x)-(Math.min(x.min.x,p.x)-x.min.x)/(y.min.x-x.min.x),(Math.max(x.max.y,p.y)-x.max.y)/(y.max.y-x.max.y)-(Math.min(x.min.y,p.y)-x.min.y)/(y.min.y-x.min.y)).multiplyBy(h);l.panBy(P,{animate:!1}),this._draggable._newPos._add(P),this._draggable._startPos._add(P),Ht(r._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=vt(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(It(this._panRequest),this._panRequest=vt(this._adjustPan.bind(this,n)))},_onDrag:function(n){var r=this._marker,l=r._shadow,h=bn(r._icon),d=r._map.layerPointToLatLng(h);l&&Ht(l,h),r._latlng=d,n.latlng=d,n.oldLatLng=this._oldLatLng,r.fire("move",n).fire("drag",n)},_onDragEnd:function(n){It(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),ur=Pe.extend({options:{icon:new ds,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,r){O(this,r),this._latlng=Nt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var r=this._latlng;return this._latlng=Nt(n),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=n.icon.createIcon(this._icon),h=!1;l!==this._icon&&(this._icon&&this._removeIcon(),h=!0,n.title&&(l.title=n.title),l.tagName==="IMG"&&(l.alt=n.alt||"")),nt(l,r),n.keyboard&&(l.tabIndex="0"),this._icon=l,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=n.icon.createShadow(this._shadow),p=!1;d!==this._shadow&&(this._removeShadow(),p=!0),d&&(nt(d,r),d.alt=""),this._shadow=d,n.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&p&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Ot(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ot(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Ht(this._icon,n),this._shadow&&Ht(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(r)},_initInteraction:function(){if(!!this.options.interactive&&(nt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Zc)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Zc(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&ve(this._icon,n),this._shadow&&ve(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ep(n,r){return new ur(n,r)}var Cn=Pe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return O(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),dr=Cn.extend({options:{fill:!0,radius:10},initialize:function(n,r){O(this,r),this._latlng=Nt(n),this._radius=this.options.radius},setLatLng:function(n){var r=this._latlng;return this._latlng=Nt(n),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var r=n&&n.radius||this._radius;return Cn.prototype.setStyle.call(this,n),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,r=this._radiusY||n,l=this._clickTolerance(),h=[n+l,r+l];this._pxBounds=new yt(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function np(n,r){return new dr(n,r)}var la=dr.extend({initialize:function(n,r,l){if(typeof r=="number"&&(r=o({},l,{radius:r})),O(this,r),this._latlng=Nt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Rt(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:Cn.prototype.setStyle,_project:function(){var n=this._latlng.lng,r=this._latlng.lat,l=this._map,h=l.options.crs;if(h.distance===de.distance){var d=Math.PI/180,p=this._mRadius/de.R/d,y=l.project([r+p,n]),C=l.project([r-p,n]),x=y.add(C).divideBy(2),P=l.unproject(x).lat,F=Math.acos((Math.cos(p*d)-Math.sin(r*d)*Math.sin(P*d))/(Math.cos(r*d)*Math.cos(P*d)))/d;(isNaN(F)||F===0)&&(F=p/Math.cos(Math.PI/180*r)),this._point=x.subtract(l.getPixelOrigin()),this._radius=isNaN(F)?0:x.x-l.project([P,n-F]).x,this._radiusY=x.y-y.y}else{var K=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(K).x}this._updateBounds()}});function ip(n,r,l){return new la(n,r,l)}var nn=Cn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,r){O(this,r),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var r=1/0,l=null,h=us,d,p,y=0,C=this._parts.length;y<C;y++)for(var x=this._parts[y],P=1,F=x.length;P<F;P++){d=x[P-1],p=x[P];var K=h(n,d,p,!0);K<r&&(r=K,l=h(n,d,p))}return l&&(l.distance=Math.sqrt(r)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,r,l,h,d,p,y,C=this._rings[0],x=C.length;if(!x)return null;for(n=0,r=0;n<x-1;n++)r+=C[n].distanceTo(C[n+1])/2;if(r===0)return this._map.layerPointToLatLng(C[0]);for(n=0,h=0;n<x-1;n++)if(d=C[n],p=C[n+1],l=d.distanceTo(p),h+=l,h>r)return y=(h-r)/l,this._map.layerPointToLatLng([p.x-y*(p.x-d.x),p.y-y*(p.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(n,r){return r=r||this._defaultShape(),n=Nt(n),r.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Rt,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return en(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var r=[],l=en(n),h=0,d=n.length;h<d;h++)l?(r[h]=Nt(n[h]),this._bounds.extend(r[h])):r[h]=this._convertLatLngs(n[h]);return r},_project:function(){var n=new yt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),r=new W(n,n);this._pxBounds=new yt([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)])},_projectLatlngs:function(n,r,l){var h=n[0]instanceof wt,d=n.length,p,y;if(h){for(y=[],p=0;p<d;p++)y[p]=this._map.latLngToLayerPoint(n[p]),l.extend(y[p]);r.push(y)}else for(p=0;p<d;p++)this._projectLatlngs(n[p],r,l)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,l,h,d,p,y,C,x;for(l=0,d=0,p=this._rings.length;l<p;l++)for(x=this._rings[l],h=0,y=x.length;h<y-1;h++)C=zc(x[h],x[h+1],n,h,!0),C&&(r[d]=r[d]||[],r[d].push(C[0]),(C[1]!==x[h+1]||h===y-2)&&(r[d].push(C[1]),d++))}},_simplifyPoints:function(){for(var n=this._parts,r=this.options.smoothFactor,l=0,h=n.length;l<h;l++)n[l]=Dc(n[l],r)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,r){var l,h,d,p,y,C,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(l=0,p=this._parts.length;l<p;l++)for(C=this._parts[l],h=0,y=C.length,d=y-1;h<y;d=h++)if(!(!r&&h===0)&&Bc(n,C[d],C[h])<=x)return!0;return!1}});function sp(n,r){return new nn(n,r)}nn._flat=Wc;var bi=nn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,r,l,h,d,p,y,C,x,P=this._rings[0],F=P.length;if(!F)return null;for(p=y=C=0,n=0,r=F-1;n<F;r=n++)l=P[n],h=P[r],d=l.y*h.x-h.y*l.x,y+=(l.x+h.x)*d,C+=(l.y+h.y)*d,p+=d*3;return p===0?x=P[0]:x=[y/p,C/p],this._map.layerPointToLatLng(x)},_convertLatLngs:function(n){var r=nn.prototype._convertLatLngs.call(this,n),l=r.length;return l>=2&&r[0]instanceof wt&&r[0].equals(r[l-1])&&r.pop(),r},_setLatLngs:function(n){nn.prototype._setLatLngs.call(this,n),en(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return en(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,r=this.options.weight,l=new W(r,r);if(n=new yt(n.min.subtract(l),n.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,d=this._rings.length,p;h<d;h++)p=Hc(this._rings[h],n,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var r=!1,l,h,d,p,y,C,x,P;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(p=0,x=this._parts.length;p<x;p++)for(l=this._parts[p],y=0,P=l.length,C=P-1;y<P;C=y++)h=l[y],d=l[C],h.y>n.y!=d.y>n.y&&n.x<(d.x-h.x)*(n.y-h.y)/(d.y-h.y)+h.x&&(r=!r);return r||nn.prototype._containsPoint.call(this,n,!0)}});function rp(n,r){return new bi(n,r)}var sn=yi.extend({initialize:function(n,r){O(this,r),this._layers={},n&&this.addData(n)},addData:function(n){var r=q(n)?n:n.features,l,h,d;if(r){for(l=0,h=r.length;l<h;l++)d=r[l],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var p=this.options;if(p.filter&&!p.filter(n))return this;var y=ca(n,p);return y?(y.feature=pr(n),y.defaultOptions=y.options,this.resetStyle(y),p.onEachFeature&&p.onEachFeature(n,y),this.addLayer(y)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=o({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(r){this._setLayerStyle(r,n)},this)},_setLayerStyle:function(n,r){n.setStyle&&(typeof r=="function"&&(r=r(n.feature)),n.setStyle(r))}});function ca(n,r){var l=n.type==="Feature"?n.geometry:n,h=l?l.coordinates:null,d=[],p=r&&r.pointToLayer,y=r&&r.coordsToLatLng||ha,C,x,P,F;if(!h&&!l)return null;switch(l.type){case"Point":return C=y(h),$c(p,n,C,r);case"MultiPoint":for(P=0,F=h.length;P<F;P++)C=y(h[P]),d.push($c(p,n,C,r));return new yi(d);case"LineString":case"MultiLineString":return x=fr(h,l.type==="LineString"?0:1,y),new nn(x,r);case"Polygon":case"MultiPolygon":return x=fr(h,l.type==="Polygon"?1:2,y),new bi(x,r);case"GeometryCollection":for(P=0,F=l.geometries.length;P<F;P++){var K=ca({geometry:l.geometries[P],type:"Feature",properties:n.properties},r);K&&d.push(K)}return new yi(d);default:throw new Error("Invalid GeoJSON object.")}}function $c(n,r,l,h){return n?n(r,l):new ur(l,h&&h.markersInheritOptions&&h)}function ha(n){return new wt(n[1],n[0],n[2])}function fr(n,r,l){for(var h=[],d=0,p=n.length,y;d<p;d++)y=r?fr(n[d],r-1,l):(l||ha)(n[d]),h.push(y);return h}function ua(n,r){return r=typeof r=="number"?r:6,n.alt!==void 0?[w(n.lng,r),w(n.lat,r),w(n.alt,r)]:[w(n.lng,r),w(n.lat,r)]}function _r(n,r,l,h){for(var d=[],p=0,y=n.length;p<y;p++)d.push(r?_r(n[p],r-1,l,h):ua(n[p],h));return!r&&l&&d.push(d[0]),d}function Ci(n,r){return n.feature?o({},n.feature,{geometry:r}):pr(r)}function pr(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var da={toGeoJSON:function(n){return Ci(this,{type:"Point",coordinates:ua(this.getLatLng(),n)})}};ur.include(da),la.include(da),dr.include(da),nn.include({toGeoJSON:function(n){var r=!en(this._latlngs),l=_r(this._latlngs,r?1:0,!1,n);return Ci(this,{type:(r?"Multi":"")+"LineString",coordinates:l})}}),bi.include({toGeoJSON:function(n){var r=!en(this._latlngs),l=r&&!en(this._latlngs[0]),h=_r(this._latlngs,l?2:r?1:0,!0,n);return r||(h=[h]),Ci(this,{type:(l?"Multi":"")+"Polygon",coordinates:h})}}),vi.include({toMultiPoint:function(n){var r=[];return this.eachLayer(function(l){r.push(l.toGeoJSON(n).geometry.coordinates)}),Ci(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(n){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(n);var l=r==="GeometryCollection",h=[];return this.eachLayer(function(d){if(d.toGeoJSON){var p=d.toGeoJSON(n);if(l)h.push(p.geometry);else{var y=pr(p);y.type==="FeatureCollection"?h.push.apply(h,y.features):h.push(y)}}}),l?Ci(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function Vc(n,r){return new sn(n,r)}var op=Vc,mr=Pe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,r,l){this._url=n,this._bounds=zt(r),O(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(nt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ot(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&mi(this._image),this},bringToBack:function(){return this._map&&gi(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=zt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",r=this._image=n?this._url:ft("img");if(nt(r,"leaflet-image-layer"),this._zoomAnimated&&nt(r,"leaflet-zoom-animated"),this.options.className&&nt(r,this.options.className),r.onselectstart=m,r.onmousemove=m,r.onload=c(this.fire,this,"load"),r.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(n){var r=this._map.getZoomScale(n.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Fn(this._image,l,r)},_reset:function(){var n=this._image,r=new yt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=r.getSize();Ht(n,r.min),n.style.width=l.x+"px",n.style.height=l.y+"px"},_updateOpacity:function(){ve(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)}}),ap=function(n,r,l){return new mr(n,r,l)},jc=mr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var n=this._url.tagName==="VIDEO",r=this._image=n?this._url:ft("video");if(nt(r,"leaflet-image-layer"),this._zoomAnimated&&nt(r,"leaflet-zoom-animated"),this.options.className&&nt(r,this.options.className),r.onselectstart=m,r.onmousemove=m,r.onloadeddata=c(this.fire,this,"load"),n){for(var l=r.getElementsByTagName("source"),h=[],d=0;d<l.length;d++)h.push(l[d].src);this._url=l.length>0?h:[r.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted;for(var p=0;p<this._url.length;p++){var y=ft("source");y.src=this._url[p],r.appendChild(y)}}});function lp(n,r,l){return new jc(n,r,l)}var qc=mr.extend({_initImage:function(){var n=this._image=this._url;nt(n,"leaflet-image-layer"),this._zoomAnimated&&nt(n,"leaflet-zoom-animated"),this.options.className&&nt(n,this.options.className),n.onselectstart=m,n.onmousemove=m}});function cp(n,r,l){return new qc(n,r,l)}var rn=Pe.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(n,r){O(this,n),this._source=r},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&ve(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&ve(this._container,1),this.bringToFront()},onRemove:function(n){n._fadeAnimated?(ve(this._container,0),this._removeTimeout=setTimeout(c(Ot,void 0,this._container),200)):Ot(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Nt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&mi(this._container),this},bringToBack:function(){return this._map&&gi(this._container),this},_prepareOpen:function(n,r,l){if(r instanceof Pe||(l=r,r=n),r instanceof yi)for(var h in n._layers){r=n._layers[h];break}if(!l)if(r.getCenter)l=r.getCenter();else if(r.getLatLng)l=r.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=r,this.update(),l},_updateContent:function(){if(!!this._content){var n=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")n.innerHTML=r;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var n=this._map.latLngToLayerPoint(this._latlng),r=ot(this.options.offset),l=this._getAnchor();this._zoomAnimated?Ht(this._container,n.add(l)):r=r.add(n).add(l);var h=this._containerBottom=-r.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=h+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),xi=rn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n.openPopup(this),this},onAdd:function(n){rn.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Cn||this._source.on("preclick",zn))},onRemove:function(n){rn.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Cn||this._source.off("preclick",zn))},getEvents:function(){var n=rn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this._close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var n="leaflet-popup",r=this._container=ft("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=ft("div",n+"-content-wrapper",r);if(this._contentNode=ft("div",n+"-content",l),cs(r),Xo(this._contentNode),lt(r,"contextmenu",zn),this._tipContainer=ft("div",n+"-tip-container",r),this._tip=ft("div",n+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=ft("a",n+"-close-button",r);h.href="#close",h.innerHTML="&#215;",lt(h,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var n=this._contentNode,r=n.style;r.width="",r.whiteSpace="nowrap";var l=n.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),r.width=l+1+"px",r.whiteSpace="",r.height="";var h=n.offsetHeight,d=this.options.maxHeight,p="leaflet-popup-scrolled";d&&h>d?(r.height=d+"px",nt(n,p)):Dt(n,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),l=this._getAnchor();Ht(this._container,r.add(l))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var n=this._map,r=parseInt(rs(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+r,h=this._containerWidth,d=new W(this._containerLeft,-l-this._containerBottom);d._add(bn(this._container));var p=n.layerPointToContainerPoint(d),y=ot(this.options.autoPanPadding),C=ot(this.options.autoPanPaddingTopLeft||y),x=ot(this.options.autoPanPaddingBottomRight||y),P=n.getSize(),F=0,K=0;p.x+h+x.x>P.x&&(F=p.x+h-P.x+x.x),p.x-F-C.x<0&&(F=p.x-C.x),p.y+l+x.y>P.y&&(K=p.y+l-P.y+x.y),p.y-K-C.y<0&&(K=p.y-C.y),(F||K)&&n.fire("autopanstart").panBy([F,K])}},_onCloseButtonClick:function(n){this._close(),tn(n)},_getAnchor:function(){return ot(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),hp=function(n,r){return new xi(n,r)};ut.mergeOptions({closePopupOnClick:!0}),ut.include({openPopup:function(n,r,l){return n instanceof xi||(n=new xi(l).setContent(n)),r&&n.setLatLng(r),this.hasLayer(n)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=n,this.addLayer(n))},closePopup:function(n){return(!n||n===this._popup)&&(n=this._popup,this._popup=null),n&&this.removeLayer(n),this}}),Pe.include({bindPopup:function(n,r){return n instanceof xi?(O(n,r),this._popup=n,n._source=this):((!this._popup||r)&&(this._popup=new xi(r,this)),this._popup.setContent(n)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n,r){return this._popup&&this._map&&(r=this._popup._prepareOpen(this,n,r),this._map.openPopup(this._popup,r)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(n){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(n)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){var r=n.layer||n.target;if(!!this._popup&&!!this._map){if(tn(n),r instanceof Cn){this.openPopup(n.layer||n.target,n.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===r?this.closePopup():this.openPopup(r,n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ti=rn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(n){rn.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(n){rn.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var n=rn.prototype.getEvents.call(this);return De&&!this.options.permanent&&(n.preclick=this._close),n},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var n="leaflet-tooltip",r=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",r)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var r,l,h=this._map,d=this._container,p=h.latLngToContainerPoint(h.getCenter()),y=h.layerPointToContainerPoint(n),C=this.options.direction,x=d.offsetWidth,P=d.offsetHeight,F=ot(this.options.offset),K=this._getAnchor();C==="top"?(r=x/2,l=P):C==="bottom"?(r=x/2,l=0):C==="center"?(r=x/2,l=P/2):C==="right"?(r=0,l=P/2):C==="left"?(r=x,l=P/2):y.x<p.x?(C="right",r=0,l=P/2):(C="left",r=x+(F.x+K.x)*2,l=P/2),n=n.subtract(ot(r,l,!0)).add(F).add(K),Dt(d,"leaflet-tooltip-right"),Dt(d,"leaflet-tooltip-left"),Dt(d,"leaflet-tooltip-top"),Dt(d,"leaflet-tooltip-bottom"),nt(d,"leaflet-tooltip-"+C),Ht(d,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&ve(this._container,n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(r)},_getAnchor:function(){return ot(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),up=function(n,r){return new Ti(n,r)};ut.include({openTooltip:function(n,r,l){return n instanceof Ti||(n=new Ti(l).setContent(n)),r&&n.setLatLng(r),this.hasLayer(n)?this:this.addLayer(n)},closeTooltip:function(n){return n&&this.removeLayer(n),this}}),Pe.include({bindTooltip:function(n,r){return n instanceof Ti?(O(n,r),this._tooltip=n,n._source=this):((!this._tooltip||r)&&(this._tooltip=new Ti(r,this)),this._tooltip.setContent(n)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var r=n?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),De&&(l.click=this._openTooltip)),this[r](l),this._tooltipHandlersAdded=!n}},openTooltip:function(n,r){return this._tooltip&&this._map&&(r=this._tooltip._prepareOpen(this,n,r),this._map.openTooltip(this._tooltip,r),this._tooltip.options.interactive&&this._tooltip._container&&(nt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Dt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(n){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(n)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_openTooltip:function(n){var r=n.layer||n.target;!this._tooltip||!this._map||this.openTooltip(r,this._tooltip.options.sticky?n.latlng:void 0)},_moveTooltip:function(n){var r=n.latlng,l,h;this._tooltip.options.sticky&&n.originalEvent&&(l=this._map.mouseEventToContainerPoint(n.originalEvent),h=this._map.containerPointToLayerPoint(l),r=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(r)}});var Gc=wi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var r=n&&n.tagName==="DIV"?n:document.createElement("div"),l=this.options;if(l.html instanceof Element?(ir(r),r.appendChild(l.html)):r.innerHTML=l.html!==!1?l.html:"",l.bgPos){var h=ot(l.bgPos);r.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function dp(n){return new Gc(n)}wi.Default=ds;var fs=Pe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:te,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){O(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Ot(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof W?n:new W(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r=this.getPane().children,l=-n(-1/0,1/0),h=0,d=r.length,p;h<d;h++)p=r[h].style.zIndex,r[h]!==this._container&&p&&(l=n(l,+p));isFinite(l)&&(this.options.zIndex=l+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!B){ve(this._container,this.options.opacity);var n=+new Date,r=!1,l=!1;for(var h in this._tiles){var d=this._tiles[h];if(!(!d.current||!d.loaded)){var p=Math.min(1,(n-d.loaded)/200);ve(d.el,p),p<1?r=!0:(d.active?l=!0:this._onOpaqueTile(d),d.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),r&&(It(this._fadeFrame),this._fadeFrame=vt(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,r=this.options.maxZoom;if(n!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===n?(this._levels[l].el.style.zIndex=r-Math.abs(n-l),this._onUpdateLevel(l)):(Ot(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var h=this._levels[n],d=this._map;return h||(h=this._levels[n]={},h.el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=r,h.origin=d.project(d.unproject(d.getPixelOrigin()),n).round(),h.zoom=n,this._setZoomTransform(h,d.getCenter(),d.getZoom()),m(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(!!this._map){var n,r,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)r=this._tiles[n],r.retain=r.current;for(n in this._tiles)if(r=this._tiles[n],r.current&&!r.active){var h=r.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var r in this._tiles)this._tiles[r].coords.z===n&&this._removeTile(r)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Ot(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,r,l,h){var d=Math.floor(n/2),p=Math.floor(r/2),y=l-1,C=new W(+d,+p);C.z=+y;var x=this._tileCoordsToKey(C),P=this._tiles[x];return P&&P.active?(P.retain=!0,!0):(P&&P.loaded&&(P.retain=!0),y>h?this._retainParent(d,p,y,h):!1)},_retainChildren:function(n,r,l,h){for(var d=2*n;d<2*n+2;d++)for(var p=2*r;p<2*r+2;p++){var y=new W(d,p);y.z=l+1;var C=this._tileCoordsToKey(y),x=this._tiles[C];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);l+1<h&&this._retainChildren(d,p,l+1,h)}},_resetView:function(n){var r=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var r=this.options;return r.minNativeZoom!==void 0&&n<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<n?r.maxNativeZoom:n},_setView:function(n,r,l,h){var d=Math.round(r);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var p=this.options.updateWhenZooming&&d!==this._tileZoom;(!h||p)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(n),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(n,r)},_setZoomTransforms:function(n,r){for(var l in this._levels)this._setZoomTransform(this._levels[l],n,r)},_setZoomTransform:function(n,r,l){var h=this._map.getZoomScale(l,n.zoom),d=n.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(r,l)).round();St?Fn(n.el,d,h):Ht(n.el,d)},_resetGrid:function(){var n=this._map,r=n.options.crs,l=this._tileSize=this.getTileSize(),h=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,r.wrapLng[0]],h).x/l.x),Math.ceil(n.project([0,r.wrapLng[1]],h).x/l.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([r.wrapLat[0],0],h).y/l.x),Math.ceil(n.project([r.wrapLat[1],0],h).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var r=this._map,l=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),h=r.getZoomScale(l,this._tileZoom),d=r.project(n,this._tileZoom).floor(),p=r.getSize().divideBy(h*2);return new yt(d.subtract(p),d.add(p))},_update:function(n){var r=this._map;if(!!r){var l=this._clampZoom(r.getZoom());if(n===void 0&&(n=r.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(n),d=this._pxBoundsToTileRange(h),p=d.getCenter(),y=[],C=this.options.keepBuffer,x=new yt(d.getBottomLeft().subtract([C,-C]),d.getTopRight().add([C,-C]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var P in this._tiles){var F=this._tiles[P].coords;(F.z!==this._tileZoom||!x.contains(new W(F.x,F.y)))&&(this._tiles[P].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(n,l);return}for(var K=d.min.y;K<=d.max.y;K++)for(var _t=d.min.x;_t<=d.max.x;_t++){var on=new W(_t,K);if(on.z=this._tileZoom,!!this._isValidTile(on)){var Un=this._tiles[this._tileCoordsToKey(on)];Un?Un.current=!0:y.push(on)}}if(y.sort(function(xn,fa){return xn.distanceTo(p)-fa.distanceTo(p)}),y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var vr=document.createDocumentFragment();for(_t=0;_t<y.length;_t++)this._addTile(y[_t],vr);this._level.el.appendChild(vr)}}}},_isValidTile:function(n){var r=this._map.options.crs;if(!r.infinite){var l=this._globalTileRange;if(!r.wrapLng&&(n.x<l.min.x||n.x>l.max.x)||!r.wrapLat&&(n.y<l.min.y||n.y>l.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(n);return zt(this.options.bounds).overlaps(h)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var r=this._map,l=this.getTileSize(),h=n.scaleBy(l),d=h.add(l),p=r.unproject(h,n.z),y=r.unproject(d,n.z);return[p,y]},_tileCoordsToBounds:function(n){var r=this._tileCoordsToNwSe(n),l=new Rt(r[0],r[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var r=n.split(":"),l=new W(+r[0],+r[1]);return l.z=+r[2],l},_removeTile:function(n){var r=this._tiles[n];!r||(Ot(r.el),delete this._tiles[n],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){nt(n,"leaflet-tile");var r=this.getTileSize();n.style.width=r.x+"px",n.style.height=r.y+"px",n.onselectstart=m,n.onmousemove=m,B&&this.options.opacity<1&&ve(n,this.options.opacity),k&&!V&&(n.style.WebkitBackfaceVisibility="hidden")},_addTile:function(n,r){var l=this._getTilePos(n),h=this._tileCoordsToKey(n),d=this.createTile(this._wrapCoords(n),c(this._tileReady,this,n));this._initTile(d),this.createTile.length<2&&vt(c(this._tileReady,this,n,null,d)),Ht(d,l),this._tiles[h]={el:d,coords:n,current:!0},r.appendChild(d),this.fire("tileloadstart",{tile:d,coords:n})},_tileReady:function(n,r,l){r&&this.fire("tileerror",{error:r,tile:l,coords:n});var h=this._tileCoordsToKey(n);l=this._tiles[h],l&&(l.loaded=+new Date,this._map._fadeAnimated?(ve(l.el,0),It(this._fadeFrame),this._fadeFrame=vt(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),r||(nt(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),B||!this._map._fadeAnimated?vt(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var r=new W(this._wrapX?g(n.x,this._wrapX):n.x,this._wrapY?g(n.y,this._wrapY):n.y);return r.z=n.z,r},_pxBoundsToTileRange:function(n){var r=this.getTileSize();return new yt(n.min.unscaleBy(r).floor(),n.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function fp(n){return new fs(n)}var Ei=fs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(n,r){this._url=n,r=O(this,r),r.detectRetina&&wn&&r.maxZoom>0&&(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom++):(r.zoomOffset++,r.maxZoom--),r.minZoom=Math.max(0,r.minZoom)),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),k||this.on("tileunload",this._onTileRemove)},setUrl:function(n,r){return this._url===n&&r===void 0&&(r=!0),this._url=n,r||this.redraw(),this},createTile:function(n,r){var l=document.createElement("img");return lt(l,"load",c(this._tileOnLoad,this,r,l)),lt(l,"error",c(this._tileOnError,this,r,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l.alt="",l.setAttribute("role","presentation"),l.src=this.getTileUrl(n),l},getTileUrl:function(n){var r={r:wn?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-n.y;this.options.tms&&(r.y=l),r["-y"]=l}return Mt(this._url,o(r,this.options))},_tileOnLoad:function(n,r){B?setTimeout(c(n,this,null,r),0):n(null,r)},_tileOnError:function(n,r,l){var h=this.options.errorTileUrl;h&&r.getAttribute("src")!==h&&(r.src=h),n(l,r)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,r=this.options.maxZoom,l=this.options.zoomReverse,h=this.options.zoomOffset;return l&&(n=r-n),n+h},_getSubdomain:function(n){var r=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var n,r;for(n in this._tiles)this._tiles[n].coords.z!==this._tileZoom&&(r=this._tiles[n].el,r.onload=m,r.onerror=m,r.complete||(r.src=X,Ot(r),delete this._tiles[n]))},_removeTile:function(n){var r=this._tiles[n];if(!!r)return G||r.el.setAttribute("src",X),fs.prototype._removeTile.call(this,n)},_tileReady:function(n,r,l){if(!(!this._map||l&&l.getAttribute("src")===X))return fs.prototype._tileReady.call(this,n,r,l)}});function Kc(n,r){return new Ei(n,r)}var Yc=Ei.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,r){this._url=n;var l=o({},this.defaultWmsParams);for(var h in r)h in this.options||(l[h]=r[h]);r=O(this,r);var d=r.detectRetina&&wn?2:1,p=this.getTileSize();l.width=p.x*d,l.height=p.y*d,this.wmsParams=l},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,Ei.prototype.onAdd.call(this,n)},getTileUrl:function(n){var r=this._tileCoordsToNwSe(n),l=this._crs,h=Gt(l.project(r[0]),l.project(r[1])),d=h.min,p=h.max,y=(this._wmsVersion>=1.3&&this._crs===Uc?[d.y,d.x,p.y,p.x]:[d.x,d.y,p.x,p.y]).join(","),C=Ei.prototype.getTileUrl.call(this,n);return C+$(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+y},setParams:function(n,r){return o(this.wmsParams,n),r||this.redraw(),this}});function _p(n,r){return new Yc(n,r)}Ei.WMS=Yc,Kc.wms=_p;var ze=Pe.extend({options:{padding:.1,tolerance:0},initialize:function(n){O(this,n),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&nt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,r){var l=this._map.getZoomScale(r,this._zoom),h=bn(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,r),y=this._map.project(n,r),C=y.subtract(p),x=d.multiplyBy(-l).add(h).add(d).subtract(C);St?Fn(this._container,x,l):Ht(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,r=this._map.getSize(),l=this._map.containerPointToLayerPoint(r.multiplyBy(-n)).round();this._bounds=new yt(l,l.add(r.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Qc=ze.extend({getEvents:function(){var n=ze.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ze.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");lt(n,"mousemove",this._onMouseMove,this),lt(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),lt(n,"mouseout",this._handleMouseOut,this),this._ctx=n.getContext("2d")},_destroyContainer:function(){It(this._redrawRequest),delete this._ctx,Ot(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var r in this._layers)n=this._layers[r],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ze.prototype._update.call(this);var n=this._bounds,r=this._container,l=n.getSize(),h=wn?2:1;Ht(r,n.min),r.width=h*l.x,r.height=h*l.y,r.style.width=l.x+"px",r.style.height=l.y+"px",wn&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){ze.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[f(n)]=n;var r=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var r=n._order,l=r.next,h=r.prev;l?l.prev=h:this._drawLast=h,h?h.next=l:this._drawFirst=l,delete n._order,delete this._layers[f(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var r=n.options.dashArray.split(/[, ]+/),l=[],h,d;for(d=0;d<r.length;d++){if(h=Number(r[d]),isNaN(h))return;l.push(h)}n.options._dashArray=l}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){!this._map||(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||vt(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var r=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new yt,this._redrawBounds.extend(n._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(n._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var r=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,r=this._redrawBounds;if(this._ctx.save(),r){var l=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)n=h.layer,(!r||n._pxBounds&&n._pxBounds.intersects(r))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,r){if(!!this._drawing){var l,h,d,p,y=n._parts,C=y.length,x=this._ctx;if(!!C){for(x.beginPath(),l=0;l<C;l++){for(h=0,d=y[l].length;h<d;h++)p=y[l][h],x[h?"lineTo":"moveTo"](p.x,p.y);r&&x.closePath()}this._fillStroke(x,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var r=n._point,l=this._ctx,h=Math.max(Math.round(n._radius),1),d=(Math.max(Math.round(n._radiusY),1)||h)/h;d!==1&&(l.save(),l.scale(1,d)),l.beginPath(),l.arc(r.x,r.y/d,h,0,Math.PI*2,!1),d!==1&&l.restore(),this._fillStroke(l,n)}},_fillStroke:function(n,r){var l=r.options;l.fill&&(n.globalAlpha=l.fillOpacity,n.fillStyle=l.fillColor||l.color,n.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(n.setLineDash&&n.setLineDash(r.options&&r.options._dashArray||[]),n.globalAlpha=l.opacity,n.lineWidth=l.weight,n.strokeStyle=l.color,n.lineCap=l.lineCap,n.lineJoin=l.lineJoin,n.stroke())},_onClick:function(n){for(var r=this._map.mouseEventToLayerPoint(n),l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(r)&&(!(n.type==="click"||n.type!=="preclick")||!this._map._draggableMoved(l))&&(h=l);h&&(ta(n),this._fireEvent([h],n))},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,r)}},_handleMouseOut:function(n){var r=this._hoveredLayer;r&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([r],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,r){if(!this._mouseHoverThrottled){for(var l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(r)&&(h=l);h!==this._hoveredLayer&&(this._handleMouseOut(n),h&&(nt(this._container,"leaflet-interactive"),this._fireEvent([h],n,"mouseover"),this._hoveredLayer=h)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],n),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,r,l){this._map._fireDOMEvent(r,l||r.type,n)},_bringToFront:function(n){var r=n._order;if(!!r){var l=r.next,h=r.prev;if(l)l.prev=h;else return;h?h.next=l:l&&(this._drawFirst=l),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(n)}},_bringToBack:function(n){var r=n._order;if(!!r){var l=r.next,h=r.prev;if(h)h.next=l;else return;l?l.prev=h:h&&(this._drawLast=h),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(n)}}});function Xc(n){return Cc?new Qc(n):null}var _s=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),pp={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ze.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var r=n._container=_s("shape");nt(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",n._path=_s("path"),r.appendChild(n._path),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){var r=n._container;this._container.appendChild(r),n.options.interactive&&n.addInteractiveTarget(r)},_removePath:function(n){var r=n._container;Ot(r),n.removeInteractiveTarget(r),delete this._layers[f(n)]},_updateStyle:function(n){var r=n._stroke,l=n._fill,h=n.options,d=n._container;d.stroked=!!h.stroke,d.filled=!!h.fill,h.stroke?(r||(r=n._stroke=_s("stroke")),d.appendChild(r),r.weight=h.weight+"px",r.color=h.color,r.opacity=h.opacity,h.dashArray?r.dashStyle=q(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=h.lineCap.replace("butt","flat"),r.joinstyle=h.lineJoin):r&&(d.removeChild(r),n._stroke=null),h.fill?(l||(l=n._fill=_s("fill")),d.appendChild(l),l.color=h.fillColor||h.color,l.opacity=h.fillOpacity):l&&(d.removeChild(l),n._fill=null)},_updateCircle:function(n){var r=n._point.round(),l=Math.round(n._radius),h=Math.round(n._radiusY||l);this._setPath(n,n._empty()?"M0 0":"AL "+r.x+","+r.y+" "+l+","+h+" 0,"+65535*360)},_setPath:function(n,r){n._path.v=r},_bringToFront:function(n){mi(n._container)},_bringToBack:function(n){gi(n._container)}},gr=tr?_s:T,ps=ze.extend({getEvents:function(){var n=ze.prototype.getEvents.call(this);return n.zoomstart=this._onZoomStart,n},_initContainer:function(){this._container=gr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ot(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ze.prototype._update.call(this);var n=this._bounds,r=n.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,l.setAttribute("width",r.x),l.setAttribute("height",r.y)),Ht(l,n.min),l.setAttribute("viewBox",[n.min.x,n.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(n){var r=n._path=gr("path");n.options.className&&nt(r,n.options.className),n.options.interactive&&nt(r,"leaflet-interactive"),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Ot(n._path),n.removeInteractiveTarget(n._path),delete this._layers[f(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var r=n._path,l=n.options;!r||(l.stroke?(r.setAttribute("stroke",l.color),r.setAttribute("stroke-opacity",l.opacity),r.setAttribute("stroke-width",l.weight),r.setAttribute("stroke-linecap",l.lineCap),r.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?r.setAttribute("stroke-dasharray",l.dashArray):r.removeAttribute("stroke-dasharray"),l.dashOffset?r.setAttribute("stroke-dashoffset",l.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),l.fill?(r.setAttribute("fill",l.fillColor||l.color),r.setAttribute("fill-opacity",l.fillOpacity),r.setAttribute("fill-rule",l.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(n,r){this._setPath(n,S(n._parts,r))},_updateCircle:function(n){var r=n._point,l=Math.max(Math.round(n._radius),1),h=Math.max(Math.round(n._radiusY),1)||l,d="a"+l+","+h+" 0 1,0 ",p=n._empty()?"M0 0":"M"+(r.x-l)+","+r.y+d+l*2+",0 "+d+-l*2+",0 ";this._setPath(n,p)},_setPath:function(n,r){n._path.setAttribute("d",r)},_bringToFront:function(n){mi(n._path)},_bringToBack:function(n){gi(n._path)}});tr&&ps.include(pp);function Jc(n){return Js||tr?new ps(n):null}ut.include({getRenderer:function(n){var r=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var r=this._paneRenderers[n];return r===void 0&&(r=this._createRenderer({pane:n}),this._paneRenderers[n]=r),r},_createRenderer:function(n){return this.options.preferCanvas&&Xc(n)||Jc(n)}});var th=bi.extend({initialize:function(n,r){bi.prototype.initialize.call(this,this._boundsToLatLngs(n),r)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=zt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function mp(n,r){return new th(n,r)}ps.create=gr,ps.pointsToPath=S,sn.geometryToLayer=ca,sn.coordsToLatLng=ha,sn.coordsToLatLngs=fr,sn.latLngToCoords=ua,sn.latLngsToCoords=_r,sn.getFeature=Ci,sn.asFeature=pr,ut.mergeOptions({boxZoom:!0});var eh=Fe.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ot(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),os(),Vo(),this._startPoint=this._map.mouseEventToContainerPoint(n),lt(document,{contextmenu:tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),nt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var r=new yt(this._point,this._startPoint),l=r.getSize();Ht(this._box,r.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Ot(this._box),Dt(this._container,"leaflet-crosshair")),as(),jo(),Wt(document,{contextmenu:tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var r=new Rt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(n){n.keyCode===27&&this._finish()}});ut.addInitHook("addHandler","boxZoom",eh),ut.mergeOptions({doubleClickZoom:!0});var nh=Fe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var r=this._map,l=r.getZoom(),h=r.options.zoomDelta,d=n.originalEvent.shiftKey?l-h:l+h;r.options.doubleClickZoom==="center"?r.setZoom(d):r.setZoomAround(n.containerPoint,d)}});ut.addInitHook("addHandler","doubleClickZoom",nh),ut.mergeOptions({dragging:!0,inertia:!V,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ih=Fe.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Wn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}nt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Dt(this._map._container,"leaflet-grab"),Dt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=zt(this._map.options.maxBounds);this._offsetLimit=Gt(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var r=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(r),this._prunePositions(r)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,r){return n-(n-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;n.x<r.min.x&&(n.x=this._viscousLimit(n.x,r.min.x)),n.y<r.min.y&&(n.y=this._viscousLimit(n.y,r.min.y)),n.x>r.max.x&&(n.x=this._viscousLimit(n.x,r.max.x)),n.y>r.max.y&&(n.y=this._viscousLimit(n.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,r=Math.round(n/2),l=this._initialWorldOffset,h=this._draggable._newPos.x,d=(h-r+l)%n+r-l,p=(h+r+l)%n-r-l,y=Math.abs(d+l)<Math.abs(p+l)?d:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=y},_onDragEnd:function(n){var r=this._map,l=r.options,h=!l.inertia||this._times.length<2;if(r.fire("dragend",n),h)r.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,y=l.easeLinearity,C=d.multiplyBy(y/p),x=C.distanceTo([0,0]),P=Math.min(l.inertiaMaxSpeed,x),F=C.multiplyBy(P/x),K=P/(l.inertiaDeceleration*y),_t=F.multiplyBy(-K/2).round();!_t.x&&!_t.y?r.fire("moveend"):(_t=r._limitOffset(_t,r.options.maxBounds),vt(function(){r.panBy(_t,{duration:K,easeLinearity:y,noMoveStart:!0,animate:!0})}))}}});ut.addInitHook("addHandler","dragging",ih),ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sh=Fe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),lt(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,r=document.documentElement,l=n.scrollTop||r.scrollTop,h=n.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(h,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var r=this._panKeys={},l=this.keyCodes,h,d;for(h=0,d=l.left.length;h<d;h++)r[l.left[h]]=[-1*n,0];for(h=0,d=l.right.length;h<d;h++)r[l.right[h]]=[n,0];for(h=0,d=l.down.length;h<d;h++)r[l.down[h]]=[0,n];for(h=0,d=l.up.length;h<d;h++)r[l.up[h]]=[0,-1*n]},_setZoomDelta:function(n){var r=this._zoomKeys={},l=this.keyCodes,h,d;for(h=0,d=l.zoomIn.length;h<d;h++)r[l.zoomIn[h]]=n;for(h=0,d=l.zoomOut.length;h<d;h++)r[l.zoomOut[h]]=-n},_addHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var r=n.keyCode,l=this._map,h;if(r in this._panKeys)(!l._panAnim||!l._panAnim._inProgress)&&(h=this._panKeys[r],n.shiftKey&&(h=ot(h).multiplyBy(3)),l.panBy(h),l.options.maxBounds&&l.panInsideBounds(l.options.maxBounds));else if(r in this._zoomKeys)l.setZoom(l.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;tn(n)}}});ut.addInitHook("addHandler","keyboard",sh),ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rh=Fe.extend({addHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var r=Lc(n),l=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var h=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),h),tn(n)},_performZoom:function(){var n=this._map,r=n.getZoom(),l=this._map.options.zoomSnap||0;n._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,p=l?Math.ceil(d/l)*l:d,y=n._limitZoom(r+(this._delta>0?p:-p))-r;this._delta=0,this._startTime=null,y&&(n.options.scrollWheelZoom==="center"?n.setZoom(r+y):n.setZoomAround(this._lastMousePos,r+y))}});ut.addInitHook("addHandler","scrollWheelZoom",rh),ut.mergeOptions({tap:!0,tapTolerance:15});var oh=Fe.extend({addHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(!!n.touches){if(ye(n),this._fireClick=!0,n.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var r=n.touches[0],l=r.target;this._startPos=this._newPos=new W(r.clientX,r.clientY),l.tagName&&l.tagName.toLowerCase()==="a"&&nt(l,"leaflet-active"),this._holdTimeout=setTimeout(c(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",r))},this),1e3),this._simulateEvent("mousedown",r),lt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(n){if(clearTimeout(this._holdTimeout),Wt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&n&&n.changedTouches){var r=n.changedTouches[0],l=r.target;l&&l.tagName&&l.tagName.toLowerCase()==="a"&&Dt(l,"leaflet-active"),this._simulateEvent("mouseup",r),this._isTapValid()&&this._simulateEvent("click",r)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(n){var r=n.touches[0];this._newPos=new W(r.clientX,r.clientY),this._simulateEvent("mousemove",r)},_simulateEvent:function(n,r){var l=document.createEvent("MouseEvents");l._simulated=!0,r.target._simulatedClick=!0,l.initMouseEvent(n,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(l)}});De&&(!Oe||dt)&&ut.addInitHook("addHandler","tap",oh),ut.mergeOptions({touchZoom:De&&!V,bounceAtZoomLimits:!0});var ah=Fe.extend({addHooks:function(){nt(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var r=this._map;if(!(!n.touches||n.touches.length!==2||r._animatingZoom||this._zooming)){var l=r.mouseEventToContainerPoint(n.touches[0]),h=r.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(l.add(h)._divideBy(2))),this._startDist=l.distanceTo(h),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend",this._onTouchEnd,this),ye(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var r=this._map,l=r.mouseEventToContainerPoint(n.touches[0]),h=r.mouseEventToContainerPoint(n.touches[1]),d=l.distanceTo(h)/this._startDist;if(this._zoom=r.getScaleZoom(d,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&d<1||this._zoom>r.getMaxZoom()&&d>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var p=l._add(h)._divideBy(2)._subtract(this._centerPoint);if(d===1&&p.x===0&&p.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),It(this._animRequest);var y=c(r._move,r,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=vt(y,this,!0),ye(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,It(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ut.addInitHook("addHandler","touchZoom",ah),ut.BoxZoom=eh,ut.DoubleClickZoom=nh,ut.Drag=ih,ut.Keyboard=sh,ut.ScrollWheelZoom=rh,ut.Tap=oh,ut.TouchZoom=ah,i.version=s,i.Control=Ee,i.control=hs,i.Browser=x_,i.Evented=Ct,i.Mixin=U_,i.Util=vn,i.Class=me,i.Handler=Fe,i.extend=o,i.bind=c,i.stamp=f,i.setOptions=O,i.DomEvent=D_,i.DomUtil=R_,i.PosAnimation=Ac,i.Draggable=Wn,i.LineUtil=q_,i.PolyUtil=G_,i.Point=W,i.point=ot,i.Bounds=yt,i.bounds=Gt,i.Transformation=Bn,i.transformation=Qe,i.Projection=K_,i.LatLng=wt,i.latLng=Nt,i.LatLngBounds=Rt,i.latLngBounds=zt,i.CRS=$t,i.GeoJSON=sn,i.geoJSON=Vc,i.geoJson=op,i.Layer=Pe,i.LayerGroup=vi,i.layerGroup=X_,i.FeatureGroup=yi,i.featureGroup=J_,i.ImageOverlay=mr,i.imageOverlay=ap,i.VideoOverlay=jc,i.videoOverlay=lp,i.SVGOverlay=qc,i.svgOverlay=cp,i.DivOverlay=rn,i.Popup=xi,i.popup=hp,i.Tooltip=Ti,i.tooltip=up,i.Icon=wi,i.icon=tp,i.DivIcon=Gc,i.divIcon=dp,i.Marker=ur,i.marker=ep,i.TileLayer=Ei,i.tileLayer=Kc,i.GridLayer=fs,i.gridLayer=fp,i.SVG=ps,i.svg=Jc,i.Renderer=ze,i.Canvas=Qc,i.canvas=Xc,i.Path=Cn,i.CircleMarker=dr,i.circleMarker=np,i.Circle=la,i.circle=ip,i.Polyline=nn,i.polyline=sp,i.Polygon=bi,i.polygon=rp,i.Rectangle=th,i.rectangle=mp,i.Map=ut,i.map=B_;var gp=window.L;i.noConflict=function(){return window.L=gp,this},window.L=i})})(ul,ul.exports);var an=ul.exports;const Px={class:"row me-auto"},Ix=z("div",{class:"col-8 mt-1 ps-1"},[z("div",{id:"map"})],-1),Sx={class:"col-4 ps-0 pe-2"},kx=z("div",{class:"row offset-3 my-2 ps-0"},"Adding SanBau Data",-1),Lx={class:"row align-items-center mb-1"},Ax=z("div",{class:"col-3 ps-2"},"Nickname",-1),Mx={class:"row align-items-center mb-1"},Nx=z("div",{class:"col-3 ps-2"},"Plate",-1),Rx=z("option",{value:"human"},"Human",-1),Ox=z("option",{value:"car"},"Car",-1),Dx=z("option",{value:"motor"},"Motorcycle",-1),Bx=z("option",{value:"truck"},"Truck",-1),Fx=[Rx,Ox,Dx,Bx],zx={class:"row align-items-center mb-1"},Wx=z("div",{class:"col-3 ps-2"},"Date/Time",-1),Hx={class:"row align-items-center mb-1"},Ux=z("div",{class:"col-3 ps-2"},"Behavior",-1),Zx={class:"row align-items-center mb-1"},$x=z("div",{class:"col-3 ps-2"},"Address",-1),Vx={class:"row align-items-center mb-1"},jx=z("div",{class:"col-3 ps-2"},"Lat, Lng",-1),qx=z("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-geo-alt",viewBox:"0 0 16 16"},[z("path",{d:"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"}),z("path",{d:"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})],-1),Gx=[qx],Kx={class:"row align-items-center"},Yx=z("div",{class:"col-3 ps-2"},"appendix",-1),Qx=z("img",{class:"w-100",src:"https://s.imgur.com/images/favicon.png"},null,-1),Xx=[Qx],Jx={setup(e){const i=$d({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=s_(i);w_(i,{provider:new Oo("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let o,a,c,u,f=an.marker(),_=hn({type:"car"}),g=7;function m(){let j,H={nickname:_.value.nickname,plate:_.value.plate,type:_.value.type,date:_.value.date,time:_.value.time,behavior:_.value.behavior,address:_.value.address,latlng:_.value.latlng,appendix:_.value.appendix};if(!(H.nickname==null||H.plate==null||H.date==null||H.time==null||H.behavior==null||H.latlng==null)&&!(H.plate!=null&&H.type=="human")){for(let U in H)H[U]==null&&(H[U]="");Rr($e(s,"/map/count")).then(U=>{try{j=U.val()+1}catch{j=1}i_($e(s,`/map/${j}`),{nickname:H.nickname,plate:H.plate,type:H.type,behavior:H.behavior,address:H.address,date:H.date,time:H.time,latlng:H.latlng,appendix:H.appendix}),ll($e(s,"/map/"),{count:j})}),O()}}function w(){o.setView([a,c]),_.value.latlng=`${a.toFixed(g)}, ${c.toFixed(g)}`,o.removeLayer(f),an.marker([a,c]).addTo(o).bindPopup("you're here").openPopup()}function E(){window.open("https://imgur.com/upload")}function A(){_.value.link!=""&&_.value.link!=null&&confirm("open link in new window?")&&window.open(_.value.link)}function O(){_.value=[],_.value.type="car",o.removeLayer(f)}async function $(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(j=>{a=j.coords.latitude,c=j.coords.longitude,o=an.map("map",{center:[a,c],zoom:15,attributionControl:!0,zoomControl:!0}),an.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(o),an.marker([a,c]).addTo(o).bindPopup("you're here").openPopup(),o.on("click",Mt),o.on("mouseup",et)})}function et(){o.getCenter()}function Mt(j){u=j;let H=_.value.type,U=7;o.removeLayer(f),f=an.marker(j.latlng,{icon:X(H)}).addTo(o).bindPopup("SamBao is here").openPopup(),_.value.latlng=`${j.latlng.lat.toFixed(U)}, ${j.latlng.lng.toFixed(U)}`}function q(){let j=_.value.type;o.removeLayer(f),f=an.marker(u.latlng,{icon:X(j)}).addTo(o).bindPopup("SamBao is here").openPopup()}function tt(){navigator.clipboard.readText().then(async j=>{try{j.length>1&&((await fetch(j,{mode:"no-cors"})).status!=404?_.value.link=j:_.value.link="")}catch{_.value.link=""}})}function X(j){return an.icon({iconUrl:`./pic/${j}.png`,iconSize:[40,40],popupAnchor:[0,-10]})}async function Xt(){let j=[],H=await Rr($e(s,"/map/count"));for(let U=1;U<=H.val();U++)j.push(await(await Rr($e(s,`/map/${U}`))).val());j.forEach(U=>{let Jt=`
		<table width="250px">
			<tr>
				<td width="100px">Nickname</td>
				<td width="150px">${U.nickname}</td>
			</tr>
			<tr>
				<td>Plate</td>
				<td>${U.plate}</td>
			</tr>
			<tr>
				<td>Date</td>
				<td>${U.date}</td>
			</tr>
			<tr>
				<td>Time</td>
				<td>${U.time}</td>
			</tr>
			<tr>
				<td>Behavior</td>
				<td>${U.behavior}</td>
			</tr>
			<tr>
				<td>Address</td>
				<td>${U.address}</td>
			</tr>
			<tr>
				<td>Appendix</td>
				<td><a href=${U.appendix} target="_blank">Link</a></td>
			</tr>
		</table>`;an.marker(U.latlng.split(","),{icon:X(U.type)}).addTo(o).bindPopup(Jt)})}return Ki(async()=>{await $(),Ln.value.show_map&&window.addEventListener("focus",tt),await Xt()}),(j,H)=>be((Ue(),cn("div",Px,[Ix,z("div",Sx,[kx,z("div",Lx,[Ax,be(z("input",{class:"col rounded border py-2 bg-dark text-light border-secondary",type:"text",placeholder:"300\u54E5/\u796D\u592E\u4E42/\u99AC\u7DAD\u62C9/\u97D3\u7E3D\u6A5F","onUpdate:modelValue":H[0]||(H[0]=U=>ht(_).nickname=U),maxlength:"20"},null,512),[[He,ht(_).nickname]])]),z("div",Mx,[Nx,be(z("input",{class:"col rounded border py-2 bg-dark border-secondary text-light me-1 text-uppercase",type:"text",placeholder:"ABC-1234","onUpdate:modelValue":H[1]||(H[1]=U=>ht(_).plate=U)},null,512),[[He,ht(_).plate]]),be(z("select",{class:"col-4 py-2 rounded border-secondary border bg-dark text-light","onUpdate:modelValue":H[2]||(H[2]=U=>ht(_).type=U),onChange:q},Fx,544),[[Jg,ht(_).type]])]),z("div",zx,[Wx,be(z("input",{class:"col border rounded py-2 me-1 bg-dark text-light border-secondary","onUpdate:modelValue":H[3]||(H[3]=U=>ht(_).date=U),type:"date"},null,512),[[He,ht(_).date]]),be(z("input",{class:"border-secondary col-4 border rounded py-2 bg-dark text-light","onUpdate:modelValue":H[4]||(H[4]=U=>ht(_).time=U),type:"time"},null,512),[[He,ht(_).time]])]),z("div",Hx,[Ux,be(z("textarea",{class:"col py-2 border rounded bg-dark text-light border-secondary",type:"text",placeholder:"How SanBau?",maxlength:"100","onUpdate:modelValue":H[5]||(H[5]=U=>ht(_).behavior=U)},null,512),[[He,ht(_).behavior]])]),z("div",Zx,[$x,be(z("textarea",{class:"col py-2 border rounded bg-dark text-light border-secondary",type:"text",placeholder:"Where? (option)",maxlength:"100","onUpdate:modelValue":H[6]||(H[6]=U=>ht(_).address=U)},null,512),[[He,ht(_).address]])]),z("div",Vx,[jx,be(z("input",{class:"col border rounded bg-dark text-light py-2 border-secondary",type:"text",placeholder:"Location","onUpdate:modelValue":H[7]||(H[7]=U=>ht(_).latlng=U),maxlength:"30"},null,512),[[He,ht(_).latlng]]),z("div",{class:"badge col-2 text-warning",title:"get currten latlng",type:"button",onClick:w},Gx)]),z("div",Kx,[Yx,be(z("input",{class:"col border border-secondary rounded py-2 bg-dark text-secondary",type:"url",placeholder:"upload image/video","onUpdate:modelValue":H[8]||(H[8]=U=>ht(_).link=U),onClick:A},null,512),[[He,ht(_).link]]),z("div",{class:"col-2",onClick:E,type:"button",title:"link to imgur"},Xx)]),z("div",{class:"row mt-2 justify-content-center"},[z("div",{class:"col-3 badge fs-6 border border-secondary text-success me-1 ms-1 py-2",type:"button",onClick:m},"Add"),z("div",{class:"col-3 badge fs-6 border border-secondary text-danger py-2",type:"button",onClick:O},"Clear")])])],512)),[[tv,ht(Ln).show_map==!0]])}};const tT={key:0,class:"container-fluid px-3 hate"},eT=vg('<div class="fs-1 my-1"> Author: <span class="text-warning">OrzOGC</span></div><div class="fs-1 my-1">\u6D3B\u7684\u7CBE\u5F69,\u4FEE\u7684\u75DB\u5FEB,Fix On RoaD</div><div class="fs-1 my-1 text-center">\u9055\u898F\u9B54\u4EBA\u90FD\u53BB\u6B7B\u4E00\u6B7B\u5566\u5E79</div><div class="fs-1 my-1 text-end">\u81C9\u76AE\u90FD\u6BD4\u6211\u963F\u5B24\u7684\u8173\u5E95\u76AE\u9084\u539A\u5566\u5E79</div><div class="fs-1 my-1 text-center">\u4E09\u5BF6\u90FD\u4ED6\u5ABD\u7684\u53BB\u5403\u5C4E\u5566\u5E79</div><div class="fs-1 my-1">\u9F9C\u4ED4\u958B\u90A3\u9EBC\u6162\u9084\u4E0D\u6EFE\u53BB\u9A0E\u52C1\u6230\u5566\u5E79</div><div class="fs-1 my-2 text-center">\u4ED6\u5ABD\u7684\u5357\u90E8\u9109\u4E0B\u5F70\u5316\u8C93\u5974\u5C31\u662F\u64CD\u4F60\u5A18\u7684\u6C92\u6C34\u6E96\u5566\u5E79</div>',7),nT={setup(e){let t=hn(["","","",""]);function i(o){t.value[o]==""?t.value[o]="fuck-top":t.value[o]=""}function s(){setTimeout(async()=>{if(Ln.value.show_about==!0){let o=Math.round(Math.random()*3);i(o)}s()},Math.round(Math.random()*1e4))}return Ki(async()=>{s()}),(o,a)=>ht(Ln).show_about==!0?(Ue(),cn("div",tT,[eT,z("div",{class:Ve(["text-black lh-1 fuck fuck-1",ht(t)[0]])},"\u5E79",2),z("div",{class:Ve(["text-black lh-1 fuck fuck-2",ht(t)[1]])},"\u6041",2),z("div",{class:Ve(["text-black lh-1 fuck fuck-3",ht(t)[2]])},"\u5A18",2),z("div",{class:Ve(["text-black lh-1 fuck fuck-4",ht(t)[3]])},"\u5566",2)])):xs("",!0)}};const iT={key:0,class:"txt"},sT={key:0,class:"bg-dark border border-secondary input"},rT={class:"row w-100 h-75 mx-auto mt-3"},oT={class:"col-9"},aT={class:"form-floating"},lT={for:"input",class:"text-light"},cT={class:"row my-2 mx-2 align-items-center"},hT=z("div",{class:"col-2"},"Author",-1),uT={class:"row h-100"},dT=["onClick"],fT={key:0,class:"zero text-light h-75 mt-2 overflow-auto text-break text-wrap txt lh-sm"},_T={key:1,class:"zero text-light d-flex align-self-center justify-content-end fw-light small"},pT={setup(e){const i=$d({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=s_(i);w_(i,{provider:new Oo("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let o=36,a=hn(""),c=hn(""),u=hn(""),f=hn({}),_=hn(0);Ki(()=>{O()});function g(q,tt){_.value=1,c.value="message",a.value=q,u.value=tt}function m(){_.value==0?_.value=1:_.value=0}function w(){let q=Math.ceil(Math.random()*360),tt=Math.ceil(Math.random()*75)+25,X=Math.ceil(Math.random()*25)+5;return`background-color:hsla(${q},${tt}%,${X}%)`}function E(q){AC($e(s,`/msg/${q}`),tt=>{let X=tt.val();try{f.value[q]={msg:X.msg,date:X.date,bg:X.bg,nic:X.nic}}catch{f.value[q]={msg:"",date:"",bg:w(),nic:""}}})}function A(){let q=`pure front end message board
	language:javascript
	framework:Bootstrap,Vue.js
	database:firebase
============================
author:OrzOGC
	junior amatuer developer
	senior mechanical designer
	senior part-time gofer
	and road rage monster`;a.value=q,c.value="about",u.value="OrzOGC"}function O(){et();for(let q=1;q<=o;q++)E(q)}function $(){let q=a.value,tt,X=u.value;X==null&&(X=""),q==""&&(c.value="Oops!"),q!=""&&Rr($e(s,"/msg/flag")).then(Xt=>{let j=Xt.val();j>=o?tt=1:tt=j+1;let H={day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};i_($e(s,`/msg/${tt}`),{msg:q,date:new Date().toLocaleString("en-US",H),bg:w(),nic:X}),ll($e(s,"/msg/"),{flag:tt}),O(),_.value=0})}function et(){a.value="",c.value="Write some messages",u.value=""}function Mt(){for(let q=1;q<=o;q++)ll($e(s,`/msg/${q}`),{bg:w()});et()}return(q,tt)=>ht(Ln).show_msg==!0?(Ue(),cn("div",iT,[z("div",{class:"bg-dark fab text-warning fs-1 lh-1 fw-bolder text-center",type:"button",onClick:m},"+"),ht(_)==1?(Ue(),cn("div",sT,[z("div",{type:"button",class:"position-absolute top-0 end-0 btn-close btn-close-white",onClick:m}),z("div",rT,[z("div",oT,[z("div",aT,[be(z("textarea",{id:"input",class:"zero text-light border-secondary bg-dark h-100 lh-base form-control txt","onUpdate:modelValue":tt[0]||(tt[0]=X=>qt(a)?a.value=X:a=X)},wr(ht(a)),513),[[He,ht(a)]]),z("label",lT,wr(ht(c)),1)])]),z("div",{class:"col ps-0 me-3 flex-column d-flex"},[z("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-center text-success",onClick:$},"Post"),z("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-danger text-center",onClick:et},"Clear"),z("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-warning text-center",onClick:Mt},"Reset"),z("div",{type:"button",class:"border btn-block border-secondary text-center rounded my-2 text-info",onClick:A},"About")])]),z("div",cT,[hT,be(z("input",{class:"col-5 py-2 bg-dark rounded border border-secondary text-light px-2",type:"text",placeholder:"\u516B\u5366\u5C71\u4E0B\u75E3\u4E5D",maxlength:"50","onUpdate:modelValue":tt[1]||(tt[1]=X=>qt(u)?u.value=X:u=X)},null,512),[[He,ht(u)]])])])):xs("",!0),z("div",uT,[(Ue(!0),cn(Ie,null,wg(ht(f),X=>(Ue(),cn("div",{class:"col-2 h-25",style:lo(X.bg),onClick:Xt=>g(X.msg,X.nic)},[X.msg!=""?(Ue(),cn("div",fT,wr(X.msg),1)):xs("",!0),X.date!=""?(Ue(),cn("div",_T,wr(X.date),1)):xs("",!0)],12,dT))),256))])])):xs("",!0)}};wo(av).mount("#navbar");wo(Jx).mount("#map-frame");wo(nT).mount("#about");wo(pT).mount("#msg");
