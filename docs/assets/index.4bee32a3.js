const bp=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}};bp();function cl(e,t){const i=Object.create(null),s=e.split(",");for(let r=0;r<s.length;r++)i[s[r]]=!0;return t?r=>!!i[r.toLowerCase()]:r=>!!i[r]}const Cp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xp=cl(Cp);function Ru(e){return!!e||e===""}function lr(e){if(Q(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],r=Qt(s)?Pp(s):lr(s);if(r)for(const a in r)t[a]=r[a]}return t}else{if(Qt(e))return e;if(Zt(e))return e}}const Ep=/;(?![^(]*\))/g,Tp=/:(.+)/;function Pp(e){const t={};return e.split(Ep).forEach(i=>{if(i){const s=i.split(Tp);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function $e(e){let t="";if(Qt(e))t=e;else if(Q(e))for(let i=0;i<e.length;i++){const s=$e(e[i]);s&&(t+=s+" ")}else if(Zt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function Ip(e,t){if(e.length!==t.length)return!1;let i=!0;for(let s=0;i&&s<e.length;s++)i=cr(e[s],t[s]);return i}function cr(e,t){if(e===t)return!0;let i=ch(e),s=ch(t);if(i||s)return i&&s?e.getTime()===t.getTime():!1;if(i=Q(e),s=Q(t),i||s)return i&&s?Ip(e,t):!1;if(i=Zt(e),s=Zt(t),i||s){if(!i||!s)return!1;const r=Object.keys(e).length,a=Object.keys(t).length;if(r!==a)return!1;for(const c in e){const u=e.hasOwnProperty(c),f=t.hasOwnProperty(c);if(u&&!f||!u&&f||!cr(e[c],t[c]))return!1}}return String(e)===String(t)}function Sp(e,t){return e.findIndex(i=>cr(i,t))}const Co=e=>Qt(e)?e:e==null?"":Q(e)||Zt(e)&&(e.toString===Bu||!nt(e.toString))?JSON.stringify(e,Ou,2):String(e),Ou=(e,t)=>t&&t.__v_isRef?Ou(e,t.value):ki(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,r])=>(i[`${s} =>`]=r,i),{})}:ur(t)?{[`Set(${t.size})`]:[...t.values()]}:Zt(t)&&!Q(t)&&!Fu(t)?String(t):t,Tt={},Li=[],Ae=()=>{},Lp=()=>!1,kp=/^on[^a-z]/,hr=e=>kp.test(e),hl=e=>e.startsWith("onUpdate:"),ne=Object.assign,ul=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Ap=Object.prototype.hasOwnProperty,_t=(e,t)=>Ap.call(e,t),Q=Array.isArray,ki=e=>dr(e)==="[object Map]",ur=e=>dr(e)==="[object Set]",ch=e=>e instanceof Date,nt=e=>typeof e=="function",Qt=e=>typeof e=="string",dl=e=>typeof e=="symbol",Zt=e=>e!==null&&typeof e=="object",Du=e=>Zt(e)&&nt(e.then)&&nt(e.catch),Bu=Object.prototype.toString,dr=e=>Bu.call(e),Mp=e=>dr(e).slice(8,-1),Fu=e=>dr(e)==="[object Object]",fl=e=>Qt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mo=cl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fr=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Np=/-(\w)/g,Ri=fr(e=>e.replace(Np,(t,i)=>i?i.toUpperCase():"")),Rp=/\B([A-Z])/g,Vi=fr(e=>e.replace(Rp,"-$1").toLowerCase()),zu=fr(e=>e.charAt(0).toUpperCase()+e.slice(1)),fa=fr(e=>e?`on${zu(e)}`:""),Ms=(e,t)=>!Object.is(e,t),No=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},Do=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Bo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let hh;const Op=()=>hh||(hh=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let an;class Dp{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&an&&(this.parent=an,this.index=(an.scopes||(an.scopes=[])).push(this)-1)}run(t){if(this.active)try{return an=this,t()}finally{an=this.parent}}on(){an=this}off(){an=this.parent}stop(t){if(this.active){let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.scopes)for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function Bp(e,t=an){t&&t.active&&t.effects.push(e)}const _l=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Hu=e=>(e.w&Mn)>0,Wu=e=>(e.n&Mn)>0,Fp=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Mn},zp=e=>{const{deps:t}=e;if(t.length){let i=0;for(let s=0;s<t.length;s++){const r=t[s];Hu(r)&&!Wu(r)?r.delete(e):t[i++]=r,r.w&=~Mn,r.n&=~Mn}t.length=i}},Ia=new WeakMap;let bs=0,Mn=1;const Sa=30;let Ve;const Xn=Symbol(""),La=Symbol("");class pl{constructor(t,i=null,s){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Bp(this,s)}run(){if(!this.active)return this.fn();let t=Ve,i=In;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ve,Ve=this,In=!0,Mn=1<<++bs,bs<=Sa?Fp(this):uh(this),this.fn()}finally{bs<=Sa&&zp(this),Mn=1<<--bs,Ve=this.parent,In=i,this.parent=void 0}}stop(){this.active&&(uh(this),this.onStop&&this.onStop(),this.active=!1)}}function uh(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let In=!0;const Uu=[];function ji(){Uu.push(In),In=!1}function qi(){const e=Uu.pop();In=e===void 0?!0:e}function pe(e,t,i){if(In&&Ve){let s=Ia.get(e);s||Ia.set(e,s=new Map);let r=s.get(i);r||s.set(i,r=_l()),Zu(r)}}function Zu(e,t){let i=!1;bs<=Sa?Wu(e)||(e.n|=Mn,i=!Hu(e)):i=!e.has(Ve),i&&(e.add(Ve),Ve.deps.push(e))}function fn(e,t,i,s,r,a){const c=Ia.get(e);if(!c)return;let u=[];if(t==="clear")u=[...c.values()];else if(i==="length"&&Q(e))c.forEach((f,_)=>{(_==="length"||_>=s)&&u.push(f)});else switch(i!==void 0&&u.push(c.get(i)),t){case"add":Q(e)?fl(i)&&u.push(c.get("length")):(u.push(c.get(Xn)),ki(e)&&u.push(c.get(La)));break;case"delete":Q(e)||(u.push(c.get(Xn)),ki(e)&&u.push(c.get(La)));break;case"set":ki(e)&&u.push(c.get(Xn));break}if(u.length===1)u[0]&&ka(u[0]);else{const f=[];for(const _ of u)_&&f.push(..._);ka(_l(f))}}function ka(e,t){for(const i of Q(e)?e:[...e])(i!==Ve||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const Hp=cl("__proto__,__v_isRef,__isVue"),$u=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(dl)),Wp=ml(),Up=ml(!1,!0),Zp=ml(!0),dh=$p();function $p(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const s=mt(this);for(let a=0,c=this.length;a<c;a++)pe(s,"get",a+"");const r=s[t](...i);return r===-1||r===!1?s[t](...i.map(mt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){ji();const s=mt(this)[t].apply(this,i);return qi(),s}}),e}function ml(e=!1,t=!1){return function(s,r,a){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&a===(e?t?rm:Ku:t?Gu:qu).get(s))return s;const c=Q(s);if(!e&&c&&_t(dh,r))return Reflect.get(dh,r,a);const u=Reflect.get(s,r,a);return(dl(r)?$u.has(r):Hp(r))||(e||pe(s,"get",r),t)?u:qt(u)?!c||!fl(r)?u.value:u:Zt(u)?e?Yu(u):yl(u):u}}const Vp=Vu(),jp=Vu(!0);function Vu(e=!1){return function(i,s,r,a){let c=i[s];if(Ns(c)&&qt(c)&&!qt(r))return!1;if(!e&&!Ns(r)&&(Qu(r)||(r=mt(r),c=mt(c)),!Q(i)&&qt(c)&&!qt(r)))return c.value=r,!0;const u=Q(i)&&fl(s)?Number(s)<i.length:_t(i,s),f=Reflect.set(i,s,r,a);return i===mt(a)&&(u?Ms(r,c)&&fn(i,"set",s,r):fn(i,"add",s,r)),f}}function qp(e,t){const i=_t(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&fn(e,"delete",t,void 0),s}function Gp(e,t){const i=Reflect.has(e,t);return(!dl(t)||!$u.has(t))&&pe(e,"has",t),i}function Kp(e){return pe(e,"iterate",Q(e)?"length":Xn),Reflect.ownKeys(e)}const ju={get:Wp,set:Vp,deleteProperty:qp,has:Gp,ownKeys:Kp},Yp={get:Zp,set(e,t){return!0},deleteProperty(e,t){return!0}},Qp=ne({},ju,{get:Up,set:jp}),gl=e=>e,_r=e=>Reflect.getPrototypeOf(e);function xo(e,t,i=!1,s=!1){e=e.__v_raw;const r=mt(e),a=mt(t);t!==a&&!i&&pe(r,"get",t),!i&&pe(r,"get",a);const{has:c}=_r(r),u=s?gl:i?bl:Rs;if(c.call(r,t))return u(e.get(t));if(c.call(r,a))return u(e.get(a));e!==r&&e.get(t)}function Eo(e,t=!1){const i=this.__v_raw,s=mt(i),r=mt(e);return e!==r&&!t&&pe(s,"has",e),!t&&pe(s,"has",r),e===r?i.has(e):i.has(e)||i.has(r)}function To(e,t=!1){return e=e.__v_raw,!t&&pe(mt(e),"iterate",Xn),Reflect.get(e,"size",e)}function fh(e){e=mt(e);const t=mt(this);return _r(t).has.call(t,e)||(t.add(e),fn(t,"add",e,e)),this}function _h(e,t){t=mt(t);const i=mt(this),{has:s,get:r}=_r(i);let a=s.call(i,e);a||(e=mt(e),a=s.call(i,e));const c=r.call(i,e);return i.set(e,t),a?Ms(t,c)&&fn(i,"set",e,t):fn(i,"add",e,t),this}function ph(e){const t=mt(this),{has:i,get:s}=_r(t);let r=i.call(t,e);r||(e=mt(e),r=i.call(t,e)),s&&s.call(t,e);const a=t.delete(e);return r&&fn(t,"delete",e,void 0),a}function mh(){const e=mt(this),t=e.size!==0,i=e.clear();return t&&fn(e,"clear",void 0,void 0),i}function Po(e,t){return function(s,r){const a=this,c=a.__v_raw,u=mt(c),f=t?gl:e?bl:Rs;return!e&&pe(u,"iterate",Xn),c.forEach((_,g)=>s.call(r,f(_),f(g),a))}}function Io(e,t,i){return function(...s){const r=this.__v_raw,a=mt(r),c=ki(a),u=e==="entries"||e===Symbol.iterator&&c,f=e==="keys"&&c,_=r[e](...s),g=i?gl:t?bl:Rs;return!t&&pe(a,"iterate",f?La:Xn),{next(){const{value:m,done:w}=_.next();return w?{value:m,done:w}:{value:u?[g(m[0]),g(m[1])]:g(m),done:w}},[Symbol.iterator](){return this}}}}function xn(e){return function(...t){return e==="delete"?!1:this}}function Xp(){const e={get(a){return xo(this,a)},get size(){return To(this)},has:Eo,add:fh,set:_h,delete:ph,clear:mh,forEach:Po(!1,!1)},t={get(a){return xo(this,a,!1,!0)},get size(){return To(this)},has:Eo,add:fh,set:_h,delete:ph,clear:mh,forEach:Po(!1,!0)},i={get(a){return xo(this,a,!0)},get size(){return To(this,!0)},has(a){return Eo.call(this,a,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:Po(!0,!1)},s={get(a){return xo(this,a,!0,!0)},get size(){return To(this,!0)},has(a){return Eo.call(this,a,!0)},add:xn("add"),set:xn("set"),delete:xn("delete"),clear:xn("clear"),forEach:Po(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Io(a,!1,!1),i[a]=Io(a,!0,!1),t[a]=Io(a,!1,!0),s[a]=Io(a,!0,!0)}),[e,i,t,s]}const[Jp,tm,em,nm]=Xp();function vl(e,t){const i=t?e?nm:em:e?tm:Jp;return(s,r,a)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(_t(i,r)&&r in s?i:s,r,a)}const im={get:vl(!1,!1)},sm={get:vl(!1,!0)},om={get:vl(!0,!1)},qu=new WeakMap,Gu=new WeakMap,Ku=new WeakMap,rm=new WeakMap;function am(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lm(e){return e.__v_skip||!Object.isExtensible(e)?0:am(Mp(e))}function yl(e){return Ns(e)?e:wl(e,!1,ju,im,qu)}function cm(e){return wl(e,!1,Qp,sm,Gu)}function Yu(e){return wl(e,!0,Yp,om,Ku)}function wl(e,t,i,s,r){if(!Zt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=r.get(e);if(a)return a;const c=lm(e);if(c===0)return e;const u=new Proxy(e,c===2?s:i);return r.set(e,u),u}function Ai(e){return Ns(e)?Ai(e.__v_raw):!!(e&&e.__v_isReactive)}function Ns(e){return!!(e&&e.__v_isReadonly)}function Qu(e){return!!(e&&e.__v_isShallow)}function Xu(e){return Ai(e)||Ns(e)}function mt(e){const t=e&&e.__v_raw;return t?mt(t):e}function Ju(e){return Do(e,"__v_skip",!0),e}const Rs=e=>Zt(e)?yl(e):e,bl=e=>Zt(e)?Yu(e):e;function td(e){In&&Ve&&(e=mt(e),Zu(e.dep||(e.dep=_l())))}function ed(e,t){e=mt(e),e.dep&&ka(e.dep)}function qt(e){return!!(e&&e.__v_isRef===!0)}function cn(e){return hm(e,!1)}function hm(e,t){return qt(e)?e:new um(e,t)}class um{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:mt(t),this._value=i?t:Rs(t)}get value(){return td(this),this._value}set value(t){t=this.__v_isShallow?t:mt(t),Ms(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Rs(t),ed(this))}}function lt(e){return qt(e)?e.value:e}const dm={get:(e,t,i)=>lt(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const r=e[t];return qt(r)&&!qt(i)?(r.value=i,!0):Reflect.set(e,t,i,s)}};function nd(e){return Ai(e)?e:new Proxy(e,dm)}class fm{constructor(t,i,s,r){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new pl(t,()=>{this._dirty||(this._dirty=!0,ed(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const t=mt(this);return td(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function _m(e,t,i=!1){let s,r;const a=nt(e);return a?(s=e,r=Ae):(s=e.get,r=e.set),new fm(s,r,a||!r,i)}Promise.resolve();function Sn(e,t,i,s){let r;try{r=s?e(...s):e()}catch(a){pr(a,t,i)}return r}function xe(e,t,i,s){if(nt(e)){const a=Sn(e,t,i,s);return a&&Du(a)&&a.catch(c=>{pr(c,t,i)}),a}const r=[];for(let a=0;a<e.length;a++)r.push(xe(e[a],t,i,s));return r}function pr(e,t,i,s=!0){const r=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,u=i;for(;a;){const _=a.ec;if(_){for(let g=0;g<_.length;g++)if(_[g](e,c,u)===!1)return}a=a.parent}const f=t.appContext.config.errorHandler;if(f){Sn(f,null,10,[e,c,u]);return}}pm(e,i,r,s)}function pm(e,t,i,s=!0){console.error(e)}let Fo=!1,Aa=!1;const fe=[];let hn=0;const Ts=[];let Cs=null,Pi=0;const Ps=[];let En=null,Ii=0;const id=Promise.resolve();let Cl=null,Ma=null;function mm(e){const t=Cl||id;return e?t.then(this?e.bind(this):e):t}function gm(e){let t=hn+1,i=fe.length;for(;t<i;){const s=t+i>>>1;Os(fe[s])<e?t=s+1:i=s}return t}function sd(e){(!fe.length||!fe.includes(e,Fo&&e.allowRecurse?hn+1:hn))&&e!==Ma&&(e.id==null?fe.push(e):fe.splice(gm(e.id),0,e),od())}function od(){!Fo&&!Aa&&(Aa=!0,Cl=id.then(ld))}function vm(e){const t=fe.indexOf(e);t>hn&&fe.splice(t,1)}function rd(e,t,i,s){Q(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&i.push(e),od()}function ym(e){rd(e,Cs,Ts,Pi)}function wm(e){rd(e,En,Ps,Ii)}function xl(e,t=null){if(Ts.length){for(Ma=t,Cs=[...new Set(Ts)],Ts.length=0,Pi=0;Pi<Cs.length;Pi++)Cs[Pi]();Cs=null,Pi=0,Ma=null,xl(e,t)}}function ad(e){if(Ps.length){const t=[...new Set(Ps)];if(Ps.length=0,En){En.push(...t);return}for(En=t,En.sort((i,s)=>Os(i)-Os(s)),Ii=0;Ii<En.length;Ii++)En[Ii]();En=null,Ii=0}}const Os=e=>e.id==null?1/0:e.id;function ld(e){Aa=!1,Fo=!0,xl(e),fe.sort((i,s)=>Os(i)-Os(s));const t=Ae;try{for(hn=0;hn<fe.length;hn++){const i=fe[hn];i&&i.active!==!1&&Sn(i,null,14)}}finally{hn=0,fe.length=0,ad(),Fo=!1,Cl=null,(fe.length||Ts.length||Ps.length)&&ld(e)}}function bm(e,t,...i){const s=e.vnode.props||Tt;let r=i;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:m,trim:w}=s[g]||Tt;w?r=i.map(T=>T.trim()):m&&(r=i.map(Bo))}let u,f=s[u=fa(t)]||s[u=fa(Ri(t))];!f&&a&&(f=s[u=fa(Vi(t))]),f&&xe(f,e,6,r);const _=s[u+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,xe(_,e,6,r)}}function cd(e,t,i=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const a=e.emits;let c={},u=!1;if(!nt(e)){const f=_=>{const g=cd(_,t,!0);g&&(u=!0,ne(c,g))};!i&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!a&&!u?(s.set(e,null),null):(Q(a)?a.forEach(f=>c[f]=null):ne(c,a),s.set(e,c),c)}function El(e,t){return!e||!hr(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,Vi(t))||_t(e,t))}let Le=null,hd=null;function zo(e){const t=Le;return Le=e,hd=e&&e.type.__scopeId||null,t}function Cm(e,t=Le,i){if(!t||e._n)return e;const s=(...r)=>{s._d&&Ph(-1);const a=zo(t),c=e(...r);return zo(a),s._d&&Ph(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function _a(e){const{type:t,vnode:i,proxy:s,withProxy:r,props:a,propsOptions:[c],slots:u,attrs:f,emit:_,render:g,renderCache:m,data:w,setupState:T,ctx:A,inheritAttrs:O}=e;let Z,j;const Y=zo(e);try{if(i.shapeFlag&4){const X=r||s;Z=Ze(g.call(X,X,m,a,T,w,A)),j=f}else{const X=t;Z=Ze(X.length>1?X(a,{attrs:f,slots:u,emit:_}):X(a,null)),j=t.props?f:xm(f)}}catch(X){Is.length=0,pr(X,e,1),Z=je(qe)}let F=Z;if(j&&O!==!1){const X=Object.keys(j),{shapeFlag:J}=F;X.length&&J&7&&(c&&X.some(hl)&&(j=Em(j,c)),F=Oi(F,j))}return i.dirs&&(F.dirs=F.dirs?F.dirs.concat(i.dirs):i.dirs),i.transition&&(F.transition=i.transition),Z=F,zo(Y),Z}const xm=e=>{let t;for(const i in e)(i==="class"||i==="style"||hr(i))&&((t||(t={}))[i]=e[i]);return t},Em=(e,t)=>{const i={};for(const s in e)(!hl(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function Tm(e,t,i){const{props:s,children:r,component:a}=e,{props:c,children:u,patchFlag:f}=t,_=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&f>=0){if(f&1024)return!0;if(f&16)return s?gh(s,c,_):!!c;if(f&8){const g=t.dynamicProps;for(let m=0;m<g.length;m++){const w=g[m];if(c[w]!==s[w]&&!El(_,w))return!0}}}else return(r||u)&&(!u||!u.$stable)?!0:s===c?!1:s?c?gh(s,c,_):!0:!!c;return!1}function gh(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const a=s[r];if(t[a]!==e[a]&&!El(i,a))return!0}return!1}function Pm({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Im=e=>e.__isSuspense;function Sm(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):wm(e)}function Lm(e,t){if(te){let i=te.provides;const s=te.parent&&te.parent.provides;s===i&&(i=te.provides=Object.create(s)),i[e]=t}}function pa(e,t,i=!1){const s=te||Le;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return i&&nt(t)?t.call(s.proxy):t}}const vh={};function ma(e,t,i){return ud(e,t,i)}function ud(e,t,{immediate:i,deep:s,flush:r,onTrack:a,onTrigger:c}=Tt){const u=te;let f,_=!1,g=!1;if(qt(e)?(f=()=>e.value,_=Qu(e)):Ai(e)?(f=()=>e,s=!0):Q(e)?(g=!0,_=e.some(Ai),f=()=>e.map(j=>{if(qt(j))return j.value;if(Ai(j))return Yn(j);if(nt(j))return Sn(j,u,2)})):nt(e)?t?f=()=>Sn(e,u,2):f=()=>{if(!(u&&u.isUnmounted))return m&&m(),xe(e,u,3,[w])}:f=Ae,t&&s){const j=f;f=()=>Yn(j())}let m,w=j=>{m=Z.onStop=()=>{Sn(j,u,4)}};if(Ds)return w=Ae,t?i&&xe(t,u,3,[f(),g?[]:void 0,w]):f(),Ae;let T=g?[]:vh;const A=()=>{if(!!Z.active)if(t){const j=Z.run();(s||_||(g?j.some((Y,F)=>Ms(Y,T[F])):Ms(j,T)))&&(m&&m(),xe(t,u,3,[j,T===vh?void 0:T,w]),T=j)}else Z.run()};A.allowRecurse=!!t;let O;r==="sync"?O=A:r==="post"?O=()=>he(A,u&&u.suspense):O=()=>{!u||u.isMounted?ym(A):A()};const Z=new pl(f,O);return t?i?A():T=Z.run():r==="post"?he(Z.run.bind(Z),u&&u.suspense):Z.run(),()=>{Z.stop(),u&&u.scope&&ul(u.scope.effects,Z)}}function km(e,t,i){const s=this.proxy,r=Qt(e)?e.includes(".")?dd(s,e):()=>s[e]:e.bind(s,s);let a;nt(t)?a=t:(a=t.handler,i=t);const c=te;Di(this);const u=ud(r,a.bind(s),i);return c?Di(c):ti(),u}function dd(e,t){const i=t.split(".");return()=>{let s=e;for(let r=0;r<i.length&&s;r++)s=s[i[r]];return s}}function Yn(e,t){if(!Zt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),qt(e))Yn(e.value,t);else if(Q(e))for(let i=0;i<e.length;i++)Yn(e[i],t);else if(ur(e)||ki(e))e.forEach(i=>{Yn(i,t)});else if(Fu(e))for(const i in e)Yn(e[i],t);return e}function Am(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gi(()=>{e.isMounted=!0}),md(()=>{e.isUnmounting=!0}),e}const we=[Function,Array],Mm={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:we,onEnter:we,onAfterEnter:we,onEnterCancelled:we,onBeforeLeave:we,onLeave:we,onAfterLeave:we,onLeaveCancelled:we,onBeforeAppear:we,onAppear:we,onAfterAppear:we,onAppearCancelled:we},setup(e,{slots:t}){const i=wg(),s=Am();let r;return()=>{const a=t.default&&_d(t.default(),!0);if(!a||!a.length)return;const c=mt(e),{mode:u}=c,f=a[0];if(s.isLeaving)return ga(f);const _=yh(f);if(!_)return ga(f);const g=Na(_,c,s,i);Ra(_,g);const m=i.subTree,w=m&&yh(m);let T=!1;const{getTransitionKey:A}=_.type;if(A){const O=A();r===void 0?r=O:O!==r&&(r=O,T=!0)}if(w&&w.type!==qe&&(!qn(_,w)||T)){const O=Na(w,c,s,i);if(Ra(w,O),u==="out-in")return s.isLeaving=!0,O.afterLeave=()=>{s.isLeaving=!1,i.update()},ga(f);u==="in-out"&&_.type!==qe&&(O.delayLeave=(Z,j,Y)=>{const F=fd(s,w);F[String(w.key)]=w,Z._leaveCb=()=>{j(),Z._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=Y})}return f}}},Nm=Mm;function fd(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function Na(e,t,i,s){const{appear:r,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:_,onEnterCancelled:g,onBeforeLeave:m,onLeave:w,onAfterLeave:T,onLeaveCancelled:A,onBeforeAppear:O,onAppear:Z,onAfterAppear:j,onAppearCancelled:Y}=t,F=String(e.key),X=fd(i,e),J=(ct,Ot)=>{ct&&xe(ct,s,9,Ot)},se={mode:a,persisted:c,beforeEnter(ct){let Ot=u;if(!i.isMounted)if(r)Ot=O||u;else return;ct._leaveCb&&ct._leaveCb(!0);const Mt=X[F];Mt&&qn(e,Mt)&&Mt.el._leaveCb&&Mt.el._leaveCb(),J(Ot,[ct])},enter(ct){let Ot=f,Mt=_,le=g;if(!i.isMounted)if(r)Ot=Z||f,Mt=j||_,le=Y||g;else return;let gt=!1;const Pt=ct._enterCb=gn=>{gt||(gt=!0,gn?J(le,[ct]):J(Mt,[ct]),se.delayedLeave&&se.delayedLeave(),ct._enterCb=void 0)};Ot?(Ot(ct,Pt),Ot.length<=1&&Pt()):Pt()},leave(ct,Ot){const Mt=String(e.key);if(ct._enterCb&&ct._enterCb(!0),i.isUnmounting)return Ot();J(m,[ct]);let le=!1;const gt=ct._leaveCb=Pt=>{le||(le=!0,Ot(),Pt?J(A,[ct]):J(T,[ct]),ct._leaveCb=void 0,X[Mt]===e&&delete X[Mt])};X[Mt]=e,w?(w(ct,gt),w.length<=1&&gt()):gt()},clone(ct){return Na(ct,t,i,s)}};return se}function ga(e){if(mr(e))return e=Oi(e),e.children=null,e}function yh(e){return mr(e)?e.children?e.children[0]:void 0:e}function Ra(e,t){e.shapeFlag&6&&e.component?Ra(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function _d(e,t=!1){let i=[],s=0;for(let r=0;r<e.length;r++){const a=e[r];a.type===Ie?(a.patchFlag&128&&s++,i=i.concat(_d(a.children,t))):(t||a.type!==qe)&&i.push(a)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}const Oa=e=>!!e.type.__asyncLoader,mr=e=>e.type.__isKeepAlive;function Rm(e,t){pd(e,"a",t)}function Om(e,t){pd(e,"da",t)}function pd(e,t,i=te){const s=e.__wdc||(e.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(gr(t,s,i),i){let r=i.parent;for(;r&&r.parent;)mr(r.parent.vnode)&&Dm(s,t,i,r),r=r.parent}}function Dm(e,t,i,s){const r=gr(t,e,s,!0);gd(()=>{ul(s[t],r)},i)}function gr(e,t,i=te,s=!1){if(i){const r=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...c)=>{if(i.isUnmounted)return;ji(),Di(i);const u=xe(t,i,e,c);return ti(),qi(),u});return s?r.unshift(a):r.push(a),a}}const mn=e=>(t,i=te)=>(!Ds||e==="sp")&&gr(e,t,i),Bm=mn("bm"),Gi=mn("m"),Fm=mn("bu"),zm=mn("u"),md=mn("bum"),gd=mn("um"),Hm=mn("sp"),Wm=mn("rtg"),Um=mn("rtc");function Zm(e,t=te){gr("ec",e,t)}let Da=!0;function $m(e){const t=yd(e),i=e.proxy,s=e.ctx;Da=!1,t.beforeCreate&&wh(t.beforeCreate,e,"bc");const{data:r,computed:a,methods:c,watch:u,provide:f,inject:_,created:g,beforeMount:m,mounted:w,beforeUpdate:T,updated:A,activated:O,deactivated:Z,beforeDestroy:j,beforeUnmount:Y,destroyed:F,unmounted:X,render:J,renderTracked:se,renderTriggered:ct,errorCaptured:Ot,serverPrefetch:Mt,expose:le,inheritAttrs:gt,components:Pt,directives:gn,filters:me}=t;if(_&&Vm(_,s,null,e.appContext.config.unwrapInjectedRef),c)for(const bt in c){const W=c[bt];nt(W)&&(s[bt]=W.bind(i))}if(r){const bt=r.call(i,i);Zt(bt)&&(e.data=yl(bt))}if(Da=!0,a)for(const bt in a){const W=a[bt],ge=nt(W)?W.bind(i,i):nt(W.get)?W.get.bind(i,i):Ae,st=!nt(W)&&nt(W.set)?W.set.bind(i):Ae,vt=Pg({get:ge,set:st});Object.defineProperty(s,bt,{enumerable:!0,configurable:!0,get:()=>vt.value,set:Gt=>vt.value=Gt})}if(u)for(const bt in u)vd(u[bt],s,i,bt);if(f){const bt=nt(f)?f.call(i):f;Reflect.ownKeys(bt).forEach(W=>{Lm(W,bt[W])})}g&&wh(g,e,"c");function wt(bt,W){Q(W)?W.forEach(ge=>bt(ge.bind(i))):W&&bt(W.bind(i))}if(wt(Bm,m),wt(Gi,w),wt(Fm,T),wt(zm,A),wt(Rm,O),wt(Om,Z),wt(Zm,Ot),wt(Um,se),wt(Wm,ct),wt(md,Y),wt(gd,X),wt(Hm,Mt),Q(le))if(le.length){const bt=e.exposed||(e.exposed={});le.forEach(W=>{Object.defineProperty(bt,W,{get:()=>i[W],set:ge=>i[W]=ge})})}else e.exposed||(e.exposed={});J&&e.render===Ae&&(e.render=J),gt!=null&&(e.inheritAttrs=gt),Pt&&(e.components=Pt),gn&&(e.directives=gn)}function Vm(e,t,i=Ae,s=!1){Q(e)&&(e=Ba(e));for(const r in e){const a=e[r];let c;Zt(a)?"default"in a?c=pa(a.from||r,a.default,!0):c=pa(a.from||r):c=pa(a),qt(c)&&s?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:u=>c.value=u}):t[r]=c}}function wh(e,t,i){xe(Q(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function vd(e,t,i,s){const r=s.includes(".")?dd(i,s):()=>i[s];if(Qt(e)){const a=t[e];nt(a)&&ma(r,a)}else if(nt(e))ma(r,e.bind(i));else if(Zt(e))if(Q(e))e.forEach(a=>vd(a,t,i,s));else{const a=nt(e.handler)?e.handler.bind(i):t[e.handler];nt(a)&&ma(r,a,e)}}function yd(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,u=a.get(t);let f;return u?f=u:!r.length&&!i&&!s?f=t:(f={},r.length&&r.forEach(_=>Ho(f,_,c,!0)),Ho(f,t,c)),a.set(t,f),f}function Ho(e,t,i,s=!1){const{mixins:r,extends:a}=t;a&&Ho(e,a,i,!0),r&&r.forEach(c=>Ho(e,c,i,!0));for(const c in t)if(!(s&&c==="expose")){const u=jm[c]||i&&i[c];e[c]=u?u(e[c],t[c]):t[c]}return e}const jm={data:bh,props:$n,emits:$n,methods:$n,computed:$n,beforeCreate:oe,created:oe,beforeMount:oe,mounted:oe,beforeUpdate:oe,updated:oe,beforeDestroy:oe,beforeUnmount:oe,destroyed:oe,unmounted:oe,activated:oe,deactivated:oe,errorCaptured:oe,serverPrefetch:oe,components:$n,directives:$n,watch:Gm,provide:bh,inject:qm};function bh(e,t){return t?e?function(){return ne(nt(e)?e.call(this,this):e,nt(t)?t.call(this,this):t)}:t:e}function qm(e,t){return $n(Ba(e),Ba(t))}function Ba(e){if(Q(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function oe(e,t){return e?[...new Set([].concat(e,t))]:t}function $n(e,t){return e?ne(ne(Object.create(null),e),t):t}function Gm(e,t){if(!e)return t;if(!t)return e;const i=ne(Object.create(null),e);for(const s in t)i[s]=oe(e[s],t[s]);return i}function Km(e,t,i,s=!1){const r={},a={};Do(a,vr,1),e.propsDefaults=Object.create(null),wd(e,t,r,a);for(const c in e.propsOptions[0])c in r||(r[c]=void 0);i?e.props=s?r:cm(r):e.type.props?e.props=r:e.props=a,e.attrs=a}function Ym(e,t,i,s){const{props:r,attrs:a,vnode:{patchFlag:c}}=e,u=mt(r),[f]=e.propsOptions;let _=!1;if((s||c>0)&&!(c&16)){if(c&8){const g=e.vnode.dynamicProps;for(let m=0;m<g.length;m++){let w=g[m];const T=t[w];if(f)if(_t(a,w))T!==a[w]&&(a[w]=T,_=!0);else{const A=Ri(w);r[A]=Fa(f,u,A,T,e,!1)}else T!==a[w]&&(a[w]=T,_=!0)}}}else{wd(e,t,r,a)&&(_=!0);let g;for(const m in u)(!t||!_t(t,m)&&((g=Vi(m))===m||!_t(t,g)))&&(f?i&&(i[m]!==void 0||i[g]!==void 0)&&(r[m]=Fa(f,u,m,void 0,e,!0)):delete r[m]);if(a!==u)for(const m in a)(!t||!_t(t,m)&&!0)&&(delete a[m],_=!0)}_&&fn(e,"set","$attrs")}function wd(e,t,i,s){const[r,a]=e.propsOptions;let c=!1,u;if(t)for(let f in t){if(Mo(f))continue;const _=t[f];let g;r&&_t(r,g=Ri(f))?!a||!a.includes(g)?i[g]=_:(u||(u={}))[g]=_:El(e.emitsOptions,f)||(!(f in s)||_!==s[f])&&(s[f]=_,c=!0)}if(a){const f=mt(i),_=u||Tt;for(let g=0;g<a.length;g++){const m=a[g];i[m]=Fa(r,f,m,_[m],e,!_t(_,m))}}return c}function Fa(e,t,i,s,r,a){const c=e[i];if(c!=null){const u=_t(c,"default");if(u&&s===void 0){const f=c.default;if(c.type!==Function&&nt(f)){const{propsDefaults:_}=r;i in _?s=_[i]:(Di(r),s=_[i]=f.call(null,t),ti())}else s=f}c[0]&&(a&&!u?s=!1:c[1]&&(s===""||s===Vi(i))&&(s=!0))}return s}function bd(e,t,i=!1){const s=t.propsCache,r=s.get(e);if(r)return r;const a=e.props,c={},u=[];let f=!1;if(!nt(e)){const g=m=>{f=!0;const[w,T]=bd(m,t,!0);ne(c,w),T&&u.push(...T)};!i&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!f)return s.set(e,Li),Li;if(Q(a))for(let g=0;g<a.length;g++){const m=Ri(a[g]);Ch(m)&&(c[m]=Tt)}else if(a)for(const g in a){const m=Ri(g);if(Ch(m)){const w=a[g],T=c[m]=Q(w)||nt(w)?{type:w}:w;if(T){const A=Th(Boolean,T.type),O=Th(String,T.type);T[0]=A>-1,T[1]=O<0||A<O,(A>-1||_t(T,"default"))&&u.push(m)}}}const _=[c,u];return s.set(e,_),_}function Ch(e){return e[0]!=="$"}function xh(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Eh(e,t){return xh(e)===xh(t)}function Th(e,t){return Q(t)?t.findIndex(i=>Eh(i,e)):nt(t)&&Eh(t,e)?0:-1}const Cd=e=>e[0]==="_"||e==="$stable",Tl=e=>Q(e)?e.map(Ze):[Ze(e)],Qm=(e,t,i)=>{const s=Cm((...r)=>Tl(t(...r)),i);return s._c=!1,s},xd=(e,t,i)=>{const s=e._ctx;for(const r in e){if(Cd(r))continue;const a=e[r];if(nt(a))t[r]=Qm(r,a,s);else if(a!=null){const c=Tl(a);t[r]=()=>c}}},Ed=(e,t)=>{const i=Tl(t);e.slots.default=()=>i},Xm=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=mt(t),Do(t,"_",i)):xd(t,e.slots={})}else e.slots={},t&&Ed(e,t);Do(e.slots,vr,1)},Jm=(e,t,i)=>{const{vnode:s,slots:r}=e;let a=!0,c=Tt;if(s.shapeFlag&32){const u=t._;u?i&&u===1?a=!1:(ne(r,t),!i&&u===1&&delete r._):(a=!t.$stable,xd(t,r)),c=t}else t&&(Ed(e,t),c={default:1});if(a)for(const u in r)!Cd(u)&&!(u in c)&&delete r[u]};function be(e,t){const i=Le;if(i===null)return e;const s=i.proxy,r=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[c,u,f,_=Tt]=t[a];nt(c)&&(c={mounted:c,updated:c}),c.deep&&Yn(u),r.push({dir:c,instance:s,value:u,oldValue:void 0,arg:f,modifiers:_})}return e}function Un(e,t,i,s){const r=e.dirs,a=t&&t.dirs;for(let c=0;c<r.length;c++){const u=r[c];a&&(u.oldValue=a[c].value);let f=u.dir[s];f&&(ji(),xe(f,i,8,[e.el,u,e,t]),qi())}}function Td(){return{app:null,config:{isNativeTag:Lp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tg=0;function eg(e,t){return function(s,r=null){r!=null&&!Zt(r)&&(r=null);const a=Td(),c=new Set;let u=!1;const f=a.app={_uid:tg++,_component:s,_props:r,_container:null,_context:a,_instance:null,version:Ig,get config(){return a.config},set config(_){},use(_,...g){return c.has(_)||(_&&nt(_.install)?(c.add(_),_.install(f,...g)):nt(_)&&(c.add(_),_(f,...g))),f},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),f},component(_,g){return g?(a.components[_]=g,f):a.components[_]},directive(_,g){return g?(a.directives[_]=g,f):a.directives[_]},mount(_,g,m){if(!u){const w=je(s,r);return w.appContext=a,g&&t?t(w,_):e(w,_,m),u=!0,f._container=_,_.__vue_app__=f,Sl(w.component)||w.component.proxy}},unmount(){u&&(e(null,f._container),delete f._container.__vue_app__)},provide(_,g){return a.provides[_]=g,f}};return f}}function za(e,t,i,s,r=!1){if(Q(e)){e.forEach((w,T)=>za(w,t&&(Q(t)?t[T]:t),i,s,r));return}if(Oa(s)&&!r)return;const a=s.shapeFlag&4?Sl(s.component)||s.component.proxy:s.el,c=r?null:a,{i:u,r:f}=e,_=t&&t.r,g=u.refs===Tt?u.refs={}:u.refs,m=u.setupState;if(_!=null&&_!==f&&(Qt(_)?(g[_]=null,_t(m,_)&&(m[_]=null)):qt(_)&&(_.value=null)),nt(f))Sn(f,u,12,[c,g]);else{const w=Qt(f),T=qt(f);if(w||T){const A=()=>{if(e.f){const O=w?g[f]:f.value;r?Q(O)&&ul(O,a):Q(O)?O.includes(a)||O.push(a):w?g[f]=[a]:(f.value=[a],e.k&&(g[e.k]=f.value))}else w?(g[f]=c,_t(m,f)&&(m[f]=c)):qt(f)&&(f.value=c,e.k&&(g[e.k]=c))};c?(A.id=-1,he(A,i)):A()}}}const he=Sm;function ng(e){return ig(e)}function ig(e,t){const i=Op();i.__VUE__=!0;const{insert:s,remove:r,patchProp:a,createElement:c,createText:u,createComment:f,setText:_,setElementText:g,parentNode:m,nextSibling:w,setScopeId:T=Ae,cloneNode:A,insertStaticContent:O}=e,Z=(v,b,E,S=null,I=null,N=null,B=!1,M=null,D=!!b.dynamicChildren)=>{if(v===b)return;v&&!qn(v,b)&&(S=de(v),Nt(v,I,N,!0),v=null),b.patchFlag===-2&&(D=!1,b.dynamicChildren=null);const{type:k,ref:$,shapeFlag:U}=b;switch(k){case Pl:j(v,b,E,S);break;case qe:Y(v,b,E,S);break;case Ro:v==null&&F(b,E,S,B);break;case Ie:gn(v,b,E,S,I,N,B,M,D);break;default:U&1?se(v,b,E,S,I,N,B,M,D):U&6?me(v,b,E,S,I,N,B,M,D):(U&64||U&128)&&k.process(v,b,E,S,I,N,B,M,D,Re)}$!=null&&I&&za($,v&&v.ref,N,b||v,!b)},j=(v,b,E,S)=>{if(v==null)s(b.el=u(b.children),E,S);else{const I=b.el=v.el;b.children!==v.children&&_(I,b.children)}},Y=(v,b,E,S)=>{v==null?s(b.el=f(b.children||""),E,S):b.el=v.el},F=(v,b,E,S)=>{[v.el,v.anchor]=O(v.children,b,E,S,v.el,v.anchor)},X=({el:v,anchor:b},E,S)=>{let I;for(;v&&v!==b;)I=w(v),s(v,E,S),v=I;s(b,E,S)},J=({el:v,anchor:b})=>{let E;for(;v&&v!==b;)E=w(v),r(v),v=E;r(b)},se=(v,b,E,S,I,N,B,M,D)=>{B=B||b.type==="svg",v==null?ct(b,E,S,I,N,B,M,D):le(v,b,I,N,B,M,D)},ct=(v,b,E,S,I,N,B,M)=>{let D,k;const{type:$,props:U,shapeFlag:V,transition:K,patchFlag:ot,dirs:Ct}=v;if(v.el&&A!==void 0&&ot===-1)D=v.el=A(v.el);else{if(D=v.el=c(v.type,N,U&&U.is,U),V&8?g(D,v.children):V&16&&Mt(v.children,D,null,S,I,N&&$!=="foreignObject",B,M),Ct&&Un(v,null,S,"created"),U){for(const xt in U)xt!=="value"&&!Mo(xt)&&a(D,xt,null,U[xt],N,v.children,S,I,$t);"value"in U&&a(D,"value",null,U.value),(k=U.onVnodeBeforeMount)&&He(k,S,v)}Ot(D,v,v.scopeId,B,S)}Ct&&Un(v,null,S,"beforeMount");const ut=(!I||I&&!I.pendingBranch)&&K&&!K.persisted;ut&&K.beforeEnter(D),s(D,b,E),((k=U&&U.onVnodeMounted)||ut||Ct)&&he(()=>{k&&He(k,S,v),ut&&K.enter(D),Ct&&Un(v,null,S,"mounted")},I)},Ot=(v,b,E,S,I)=>{if(E&&T(v,E),S)for(let N=0;N<S.length;N++)T(v,S[N]);if(I){let N=I.subTree;if(b===N){const B=I.vnode;Ot(v,B,B.scopeId,B.slotScopeIds,I.parent)}}},Mt=(v,b,E,S,I,N,B,M,D=0)=>{for(let k=D;k<v.length;k++){const $=v[k]=M?Tn(v[k]):Ze(v[k]);Z(null,$,b,E,S,I,N,B,M)}},le=(v,b,E,S,I,N,B)=>{const M=b.el=v.el;let{patchFlag:D,dynamicChildren:k,dirs:$}=b;D|=v.patchFlag&16;const U=v.props||Tt,V=b.props||Tt;let K;E&&Zn(E,!1),(K=V.onVnodeBeforeUpdate)&&He(K,E,b,v),$&&Un(b,v,E,"beforeUpdate"),E&&Zn(E,!0);const ot=I&&b.type!=="foreignObject";if(k?gt(v.dynamicChildren,k,M,E,S,ot,N):B||ge(v,b,M,null,E,S,ot,N,!1),D>0){if(D&16)Pt(M,b,U,V,E,S,I);else if(D&2&&U.class!==V.class&&a(M,"class",null,V.class,I),D&4&&a(M,"style",U.style,V.style,I),D&8){const Ct=b.dynamicProps;for(let ut=0;ut<Ct.length;ut++){const xt=Ct[ut],ce=U[xt],Qe=V[xt];(Qe!==ce||xt==="value")&&a(M,xt,ce,Qe,I,v.children,E,S,$t)}}D&1&&v.children!==b.children&&g(M,b.children)}else!B&&k==null&&Pt(M,b,U,V,E,S,I);((K=V.onVnodeUpdated)||$)&&he(()=>{K&&He(K,E,b,v),$&&Un(b,v,E,"updated")},S)},gt=(v,b,E,S,I,N,B)=>{for(let M=0;M<b.length;M++){const D=v[M],k=b[M],$=D.el&&(D.type===Ie||!qn(D,k)||D.shapeFlag&70)?m(D.el):E;Z(D,k,$,null,S,I,N,B,!0)}},Pt=(v,b,E,S,I,N,B)=>{if(E!==S){for(const M in S){if(Mo(M))continue;const D=S[M],k=E[M];D!==k&&M!=="value"&&a(v,M,k,D,B,b.children,I,N,$t)}if(E!==Tt)for(const M in E)!Mo(M)&&!(M in S)&&a(v,M,E[M],null,B,b.children,I,N,$t);"value"in S&&a(v,"value",E.value,S.value)}},gn=(v,b,E,S,I,N,B,M,D)=>{const k=b.el=v?v.el:u(""),$=b.anchor=v?v.anchor:u("");let{patchFlag:U,dynamicChildren:V,slotScopeIds:K}=b;K&&(M=M?M.concat(K):K),v==null?(s(k,E,S),s($,E,S),Mt(b.children,E,$,I,N,B,M,D)):U>0&&U&64&&V&&v.dynamicChildren?(gt(v.dynamicChildren,V,E,I,N,B,M),(b.key!=null||I&&b===I.subTree)&&Pd(v,b,!0)):ge(v,b,E,$,I,N,B,M,D)},me=(v,b,E,S,I,N,B,M,D)=>{b.slotScopeIds=M,v==null?b.shapeFlag&512?I.ctx.activate(b,E,S,B,D):ts(b,E,S,I,N,B,D):wt(v,b,D)},ts=(v,b,E,S,I,N,B)=>{const M=v.component=yg(v,S,I);if(mr(v)&&(M.ctx.renderer=Re),bg(M),M.asyncDep){if(I&&I.registerDep(M,bt),!v.el){const D=M.subTree=je(qe);Y(null,D,b,E)}return}bt(M,v,b,E,I,N,B)},wt=(v,b,E)=>{const S=b.component=v.component;if(Tm(v,b,E))if(S.asyncDep&&!S.asyncResolved){W(S,b,E);return}else S.next=b,vm(S.update),S.update();else b.component=v.component,b.el=v.el,S.vnode=b},bt=(v,b,E,S,I,N,B)=>{const M=()=>{if(v.isMounted){let{next:$,bu:U,u:V,parent:K,vnode:ot}=v,Ct=$,ut;Zn(v,!1),$?($.el=ot.el,W(v,$,B)):$=ot,U&&No(U),(ut=$.props&&$.props.onVnodeBeforeUpdate)&&He(ut,K,$,ot),Zn(v,!0);const xt=_a(v),ce=v.subTree;v.subTree=xt,Z(ce,xt,m(ce.el),de(ce),v,I,N),$.el=xt.el,Ct===null&&Pm(v,xt.el),V&&he(V,I),(ut=$.props&&$.props.onVnodeUpdated)&&he(()=>He(ut,K,$,ot),I)}else{let $;const{el:U,props:V}=b,{bm:K,m:ot,parent:Ct}=v,ut=Oa(b);if(Zn(v,!1),K&&No(K),!ut&&($=V&&V.onVnodeBeforeMount)&&He($,Ct,b),Zn(v,!0),U&&Ye){const xt=()=>{v.subTree=_a(v),Ye(U,v.subTree,v,I,null)};ut?b.type.__asyncLoader().then(()=>!v.isUnmounted&&xt()):xt()}else{const xt=v.subTree=_a(v);Z(null,xt,E,S,v,I,N),b.el=xt.el}if(ot&&he(ot,I),!ut&&($=V&&V.onVnodeMounted)){const xt=b;he(()=>He($,Ct,xt),I)}b.shapeFlag&256&&v.a&&he(v.a,I),v.isMounted=!0,b=E=S=null}},D=v.effect=new pl(M,()=>sd(v.update),v.scope),k=v.update=D.run.bind(D);k.id=v.uid,Zn(v,!0),k()},W=(v,b,E)=>{b.component=v;const S=v.vnode.props;v.vnode=b,v.next=null,Ym(v,b.props,S,E),Jm(v,b.children,E),ji(),xl(void 0,v.update),qi()},ge=(v,b,E,S,I,N,B,M,D=!1)=>{const k=v&&v.children,$=v?v.shapeFlag:0,U=b.children,{patchFlag:V,shapeFlag:K}=b;if(V>0){if(V&128){vt(k,U,E,S,I,N,B,M,D);return}else if(V&256){st(k,U,E,S,I,N,B,M,D);return}}K&8?($&16&&$t(k,I,N),U!==k&&g(E,U)):$&16?K&16?vt(k,U,E,S,I,N,B,M,D):$t(k,I,N,!0):($&8&&g(E,""),K&16&&Mt(U,E,S,I,N,B,M,D))},st=(v,b,E,S,I,N,B,M,D)=>{v=v||Li,b=b||Li;const k=v.length,$=b.length,U=Math.min(k,$);let V;for(V=0;V<U;V++){const K=b[V]=D?Tn(b[V]):Ze(b[V]);Z(v[V],K,E,null,I,N,B,M,D)}k>$?$t(v,I,N,!0,!1,U):Mt(b,E,S,I,N,B,M,D,U)},vt=(v,b,E,S,I,N,B,M,D)=>{let k=0;const $=b.length;let U=v.length-1,V=$-1;for(;k<=U&&k<=V;){const K=v[k],ot=b[k]=D?Tn(b[k]):Ze(b[k]);if(qn(K,ot))Z(K,ot,E,null,I,N,B,M,D);else break;k++}for(;k<=U&&k<=V;){const K=v[U],ot=b[V]=D?Tn(b[V]):Ze(b[V]);if(qn(K,ot))Z(K,ot,E,null,I,N,B,M,D);else break;U--,V--}if(k>U){if(k<=V){const K=V+1,ot=K<$?b[K].el:S;for(;k<=V;)Z(null,b[k]=D?Tn(b[k]):Ze(b[k]),E,ot,I,N,B,M,D),k++}}else if(k>V)for(;k<=U;)Nt(v[k],I,N,!0),k++;else{const K=k,ot=k,Ct=new Map;for(k=ot;k<=V;k++){const It=b[k]=D?Tn(b[k]):Ze(b[k]);It.key!=null&&Ct.set(It.key,k)}let ut,xt=0;const ce=V-ot+1;let Qe=!1,ui=0;const Xe=new Array(ce);for(k=0;k<ce;k++)Xe[k]=0;for(k=K;k<=U;k++){const It=v[k];if(xt>=ce){Nt(It,I,N,!0);continue}let Xt;if(It.key!=null)Xt=Ct.get(It.key);else for(ut=ot;ut<=V;ut++)if(Xe[ut-ot]===0&&qn(It,b[ut])){Xt=ut;break}Xt===void 0?Nt(It,I,N,!0):(Xe[Xt-ot]=k+1,Xt>=ui?ui=Xt:Qe=!0,Z(It,b[Xt],E,null,I,N,B,M,D),xt++)}const ns=Qe?sg(Xe):Li;for(ut=ns.length-1,k=ce-1;k>=0;k--){const It=ot+k,Xt=b[It],Js=It+1<$?b[It+1].el:S;Xe[k]===0?Z(null,Xt,E,Js,I,N,B,M,D):Qe&&(ut<0||k!==ns[ut]?Gt(Xt,E,Js,2):ut--)}}},Gt=(v,b,E,S,I=null)=>{const{el:N,type:B,transition:M,children:D,shapeFlag:k}=v;if(k&6){Gt(v.component.subTree,b,E,S);return}if(k&128){v.suspense.move(b,E,S);return}if(k&64){B.move(v,b,E,Re);return}if(B===Ie){s(N,b,E);for(let U=0;U<D.length;U++)Gt(D[U],b,E,S);s(v.anchor,b,E);return}if(B===Ro){X(v,b,E);return}if(S!==2&&k&1&&M)if(S===0)M.beforeEnter(N),s(N,b,E),he(()=>M.enter(N),I);else{const{leave:U,delayLeave:V,afterLeave:K}=M,ot=()=>s(N,b,E),Ct=()=>{U(N,()=>{ot(),K&&K()})};V?V(N,ot,Ct):Ct()}else s(N,b,E)},Nt=(v,b,E,S=!1,I=!1)=>{const{type:N,props:B,ref:M,children:D,dynamicChildren:k,shapeFlag:$,patchFlag:U,dirs:V}=v;if(M!=null&&za(M,null,E,v,!0),$&256){b.ctx.deactivate(v);return}const K=$&1&&V,ot=!Oa(v);let Ct;if(ot&&(Ct=B&&B.onVnodeBeforeUnmount)&&He(Ct,b,v),$&6)At(v.component,E,S);else{if($&128){v.suspense.unmount(E,S);return}K&&Un(v,null,b,"beforeUnmount"),$&64?v.type.remove(v,b,E,I,Re,S):k&&(N!==Ie||U>0&&U&64)?$t(k,b,E,!1,!0):(N===Ie&&U&384||!I&&$&16)&&$t(D,b,E),S&&zt(v)}(ot&&(Ct=B&&B.onVnodeUnmounted)||K)&&he(()=>{Ct&&He(Ct,b,v),K&&Un(v,null,b,"unmounted")},E)},zt=v=>{const{type:b,el:E,anchor:S,transition:I}=v;if(b===Ie){yt(E,S);return}if(b===Ro){J(v);return}const N=()=>{r(E),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(v.shapeFlag&1&&I&&!I.persisted){const{leave:B,delayLeave:M}=I,D=()=>B(E,N);M?M(v.el,N,D):D()}else N()},yt=(v,b)=>{let E;for(;v!==b;)E=w(v),r(v),v=E;r(b)},At=(v,b,E)=>{const{bum:S,scope:I,update:N,subTree:B,um:M}=v;S&&No(S),I.stop(),N&&(N.active=!1,Nt(B,v,b,E)),M&&he(M,b),he(()=>{v.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},$t=(v,b,E,S=!1,I=!1,N=0)=>{for(let B=N;B<v.length;B++)Nt(v[B],b,E,S,I)},de=v=>v.shapeFlag&6?de(v.component.subTree):v.shapeFlag&128?v.suspense.next():w(v.anchor||v.el),es=(v,b,E)=>{v==null?b._vnode&&Nt(b._vnode,null,null,!0):Z(b._vnode||null,v,b,null,null,null,E),ad(),b._vnode=v},Re={p:Z,um:Nt,m:Gt,r:zt,mt:ts,mc:Mt,pc:ge,pbc:gt,n:de,o:e};let Dn,Ye;return t&&([Dn,Ye]=t(Re)),{render:es,hydrate:Dn,createApp:eg(es,Dn)}}function Zn({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function Pd(e,t,i=!1){const s=e.children,r=t.children;if(Q(s)&&Q(r))for(let a=0;a<s.length;a++){const c=s[a];let u=r[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=r[a]=Tn(r[a]),u.el=c.el),i||Pd(c,u))}}function sg(e){const t=e.slice(),i=[0];let s,r,a,c,u;const f=e.length;for(s=0;s<f;s++){const _=e[s];if(_!==0){if(r=i[i.length-1],e[r]<_){t[s]=r,i.push(s);continue}for(a=0,c=i.length-1;a<c;)u=a+c>>1,e[i[u]]<_?a=u+1:c=u;_<e[i[a]]&&(a>0&&(t[s]=i[a-1]),i[a]=s)}}for(a=i.length,c=i[a-1];a-- >0;)i[a]=c,c=t[c];return i}const og=e=>e.__isTeleport,rg=Symbol(),Ie=Symbol(void 0),Pl=Symbol(void 0),qe=Symbol(void 0),Ro=Symbol(void 0),Is=[];let Jn=null;function Ue(e=!1){Is.push(Jn=e?null:[])}function ag(){Is.pop(),Jn=Is[Is.length-1]||null}let Wo=1;function Ph(e){Wo+=e}function Id(e){return e.dynamicChildren=Wo>0?Jn||Li:null,ag(),Wo>0&&Jn&&Jn.push(e),e}function ln(e,t,i,s,r,a){return Id(H(e,t,i,s,r,a,!0))}function lg(e,t,i,s,r){return Id(je(e,t,i,s,r,!0))}function cg(e){return e?e.__v_isVNode===!0:!1}function qn(e,t){return e.type===t.type&&e.key===t.key}const vr="__vInternal",Sd=({key:e})=>e!=null?e:null,Oo=({ref:e,ref_key:t,ref_for:i})=>e!=null?Qt(e)||qt(e)||nt(e)?{i:Le,r:e,k:t,f:!!i}:e:null;function H(e,t=null,i=null,s=0,r=null,a=e===Ie?0:1,c=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sd(t),ref:t&&Oo(t),scopeId:hd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return u?(Il(f,i),a&128&&e.normalize(f)):i&&(f.shapeFlag|=Qt(i)?8:16),Wo>0&&!c&&Jn&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&Jn.push(f),f}const je=hg;function hg(e,t=null,i=null,s=0,r=null,a=!1){if((!e||e===rg)&&(e=qe),cg(e)){const u=Oi(e,t,!0);return i&&Il(u,i),u}if(Tg(e)&&(e=e.__vccOpts),t){t=ug(t);let{class:u,style:f}=t;u&&!Qt(u)&&(t.class=$e(u)),Zt(f)&&(Xu(f)&&!Q(f)&&(f=ne({},f)),t.style=lr(f))}const c=Qt(e)?1:Im(e)?128:og(e)?64:Zt(e)?4:nt(e)?2:0;return H(e,t,i,s,r,c,a,!0)}function ug(e){return e?Xu(e)||vr in e?ne({},e):e:null}function Oi(e,t,i=!1){const{props:s,ref:r,patchFlag:a,children:c}=e,u=t?_g(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Sd(u),ref:t&&t.ref?i&&r?Q(r)?r.concat(Oo(t)):[r,Oo(t)]:Oo(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ie?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Oi(e.ssContent),ssFallback:e.ssFallback&&Oi(e.ssFallback),el:e.el,anchor:e.anchor}}function dg(e=" ",t=0){return je(Pl,null,e,t)}function fg(e,t){const i=je(Ro,null,e);return i.staticCount=t,i}function xs(e="",t=!1){return t?(Ue(),lg(qe,null,e)):je(qe,null,e)}function Ze(e){return e==null||typeof e=="boolean"?je(qe):Q(e)?je(Ie,null,e.slice()):typeof e=="object"?Tn(e):je(Pl,null,String(e))}function Tn(e){return e.el===null||e.memo?e:Oi(e)}function Il(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Q(t))i=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),Il(e,r()),r._c&&(r._d=!0));return}else{i=32;const r=t._;!r&&!(vr in t)?t._ctx=Le:r===3&&Le&&(Le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else nt(t)?(t={default:t,_ctx:Le},i=32):(t=String(t),s&64?(i=16,t=[dg(t)]):i=8);e.children=t,e.shapeFlag|=i}function _g(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=$e([t.class,s.class]));else if(r==="style")t.style=lr([t.style,s.style]);else if(hr(r)){const a=t[r],c=s[r];c&&a!==c&&!(Q(a)&&a.includes(c))&&(t[r]=a?[].concat(a,c):c)}else r!==""&&(t[r]=s[r])}return t}function He(e,t,i,s=null){xe(e,t,7,[i,s])}function pg(e,t,i,s){let r;const a=i&&i[s];if(Q(e)||Qt(e)){r=new Array(e.length);for(let c=0,u=e.length;c<u;c++)r[c]=t(e[c],c,void 0,a&&a[c])}else if(typeof e=="number"){r=new Array(e);for(let c=0;c<e;c++)r[c]=t(c+1,c,void 0,a&&a[c])}else if(Zt(e))if(e[Symbol.iterator])r=Array.from(e,(c,u)=>t(c,u,void 0,a&&a[u]));else{const c=Object.keys(e);r=new Array(c.length);for(let u=0,f=c.length;u<f;u++){const _=c[u];r[u]=t(e[_],_,u,a&&a[u])}}else r=[];return i&&(i[s]=r),r}const Ha=e=>e?Ld(e)?Sl(e)||e.proxy:Ha(e.parent):null,Uo=ne(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ha(e.parent),$root:e=>Ha(e.root),$emit:e=>e.emit,$options:e=>yd(e),$forceUpdate:e=>()=>sd(e.update),$nextTick:e=>mm.bind(e.proxy),$watch:e=>km.bind(e)}),mg={get({_:e},t){const{ctx:i,setupState:s,data:r,props:a,accessCache:c,type:u,appContext:f}=e;let _;if(t[0]!=="$"){const T=c[t];if(T!==void 0)switch(T){case 1:return s[t];case 2:return r[t];case 4:return i[t];case 3:return a[t]}else{if(s!==Tt&&_t(s,t))return c[t]=1,s[t];if(r!==Tt&&_t(r,t))return c[t]=2,r[t];if((_=e.propsOptions[0])&&_t(_,t))return c[t]=3,a[t];if(i!==Tt&&_t(i,t))return c[t]=4,i[t];Da&&(c[t]=0)}}const g=Uo[t];let m,w;if(g)return t==="$attrs"&&pe(e,"get",t),g(e);if((m=u.__cssModules)&&(m=m[t]))return m;if(i!==Tt&&_t(i,t))return c[t]=4,i[t];if(w=f.config.globalProperties,_t(w,t))return w[t]},set({_:e},t,i){const{data:s,setupState:r,ctx:a}=e;return r!==Tt&&_t(r,t)?(r[t]=i,!0):s!==Tt&&_t(s,t)?(s[t]=i,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:r,propsOptions:a}},c){let u;return!!i[c]||e!==Tt&&_t(e,c)||t!==Tt&&_t(t,c)||(u=a[0])&&_t(u,c)||_t(s,c)||_t(Uo,c)||_t(r.config.globalProperties,c)},defineProperty(e,t,i){return i.get!=null?this.set(e,t,i.get(),null):i.value!=null&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},gg=Td();let vg=0;function yg(e,t,i){const s=e.type,r=(t?t.appContext:e.appContext)||gg,a={uid:vg++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Dp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bd(s,r),emitsOptions:cd(s,r),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:s.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=bm.bind(null,a),e.ce&&e.ce(a),a}let te=null;const wg=()=>te||Le,Di=e=>{te=e,e.scope.on()},ti=()=>{te&&te.scope.off(),te=null};function Ld(e){return e.vnode.shapeFlag&4}let Ds=!1;function bg(e,t=!1){Ds=t;const{props:i,children:s}=e.vnode,r=Ld(e);Km(e,i,r,t),Xm(e,s);const a=r?Cg(e,t):void 0;return Ds=!1,a}function Cg(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=Ju(new Proxy(e.ctx,mg));const{setup:s}=i;if(s){const r=e.setupContext=s.length>1?Eg(e):null;Di(e),ji();const a=Sn(s,e,0,[e.props,r]);if(qi(),ti(),Du(a)){if(a.then(ti,ti),t)return a.then(c=>{Ih(e,c,t)}).catch(c=>{pr(c,e,0)});e.asyncDep=a}else Ih(e,a,t)}else kd(e,t)}function Ih(e,t,i){nt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Zt(t)&&(e.setupState=nd(t)),kd(e,i)}let Sh;function kd(e,t,i){const s=e.type;if(!e.render){if(!t&&Sh&&!s.render){const r=s.template;if(r){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:u,compilerOptions:f}=s,_=ne(ne({isCustomElement:a,delimiters:u},c),f);s.render=Sh(r,_)}}e.render=s.render||Ae}Di(e),ji(),$m(e),qi(),ti()}function xg(e){return new Proxy(e.attrs,{get(t,i){return pe(e,"get","$attrs"),t[i]}})}function Eg(e){const t=s=>{e.exposed=s||{}};let i;return{get attrs(){return i||(i=xg(e))},slots:e.slots,emit:e.emit,expose:t}}function Sl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(nd(Ju(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Uo)return Uo[i](e)}}))}function Tg(e){return nt(e)&&"__vccOpts"in e}const Pg=(e,t)=>_m(e,t,Ds),Ig="3.2.31",Sg="http://www.w3.org/2000/svg",Gn=typeof document!="undefined"?document:null,Lh=Gn&&Gn.createElement("template"),Lg={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const r=t?Gn.createElementNS(Sg,e):Gn.createElement(e,i?{is:i}:void 0);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>Gn.createTextNode(e),createComment:e=>Gn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Gn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,s,r,a){const c=i?i.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),i),!(r===a||!(r=r.nextSibling)););else{Lh.innerHTML=s?`<svg>${e}</svg>`:e;const u=Lh.content;if(s){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}t.insertBefore(u,i)}return[c?c.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function kg(e,t,i){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Ag(e,t,i){const s=e.style,r=Qt(i);if(i&&!r){for(const a in i)Wa(s,a,i[a]);if(t&&!Qt(t))for(const a in t)i[a]==null&&Wa(s,a,"")}else{const a=s.display;r?t!==i&&(s.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=a)}}const kh=/\s*!important$/;function Wa(e,t,i){if(Q(i))i.forEach(s=>Wa(e,t,s));else if(t.startsWith("--"))e.setProperty(t,i);else{const s=Mg(e,t);kh.test(i)?e.setProperty(Vi(s),i.replace(kh,""),"important"):e[s]=i}}const Ah=["Webkit","Moz","ms"],va={};function Mg(e,t){const i=va[t];if(i)return i;let s=Ri(t);if(s!=="filter"&&s in e)return va[t]=s;s=zu(s);for(let r=0;r<Ah.length;r++){const a=Ah[r]+s;if(a in e)return va[t]=a}return t}const Mh="http://www.w3.org/1999/xlink";function Ng(e,t,i,s,r){if(s&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Mh,t.slice(6,t.length)):e.setAttributeNS(Mh,t,i);else{const a=xp(t);i==null||a&&!Ru(i)?e.removeAttribute(t):e.setAttribute(t,a?"":i)}}function Rg(e,t,i,s,r,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,r,a),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const u=i==null?"":i;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const u=typeof e[t];if(u==="boolean"){e[t]=Ru(i);return}else if(i==null&&u==="string"){e[t]="",e.removeAttribute(t);return}else if(u==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let Zo=Date.now,Ad=!1;if(typeof window!="undefined"){Zo()>document.createEvent("Event").timeStamp&&(Zo=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Ad=!!(e&&Number(e[1])<=53)}let Ua=0;const Og=Promise.resolve(),Dg=()=>{Ua=0},Bg=()=>Ua||(Og.then(Dg),Ua=Zo());function Kn(e,t,i,s){e.addEventListener(t,i,s)}function Fg(e,t,i,s){e.removeEventListener(t,i,s)}function zg(e,t,i,s,r=null){const a=e._vei||(e._vei={}),c=a[t];if(s&&c)c.value=s;else{const[u,f]=Hg(t);if(s){const _=a[t]=Wg(s,r);Kn(e,u,_,f)}else c&&(Fg(e,u,c,f),a[t]=void 0)}}const Nh=/(?:Once|Passive|Capture)$/;function Hg(e){let t;if(Nh.test(e)){t={};let i;for(;i=e.match(Nh);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[Vi(e.slice(2)),t]}function Wg(e,t){const i=s=>{const r=s.timeStamp||Zo();(Ad||r>=i.attached-1)&&xe(Ug(s,i.value),t,5,[s])};return i.value=e,i.attached=Bg(),i}function Ug(e,t){if(Q(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Rh=/^on[a-z]/,Zg=(e,t,i,s,r=!1,a,c,u,f)=>{t==="class"?kg(e,s,r):t==="style"?Ag(e,i,s):hr(t)?hl(t)||zg(e,t,i,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):$g(e,t,s,r))?Rg(e,t,s,a,c,u,f):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Ng(e,t,s,r))};function $g(e,t,i,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&Rh.test(t)&&nt(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Rh.test(t)&&Qt(i)?!1:t in e}const Vg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Nm.props;const $o=e=>{const t=e.props["onUpdate:modelValue"];return Q(t)?i=>No(t,i):t};function jg(e){e.target.composing=!0}function Oh(e){const t=e.target;t.composing&&(t.composing=!1,qg(t,"input"))}function qg(e,t){const i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}const We={created(e,{modifiers:{lazy:t,trim:i,number:s}},r){e._assign=$o(r);const a=s||r.props&&r.props.type==="number";Kn(e,t?"change":"input",c=>{if(c.target.composing)return;let u=e.value;i?u=u.trim():a&&(u=Bo(u)),e._assign(u)}),i&&Kn(e,"change",()=>{e.value=e.value.trim()}),t||(Kn(e,"compositionstart",jg),Kn(e,"compositionend",Oh),Kn(e,"change",Oh))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:s,number:r}},a){if(e._assign=$o(a),e.composing||document.activeElement===e&&(i||s&&e.value.trim()===t||(r||e.type==="number")&&Bo(e.value)===t))return;const c=t==null?"":t;e.value!==c&&(e.value=c)}},Gg={deep:!0,created(e,{value:t,modifiers:{number:i}},s){const r=ur(t);Kn(e,"change",()=>{const a=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>i?Bo(Vo(c)):Vo(c));e._assign(e.multiple?r?new Set(a):a:a[0])}),e._assign=$o(s)},mounted(e,{value:t}){Dh(e,t)},beforeUpdate(e,t,i){e._assign=$o(i)},updated(e,{value:t}){Dh(e,t)}};function Dh(e,t){const i=e.multiple;if(!(i&&!Q(t)&&!ur(t))){for(let s=0,r=e.options.length;s<r;s++){const a=e.options[s],c=Vo(a);if(i)Q(t)?a.selected=Sp(t,c)>-1:a.selected=t.has(c);else if(cr(Vo(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Vo(e){return"_value"in e?e._value:e.value}const Kg={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):ps(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:s}){!t!=!i&&(s?t?(s.beforeEnter(e),ps(e,!0),s.enter(e)):s.leave(e,()=>{ps(e,!1)}):ps(e,t))},beforeUnmount(e,{value:t}){ps(e,t)}};function ps(e,t){e.style.display=t?e._vod:"none"}const Yg=ne({patchProp:Zg},Lg);let Bh;function Qg(){return Bh||(Bh=ng(Yg))}const yr=(...e)=>{const t=Qg().createApp(...e),{mount:i}=t;return t.mount=s=>{const r=Xg(s);if(!r)return;const a=t._component;!nt(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.innerHTML="";const c=i(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),c},t};function Xg(e){return Qt(e)?document.querySelector(e):e}const Ln=cn({show_map:!1,show_about:!1,show_msg:!1});const Jg={class:"container-fluid d-flex pe-0 navtxt"},tv=H("div",{class:"col-4 align-self-center text-light"},"Finding SanBau",-1),ev=H("input",{class:"col-6 px-3 py-2 border rounded bg-dark text-light",type:"text",placeholder:"Plate/Nickname",maxlength:"20"},null,-1),nv={setup(e){let t=cn({map:"",about:"",msg:""});function i(f){for(let _ in Ln.value)Ln.value[_]=!1;for(let _ in t.value)t.value[_]="";Ln.value[`show_${f}`]=!0,t.value[f]="text-warning"}function s(){i("map")}function r(){i("about")}function a(){i("msg")}function c(){window.open("https://github.com/OGC-Fever")}function u(){}return Gi(()=>{s()}),(f,_)=>(Ue(),ln("div",Jg,[H("div",{class:"navbar-brand text-light",type:"button",onClick:s},"Cyber Butchers"),H("div",{class:$e(["navbar-brand fs-6",lt(t).map]),type:"button",onClick:s},"SanBau Map",2),H("div",{class:$e(["navbar-brand fs-6",lt(t).about]),type:"button",onClick:r},"About",2),H("div",{class:$e(["navbar-brand fs-6",lt(t).msg]),type:"button",onClick:a},"Message Board",2),H("div",{class:"navbar-brand fs-6",type:"button",onClick:c},"GitHub"),H("div",{class:"d-flex col-4 my-1 ms-auto"},[tv,ev,H("div",{class:"col fs-4 px-0 badge align-self-center text-warning",type:"button",onClick:u},"Go")])]))}};var iv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Za={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(i,s){s(t)})(iv,function(i){var s="1.7.1";function r(n){var o,l,h,d;for(l=1,h=arguments.length;l<h;l++){d=arguments[l];for(o in d)n[o]=d[o]}return n}var a=Object.create||function(){function n(){}return function(o){return n.prototype=o,new n}}();function c(n,o){var l=Array.prototype.slice;if(n.bind)return n.bind.apply(n,l.call(arguments,1));var h=l.call(arguments,2);return function(){return n.apply(o,h.length?h.concat(l.call(arguments)):arguments)}}var u=0;function f(n){return n._leaflet_id=n._leaflet_id||++u,n._leaflet_id}function _(n,o,l){var h,d,p,y;return y=function(){h=!1,d&&(p.apply(l,d),d=!1)},p=function(){h?d=arguments:(n.apply(l,arguments),setTimeout(y,o),h=!0)},p}function g(n,o,l){var h=o[1],d=o[0],p=h-d;return n===h&&l?n:((n-d)%p+p)%p+d}function m(){return!1}function w(n,o){var l=Math.pow(10,o===void 0?6:o);return Math.round(n*l)/l}function T(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function A(n){return T(n).split(/\s+/)}function O(n,o){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?a(n.options):{});for(var l in o)n.options[l]=o[l];return n.options}function Z(n,o,l){var h=[];for(var d in n)h.push(encodeURIComponent(l?d.toUpperCase():d)+"="+encodeURIComponent(n[d]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var j=/\{ *([\w_-]+) *\}/g;function Y(n,o){return n.replace(j,function(l,h){var d=o[h];if(d===void 0)throw new Error("No value provided for variable "+l);return typeof d=="function"&&(d=d(o)),d})}var F=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function X(n,o){for(var l=0;l<n.length;l++)if(n[l]===o)return l;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function se(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var ct=0;function Ot(n){var o=+new Date,l=Math.max(0,16-(o-ct));return ct=o+l,window.setTimeout(n,l)}var Mt=window.requestAnimationFrame||se("RequestAnimationFrame")||Ot,le=window.cancelAnimationFrame||se("CancelAnimationFrame")||se("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function gt(n,o,l){if(l&&Mt===Ot)n.call(o);else return Mt.call(window,c(n,o))}function Pt(n){n&&le.call(window,n)}var gn={extend:r,create:a,bind:c,lastId:u,stamp:f,throttle:_,wrapNum:g,falseFn:m,formatNum:w,trim:T,splitWords:A,setOptions:O,getParamString:Z,template:Y,isArray:F,indexOf:X,emptyImageUrl:J,requestFn:Mt,cancelFn:le,requestAnimFrame:gt,cancelAnimFrame:Pt};function me(){}me.extend=function(n){var o=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=o.__super__=this.prototype,h=a(l);h.constructor=o,o.prototype=h;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(o[d]=this[d]);return n.statics&&(r(o,n.statics),delete n.statics),n.includes&&(ts(n.includes),r.apply(null,[h].concat(n.includes)),delete n.includes),h.options&&(n.options=r(a(h.options),n.options)),r(h,n),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,y=h._initHooks.length;p<y;p++)h._initHooks[p].call(this)}},o},me.include=function(n){return r(this.prototype,n),this},me.mergeOptions=function(n){return r(this.prototype.options,n),this},me.addInitHook=function(n){var o=Array.prototype.slice.call(arguments,1),l=typeof n=="function"?n:function(){this[n].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function ts(n){if(!(typeof L=="undefined"||!L||!L.Mixin)){n=F(n)?n:[n];for(var o=0;o<n.length;o++)n[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var wt={on:function(n,o,l){if(typeof n=="object")for(var h in n)this._on(h,n[h],o);else{n=A(n);for(var d=0,p=n.length;d<p;d++)this._on(n[d],o,l)}return this},off:function(n,o,l){if(!n)delete this._events;else if(typeof n=="object")for(var h in n)this._off(h,n[h],o);else{n=A(n);for(var d=0,p=n.length;d<p;d++)this._off(n[d],o,l)}return this},_on:function(n,o,l){this._events=this._events||{};var h=this._events[n];h||(h=[],this._events[n]=h),l===this&&(l=void 0);for(var d={fn:o,ctx:l},p=h,y=0,C=p.length;y<C;y++)if(p[y].fn===o&&p[y].ctx===l)return;p.push(d)},_off:function(n,o,l){var h,d,p;if(!!this._events&&(h=this._events[n],!!h)){if(!o){for(d=0,p=h.length;d<p;d++)h[d].fn=m;delete this._events[n];return}if(l===this&&(l=void 0),h)for(d=0,p=h.length;d<p;d++){var y=h[d];if(y.ctx===l&&y.fn===o){y.fn=m,this._firingCount&&(this._events[n]=h=h.slice()),h.splice(d,1);return}}}},fire:function(n,o,l){if(!this.listens(n,l))return this;var h=r({},o,{type:n,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var d=this._events[n];if(d){this._firingCount=this._firingCount+1||1;for(var p=0,y=d.length;p<y;p++){var C=d[p];C.fn.call(C.ctx||this,h)}this._firingCount--}}return l&&this._propagateEvent(h),this},listens:function(n,o){var l=this._events&&this._events[n];if(l&&l.length)return!0;if(o){for(var h in this._eventParents)if(this._eventParents[h].listens(n,o))return!0}return!1},once:function(n,o,l){if(typeof n=="object"){for(var h in n)this.once(h,n[h],o);return this}var d=c(function(){this.off(n,o,l).off(n,d,l)},this);return this.on(n,o,l).on(n,d,l)},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[f(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[f(n)],this},_propagateEvent:function(n){for(var o in this._eventParents)this._eventParents[o].fire(n.type,r({layer:n.target,propagatedFrom:n.target},n),!0)}};wt.addEventListener=wt.on,wt.removeEventListener=wt.clearAllEventListeners=wt.off,wt.addOneTimeEventListener=wt.once,wt.fireEvent=wt.fire,wt.hasEventListeners=wt.listens;var bt=me.extend(wt);function W(n,o,l){this.x=l?Math.round(n):n,this.y=l?Math.round(o):o}var ge=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(n){return this.clone()._add(st(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(st(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new W(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new W(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ge(this.x),this.y=ge(this.y),this},distanceTo:function(n){n=st(n);var o=n.x-this.x,l=n.y-this.y;return Math.sqrt(o*o+l*l)},equals:function(n){return n=st(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=st(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function st(n,o,l){return n instanceof W?n:F(n)?new W(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new W(n.x,n.y):new W(n,o,l)}function vt(n,o){if(!!n)for(var l=o?[n,o]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}vt.prototype={extend:function(n){return n=st(n),!this.min&&!this.max?(this.min=n.clone(),this.max=n.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(n){return new W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new W(this.min.x,this.max.y)},getTopRight:function(){return new W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var o,l;return typeof n[0]=="number"||n instanceof W?n=st(n):n=Gt(n),n instanceof vt?(o=n.min,l=n.max):o=l=n,o.x>=this.min.x&&l.x<=this.max.x&&o.y>=this.min.y&&l.y<=this.max.y},intersects:function(n){n=Gt(n);var o=this.min,l=this.max,h=n.min,d=n.max,p=d.x>=o.x&&h.x<=l.x,y=d.y>=o.y&&h.y<=l.y;return p&&y},overlaps:function(n){n=Gt(n);var o=this.min,l=this.max,h=n.min,d=n.max,p=d.x>o.x&&h.x<l.x,y=d.y>o.y&&h.y<l.y;return p&&y},isValid:function(){return!!(this.min&&this.max)}};function Gt(n,o){return!n||n instanceof vt?n:new vt(n,o)}function Nt(n,o){if(!!n)for(var l=o?[n,o]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}Nt.prototype={extend:function(n){var o=this._southWest,l=this._northEast,h,d;if(n instanceof yt)h=n,d=n;else if(n instanceof Nt){if(h=n._southWest,d=n._northEast,!h||!d)return this}else return n?this.extend(At(n)||zt(n)):this;return!o&&!l?(this._southWest=new yt(h.lat,h.lng),this._northEast=new yt(d.lat,d.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),l.lat=Math.max(d.lat,l.lat),l.lng=Math.max(d.lng,l.lng)),this},pad:function(n){var o=this._southWest,l=this._northEast,h=Math.abs(o.lat-l.lat)*n,d=Math.abs(o.lng-l.lng)*n;return new Nt(new yt(o.lat-h,o.lng-d),new yt(l.lat+h,l.lng+d))},getCenter:function(){return new yt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new yt(this.getNorth(),this.getWest())},getSouthEast:function(){return new yt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof yt||"lat"in n?n=At(n):n=zt(n);var o=this._southWest,l=this._northEast,h,d;return n instanceof Nt?(h=n.getSouthWest(),d=n.getNorthEast()):h=d=n,h.lat>=o.lat&&d.lat<=l.lat&&h.lng>=o.lng&&d.lng<=l.lng},intersects:function(n){n=zt(n);var o=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>=o.lat&&h.lat<=l.lat,y=d.lng>=o.lng&&h.lng<=l.lng;return p&&y},overlaps:function(n){n=zt(n);var o=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>o.lat&&h.lat<l.lat,y=d.lng>o.lng&&h.lng<l.lng;return p&&y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,o){return n?(n=zt(n),this._southWest.equals(n.getSouthWest(),o)&&this._northEast.equals(n.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function zt(n,o){return n instanceof Nt?n:new Nt(n,o)}function yt(n,o,l){if(isNaN(n)||isNaN(o))throw new Error("Invalid LatLng object: ("+n+", "+o+")");this.lat=+n,this.lng=+o,l!==void 0&&(this.alt=+l)}yt.prototype={equals:function(n,o){if(!n)return!1;n=At(n);var l=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return l<=(o===void 0?1e-9:o)},toString:function(n){return"LatLng("+w(this.lat,n)+", "+w(this.lng,n)+")"},distanceTo:function(n){return de.distance(this,At(n))},wrap:function(){return de.wrapLatLng(this)},toBounds:function(n){var o=180*n/40075017,l=o/Math.cos(Math.PI/180*this.lat);return zt([this.lat-o,this.lng-l],[this.lat+o,this.lng+l])},clone:function(){return new yt(this.lat,this.lng,this.alt)}};function At(n,o,l){return n instanceof yt?n:F(n)&&typeof n[0]!="object"?n.length===3?new yt(n[0],n[1],n[2]):n.length===2?new yt(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new yt(n.lat,"lng"in n?n.lng:n.lon,n.alt):o===void 0?null:new yt(n,o,l)}var $t={latLngToPoint:function(n,o){var l=this.projection.project(n),h=this.scale(o);return this.transformation._transform(l,h)},pointToLatLng:function(n,o){var l=this.scale(o),h=this.transformation.untransform(n,l);return this.projection.unproject(h)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var o=this.projection.bounds,l=this.scale(n),h=this.transformation.transform(o.min,l),d=this.transformation.transform(o.max,l);return new vt(h,d)},infinite:!1,wrapLatLng:function(n){var o=this.wrapLng?g(n.lng,this.wrapLng,!0):n.lng,l=this.wrapLat?g(n.lat,this.wrapLat,!0):n.lat,h=n.alt;return new yt(l,o,h)},wrapLatLngBounds:function(n){var o=n.getCenter(),l=this.wrapLatLng(o),h=o.lat-l.lat,d=o.lng-l.lng;if(h===0&&d===0)return n;var p=n.getSouthWest(),y=n.getNorthEast(),C=new yt(p.lat-h,p.lng-d),x=new yt(y.lat-h,y.lng-d);return new Nt(C,x)}},de=r({},$t,{wrapLng:[-180,180],R:6371e3,distance:function(n,o){var l=Math.PI/180,h=n.lat*l,d=o.lat*l,p=Math.sin((o.lat-n.lat)*l/2),y=Math.sin((o.lng-n.lng)*l/2),C=p*p+Math.cos(h)*Math.cos(d)*y*y,x=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*x}}),es=6378137,Re={R:es,MAX_LATITUDE:85.0511287798,project:function(n){var o=Math.PI/180,l=this.MAX_LATITUDE,h=Math.max(Math.min(l,n.lat),-l),d=Math.sin(h*o);return new W(this.R*n.lng*o,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(n){var o=180/Math.PI;return new yt((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*o,n.x*o/this.R)},bounds:function(){var n=es*Math.PI;return new vt([-n,-n],[n,n])}()};function Dn(n,o,l,h){if(F(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=o,this._c=l,this._d=h}Dn.prototype={transform:function(n,o){return this._transform(n.clone(),o)},_transform:function(n,o){return o=o||1,n.x=o*(this._a*n.x+this._b),n.y=o*(this._c*n.y+this._d),n},untransform:function(n,o){return o=o||1,new W((n.x/o-this._b)/this._a,(n.y/o-this._d)/this._c)}};function Ye(n,o,l,h){return new Dn(n,o,l,h)}var v=r({},de,{code:"EPSG:3857",projection:Re,transformation:function(){var n=.5/(Math.PI*Re.R);return Ye(n,.5,-n,.5)}()}),b=r({},v,{code:"EPSG:900913"});function E(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function S(n,o){var l="",h,d,p,y,C,x;for(h=0,p=n.length;h<p;h++){for(C=n[h],d=0,y=C.length;d<y;d++)x=C[d],l+=(d?"L":"M")+x.x+" "+x.y;l+=o?to?"z":"x":""}return l||"M0 0"}var I=document.documentElement.style,N="ActiveXObject"in window,B=N&&!document.addEventListener,M="msLaunchUri"in navigator&&!("documentMode"in document),D=Be("webkit"),k=Be("android"),$=Be("android 2")||Be("android 3"),U=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),V=k&&Be("Google")&&U<537&&!("AudioNode"in window),K=!!window.opera,ot=!M&&Be("chrome"),Ct=Be("gecko")&&!D&&!K&&!N,ut=!ot&&Be("safari"),xt=Be("phantom"),ce="OTransition"in I,Qe=navigator.platform.indexOf("Win")===0,ui=N&&"transition"in I,Xe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$,ns="MozPerspective"in I,It=!window.L_DISABLE_3D&&(ui||Xe||ns)&&!ce&&!xt,Xt=typeof orientation!="undefined"||Be("mobile"),Js=Xt&&D,m_=Xt&&Xe,vn=!window.PointerEvent&&window.MSPointerEvent,Oe=!!(window.PointerEvent||vn),De=!window.L_NO_TOUCH&&(Oe||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),yc=Xt&&K,g_=Xt&&Ct,yn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,di=function(){var n=!1;try{var o=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",m,o),window.removeEventListener("testPassiveEventSupport",m,o)}catch{}return n}(),wc=function(){return!!document.createElement("canvas").getContext}(),to=!!(document.createElementNS&&E("svg").createSVGRect),eo=!to&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var o=n.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}();function Be(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var v_={ie:N,ielt9:B,edge:M,webkit:D,android:k,android23:$,androidStock:V,opera:K,chrome:ot,gecko:Ct,safari:ut,phantom:xt,opera12:ce,win:Qe,ie3d:ui,webkit3d:Xe,gecko3d:ns,any3d:It,mobile:Xt,mobileWebkit:Js,mobileWebkit3d:m_,msPointer:vn,pointer:Oe,touch:De,mobileOpera:yc,mobileGecko:g_,retina:yn,passiveEvents:di,canvas:wc,svg:to,vml:eo},Rr=vn?"MSPointerDown":"pointerdown",Or=vn?"MSPointerMove":"pointermove",Dr=vn?"MSPointerUp":"pointerup",Br=vn?"MSPointerCancel":"pointercancel",fi={},bc=!1;function y_(n,o,l,h){return o==="touchstart"?b_(n,l,h):o==="touchmove"?E_(n,l,h):o==="touchend"&&T_(n,l,h),this}function w_(n,o,l){var h=n["_leaflet_"+o+l];return o==="touchstart"?n.removeEventListener(Rr,h,!1):o==="touchmove"?n.removeEventListener(Or,h,!1):o==="touchend"&&(n.removeEventListener(Dr,h,!1),n.removeEventListener(Br,h,!1)),this}function b_(n,o,l){var h=c(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&ye(d),Fr(d,o)});n["_leaflet_touchstart"+l]=h,n.addEventListener(Rr,h,!1),bc||(document.addEventListener(Rr,C_,!0),document.addEventListener(Or,x_,!0),document.addEventListener(Dr,Cc,!0),document.addEventListener(Br,Cc,!0),bc=!0)}function C_(n){fi[n.pointerId]=n}function x_(n){fi[n.pointerId]&&(fi[n.pointerId]=n)}function Cc(n){delete fi[n.pointerId]}function Fr(n,o){n.touches=[];for(var l in fi)n.touches.push(fi[l]);n.changedTouches=[n],o(n)}function E_(n,o,l){var h=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||Fr(d,o)};n["_leaflet_touchmove"+l]=h,n.addEventListener(Or,h,!1)}function T_(n,o,l){var h=function(d){Fr(d,o)};n["_leaflet_touchend"+l]=h,n.addEventListener(Dr,h,!1),n.addEventListener(Br,h,!1)}var no=vn?"MSPointerDown":Oe?"pointerdown":"touchstart",io=vn?"MSPointerUp":Oe?"pointerup":"touchend",_i="_leaflet_";function P_(n,o,l){var h,d,p=!1,y=250;function C(P){if(Oe){if(!P.isPrimary||P.pointerType==="mouse")return}else if(P.touches.length>1)return;var z=Date.now(),q=z-(h||z);d=P.touches?P.touches[0]:P,p=q>0&&q<=y,h=z}function x(P){if(p&&!d.cancelBubble){if(Oe){if(P.pointerType==="mouse")return;var z={},q,ft;for(ft in d)q=d[ft],z[ft]=q&&q.bind?q.bind(d):q;d=z}d.type="dblclick",d.button=0,o(d),h=null}}return n[_i+no+l]=C,n[_i+io+l]=x,n[_i+"dblclick"+l]=o,n.addEventListener(no,C,di?{passive:!1}:!1),n.addEventListener(io,x,di?{passive:!1}:!1),n.addEventListener("dblclick",o,!1),this}function I_(n,o){var l=n[_i+no+o],h=n[_i+io+o],d=n[_i+"dblclick"+o];return n.removeEventListener(no,l,di?{passive:!1}:!1),n.removeEventListener(io,h,di?{passive:!1}:!1),n.removeEventListener("dblclick",d,!1),this}var zr=ro(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),is=ro(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xc=is==="webkitTransition"||is==="OTransition"?is+"End":"transitionend";function Ec(n){return typeof n=="string"?document.getElementById(n):n}function ss(n,o){var l=n.style[o]||n.currentStyle&&n.currentStyle[o];if((!l||l==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(n,null);l=h?h[o]:null}return l==="auto"?null:l}function dt(n,o,l){var h=document.createElement(n);return h.className=o||"",l&&l.appendChild(h),h}function Rt(n){var o=n.parentNode;o&&o.removeChild(n)}function so(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function pi(n){var o=n.parentNode;o&&o.lastChild!==n&&o.appendChild(n)}function mi(n){var o=n.parentNode;o&&o.firstChild!==n&&o.insertBefore(n,o.firstChild)}function Hr(n,o){if(n.classList!==void 0)return n.classList.contains(o);var l=oo(n);return l.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(l)}function tt(n,o){if(n.classList!==void 0)for(var l=A(o),h=0,d=l.length;h<d;h++)n.classList.add(l[h]);else if(!Hr(n,o)){var p=oo(n);Wr(n,(p?p+" ":"")+o)}}function Dt(n,o){n.classList!==void 0?n.classList.remove(o):Wr(n,T((" "+oo(n)+" ").replace(" "+o+" "," ")))}function Wr(n,o){n.className.baseVal===void 0?n.className=o:n.className.baseVal=o}function oo(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function ve(n,o){"opacity"in n.style?n.style.opacity=o:"filter"in n.style&&S_(n,o)}function S_(n,o){var l=!1,h="DXImageTransform.Microsoft.Alpha";try{l=n.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),l?(l.Enabled=o!==100,l.Opacity=o):n.style.filter+=" progid:"+h+"(opacity="+o+")"}function ro(n){for(var o=document.documentElement.style,l=0;l<n.length;l++)if(n[l]in o)return n[l];return!1}function Bn(n,o,l){var h=o||new W(0,0);n.style[zr]=(ui?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(l?" scale("+l+")":"")}function Wt(n,o){n._leaflet_pos=o,It?Bn(n,o):(n.style.left=o.x+"px",n.style.top=o.y+"px")}function wn(n){return n._leaflet_pos||new W(0,0)}var os,rs,Ur;if("onselectstart"in document)os=function(){rt(window,"selectstart",ye)},rs=function(){Ht(window,"selectstart",ye)};else{var as=ro(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);os=function(){if(as){var n=document.documentElement.style;Ur=n[as],n[as]="none"}},rs=function(){as&&(document.documentElement.style[as]=Ur,Ur=void 0)}}function Zr(){rt(window,"dragstart",ye)}function $r(){Ht(window,"dragstart",ye)}var ao,Vr;function jr(n){for(;n.tabIndex===-1;)n=n.parentNode;!n.style||(lo(),ao=n,Vr=n.style.outline,n.style.outline="none",rt(window,"keydown",lo))}function lo(){!ao||(ao.style.outline=Vr,ao=void 0,Vr=void 0,Ht(window,"keydown",lo))}function Tc(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function qr(n){var o=n.getBoundingClientRect();return{x:o.width/n.offsetWidth||1,y:o.height/n.offsetHeight||1,boundingClientRect:o}}var L_={TRANSFORM:zr,TRANSITION:is,TRANSITION_END:xc,get:Ec,getStyle:ss,create:dt,remove:Rt,empty:so,toFront:pi,toBack:mi,hasClass:Hr,addClass:tt,removeClass:Dt,setClass:Wr,getClass:oo,setOpacity:ve,testProp:ro,setTransform:Bn,setPosition:Wt,getPosition:wn,disableTextSelection:os,enableTextSelection:rs,disableImageDrag:Zr,enableImageDrag:$r,preventOutline:jr,restoreOutline:lo,getSizedParentNode:Tc,getScale:qr};function rt(n,o,l,h){if(typeof o=="object")for(var d in o)co(n,d,o[d],l);else{o=A(o);for(var p=0,y=o.length;p<y;p++)co(n,o[p],l,h)}return this}var Ee="_leaflet_events";function Ht(n,o,l,h){if(typeof o=="object")for(var d in o)Kr(n,d,o[d],l);else if(o){o=A(o);for(var p=0,y=o.length;p<y;p++)Kr(n,o[p],l,h)}else{for(var C in n[Ee])Kr(n,C,n[Ee][C]);delete n[Ee]}return this}function Pc(){if(Oe)return!(M||ut)}var Gr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function co(n,o,l,h){var d=o+f(l)+(h?"_"+f(h):"");if(n[Ee]&&n[Ee][d])return this;var p=function(C){return l.call(h||n,C||window.event)},y=p;Oe&&o.indexOf("touch")===0?y_(n,o,p,d):De&&o==="dblclick"&&!Pc()?P_(n,p,d):"addEventListener"in n?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?n.addEventListener(Gr[o]||o,p,di?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(p=function(C){C=C||window.event,ho(n,C)&&y(C)},n.addEventListener(Gr[o],p,!1)):n.addEventListener(o,y,!1):"attachEvent"in n&&n.attachEvent("on"+o,p),n[Ee]=n[Ee]||{},n[Ee][d]=p}function Kr(n,o,l,h){var d=o+f(l)+(h?"_"+f(h):""),p=n[Ee]&&n[Ee][d];if(!p)return this;Oe&&o.indexOf("touch")===0?w_(n,o,d):De&&o==="dblclick"&&!Pc()?I_(n,d):"removeEventListener"in n?n.removeEventListener(Gr[o]||o,p,!1):"detachEvent"in n&&n.detachEvent("on"+o,p),n[Ee][d]=null}function Fn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,Jr(n),this}function Yr(n){return co(n,"wheel",Fn),this}function ls(n){return rt(n,"mousedown touchstart dblclick",Fn),co(n,"click",Xr),this}function ye(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Je(n){return ye(n),Fn(n),this}function Ic(n,o){if(!o)return new W(n.clientX,n.clientY);var l=qr(o),h=l.boundingClientRect;return new W((n.clientX-h.left)/l.x-o.clientLeft,(n.clientY-h.top)/l.y-o.clientTop)}var k_=Qe&&ot?2*window.devicePixelRatio:Ct?window.devicePixelRatio:1;function Sc(n){return M?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/k_:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}var Qr={};function Xr(n){Qr[n.type]=!0}function Jr(n){var o=Qr[n.type];return Qr[n.type]=!1,o}function ho(n,o){var l=o.relatedTarget;if(!l)return!0;try{for(;l&&l!==n;)l=l.parentNode}catch{return!1}return l!==n}var A_={on:rt,off:Ht,stopPropagation:Fn,disableScrollPropagation:Yr,disableClickPropagation:ls,preventDefault:ye,stop:Je,getMousePosition:Ic,getWheelDelta:Sc,fakeStop:Xr,skipped:Jr,isExternalTarget:ho,addListener:rt,removeListener:Ht},Lc=bt.extend({run:function(n,o,l,h){this.stop(),this._el=n,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=wn(n),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=gt(this._animate,this),this._step()},_step:function(n){var o=+new Date-this._startTime,l=this._duration*1e3;o<l?this._runFrame(this._easeOut(o/l),n):(this._runFrame(1),this._complete())},_runFrame:function(n,o){var l=this._startPos.add(this._offset.multiplyBy(n));o&&l._round(),Wt(this._el,l),this.fire("step")},_complete:function(){Pt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),ht=bt.extend({options:{crs:v,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,o){o=O(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(At(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=is&&It&&!yc&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),rt(this._proxy,xc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,o,l){if(o=o===void 0?this._zoom:this._limitZoom(o),n=this._limitCenter(At(n),o,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=r({animate:l.animate},l.zoom),l.pan=r({animate:l.animate,duration:l.duration},l.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,o,l.zoom):this._tryAnimatedPan(n,l.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(n,o),this},setZoom:function(n,o){return this._loaded?this.setView(this.getCenter(),n,{zoom:o}):(this._zoom=n,this)},zoomIn:function(n,o){return n=n||(It?this.options.zoomDelta:1),this.setZoom(this._zoom+n,o)},zoomOut:function(n,o){return n=n||(It?this.options.zoomDelta:1),this.setZoom(this._zoom-n,o)},setZoomAround:function(n,o,l){var h=this.getZoomScale(o),d=this.getSize().divideBy(2),p=n instanceof W?n:this.latLngToContainerPoint(n),y=p.subtract(d).multiplyBy(1-1/h),C=this.containerPointToLatLng(d.add(y));return this.setView(C,o,{zoom:l})},_getBoundsCenterZoom:function(n,o){o=o||{},n=n.getBounds?n.getBounds():zt(n);var l=st(o.paddingTopLeft||o.padding||[0,0]),h=st(o.paddingBottomRight||o.padding||[0,0]),d=this.getBoundsZoom(n,!1,l.add(h));if(d=typeof o.maxZoom=="number"?Math.min(o.maxZoom,d):d,d===1/0)return{center:n.getCenter(),zoom:d};var p=h.subtract(l).divideBy(2),y=this.project(n.getSouthWest(),d),C=this.project(n.getNorthEast(),d),x=this.unproject(y.add(C).divideBy(2).add(p),d);return{center:x,zoom:d}},fitBounds:function(n,o){if(n=zt(n),!n.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(n,o);return this.setView(l.center,l.zoom,o)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,o){return this.setView(n,this._zoom,{pan:o})},panBy:function(n,o){if(n=st(n).round(),o=o||{},!n.x&&!n.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Lc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){tt(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,l,o.duration||.25,o.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,o,l){if(l=l||{},l.animate===!1||!It)return this.setView(n,o,l);this._stop();var h=this.project(this.getCenter()),d=this.project(n),p=this.getSize(),y=this._zoom;n=At(n),o=o===void 0?y:o;var C=Math.max(p.x,p.y),x=C*this.getZoomScale(y,o),P=d.distanceTo(h)||1,z=1.42,q=z*z;function ft(Ut){var bo=Ut?-1:1,gp=Ut?x:C,vp=x*x-C*C+bo*q*q*P*P,yp=2*gp*q*P,da=vp/yp,lh=Math.sqrt(da*da+1)-da,wp=lh<1e-9?-18:Math.log(lh);return wp}function on(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function Wn(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}function wo(Ut){return on(Ut)/Wn(Ut)}var Cn=ft(0);function ua(Ut){return C*(Wn(Cn)/Wn(Cn+z*Ut))}function fp(Ut){return C*(Wn(Cn)*wo(Cn+z*Ut)-on(Cn))/q}function _p(Ut){return 1-Math.pow(1-Ut,1.5)}var pp=Date.now(),rh=(ft(1)-Cn)/z,mp=l.duration?1e3*l.duration:1e3*rh*.8;function ah(){var Ut=(Date.now()-pp)/mp,bo=_p(Ut)*rh;Ut<=1?(this._flyToFrame=gt(ah,this),this._move(this.unproject(h.add(d.subtract(h).multiplyBy(fp(bo)/P)),y),this.getScaleZoom(C/ua(bo),y),{flyTo:!0})):this._move(n,o)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),ah.call(this),this},flyToBounds:function(n,o){var l=this._getBoundsCenterZoom(n,o);return this.flyTo(l.center,l.zoom,o)},setMaxBounds:function(n){if(n=zt(n),n.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(n){var o=this.options.minZoom;return this.options.minZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var o=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,o){this._enforcingBounds=!0;var l=this.getCenter(),h=this._limitCenter(l,this._zoom,zt(n));return l.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(n,o){o=o||{};var l=st(o.paddingTopLeft||o.padding||[0,0]),h=st(o.paddingBottomRight||o.padding||[0,0]),d=this.getCenter(),p=this.project(d),y=this.project(n),C=this.getPixelBounds(),x=C.getSize().divideBy(2),P=Gt([C.min.add(l),C.max.subtract(h)]);if(!P.contains(y)){this._enforcingBounds=!0;var z=p.subtract(y),q=st(y.x+z.x,y.y+z.y);(y.x<P.min.x||y.x>P.max.x)&&(q.x=p.x-z.x,z.x>0?q.x+=x.x-l.x:q.x-=x.x-h.x),(y.y<P.min.y||y.y>P.max.y)&&(q.y=p.y-z.y,z.y>0?q.y+=x.y-l.y:q.y-=x.y-h.y),this.panTo(this.unproject(q),o),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=r({animate:!1,pan:!0},n===!0?{animate:!0}:n);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),h=o.divideBy(2).round(),d=l.divideBy(2).round(),p=h.subtract(d);return!p.x&&!p.y?this:(n.animate&&n.pan?this.panBy(p):(n.pan&&this._rawPanBy(p),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=r({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=c(this._handleGeolocationResponse,this),l=c(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,l,n):navigator.geolocation.getCurrentPosition(o,l,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){var o=n.code,l=n.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+l+"."})},_handleGeolocationResponse:function(n){var o=n.coords.latitude,l=n.coords.longitude,h=new yt(o,l),d=h.toBounds(n.coords.accuracy*2),p=this._locateOptions;if(p.setView){var y=this.getBoundsZoom(d);this.setView(h,p.maxZoom?Math.min(y,p.maxZoom):y)}var C={latlng:h,bounds:d,timestamp:n.timestamp};for(var x in n.coords)typeof n.coords[x]=="number"&&(C[x]=n.coords[x]);this.fire("locationfound",C)},addHandler:function(n,o){if(!o)return this;var l=this[n]=new o(this);return this._handlers.push(l),this.options[n]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Pt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Rt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,o){var l="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),h=dt("div",l,o||this._mapPane);return n&&(this._panes[n]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),o=this.unproject(n.getBottomLeft()),l=this.unproject(n.getTopRight());return new Nt(o,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,o,l){n=zt(n),l=st(l||[0,0]);var h=this.getZoom()||0,d=this.getMinZoom(),p=this.getMaxZoom(),y=n.getNorthWest(),C=n.getSouthEast(),x=this.getSize().subtract(l),P=Gt(this.project(C,h),this.project(y,h)).getSize(),z=It?this.options.zoomSnap:1,q=x.x/P.x,ft=x.y/P.y,on=o?Math.max(q,ft):Math.min(q,ft);return h=this.getScaleZoom(on,h),z&&(h=Math.round(h/(z/100))*(z/100),h=o?Math.ceil(h/z)*z:Math.floor(h/z)*z),Math.max(d,Math.min(p,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,o){var l=this._getTopLeftPoint(n,o);return new vt(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,o){var l=this.options.crs;return o=o===void 0?this._zoom:o,l.scale(n)/l.scale(o)},getScaleZoom:function(n,o){var l=this.options.crs;o=o===void 0?this._zoom:o;var h=l.zoom(n*l.scale(o));return isNaN(h)?1/0:h},project:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(At(n),o)},unproject:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(st(n),o)},layerPointToLatLng:function(n){var o=st(n).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(n){var o=this.project(At(n))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(At(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(zt(n))},distance:function(n,o){return this.options.crs.distance(At(n),At(o))},containerPointToLayerPoint:function(n){return st(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return st(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var o=this.containerPointToLayerPoint(st(n));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(At(n)))},mouseEventToContainerPoint:function(n){return Ic(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var o=this._container=Ec(n);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");rt(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&It,tt(n,"leaflet-container"+(De?" leaflet-touch":"")+(yn?" leaflet-retina":"")+(B?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=ss(n,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Wt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(tt(n.markerPane,"leaflet-zoom-hide"),tt(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,o){Wt(this._mapPane,new W(0,0));var l=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var h=this._zoom!==o;this._moveStart(h,!1)._move(n,o)._moveEnd(h),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(n,o){return n&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(n,o,l){o===void 0&&(o=this._zoom);var h=this._zoom!==o;return this._zoom=o,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),(h||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Pt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Wt(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[f(this._container)]=this;var o=n?Ht:rt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),It&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Pt(this._resizeRequest),this._resizeRequest=gt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,o){for(var l=[],h,d=o==="mouseout"||o==="mouseover",p=n.target||n.srcElement,y=!1;p;){if(h=this._targets[f(p)],h&&(o==="click"||o==="preclick")&&!n._simulated&&this._draggableMoved(h)){y=!0;break}if(h&&h.listens(o,!0)&&(d&&!ho(p,n)||(l.push(h),d))||p===this._container)break;p=p.parentNode}return!l.length&&!y&&!d&&ho(p,n)&&(l=[this]),l},_handleDOMEvent:function(n){if(!(!this._loaded||Jr(n))){var o=n.type;(o==="mousedown"||o==="keypress"||o==="keyup"||o==="keydown")&&jr(n.target||n.srcElement),this._fireDOMEvent(n,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,o,l){if(n.type==="click"){var h=r({},n);h.type="preclick",this._fireDOMEvent(h,h.type,l)}if(!n._stopped&&(l=(l||[]).concat(this._findEventTargets(n,o)),!!l.length)){var d=l[0];o==="contextmenu"&&d.listens(o,!0)&&ye(n);var p={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var y=d.getLatLng&&(!d._radius||d._radius<=10);p.containerPoint=y?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(n),p.layerPoint=this.containerPointToLayerPoint(p.containerPoint),p.latlng=y?d.getLatLng():this.layerPointToLatLng(p.layerPoint)}for(var C=0;C<l.length;C++)if(l[C].fire(o,p,!0),p.originalEvent._stopped||l[C].options.bubblingMouseEvents===!1&&X(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,o=this._handlers.length;n<o;n++)this._handlers[n].disable()},whenReady:function(n,o){return this._loaded?n.call(o||this,{target:this}):this.on("load",n,o),this},_getMapPanePos:function(){return wn(this._mapPane)||new W(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,o){var l=n&&o!==void 0?this._getNewPixelOrigin(n,o):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,o){var l=this.getSize()._divideBy(2);return this.project(n,o)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,o,l){var h=this._getNewPixelOrigin(l,o);return this.project(n,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(n,o,l){var h=this._getNewPixelOrigin(l,o);return Gt([this.project(n.getSouthWest(),o)._subtract(h),this.project(n.getNorthWest(),o)._subtract(h),this.project(n.getSouthEast(),o)._subtract(h),this.project(n.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,o,l){if(!l)return n;var h=this.project(n,o),d=this.getSize().divideBy(2),p=new vt(h.subtract(d),h.add(d)),y=this._getBoundsOffset(p,l,o);return y.round().equals([0,0])?n:this.unproject(h.add(y),o)},_limitOffset:function(n,o){if(!o)return n;var l=this.getPixelBounds(),h=new vt(l.min.add(n),l.max.add(n));return n.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(n,o,l){var h=Gt(this.project(o.getNorthEast(),l),this.project(o.getSouthWest(),l)),d=h.min.subtract(n.min),p=h.max.subtract(n.max),y=this._rebound(d.x,-p.x),C=this._rebound(d.y,-p.y);return new W(y,C)},_rebound:function(n,o){return n+o>0?Math.round(n-o)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(o))},_limitZoom:function(n){var o=this.getMinZoom(),l=this.getMaxZoom(),h=It?this.options.zoomSnap:1;return h&&(n=Math.round(n/h)*h),Math.max(o,Math.min(l,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Dt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,o){var l=this._getCenterOffset(n)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,o),!0)},_createAnimProxy:function(){var n=this._proxy=dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(o){var l=zr,h=this._proxy.style[l];Bn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),o=this.getZoom();Bn(this._proxy,this.project(n,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,o,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),d=this._getCenterOffset(n)._divideBy(1-1/h);return l.animate!==!0&&!this.getSize().contains(d)?!1:(gt(function(){this._moveStart(!0,!1)._animateZoom(n,o,!0)},this),!0)},_animateZoom:function(n,o,l,h){!this._mapPane||(l&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=o,tt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:o,noUpdate:h}),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Dt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),gt(function(){this._moveEnd(!0)},this))}});function M_(n,o){return new ht(n,o)}var Te=me.extend({options:{position:"topright"},initialize:function(n){O(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var o=this._map;return o&&o.removeControl(this),this.options.position=n,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var o=this._container=this.onAdd(n),l=this.getPosition(),h=n._controlCorners[l];return tt(o,"leaflet-control"),l.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),cs=function(n){return new Te(n)};ht.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",l=this._controlContainer=dt("div",o+"control-container",this._container);function h(d,p){var y=o+d+" "+o+p;n[d+p]=dt("div",y,l)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Rt(this._controlCorners[n]);Rt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kc=Te.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,o,l,h){return l<h?-1:h<l?1:0}},initialize:function(n,o,l){O(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var h in n)this._addLayer(n[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Te.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,o){return this._addLayer(n,o),this._map?this._update():this},addOverlay:function(n,o){return this._addLayer(n,o,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(n));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){tt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(tt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Dt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Dt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",o=this._container=dt("div",n),l=this.options.collapsed;o.setAttribute("aria-haspopup",!0),ls(o),Yr(o);var h=this._section=dt("section",n+"-list");l&&(this._map.on("click",this.collapse,this),k||rt(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=dt("a",n+"-toggle",o);d.href="#",d.title="Layers",De?(rt(d,"click",Je),rt(d,"click",this.expand,this)):rt(d,"focus",this.expand,this),l||this.expand(),this._baseLayersList=dt("div",n+"-base",h),this._separator=dt("div",n+"-separator",h),this._overlaysList=dt("div",n+"-overlays",h),o.appendChild(h)},_getLayer:function(n){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===n)return this._layers[o]},_addLayer:function(n,o,l){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:o,overlay:l}),this.options.sortLayers&&this._layers.sort(c(function(h,d){return this.options.sortFunction(h.layer,d.layer,h.name,d.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;so(this._baseLayersList),so(this._overlaysList),this._layerControlInputs=[];var n,o,l,h,d=0;for(l=0;l<this._layers.length;l++)h=this._layers[l],this._addItem(h),o=o||h.overlay,n=n||!h.overlay,d+=h.overlay?0:1;return this.options.hideSingleBase&&(n=n&&d>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=o&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var o=this._getLayer(f(n.target)),l=o.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;l&&this._map.fire(l,o)},_createRadioElement:function(n,o){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=l,h.firstChild},_addItem:function(n){var o=document.createElement("label"),l=this._map.hasLayer(n.layer),h;n.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=l):h=this._createRadioElement("leaflet-base-layers_"+f(this),l),this._layerControlInputs.push(h),h.layerId=f(n.layer),rt(h,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+n.name;var p=document.createElement("div");o.appendChild(p),p.appendChild(h),p.appendChild(d);var y=n.overlay?this._overlaysList:this._baseLayersList;return y.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){var n=this._layerControlInputs,o,l,h=[],d=[];this._handlingClick=!0;for(var p=n.length-1;p>=0;p--)o=n[p],l=this._getLayer(o.layerId).layer,o.checked?h.push(l):o.checked||d.push(l);for(p=0;p<d.length;p++)this._map.hasLayer(d[p])&&this._map.removeLayer(d[p]);for(p=0;p<h.length;p++)this._map.hasLayer(h[p])||this._map.addLayer(h[p]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,o,l,h=this._map.getZoom(),d=n.length-1;d>=0;d--)o=n[d],l=this._getLayer(o.layerId).layer,o.disabled=l.options.minZoom!==void 0&&h<l.options.minZoom||l.options.maxZoom!==void 0&&h>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),N_=function(n,o,l){return new kc(n,o,l)},ta=Te.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(n){var o="leaflet-control-zoom",l=dt("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",l,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,o,l,h,d){var p=dt("a",l,h);return p.innerHTML=n,p.href="#",p.title=o,p.setAttribute("role","button"),p.setAttribute("aria-label",o),ls(p),rt(p,"click",Je),rt(p,"click",d,this),rt(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var n=this._map,o="leaflet-disabled";Dt(this._zoomInButton,o),Dt(this._zoomOutButton,o),(this._disabled||n._zoom===n.getMinZoom())&&tt(this._zoomOutButton,o),(this._disabled||n._zoom===n.getMaxZoom())&&tt(this._zoomInButton,o)}});ht.mergeOptions({zoomControl:!0}),ht.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ta,this.addControl(this.zoomControl))});var R_=function(n){return new ta(n)},Ac=Te.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var o="leaflet-control-scale",l=dt("div",o),h=this.options;return this._addScales(h,o+"-line",l),n.on(h.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),l},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,o,l){n.metric&&(this._mScale=dt("div",o,l)),n.imperial&&(this._iScale=dt("div",o,l))},_update:function(){var n=this._map,o=n.getSize().y/2,l=n.distance(n.containerPointToLatLng([0,o]),n.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(l)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var o=this._getRoundNum(n),l=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,l,o/n)},_updateImperial:function(n){var o=n*3.2808399,l,h,d;o>5280?(l=o/5280,h=this._getRoundNum(l),this._updateScale(this._iScale,h+" mi",h/l)):(d=this._getRoundNum(o),this._updateScale(this._iScale,d+" ft",d/o))},_updateScale:function(n,o,l){n.style.width=Math.round(this.options.maxWidth*l)+"px",n.innerHTML=o},_getRoundNum:function(n){var o=Math.pow(10,(Math.floor(n)+"").length-1),l=n/o;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,o*l}}),O_=function(n){return new Ac(n)},ea=Te.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(n){O(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=dt("div","leaflet-control-attribution"),ls(this._container);for(var o in n._layers)n._layers[o].getAttribution&&this.addAttribution(n._layers[o].getAttribution());return this._update(),this._container},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(!!this._map){var n=[];for(var o in this._attributions)this._attributions[o]&&n.push(o);var l=[];this.options.prefix&&l.push(this.options.prefix),n.length&&l.push(n.join(", ")),this._container.innerHTML=l.join(" | ")}}});ht.mergeOptions({attributionControl:!0}),ht.addInitHook(function(){this.options.attributionControl&&new ea().addTo(this)});var D_=function(n){return new ea(n)};Te.Layers=kc,Te.Zoom=ta,Te.Scale=Ac,Te.Attribution=ea,cs.layers=N_,cs.zoom=R_,cs.scale=O_,cs.attribution=D_;var Fe=me.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fe.addTo=function(n,o){return n.addHandler(o,this),this};var B_={Events:wt},Mc=De?"touchstart mousedown":"mousedown",Nc={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},na={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},zn=bt.extend({options:{clickTolerance:3},initialize:function(n,o,l,h){O(this,h),this._element=n,this._dragStartTarget=o||n,this._preventOutline=l},enable:function(){this._enabled||(rt(this._dragStartTarget,Mc,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(zn._dragging===this&&this.finishDrag(),Ht(this._dragStartTarget,Mc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(!(n._simulated||!this._enabled)&&(this._moved=!1,!Hr(this._element,"leaflet-zoom-anim")&&!(zn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(zn._dragging=this,this._preventOutline&&jr(this._element),Zr(),os(),!this._moving))){this.fire("down");var o=n.touches?n.touches[0]:n,l=Tc(this._element);this._startPoint=new W(o.clientX,o.clientY),this._parentScale=qr(l),rt(document,na[n.type],this._onMove,this),rt(document,Nc[n.type],this._onUp,this)}},_onMove:function(n){if(!(n._simulated||!this._enabled)){if(n.touches&&n.touches.length>1){this._moved=!0;return}var o=n.touches&&n.touches.length===1?n.touches[0]:n,l=new W(o.clientX,o.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,ye(n),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=wn(this._element).subtract(l),tt(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),tt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,Pt(this._animRequest),this._lastEvent=n,this._animRequest=gt(this._updatePosition,this,!0))}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Wt(this._element,this._newPos),this.fire("drag",n)},_onUp:function(n){n._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){Dt(document.body,"leaflet-dragging"),this._lastTarget&&(Dt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var n in na)Ht(document,na[n],this._onMove,this),Ht(document,Nc[n],this._onUp,this);$r(),rs(),this._moved&&this._moving&&(Pt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,zn._dragging=!1}});function Rc(n,o){if(!o||!n.length)return n.slice();var l=o*o;return n=H_(n,l),n=z_(n,l),n}function Oc(n,o,l){return Math.sqrt(hs(n,o,l,!0))}function F_(n,o,l){return hs(n,o,l)}function z_(n,o){var l=n.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new h(l);d[0]=d[l-1]=1,ia(n,d,o,0,l-1);var p,y=[];for(p=0;p<l;p++)d[p]&&y.push(n[p]);return y}function ia(n,o,l,h,d){var p=0,y,C,x;for(C=h+1;C<=d-1;C++)x=hs(n[C],n[h],n[d],!0),x>p&&(y=C,p=x);p>l&&(o[y]=1,ia(n,o,l,h,y),ia(n,o,l,y,d))}function H_(n,o){for(var l=[n[0]],h=1,d=0,p=n.length;h<p;h++)W_(n[h],n[d])>o&&(l.push(n[h]),d=h);return d<p-1&&l.push(n[p-1]),l}var Dc;function Bc(n,o,l,h,d){var p=h?Dc:Hn(n,l),y=Hn(o,l),C,x,P;for(Dc=y;;){if(!(p|y))return[n,o];if(p&y)return!1;C=p||y,x=uo(n,o,C,l,d),P=Hn(x,l),C===p?(n=x,p=P):(o=x,y=P)}}function uo(n,o,l,h,d){var p=o.x-n.x,y=o.y-n.y,C=h.min,x=h.max,P,z;return l&8?(P=n.x+p*(x.y-n.y)/y,z=x.y):l&4?(P=n.x+p*(C.y-n.y)/y,z=C.y):l&2?(P=x.x,z=n.y+y*(x.x-n.x)/p):l&1&&(P=C.x,z=n.y+y*(C.x-n.x)/p),new W(P,z,d)}function Hn(n,o){var l=0;return n.x<o.min.x?l|=1:n.x>o.max.x&&(l|=2),n.y<o.min.y?l|=4:n.y>o.max.y&&(l|=8),l}function W_(n,o){var l=o.x-n.x,h=o.y-n.y;return l*l+h*h}function hs(n,o,l,h){var d=o.x,p=o.y,y=l.x-d,C=l.y-p,x=y*y+C*C,P;return x>0&&(P=((n.x-d)*y+(n.y-p)*C)/x,P>1?(d=l.x,p=l.y):P>0&&(d+=y*P,p+=C*P)),y=n.x-d,C=n.y-p,h?y*y+C*C:new W(d,p)}function tn(n){return!F(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]!="undefined"}function Fc(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),tn(n)}var U_={simplify:Rc,pointToSegmentDistance:Oc,closestPointOnSegment:F_,clipSegment:Bc,_getEdgeIntersection:uo,_getBitCode:Hn,_sqClosestPointOnSegment:hs,isFlat:tn,_flat:Fc};function zc(n,o,l){var h,d=[1,4,2,8],p,y,C,x,P,z,q,ft;for(p=0,z=n.length;p<z;p++)n[p]._code=Hn(n[p],o);for(C=0;C<4;C++){for(q=d[C],h=[],p=0,z=n.length,y=z-1;p<z;y=p++)x=n[p],P=n[y],x._code&q?P._code&q||(ft=uo(P,x,q,o,l),ft._code=Hn(ft,o),h.push(ft)):(P._code&q&&(ft=uo(P,x,q,o,l),ft._code=Hn(ft,o),h.push(ft)),h.push(x));n=h}return n}var Z_={clipPolygon:zc},sa={project:function(n){return new W(n.lng,n.lat)},unproject:function(n){return new yt(n.y,n.x)},bounds:new vt([-180,-90],[180,90])},oa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new vt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var o=Math.PI/180,l=this.R,h=n.lat*o,d=this.R_MINOR/l,p=Math.sqrt(1-d*d),y=p*Math.sin(h),C=Math.tan(Math.PI/4-h/2)/Math.pow((1-y)/(1+y),p/2);return h=-l*Math.log(Math.max(C,1e-10)),new W(n.lng*o*l,h)},unproject:function(n){for(var o=180/Math.PI,l=this.R,h=this.R_MINOR/l,d=Math.sqrt(1-h*h),p=Math.exp(-n.y/l),y=Math.PI/2-2*Math.atan(p),C=0,x=.1,P;C<15&&Math.abs(x)>1e-7;C++)P=d*Math.sin(y),P=Math.pow((1-P)/(1+P),d/2),x=Math.PI/2-2*Math.atan(p*P)-y,y+=x;return new yt(y*o,n.x*o/l)}},$_={LonLat:sa,Mercator:oa,SphericalMercator:Re},V_=r({},de,{code:"EPSG:3395",projection:oa,transformation:function(){var n=.5/(Math.PI*oa.R);return Ye(n,.5,-n,.5)}()}),Hc=r({},de,{code:"EPSG:4326",projection:sa,transformation:Ye(1/180,1,-1/180,.5)}),j_=r({},$t,{projection:sa,transformation:Ye(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,o){var l=o.lng-n.lng,h=o.lat-n.lat;return Math.sqrt(l*l+h*h)},infinite:!0});$t.Earth=de,$t.EPSG3395=V_,$t.EPSG3857=v,$t.EPSG900913=b,$t.EPSG4326=Hc,$t.Simple=j_;var Pe=bt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[f(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[f(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var o=n.target;if(!!o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var l=this.getEvents();o.on(l,this),this.once("remove",function(){o.off(l,this)},this)}this.onAdd(o),this.getAttribution&&o.attributionControl&&o.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),o.fire("layeradd",{layer:this})}}});ht.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(n);return this._layers[o]?this:(this._layers[o]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var o=f(n);return this._layers[o]?(this._loaded&&n.onRemove(this),n.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(n.getAttribution()),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return!!n&&f(n)in this._layers},eachLayer:function(n,o){for(var l in this._layers)n.call(o,this._layers[l]);return this},_addLayers:function(n){n=n?F(n)?n:[n]:[];for(var o=0,l=n.length;o<l;o++)this.addLayer(n[o])},_addZoomLimit:function(n){(isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[f(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var o=f(n);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,o=-1/0,l=this._getZoomSpan();for(var h in this._zoomBoundLayers){var d=this._zoomBoundLayers[h].options;n=d.minZoom===void 0?n:Math.min(n,d.minZoom),o=d.maxZoom===void 0?o:Math.max(o,d.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=n===1/0?void 0:n,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gi=Pe.extend({initialize:function(n,o){O(this,o),this._layers={};var l,h;if(n)for(l=0,h=n.length;l<h;l++)this.addLayer(n[l])},addLayer:function(n){var o=this.getLayerId(n);return this._layers[o]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var o=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(n){if(!n)return!1;var o=typeof n=="number"?n:this.getLayerId(n);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var o=Array.prototype.slice.call(arguments,1),l,h;for(l in this._layers)h=this._layers[l],h[n]&&h[n].apply(h,o);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,o){for(var l in this._layers)n.call(o,this._layers[l]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return f(n)}}),q_=function(n,o){return new gi(n,o)},vi=gi.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),gi.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),gi.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Nt;for(var o in this._layers){var l=this._layers[o];n.extend(l.getBounds?l.getBounds():l.getLatLng())}return n}}),G_=function(n,o){return new vi(n,o)},yi=me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(n){O(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,o){var l=this._getIconUrl(n);if(!l){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(l,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,n),h},_setIconStyles:function(n,o){var l=this.options,h=l[o+"Size"];typeof h=="number"&&(h=[h,h]);var d=st(h),p=st(o==="shadow"&&l.shadowAnchor||l.iconAnchor||d&&d.divideBy(2,!0));n.className="leaflet-marker-"+o+" "+(l.className||""),p&&(n.style.marginLeft=-p.x+"px",n.style.marginTop=-p.y+"px"),d&&(n.style.width=d.x+"px",n.style.height=d.y+"px")},_createImg:function(n,o){return o=o||document.createElement("img"),o.src=n,o},_getIconUrl:function(n){return yn&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function K_(n){return new yi(n)}var us=yi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return us.imagePath||(us.imagePath=this._detectIconPath()),(this.options.imagePath||us.imagePath)+yi.prototype._getIconUrl.call(this,n)},_detectIconPath:function(){var n=dt("div","leaflet-default-icon-path",document.body),o=ss(n,"background-image")||ss(n,"backgroundImage");return document.body.removeChild(n),o===null||o.indexOf("url")!==0?o="":o=o.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),o}}),Wc=Fe.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new zn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),tt(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Dt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var o=this._marker,l=o._map,h=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,p=wn(o._icon),y=l.getPixelBounds(),C=l.getPixelOrigin(),x=Gt(y.min._subtract(C).add(d),y.max._subtract(C).subtract(d));if(!x.contains(p)){var P=st((Math.max(x.max.x,p.x)-x.max.x)/(y.max.x-x.max.x)-(Math.min(x.min.x,p.x)-x.min.x)/(y.min.x-x.min.x),(Math.max(x.max.y,p.y)-x.max.y)/(y.max.y-x.max.y)-(Math.min(x.min.y,p.y)-x.min.y)/(y.min.y-x.min.y)).multiplyBy(h);l.panBy(P,{animate:!1}),this._draggable._newPos._add(P),this._draggable._startPos._add(P),Wt(o._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=gt(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(Pt(this._panRequest),this._panRequest=gt(this._adjustPan.bind(this,n)))},_onDrag:function(n){var o=this._marker,l=o._shadow,h=wn(o._icon),d=o._map.layerPointToLatLng(h);l&&Wt(l,h),o._latlng=d,n.latlng=d,n.oldLatLng=this._oldLatLng,o.fire("move",n).fire("drag",n)},_onDragEnd:function(n){Pt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),fo=Pe.extend({options:{icon:new us,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,o){O(this,o),this._latlng=At(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var o=this._latlng;return this._latlng=At(n),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=n.icon.createIcon(this._icon),h=!1;l!==this._icon&&(this._icon&&this._removeIcon(),h=!0,n.title&&(l.title=n.title),l.tagName==="IMG"&&(l.alt=n.alt||"")),tt(l,o),n.keyboard&&(l.tabIndex="0"),this._icon=l,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=n.icon.createShadow(this._shadow),p=!1;d!==this._shadow&&(this._removeShadow(),p=!0),d&&(tt(d,o),d.alt=""),this._shadow=d,n.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&p&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Rt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Wt(this._icon,n),this._shadow&&Wt(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(o)},_initInteraction:function(){if(!!this.options.interactive&&(tt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wc)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wc(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&ve(this._icon,n),this._shadow&&ve(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Y_(n,o){return new fo(n,o)}var bn=Pe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return O(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),_o=bn.extend({options:{fill:!0,radius:10},initialize:function(n,o){O(this,o),this._latlng=At(n),this._radius=this.options.radius},setLatLng:function(n){var o=this._latlng;return this._latlng=At(n),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var o=n&&n.radius||this._radius;return bn.prototype.setStyle.call(this,n),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,o=this._radiusY||n,l=this._clickTolerance(),h=[n+l,o+l];this._pxBounds=new vt(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Q_(n,o){return new _o(n,o)}var ra=_o.extend({initialize:function(n,o,l){if(typeof o=="number"&&(o=r({},l,{radius:o})),O(this,o),this._latlng=At(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Nt(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:bn.prototype.setStyle,_project:function(){var n=this._latlng.lng,o=this._latlng.lat,l=this._map,h=l.options.crs;if(h.distance===de.distance){var d=Math.PI/180,p=this._mRadius/de.R/d,y=l.project([o+p,n]),C=l.project([o-p,n]),x=y.add(C).divideBy(2),P=l.unproject(x).lat,z=Math.acos((Math.cos(p*d)-Math.sin(o*d)*Math.sin(P*d))/(Math.cos(o*d)*Math.cos(P*d)))/d;(isNaN(z)||z===0)&&(z=p/Math.cos(Math.PI/180*o)),this._point=x.subtract(l.getPixelOrigin()),this._radius=isNaN(z)?0:x.x-l.project([P,n-z]).x,this._radiusY=x.y-y.y}else{var q=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(q).x}this._updateBounds()}});function X_(n,o,l){return new ra(n,o,l)}var en=bn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,o){O(this,o),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var o=1/0,l=null,h=hs,d,p,y=0,C=this._parts.length;y<C;y++)for(var x=this._parts[y],P=1,z=x.length;P<z;P++){d=x[P-1],p=x[P];var q=h(n,d,p,!0);q<o&&(o=q,l=h(n,d,p))}return l&&(l.distance=Math.sqrt(o)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,o,l,h,d,p,y,C=this._rings[0],x=C.length;if(!x)return null;for(n=0,o=0;n<x-1;n++)o+=C[n].distanceTo(C[n+1])/2;if(o===0)return this._map.layerPointToLatLng(C[0]);for(n=0,h=0;n<x-1;n++)if(d=C[n],p=C[n+1],l=d.distanceTo(p),h+=l,h>o)return y=(h-o)/l,this._map.layerPointToLatLng([p.x-y*(p.x-d.x),p.y-y*(p.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(n,o){return o=o||this._defaultShape(),n=At(n),o.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Nt,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var o=[],l=tn(n),h=0,d=n.length;h<d;h++)l?(o[h]=At(n[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(n[h]);return o},_project:function(){var n=new vt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),o=new W(n,n);this._pxBounds=new vt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)])},_projectLatlngs:function(n,o,l){var h=n[0]instanceof yt,d=n.length,p,y;if(h){for(y=[],p=0;p<d;p++)y[p]=this._map.latLngToLayerPoint(n[p]),l.extend(y[p]);o.push(y)}else for(p=0;p<d;p++)this._projectLatlngs(n[p],o,l)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,l,h,d,p,y,C,x;for(l=0,d=0,p=this._rings.length;l<p;l++)for(x=this._rings[l],h=0,y=x.length;h<y-1;h++)C=Bc(x[h],x[h+1],n,h,!0),C&&(o[d]=o[d]||[],o[d].push(C[0]),(C[1]!==x[h+1]||h===y-2)&&(o[d].push(C[1]),d++))}},_simplifyPoints:function(){for(var n=this._parts,o=this.options.smoothFactor,l=0,h=n.length;l<h;l++)n[l]=Rc(n[l],o)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,o){var l,h,d,p,y,C,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(l=0,p=this._parts.length;l<p;l++)for(C=this._parts[l],h=0,y=C.length,d=y-1;h<y;d=h++)if(!(!o&&h===0)&&Oc(n,C[d],C[h])<=x)return!0;return!1}});function J_(n,o){return new en(n,o)}en._flat=Fc;var wi=en.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,o,l,h,d,p,y,C,x,P=this._rings[0],z=P.length;if(!z)return null;for(p=y=C=0,n=0,o=z-1;n<z;o=n++)l=P[n],h=P[o],d=l.y*h.x-h.y*l.x,y+=(l.x+h.x)*d,C+=(l.y+h.y)*d,p+=d*3;return p===0?x=P[0]:x=[y/p,C/p],this._map.layerPointToLatLng(x)},_convertLatLngs:function(n){var o=en.prototype._convertLatLngs.call(this,n),l=o.length;return l>=2&&o[0]instanceof yt&&o[0].equals(o[l-1])&&o.pop(),o},_setLatLngs:function(n){en.prototype._setLatLngs.call(this,n),tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,o=this.options.weight,l=new W(o,o);if(n=new vt(n.min.subtract(l),n.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,d=this._rings.length,p;h<d;h++)p=zc(this._rings[h],n,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var o=!1,l,h,d,p,y,C,x,P;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(p=0,x=this._parts.length;p<x;p++)for(l=this._parts[p],y=0,P=l.length,C=P-1;y<P;C=y++)h=l[y],d=l[C],h.y>n.y!=d.y>n.y&&n.x<(d.x-h.x)*(n.y-h.y)/(d.y-h.y)+h.x&&(o=!o);return o||en.prototype._containsPoint.call(this,n,!0)}});function tp(n,o){return new wi(n,o)}var nn=vi.extend({initialize:function(n,o){O(this,o),this._layers={},n&&this.addData(n)},addData:function(n){var o=F(n)?n:n.features,l,h,d;if(o){for(l=0,h=o.length;l<h;l++)d=o[l],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var p=this.options;if(p.filter&&!p.filter(n))return this;var y=aa(n,p);return y?(y.feature=go(n),y.defaultOptions=y.options,this.resetStyle(y),p.onEachFeature&&p.onEachFeature(n,y),this.addLayer(y)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=r({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(o){this._setLayerStyle(o,n)},this)},_setLayerStyle:function(n,o){n.setStyle&&(typeof o=="function"&&(o=o(n.feature)),n.setStyle(o))}});function aa(n,o){var l=n.type==="Feature"?n.geometry:n,h=l?l.coordinates:null,d=[],p=o&&o.pointToLayer,y=o&&o.coordsToLatLng||la,C,x,P,z;if(!h&&!l)return null;switch(l.type){case"Point":return C=y(h),Uc(p,n,C,o);case"MultiPoint":for(P=0,z=h.length;P<z;P++)C=y(h[P]),d.push(Uc(p,n,C,o));return new vi(d);case"LineString":case"MultiLineString":return x=po(h,l.type==="LineString"?0:1,y),new en(x,o);case"Polygon":case"MultiPolygon":return x=po(h,l.type==="Polygon"?1:2,y),new wi(x,o);case"GeometryCollection":for(P=0,z=l.geometries.length;P<z;P++){var q=aa({geometry:l.geometries[P],type:"Feature",properties:n.properties},o);q&&d.push(q)}return new vi(d);default:throw new Error("Invalid GeoJSON object.")}}function Uc(n,o,l,h){return n?n(o,l):new fo(l,h&&h.markersInheritOptions&&h)}function la(n){return new yt(n[1],n[0],n[2])}function po(n,o,l){for(var h=[],d=0,p=n.length,y;d<p;d++)y=o?po(n[d],o-1,l):(l||la)(n[d]),h.push(y);return h}function ca(n,o){return o=typeof o=="number"?o:6,n.alt!==void 0?[w(n.lng,o),w(n.lat,o),w(n.alt,o)]:[w(n.lng,o),w(n.lat,o)]}function mo(n,o,l,h){for(var d=[],p=0,y=n.length;p<y;p++)d.push(o?mo(n[p],o-1,l,h):ca(n[p],h));return!o&&l&&d.push(d[0]),d}function bi(n,o){return n.feature?r({},n.feature,{geometry:o}):go(o)}function go(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var ha={toGeoJSON:function(n){return bi(this,{type:"Point",coordinates:ca(this.getLatLng(),n)})}};fo.include(ha),ra.include(ha),_o.include(ha),en.include({toGeoJSON:function(n){var o=!tn(this._latlngs),l=mo(this._latlngs,o?1:0,!1,n);return bi(this,{type:(o?"Multi":"")+"LineString",coordinates:l})}}),wi.include({toGeoJSON:function(n){var o=!tn(this._latlngs),l=o&&!tn(this._latlngs[0]),h=mo(this._latlngs,l?2:o?1:0,!0,n);return o||(h=[h]),bi(this,{type:(l?"Multi":"")+"Polygon",coordinates:h})}}),gi.include({toMultiPoint:function(n){var o=[];return this.eachLayer(function(l){o.push(l.toGeoJSON(n).geometry.coordinates)}),bi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(n){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(n);var l=o==="GeometryCollection",h=[];return this.eachLayer(function(d){if(d.toGeoJSON){var p=d.toGeoJSON(n);if(l)h.push(p.geometry);else{var y=go(p);y.type==="FeatureCollection"?h.push.apply(h,y.features):h.push(y)}}}),l?bi(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function Zc(n,o){return new nn(n,o)}var ep=Zc,vo=Pe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,o,l){this._url=n,this._bounds=zt(o),O(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(tt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&pi(this._image),this},bringToBack:function(){return this._map&&mi(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=zt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",o=this._image=n?this._url:dt("img");if(tt(o,"leaflet-image-layer"),this._zoomAnimated&&tt(o,"leaflet-zoom-animated"),this.options.className&&tt(o,this.options.className),o.onselectstart=m,o.onmousemove=m,o.onload=c(this.fire,this,"load"),o.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(n){var o=this._map.getZoomScale(n.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Bn(this._image,l,o)},_reset:function(){var n=this._image,o=new vt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=o.getSize();Wt(n,o.min),n.style.width=l.x+"px",n.style.height=l.y+"px"},_updateOpacity:function(){ve(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)}}),np=function(n,o,l){return new vo(n,o,l)},$c=vo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var n=this._url.tagName==="VIDEO",o=this._image=n?this._url:dt("video");if(tt(o,"leaflet-image-layer"),this._zoomAnimated&&tt(o,"leaflet-zoom-animated"),this.options.className&&tt(o,this.options.className),o.onselectstart=m,o.onmousemove=m,o.onloadeddata=c(this.fire,this,"load"),n){for(var l=o.getElementsByTagName("source"),h=[],d=0;d<l.length;d++)h.push(l[d].src);this._url=l.length>0?h:[o.src];return}F(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted;for(var p=0;p<this._url.length;p++){var y=dt("source");y.src=this._url[p],o.appendChild(y)}}});function ip(n,o,l){return new $c(n,o,l)}var Vc=vo.extend({_initImage:function(){var n=this._image=this._url;tt(n,"leaflet-image-layer"),this._zoomAnimated&&tt(n,"leaflet-zoom-animated"),this.options.className&&tt(n,this.options.className),n.onselectstart=m,n.onmousemove=m}});function sp(n,o,l){return new Vc(n,o,l)}var sn=Pe.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(n,o){O(this,n),this._source=o},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&ve(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&ve(this._container,1),this.bringToFront()},onRemove:function(n){n._fadeAnimated?(ve(this._container,0),this._removeTimeout=setTimeout(c(Rt,void 0,this._container),200)):Rt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=At(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pi(this._container),this},bringToBack:function(){return this._map&&mi(this._container),this},_prepareOpen:function(n,o,l){if(o instanceof Pe||(l=o,o=n),o instanceof vi)for(var h in n._layers){o=n._layers[h];break}if(!l)if(o.getCenter)l=o.getCenter();else if(o.getLatLng)l=o.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=o,this.update(),l},_updateContent:function(){if(!!this._content){var n=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")n.innerHTML=o;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var n=this._map.latLngToLayerPoint(this._latlng),o=st(this.options.offset),l=this._getAnchor();this._zoomAnimated?Wt(this._container,n.add(l)):o=o.add(n).add(l);var h=this._containerBottom=-o.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),Ci=sn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n.openPopup(this),this},onAdd:function(n){sn.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bn||this._source.on("preclick",Fn))},onRemove:function(n){sn.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bn||this._source.off("preclick",Fn))},getEvents:function(){var n=sn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this._close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var n="leaflet-popup",o=this._container=dt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=dt("div",n+"-content-wrapper",o);if(this._contentNode=dt("div",n+"-content",l),ls(o),Yr(this._contentNode),rt(o,"contextmenu",Fn),this._tipContainer=dt("div",n+"-tip-container",o),this._tip=dt("div",n+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=dt("a",n+"-close-button",o);h.href="#close",h.innerHTML="&#215;",rt(h,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var n=this._contentNode,o=n.style;o.width="",o.whiteSpace="nowrap";var l=n.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),o.width=l+1+"px",o.whiteSpace="",o.height="";var h=n.offsetHeight,d=this.options.maxHeight,p="leaflet-popup-scrolled";d&&h>d?(o.height=d+"px",tt(n,p)):Dt(n,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),l=this._getAnchor();Wt(this._container,o.add(l))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var n=this._map,o=parseInt(ss(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+o,h=this._containerWidth,d=new W(this._containerLeft,-l-this._containerBottom);d._add(wn(this._container));var p=n.layerPointToContainerPoint(d),y=st(this.options.autoPanPadding),C=st(this.options.autoPanPaddingTopLeft||y),x=st(this.options.autoPanPaddingBottomRight||y),P=n.getSize(),z=0,q=0;p.x+h+x.x>P.x&&(z=p.x+h-P.x+x.x),p.x-z-C.x<0&&(z=p.x-C.x),p.y+l+x.y>P.y&&(q=p.y+l-P.y+x.y),p.y-q-C.y<0&&(q=p.y-C.y),(z||q)&&n.fire("autopanstart").panBy([z,q])}},_onCloseButtonClick:function(n){this._close(),Je(n)},_getAnchor:function(){return st(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),op=function(n,o){return new Ci(n,o)};ht.mergeOptions({closePopupOnClick:!0}),ht.include({openPopup:function(n,o,l){return n instanceof Ci||(n=new Ci(l).setContent(n)),o&&n.setLatLng(o),this.hasLayer(n)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=n,this.addLayer(n))},closePopup:function(n){return(!n||n===this._popup)&&(n=this._popup,this._popup=null),n&&this.removeLayer(n),this}}),Pe.include({bindPopup:function(n,o){return n instanceof Ci?(O(n,o),this._popup=n,n._source=this):((!this._popup||o)&&(this._popup=new Ci(o,this)),this._popup.setContent(n)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n,o){return this._popup&&this._map&&(o=this._popup._prepareOpen(this,n,o),this._map.openPopup(this._popup,o)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(n){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(n)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){var o=n.layer||n.target;if(!!this._popup&&!!this._map){if(Je(n),o instanceof bn){this.openPopup(n.layer||n.target,n.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===o?this.closePopup():this.openPopup(o,n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var xi=sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(n){sn.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(n){sn.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var n=sn.prototype.getEvents.call(this);return De&&!this.options.permanent&&(n.preclick=this._close),n},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var n="leaflet-tooltip",o=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=dt("div",o)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var o,l,h=this._map,d=this._container,p=h.latLngToContainerPoint(h.getCenter()),y=h.layerPointToContainerPoint(n),C=this.options.direction,x=d.offsetWidth,P=d.offsetHeight,z=st(this.options.offset),q=this._getAnchor();C==="top"?(o=x/2,l=P):C==="bottom"?(o=x/2,l=0):C==="center"?(o=x/2,l=P/2):C==="right"?(o=0,l=P/2):C==="left"?(o=x,l=P/2):y.x<p.x?(C="right",o=0,l=P/2):(C="left",o=x+(z.x+q.x)*2,l=P/2),n=n.subtract(st(o,l,!0)).add(z).add(q),Dt(d,"leaflet-tooltip-right"),Dt(d,"leaflet-tooltip-left"),Dt(d,"leaflet-tooltip-top"),Dt(d,"leaflet-tooltip-bottom"),tt(d,"leaflet-tooltip-"+C),Wt(d,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&ve(this._container,n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(o)},_getAnchor:function(){return st(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),rp=function(n,o){return new xi(n,o)};ht.include({openTooltip:function(n,o,l){return n instanceof xi||(n=new xi(l).setContent(n)),o&&n.setLatLng(o),this.hasLayer(n)?this:this.addLayer(n)},closeTooltip:function(n){return n&&this.removeLayer(n),this}}),Pe.include({bindTooltip:function(n,o){return n instanceof xi?(O(n,o),this._tooltip=n,n._source=this):((!this._tooltip||o)&&(this._tooltip=new xi(o,this)),this._tooltip.setContent(n)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var o=n?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),De&&(l.click=this._openTooltip)),this[o](l),this._tooltipHandlersAdded=!n}},openTooltip:function(n,o){return this._tooltip&&this._map&&(o=this._tooltip._prepareOpen(this,n,o),this._map.openTooltip(this._tooltip,o),this._tooltip.options.interactive&&this._tooltip._container&&(tt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Dt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(n){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(n)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_openTooltip:function(n){var o=n.layer||n.target;!this._tooltip||!this._map||this.openTooltip(o,this._tooltip.options.sticky?n.latlng:void 0)},_moveTooltip:function(n){var o=n.latlng,l,h;this._tooltip.options.sticky&&n.originalEvent&&(l=this._map.mouseEventToContainerPoint(n.originalEvent),h=this._map.containerPointToLayerPoint(l),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var jc=yi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var o=n&&n.tagName==="DIV"?n:document.createElement("div"),l=this.options;if(l.html instanceof Element?(so(o),o.appendChild(l.html)):o.innerHTML=l.html!==!1?l.html:"",l.bgPos){var h=st(l.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function ap(n){return new jc(n)}yi.Default=us;var ds=Pe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Xt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){O(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Rt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof W?n:new W(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var o=this.getPane().children,l=-n(-1/0,1/0),h=0,d=o.length,p;h<d;h++)p=o[h].style.zIndex,o[h]!==this._container&&p&&(l=n(l,+p));isFinite(l)&&(this.options.zIndex=l+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!B){ve(this._container,this.options.opacity);var n=+new Date,o=!1,l=!1;for(var h in this._tiles){var d=this._tiles[h];if(!(!d.current||!d.loaded)){var p=Math.min(1,(n-d.loaded)/200);ve(d.el,p),p<1?o=!0:(d.active?l=!0:this._onOpaqueTile(d),d.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),o&&(Pt(this._fadeFrame),this._fadeFrame=gt(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,o=this.options.maxZoom;if(n!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===n?(this._levels[l].el.style.zIndex=o-Math.abs(n-l),this._onUpdateLevel(l)):(Rt(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var h=this._levels[n],d=this._map;return h||(h=this._levels[n]={},h.el=dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=d.project(d.unproject(d.getPixelOrigin()),n).round(),h.zoom=n,this._setZoomTransform(h,d.getCenter(),d.getZoom()),m(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(!!this._map){var n,o,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)o=this._tiles[n],o.retain=o.current;for(n in this._tiles)if(o=this._tiles[n],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var o in this._tiles)this._tiles[o].coords.z===n&&this._removeTile(o)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Rt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,o,l,h){var d=Math.floor(n/2),p=Math.floor(o/2),y=l-1,C=new W(+d,+p);C.z=+y;var x=this._tileCoordsToKey(C),P=this._tiles[x];return P&&P.active?(P.retain=!0,!0):(P&&P.loaded&&(P.retain=!0),y>h?this._retainParent(d,p,y,h):!1)},_retainChildren:function(n,o,l,h){for(var d=2*n;d<2*n+2;d++)for(var p=2*o;p<2*o+2;p++){var y=new W(d,p);y.z=l+1;var C=this._tileCoordsToKey(y),x=this._tiles[C];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);l+1<h&&this._retainChildren(d,p,l+1,h)}},_resetView:function(n){var o=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var o=this.options;return o.minNativeZoom!==void 0&&n<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<n?o.maxNativeZoom:n},_setView:function(n,o,l,h){var d=Math.round(o);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var p=this.options.updateWhenZooming&&d!==this._tileZoom;(!h||p)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(n),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(n,o)},_setZoomTransforms:function(n,o){for(var l in this._levels)this._setZoomTransform(this._levels[l],n,o)},_setZoomTransform:function(n,o,l){var h=this._map.getZoomScale(l,n.zoom),d=n.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,l)).round();It?Bn(n.el,d,h):Wt(n.el,d)},_resetGrid:function(){var n=this._map,o=n.options.crs,l=this._tileSize=this.getTileSize(),h=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,o.wrapLng[0]],h).x/l.x),Math.ceil(n.project([0,o.wrapLng[1]],h).x/l.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([o.wrapLat[0],0],h).y/l.x),Math.ceil(n.project([o.wrapLat[1],0],h).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var o=this._map,l=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(l,this._tileZoom),d=o.project(n,this._tileZoom).floor(),p=o.getSize().divideBy(h*2);return new vt(d.subtract(p),d.add(p))},_update:function(n){var o=this._map;if(!!o){var l=this._clampZoom(o.getZoom());if(n===void 0&&(n=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(n),d=this._pxBoundsToTileRange(h),p=d.getCenter(),y=[],C=this.options.keepBuffer,x=new vt(d.getBottomLeft().subtract([C,-C]),d.getTopRight().add([C,-C]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var P in this._tiles){var z=this._tiles[P].coords;(z.z!==this._tileZoom||!x.contains(new W(z.x,z.y)))&&(this._tiles[P].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(n,l);return}for(var q=d.min.y;q<=d.max.y;q++)for(var ft=d.min.x;ft<=d.max.x;ft++){var on=new W(ft,q);if(on.z=this._tileZoom,!!this._isValidTile(on)){var Wn=this._tiles[this._tileCoordsToKey(on)];Wn?Wn.current=!0:y.push(on)}}if(y.sort(function(Cn,ua){return Cn.distanceTo(p)-ua.distanceTo(p)}),y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wo=document.createDocumentFragment();for(ft=0;ft<y.length;ft++)this._addTile(y[ft],wo);this._level.el.appendChild(wo)}}}},_isValidTile:function(n){var o=this._map.options.crs;if(!o.infinite){var l=this._globalTileRange;if(!o.wrapLng&&(n.x<l.min.x||n.x>l.max.x)||!o.wrapLat&&(n.y<l.min.y||n.y>l.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(n);return zt(this.options.bounds).overlaps(h)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var o=this._map,l=this.getTileSize(),h=n.scaleBy(l),d=h.add(l),p=o.unproject(h,n.z),y=o.unproject(d,n.z);return[p,y]},_tileCoordsToBounds:function(n){var o=this._tileCoordsToNwSe(n),l=new Nt(o[0],o[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var o=n.split(":"),l=new W(+o[0],+o[1]);return l.z=+o[2],l},_removeTile:function(n){var o=this._tiles[n];!o||(Rt(o.el),delete this._tiles[n],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){tt(n,"leaflet-tile");var o=this.getTileSize();n.style.width=o.x+"px",n.style.height=o.y+"px",n.onselectstart=m,n.onmousemove=m,B&&this.options.opacity<1&&ve(n,this.options.opacity),k&&!$&&(n.style.WebkitBackfaceVisibility="hidden")},_addTile:function(n,o){var l=this._getTilePos(n),h=this._tileCoordsToKey(n),d=this.createTile(this._wrapCoords(n),c(this._tileReady,this,n));this._initTile(d),this.createTile.length<2&&gt(c(this._tileReady,this,n,null,d)),Wt(d,l),this._tiles[h]={el:d,coords:n,current:!0},o.appendChild(d),this.fire("tileloadstart",{tile:d,coords:n})},_tileReady:function(n,o,l){o&&this.fire("tileerror",{error:o,tile:l,coords:n});var h=this._tileCoordsToKey(n);l=this._tiles[h],l&&(l.loaded=+new Date,this._map._fadeAnimated?(ve(l.el,0),Pt(this._fadeFrame),this._fadeFrame=gt(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),o||(tt(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),B||!this._map._fadeAnimated?gt(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var o=new W(this._wrapX?g(n.x,this._wrapX):n.x,this._wrapY?g(n.y,this._wrapY):n.y);return o.z=n.z,o},_pxBoundsToTileRange:function(n){var o=this.getTileSize();return new vt(n.min.unscaleBy(o).floor(),n.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function lp(n){return new ds(n)}var Ei=ds.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(n,o){this._url=n,o=O(this,o),o.detectRetina&&yn&&o.maxZoom>0&&(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom++):(o.zoomOffset++,o.maxZoom--),o.minZoom=Math.max(0,o.minZoom)),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),k||this.on("tileunload",this._onTileRemove)},setUrl:function(n,o){return this._url===n&&o===void 0&&(o=!0),this._url=n,o||this.redraw(),this},createTile:function(n,o){var l=document.createElement("img");return rt(l,"load",c(this._tileOnLoad,this,o,l)),rt(l,"error",c(this._tileOnError,this,o,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l.alt="",l.setAttribute("role","presentation"),l.src=this.getTileUrl(n),l},getTileUrl:function(n){var o={r:yn?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-n.y;this.options.tms&&(o.y=l),o["-y"]=l}return Y(this._url,r(o,this.options))},_tileOnLoad:function(n,o){B?setTimeout(c(n,this,null,o),0):n(null,o)},_tileOnError:function(n,o,l){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),n(l,o)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,o=this.options.maxZoom,l=this.options.zoomReverse,h=this.options.zoomOffset;return l&&(n=o-n),n+h},_getSubdomain:function(n){var o=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var n,o;for(n in this._tiles)this._tiles[n].coords.z!==this._tileZoom&&(o=this._tiles[n].el,o.onload=m,o.onerror=m,o.complete||(o.src=J,Rt(o),delete this._tiles[n]))},_removeTile:function(n){var o=this._tiles[n];if(!!o)return V||o.el.setAttribute("src",J),ds.prototype._removeTile.call(this,n)},_tileReady:function(n,o,l){if(!(!this._map||l&&l.getAttribute("src")===J))return ds.prototype._tileReady.call(this,n,o,l)}});function qc(n,o){return new Ei(n,o)}var Gc=Ei.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,o){this._url=n;var l=r({},this.defaultWmsParams);for(var h in o)h in this.options||(l[h]=o[h]);o=O(this,o);var d=o.detectRetina&&yn?2:1,p=this.getTileSize();l.width=p.x*d,l.height=p.y*d,this.wmsParams=l},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Ei.prototype.onAdd.call(this,n)},getTileUrl:function(n){var o=this._tileCoordsToNwSe(n),l=this._crs,h=Gt(l.project(o[0]),l.project(o[1])),d=h.min,p=h.max,y=(this._wmsVersion>=1.3&&this._crs===Hc?[d.y,d.x,p.y,p.x]:[d.x,d.y,p.x,p.y]).join(","),C=Ei.prototype.getTileUrl.call(this,n);return C+Z(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+y},setParams:function(n,o){return r(this.wmsParams,n),o||this.redraw(),this}});function cp(n,o){return new Gc(n,o)}Ei.WMS=Gc,qc.wms=cp;var ze=Pe.extend({options:{padding:.1,tolerance:0},initialize:function(n){O(this,n),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&tt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,o){var l=this._map.getZoomScale(o,this._zoom),h=wn(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,o),y=this._map.project(n,o),C=y.subtract(p),x=d.multiplyBy(-l).add(h).add(d).subtract(C);It?Bn(this._container,x,l):Wt(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,o=this._map.getSize(),l=this._map.containerPointToLayerPoint(o.multiplyBy(-n)).round();this._bounds=new vt(l,l.add(o.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Kc=ze.extend({getEvents:function(){var n=ze.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ze.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");rt(n,"mousemove",this._onMouseMove,this),rt(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),rt(n,"mouseout",this._handleMouseOut,this),this._ctx=n.getContext("2d")},_destroyContainer:function(){Pt(this._redrawRequest),delete this._ctx,Rt(this._container),Ht(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var o in this._layers)n=this._layers[o],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ze.prototype._update.call(this);var n=this._bounds,o=this._container,l=n.getSize(),h=yn?2:1;Wt(o,n.min),o.width=h*l.x,o.height=h*l.y,o.style.width=l.x+"px",o.style.height=l.y+"px",yn&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){ze.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[f(n)]=n;var o=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var o=n._order,l=o.next,h=o.prev;l?l.prev=h:this._drawLast=h,h?h.next=l:this._drawFirst=l,delete n._order,delete this._layers[f(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var o=n.options.dashArray.split(/[, ]+/),l=[],h,d;for(d=0;d<o.length;d++){if(h=Number(o[d]),isNaN(h))return;l.push(h)}n.options._dashArray=l}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){!this._map||(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||gt(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var o=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new vt,this._redrawBounds.extend(n._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(n._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var o=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,o=this._redrawBounds;if(this._ctx.save(),o){var l=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)n=h.layer,(!o||n._pxBounds&&n._pxBounds.intersects(o))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,o){if(!!this._drawing){var l,h,d,p,y=n._parts,C=y.length,x=this._ctx;if(!!C){for(x.beginPath(),l=0;l<C;l++){for(h=0,d=y[l].length;h<d;h++)p=y[l][h],x[h?"lineTo":"moveTo"](p.x,p.y);o&&x.closePath()}this._fillStroke(x,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var o=n._point,l=this._ctx,h=Math.max(Math.round(n._radius),1),d=(Math.max(Math.round(n._radiusY),1)||h)/h;d!==1&&(l.save(),l.scale(1,d)),l.beginPath(),l.arc(o.x,o.y/d,h,0,Math.PI*2,!1),d!==1&&l.restore(),this._fillStroke(l,n)}},_fillStroke:function(n,o){var l=o.options;l.fill&&(n.globalAlpha=l.fillOpacity,n.fillStyle=l.fillColor||l.color,n.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(n.setLineDash&&n.setLineDash(o.options&&o.options._dashArray||[]),n.globalAlpha=l.opacity,n.lineWidth=l.weight,n.strokeStyle=l.color,n.lineCap=l.lineCap,n.lineJoin=l.lineJoin,n.stroke())},_onClick:function(n){for(var o=this._map.mouseEventToLayerPoint(n),l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(o)&&(!(n.type==="click"||n.type!=="preclick")||!this._map._draggableMoved(l))&&(h=l);h&&(Xr(n),this._fireEvent([h],n))},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,o)}},_handleMouseOut:function(n){var o=this._hoveredLayer;o&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([o],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,o){if(!this._mouseHoverThrottled){for(var l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(o)&&(h=l);h!==this._hoveredLayer&&(this._handleMouseOut(n),h&&(tt(this._container,"leaflet-interactive"),this._fireEvent([h],n,"mouseover"),this._hoveredLayer=h)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],n),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,o,l){this._map._fireDOMEvent(o,l||o.type,n)},_bringToFront:function(n){var o=n._order;if(!!o){var l=o.next,h=o.prev;if(l)l.prev=h;else return;h?h.next=l:l&&(this._drawFirst=l),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(n)}},_bringToBack:function(n){var o=n._order;if(!!o){var l=o.next,h=o.prev;if(h)h.next=l;else return;l?l.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(n)}}});function Yc(n){return wc?new Kc(n):null}var fs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),hp={_initContainer:function(){this._container=dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ze.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var o=n._container=fs("shape");tt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",n._path=fs("path"),o.appendChild(n._path),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){var o=n._container;this._container.appendChild(o),n.options.interactive&&n.addInteractiveTarget(o)},_removePath:function(n){var o=n._container;Rt(o),n.removeInteractiveTarget(o),delete this._layers[f(n)]},_updateStyle:function(n){var o=n._stroke,l=n._fill,h=n.options,d=n._container;d.stroked=!!h.stroke,d.filled=!!h.fill,h.stroke?(o||(o=n._stroke=fs("stroke")),d.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=F(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(d.removeChild(o),n._stroke=null),h.fill?(l||(l=n._fill=fs("fill")),d.appendChild(l),l.color=h.fillColor||h.color,l.opacity=h.fillOpacity):l&&(d.removeChild(l),n._fill=null)},_updateCircle:function(n){var o=n._point.round(),l=Math.round(n._radius),h=Math.round(n._radiusY||l);this._setPath(n,n._empty()?"M0 0":"AL "+o.x+","+o.y+" "+l+","+h+" 0,"+65535*360)},_setPath:function(n,o){n._path.v=o},_bringToFront:function(n){pi(n._container)},_bringToBack:function(n){mi(n._container)}},yo=eo?fs:E,_s=ze.extend({getEvents:function(){var n=ze.prototype.getEvents.call(this);return n.zoomstart=this._onZoomStart,n},_initContainer:function(){this._container=yo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rt(this._container),Ht(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ze.prototype._update.call(this);var n=this._bounds,o=n.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,l.setAttribute("width",o.x),l.setAttribute("height",o.y)),Wt(l,n.min),l.setAttribute("viewBox",[n.min.x,n.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(n){var o=n._path=yo("path");n.options.className&&tt(o,n.options.className),n.options.interactive&&tt(o,"leaflet-interactive"),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Rt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[f(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var o=n._path,l=n.options;!o||(l.stroke?(o.setAttribute("stroke",l.color),o.setAttribute("stroke-opacity",l.opacity),o.setAttribute("stroke-width",l.weight),o.setAttribute("stroke-linecap",l.lineCap),o.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?o.setAttribute("stroke-dasharray",l.dashArray):o.removeAttribute("stroke-dasharray"),l.dashOffset?o.setAttribute("stroke-dashoffset",l.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),l.fill?(o.setAttribute("fill",l.fillColor||l.color),o.setAttribute("fill-opacity",l.fillOpacity),o.setAttribute("fill-rule",l.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(n,o){this._setPath(n,S(n._parts,o))},_updateCircle:function(n){var o=n._point,l=Math.max(Math.round(n._radius),1),h=Math.max(Math.round(n._radiusY),1)||l,d="a"+l+","+h+" 0 1,0 ",p=n._empty()?"M0 0":"M"+(o.x-l)+","+o.y+d+l*2+",0 "+d+-l*2+",0 ";this._setPath(n,p)},_setPath:function(n,o){n._path.setAttribute("d",o)},_bringToFront:function(n){pi(n._path)},_bringToBack:function(n){mi(n._path)}});eo&&_s.include(hp);function Qc(n){return to||eo?new _s(n):null}ht.include({getRenderer:function(n){var o=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var o=this._paneRenderers[n];return o===void 0&&(o=this._createRenderer({pane:n}),this._paneRenderers[n]=o),o},_createRenderer:function(n){return this.options.preferCanvas&&Yc(n)||Qc(n)}});var Xc=wi.extend({initialize:function(n,o){wi.prototype.initialize.call(this,this._boundsToLatLngs(n),o)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=zt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function up(n,o){return new Xc(n,o)}_s.create=yo,_s.pointsToPath=S,nn.geometryToLayer=aa,nn.coordsToLatLng=la,nn.coordsToLatLngs=po,nn.latLngToCoords=ca,nn.latLngsToCoords=mo,nn.getFeature=bi,nn.asFeature=go,ht.mergeOptions({boxZoom:!0});var Jc=Fe.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){rt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ht(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),os(),Zr(),this._startPoint=this._map.mouseEventToContainerPoint(n),rt(document,{contextmenu:Je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=dt("div","leaflet-zoom-box",this._container),tt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var o=new vt(this._point,this._startPoint),l=o.getSize();Wt(this._box,o.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Rt(this._box),Dt(this._container,"leaflet-crosshair")),rs(),$r(),Ht(document,{contextmenu:Je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var o=new Nt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(n){n.keyCode===27&&this._finish()}});ht.addInitHook("addHandler","boxZoom",Jc),ht.mergeOptions({doubleClickZoom:!0});var th=Fe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var o=this._map,l=o.getZoom(),h=o.options.zoomDelta,d=n.originalEvent.shiftKey?l-h:l+h;o.options.doubleClickZoom==="center"?o.setZoom(d):o.setZoomAround(n.containerPoint,d)}});ht.addInitHook("addHandler","doubleClickZoom",th),ht.mergeOptions({dragging:!0,inertia:!$,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var eh=Fe.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new zn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}tt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Dt(this._map._container,"leaflet-grab"),Dt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=zt(this._map.options.maxBounds);this._offsetLimit=Gt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var o=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(o),this._prunePositions(o)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,o){return n-(n-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;n.x<o.min.x&&(n.x=this._viscousLimit(n.x,o.min.x)),n.y<o.min.y&&(n.y=this._viscousLimit(n.y,o.min.y)),n.x>o.max.x&&(n.x=this._viscousLimit(n.x,o.max.x)),n.y>o.max.y&&(n.y=this._viscousLimit(n.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,o=Math.round(n/2),l=this._initialWorldOffset,h=this._draggable._newPos.x,d=(h-o+l)%n+o-l,p=(h+o+l)%n-o-l,y=Math.abs(d+l)<Math.abs(p+l)?d:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=y},_onDragEnd:function(n){var o=this._map,l=o.options,h=!l.inertia||this._times.length<2;if(o.fire("dragend",n),h)o.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,y=l.easeLinearity,C=d.multiplyBy(y/p),x=C.distanceTo([0,0]),P=Math.min(l.inertiaMaxSpeed,x),z=C.multiplyBy(P/x),q=P/(l.inertiaDeceleration*y),ft=z.multiplyBy(-q/2).round();!ft.x&&!ft.y?o.fire("moveend"):(ft=o._limitOffset(ft,o.options.maxBounds),gt(function(){o.panBy(ft,{duration:q,easeLinearity:y,noMoveStart:!0,animate:!0})}))}}});ht.addInitHook("addHandler","dragging",eh),ht.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nh=Fe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),rt(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ht(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,o=document.documentElement,l=n.scrollTop||o.scrollTop,h=n.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var o=this._panKeys={},l=this.keyCodes,h,d;for(h=0,d=l.left.length;h<d;h++)o[l.left[h]]=[-1*n,0];for(h=0,d=l.right.length;h<d;h++)o[l.right[h]]=[n,0];for(h=0,d=l.down.length;h<d;h++)o[l.down[h]]=[0,n];for(h=0,d=l.up.length;h<d;h++)o[l.up[h]]=[0,-1*n]},_setZoomDelta:function(n){var o=this._zoomKeys={},l=this.keyCodes,h,d;for(h=0,d=l.zoomIn.length;h<d;h++)o[l.zoomIn[h]]=n;for(h=0,d=l.zoomOut.length;h<d;h++)o[l.zoomOut[h]]=-n},_addHooks:function(){rt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ht(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=n.keyCode,l=this._map,h;if(o in this._panKeys)(!l._panAnim||!l._panAnim._inProgress)&&(h=this._panKeys[o],n.shiftKey&&(h=st(h).multiplyBy(3)),l.panBy(h),l.options.maxBounds&&l.panInsideBounds(l.options.maxBounds));else if(o in this._zoomKeys)l.setZoom(l.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Je(n)}}});ht.addInitHook("addHandler","keyboard",nh),ht.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ih=Fe.extend({addHooks:function(){rt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ht(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var o=Sc(n),l=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var h=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),h),Je(n)},_performZoom:function(){var n=this._map,o=n.getZoom(),l=this._map.options.zoomSnap||0;n._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,p=l?Math.ceil(d/l)*l:d,y=n._limitZoom(o+(this._delta>0?p:-p))-o;this._delta=0,this._startTime=null,y&&(n.options.scrollWheelZoom==="center"?n.setZoom(o+y):n.setZoomAround(this._lastMousePos,o+y))}});ht.addInitHook("addHandler","scrollWheelZoom",ih),ht.mergeOptions({tap:!0,tapTolerance:15});var sh=Fe.extend({addHooks:function(){rt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ht(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(!!n.touches){if(ye(n),this._fireClick=!0,n.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var o=n.touches[0],l=o.target;this._startPos=this._newPos=new W(o.clientX,o.clientY),l.tagName&&l.tagName.toLowerCase()==="a"&&tt(l,"leaflet-active"),this._holdTimeout=setTimeout(c(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3),this._simulateEvent("mousedown",o),rt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(n){if(clearTimeout(this._holdTimeout),Ht(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&n&&n.changedTouches){var o=n.changedTouches[0],l=o.target;l&&l.tagName&&l.tagName.toLowerCase()==="a"&&Dt(l,"leaflet-active"),this._simulateEvent("mouseup",o),this._isTapValid()&&this._simulateEvent("click",o)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(n){var o=n.touches[0];this._newPos=new W(o.clientX,o.clientY),this._simulateEvent("mousemove",o)},_simulateEvent:function(n,o){var l=document.createEvent("MouseEvents");l._simulated=!0,o.target._simulatedClick=!0,l.initMouseEvent(n,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(l)}});De&&(!Oe||ut)&&ht.addInitHook("addHandler","tap",sh),ht.mergeOptions({touchZoom:De&&!$,bounceAtZoomLimits:!0});var oh=Fe.extend({addHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),rt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),Ht(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var o=this._map;if(!(!n.touches||n.touches.length!==2||o._animatingZoom||this._zooming)){var l=o.mouseEventToContainerPoint(n.touches[0]),h=o.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(l.add(h)._divideBy(2))),this._startDist=l.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),rt(document,"touchmove",this._onTouchMove,this),rt(document,"touchend",this._onTouchEnd,this),ye(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var o=this._map,l=o.mouseEventToContainerPoint(n.touches[0]),h=o.mouseEventToContainerPoint(n.touches[1]),d=l.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(d,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&d<1||this._zoom>o.getMaxZoom()&&d>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var p=l._add(h)._divideBy(2)._subtract(this._centerPoint);if(d===1&&p.x===0&&p.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Pt(this._animRequest);var y=c(o._move,o,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=gt(y,this,!0),ye(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Pt(this._animRequest),Ht(document,"touchmove",this._onTouchMove,this),Ht(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ht.addInitHook("addHandler","touchZoom",oh),ht.BoxZoom=Jc,ht.DoubleClickZoom=th,ht.Drag=eh,ht.Keyboard=nh,ht.ScrollWheelZoom=ih,ht.Tap=sh,ht.TouchZoom=oh,i.version=s,i.Control=Te,i.control=cs,i.Browser=v_,i.Evented=bt,i.Mixin=B_,i.Util=gn,i.Class=me,i.Handler=Fe,i.extend=r,i.bind=c,i.stamp=f,i.setOptions=O,i.DomEvent=A_,i.DomUtil=L_,i.PosAnimation=Lc,i.Draggable=zn,i.LineUtil=U_,i.PolyUtil=Z_,i.Point=W,i.point=st,i.Bounds=vt,i.bounds=Gt,i.Transformation=Dn,i.transformation=Ye,i.Projection=$_,i.LatLng=yt,i.latLng=At,i.LatLngBounds=Nt,i.latLngBounds=zt,i.CRS=$t,i.GeoJSON=nn,i.geoJSON=Zc,i.geoJson=ep,i.Layer=Pe,i.LayerGroup=gi,i.layerGroup=q_,i.FeatureGroup=vi,i.featureGroup=G_,i.ImageOverlay=vo,i.imageOverlay=np,i.VideoOverlay=$c,i.videoOverlay=ip,i.SVGOverlay=Vc,i.svgOverlay=sp,i.DivOverlay=sn,i.Popup=Ci,i.popup=op,i.Tooltip=xi,i.tooltip=rp,i.Icon=yi,i.icon=K_,i.DivIcon=jc,i.divIcon=ap,i.Marker=fo,i.marker=Y_,i.TileLayer=Ei,i.tileLayer=qc,i.GridLayer=ds,i.gridLayer=lp,i.SVG=_s,i.svg=Qc,i.Renderer=ze,i.Canvas=Kc,i.canvas=Yc,i.Path=bn,i.CircleMarker=_o,i.circleMarker=Q_,i.Circle=ra,i.circle=X_,i.Polyline=en,i.polyline=J_,i.Polygon=wi,i.polygon=tp,i.Rectangle=Xc,i.rectangle=up,i.Map=ht,i.map=M_;var dp=window.L;i.noConflict=function(){return window.L=dp,this},window.L=i})})(Za,Za.exports);var rn=Za.exports;const sv={class:"row me-auto"},ov=H("div",{class:"col-8 mt-1 ps-1"},[H("div",{id:"map"})],-1),rv={class:"col-4 ps-0 pe-2"},av=H("div",{class:"row offset-3 my-2 ps-0"},"Adding SanBau Data",-1),lv={class:"row align-items-center mb-1"},cv=H("div",{class:"col-3 ps-2"},"Nickname",-1),hv={class:"row align-items-center mb-1"},uv=H("div",{class:"col-3 ps-2"},"Plate",-1),dv=H("option",{value:"human"},"Human",-1),fv=H("option",{value:"car"},"Car",-1),_v=H("option",{value:"motor"},"Motorcycle",-1),pv=H("option",{value:"truck"},"Truck",-1),mv=[dv,fv,_v,pv],gv={class:"row align-items-center mb-1"},vv=H("div",{class:"col-3 ps-2"},"Date/Time",-1),yv={class:"row align-items-center mb-1"},wv=H("div",{class:"col-3 ps-2"},"Behavior",-1),bv={class:"row align-items-center mb-1"},Cv=H("div",{class:"col-3 ps-2"},"Address",-1),xv={class:"row align-items-center mb-1"},Ev=H("div",{class:"col-3 ps-2"},"Lat, Lng",-1),Tv=H("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-geo-alt",viewBox:"0 0 16 16"},[H("path",{d:"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"}),H("path",{d:"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})],-1),Pv=[Tv],Iv={class:"row align-items-center"},Sv=H("div",{class:"col-3 ps-2"},"appendix",-1),Lv=H("img",{class:"w-100",src:"https://s.imgur.com/images/favicon.png"},null,-1),kv=[Lv],Av={setup(e){let t,i,s,r,a=rn.marker(),c=cn({type:"car"}),u=7;function f(){t.setView([i,s]),c.value.latlng=`${i.toFixed(u)}, ${s.toFixed(u)}`,t.removeLayer(a),rn.marker([i,s]).addTo(t).bindPopup("you're here").openPopup()}function _(){window.open("https://imgur.com/upload")}function g(){w()}function m(){c.value.link!=""&&c.value.link!=null&&confirm("open link in new window?")&&window.open(c.value.link)}function w(){c.value=[],c.value.type="car",t.removeLayer(a)}function T(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(j=>{i=j.coords.latitude,s=j.coords.longitude,t=rn.map("map",{center:[i,s],zoom:15,attributionControl:!0,zoomControl:!0}),rn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(t),rn.marker([i,s]).addTo(t).bindPopup("you're here").openPopup(),t.on("click",A)})}function A(j){r=j;let Y=c.value.type,F=rn.icon({iconUrl:`./pic/${Y}.png`,iconSize:[40,40],popupAnchor:[0,-10]}),X=7;t.removeLayer(a),a=rn.marker(j.latlng,{icon:F}).addTo(t).bindPopup("SamBao is here").openPopup(),c.value.latlng=`${j.latlng.lat.toFixed(X)}, ${j.latlng.lng.toFixed(X)}`}function O(){let j=c.value.type,Y=rn.icon({iconUrl:`./pic/${j}.png`,iconSize:[40,40],popupAnchor:[0,-10]});t.removeLayer(a),a=rn.marker(r.latlng,{icon:Y}).addTo(t).bindPopup("SamBao is here").openPopup()}function Z(){navigator.clipboard.readText().then(async j=>{try{j.length>1&&((await fetch(j,{mode:"no-cors"})).status!=404?c.value.link=j:c.value.link="")}catch{c.value.link=""}})}return Gi(()=>{T(),Ln.value.show_map&&window.addEventListener("focus",Z)}),(j,Y)=>be((Ue(),ln("div",sv,[ov,H("div",rv,[av,H("div",lv,[cv,be(H("input",{class:"col rounded border py-2 bg-dark text-light",type:"text",placeholder:"300\u54E5/\u796D\u592E\u4E42/\u99AC\u7DAD\u62C9/\u97D3\u7E3D\u6A5F","onUpdate:modelValue":Y[0]||(Y[0]=F=>lt(c).nickname=F),maxlength:"20"},null,512),[[We,lt(c).nickname]])]),H("div",hv,[uv,be(H("input",{class:"col rounded border py-2 bg-dark text-light me-1",type:"text",placeholder:"ABC-1234","onUpdate:modelValue":Y[1]||(Y[1]=F=>lt(c).plate=F)},null,512),[[We,lt(c).plate]]),be(H("select",{class:"col-4 py-2 rounded border bg-dark text-light","onUpdate:modelValue":Y[2]||(Y[2]=F=>lt(c).type=F),onChange:O},mv,544),[[Gg,lt(c).type]])]),H("div",gv,[vv,be(H("input",{class:"col border rounded py-2 me-1 bg-dark text-light","onUpdate:modelValue":Y[3]||(Y[3]=F=>lt(c).date=F),type:"date"},null,512),[[We,lt(c).date]]),be(H("input",{class:"col-4 border rounded py-2 bg-dark text-light","onUpdate:modelValue":Y[4]||(Y[4]=F=>lt(c).time=F),type:"time"},null,512),[[We,lt(c).time]])]),H("div",yv,[wv,be(H("textarea",{class:"col py-2 border rounded bg-dark text-light",type:"text",placeholder:"How SanBau?",maxlength:"100","onUpdate:modelValue":Y[5]||(Y[5]=F=>lt(c).behavior=F)},null,512),[[We,lt(c).behavior]])]),H("div",bv,[Cv,be(H("textarea",{class:"col py-2 border rounded bg-dark text-light",type:"text",placeholder:"Where? (option)",maxlength:"100","onUpdate:modelValue":Y[6]||(Y[6]=F=>lt(c).address=F)},null,512),[[We,lt(c).address]])]),H("div",xv,[Ev,be(H("input",{class:"col border rounded bg-dark text-light py-2",type:"text",placeholder:"Location","onUpdate:modelValue":Y[7]||(Y[7]=F=>lt(c).latlng=F),maxlength:"30"},null,512),[[We,lt(c).latlng]]),H("div",{class:"badge col-2 text-warning",type:"button",onClick:f},Pv)]),H("div",Iv,[Sv,be(H("input",{class:"col border rounded py-2 bg-dark text-secondary",type:"url",placeholder:"upload image/video","onUpdate:modelValue":Y[8]||(Y[8]=F=>lt(c).link=F),onClick:m},null,512),[[We,lt(c).link]]),H("div",{class:"col-2",onClick:_,type:"button"},kv)]),H("div",{class:"row mt-2 justify-content-center"},[H("div",{class:"col-3 badge fs-6 border text-success me-1 ms-1 py-2",type:"button",onClick:g},"Add"),H("div",{class:"col-3 badge fs-6 border text-danger py-2",type:"button",onClick:w},"Clear")])])],512)),[[Kg,lt(Ln).show_map==!0]])}};const Mv={key:0,class:"container-fluid px-3 hate"},Nv=fg('<div class="fs-1 my-1"> Author: <span class="text-warning">OrzOGC</span></div><div class="fs-1 my-1">\u6D3B\u7684\u7CBE\u5F69,\u4FEE\u7684\u75DB\u5FEB,Ford</div><div class="fs-1 my-1">\u9055\u898F\u9B54\u4EBA\u90FD\u53BB\u6B7B\u4E00\u6B7B\u5566\u5E79</div><div class="fs-1 my-1">\u81C9\u76AE\u90FD\u6BD4\u6211\u963F\u5B24\u7684\u8173\u5E95\u76AE\u9084\u539A\u5566\u5E79</div><div class="fs-1 my-1">\u4E09\u5BF6\u90FD\u4ED6\u5ABD\u7684\u53BB\u5403\u5C4E\u5566\u5E79</div><div class="fs-1 my-1">\u9F9C\u4ED4\u958B\u90A3\u9EBC\u6162\u9084\u4E0D\u6EFE\u53BB\u9A0E\u52C1\u6230\u5566\u5E79</div><div class="fs-1 my-2">\u4ED6\u5ABD\u7684\u5357\u90E8\u9109\u4E0B\u5F70\u5316\u4EBA\u5C31\u662F\u6C92\u6C34\u6E96\u5566\u5E79</div>',7),Rv={setup(e){let t=cn(["","","",""]),i=0;const s=3e3;function r(a){t.value[a]==""?t.value[a]="fuck-top":t.value[a]=""}return Gi(()=>{setInterval(()=>{Ln.value.show_about==!0&&(i=Math.round(Math.random()*3),r(i))},s)}),(a,c)=>lt(Ln).show_about==!0?(Ue(),ln("div",Mv,[Nv,H("div",{class:$e(["text-black lh-1 fuck fuck-1",lt(t)[0]])},"\u5E79",2),H("div",{class:$e(["text-black lh-1 fuck fuck-2",lt(t)[1]])},"\u6041",2),H("div",{class:$e(["text-black lh-1 fuck fuck-3",lt(t)[2]])},"\u5A18",2),H("div",{class:$e(["text-black lh-1 fuck fuck-4",lt(t)[3]])},"\u5566",2)])):xs("",!0)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R=function(e,t){if(!e)throw Ki(t)},Ki=function(e){return new Error("Firebase Database ("+Md.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=r&63|128):(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=r&63|128)}return t},Ov=function(e){const t=[];let i=0,s=0;for(;i<e.length;){const r=e[i++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[i++];t[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=e[i++],c=e[i++],u=e[i++],f=((r&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;t[s++]=String.fromCharCode(55296+(f>>10)),t[s++]=String.fromCharCode(56320+(f&1023))}else{const a=e[i++],c=e[i++];t[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return t.join("")},wr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const a=e[r],c=r+1<e.length,u=c?e[r+1]:0,f=r+2<e.length,_=f?e[r+2]:0,g=a>>2,m=(a&3)<<4|u>>4;let w=(u&15)<<2|_>>6,T=_&63;f||(T=64,c||(w=64)),s.push(i[g],i[m],i[w],i[T])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Nd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Ov(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const a=i[e.charAt(r++)],u=r<e.length?i[e.charAt(r)]:0;++r;const _=r<e.length?i[e.charAt(r)]:64;++r;const m=r<e.length?i[e.charAt(r)]:64;if(++r,a==null||u==null||_==null||m==null)throw Error();const w=a<<2|u>>4;if(s.push(w),_!==64){const T=u<<4&240|_>>2;if(s.push(T),m!==64){const A=_<<6&192|m;s.push(A)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Rd=function(e){const t=Nd(e);return wr.encodeByteArray(t,!0)},Od=function(e){return Rd(e).replace(/\./g,"")},Fh=function(e){try{return wr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(e){return Dd(void 0,e)}function Dd(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!Bv(i)||(e[i]=Dd(e[i],t[i]));return e}function Bv(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bd(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fv())}function zv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fd(){return Md.NODE_ADMIN===!0}function Ll(){return typeof indexedDB=="object"}function Hv(){return new Promise((e,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),i||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{i=!1},r.onerror=()=>{var a;t(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(i){t(i)}})}function Wv(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="FirebaseError";class kl extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=Uv,Object.setPrototypeOf(this,kl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},r=`${this.service}/${t}`,a=this.errors[t],c=a?Zv(a,s):"Error",u=`${this.serviceName}: ${c} (${r}).`;return new kl(r,u,s)}}function Zv(e,t){return e.replace($v,(i,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const $v=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e){return JSON.parse(e)}function jt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=function(e){let t={},i={},s={},r="";try{const a=e.split(".");t=Bs(Fh(a[0])||""),i=Bs(Fh(a[1])||""),r=a[2],s=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:s,signature:r}},Vv=function(e){const t=zd(e),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},jv=function(e){const t=zd(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function zh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function jo(e,t,i){const s={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=t.call(i,e[r],r,e));return s}function $a(e,t){if(e===t)return!0;const i=Object.keys(e),s=Object.keys(t);for(const r of i){if(!s.includes(r))return!1;const a=e[r],c=t[r];if(Hh(a)&&Hh(c)){if(!$a(a,c))return!1}else if(a!==c)return!1}for(const r of s)if(!i.includes(r))return!1;return!0}function Hh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(e){const t=[];for(const[i,s]of Object.entries(e))Array.isArray(s)?s.forEach(r=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const s=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)s[m]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let m=0;m<16;m++)s[m]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let m=16;m<80;m++){const w=s[m-3]^s[m-8]^s[m-14]^s[m-16];s[m]=(w<<1|w>>>31)&4294967295}let r=this.chain_[0],a=this.chain_[1],c=this.chain_[2],u=this.chain_[3],f=this.chain_[4],_,g;for(let m=0;m<80;m++){m<40?m<20?(_=u^a&(c^u),g=1518500249):(_=a^c^u,g=1859775393):m<60?(_=a&c|u&(a|c),g=2400959708):(_=a^c^u,g=3395469782);const w=(r<<5|r>>>27)+_+f+g+s[m]&4294967295;f=u,u=c,c=(a<<30|a>>>2)&4294967295,a=r,r=w}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const s=i-this.blockSize;let r=0;const a=this.buf_;let c=this.inbuf_;for(;r<i;){if(c===0)for(;r<=s;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<i;)if(a[c]=t.charCodeAt(r),++c,++r,c===this.blockSize){this.compress_(a),c=0;break}}else for(;r<i;)if(a[c]=t[r],++c,++r,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=i&255,i/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let a=24;a>=0;a-=8)t[s]=this.chain_[r]>>a&255,++s;return t}}function br(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);if(r>=55296&&r<=56319){const a=r-55296;s++,R(s<e.length,"Surrogate pair missing trail surrogate.");const c=e.charCodeAt(s)-56320;r=65536+(a<<10)+c}r<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=r&63|128):r<65536?(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=r&63|128):(t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=r&63|128)}return t},Cr=function(e){let t=0;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=1e3,Qv=2,Xv=4*60*60*1e3,Jv=.5;function ty(e,t=Yv,i=Qv){const s=t*Math.pow(i,e),r=Math.round(Jv*s*(Math.random()-.5)*2);return Math.min(Xv,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e,t){return new Promise((i,s)=>{e.onsuccess=r=>{i(r.target.result)},e.onerror=r=>{var a;s(`${t}: ${(a=r.target.error)===null||a===void 0?void 0:a.message}`)}})}class Wh{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,i){return new Hd(this._db.transaction.call(this._db,t,i))}createObjectStore(t,i){return new Wd(this._db.createObjectStore(t,i))}close(){this._db.close()}}class Hd{constructor(t){this._transaction=t,this.complete=new Promise((i,s)=>{this._transaction.oncomplete=function(){i()},this._transaction.onerror=()=>{s(this._transaction.error)},this._transaction.onabort=()=>{s(this._transaction.error)}})}objectStore(t){return new Wd(this._transaction.objectStore(t))}}class Wd{constructor(t){this._store=t}index(t){return new Uh(this._store.index(t))}createIndex(t,i,s){return new Uh(this._store.createIndex(t,i,s))}get(t){const i=this._store.get(t);return Es(i,"Error reading from IndexedDB")}put(t,i){const s=this._store.put(t,i);return Es(s,"Error writing to IndexedDB")}delete(t){const i=this._store.delete(t);return Es(i,"Error deleting from IndexedDB")}clear(){const t=this._store.clear();return Es(t,"Error clearing IndexedDB object store")}}class Uh{constructor(t){this._index=t}get(t){const i=this._index.get(t);return Es(i,"Error reading from IndexedDB")}}function ey(e,t,i){return new Promise((s,r)=>{try{const a=indexedDB.open(e,t);a.onsuccess=c=>{s(new Wh(c.target.result))},a.onerror=c=>{var u;r(`Error opening indexedDB: ${(u=c.target.error)===null||u===void 0?void 0:u.message}`)},a.onupgradeneeded=c=>{i(new Wh(a.result),c.oldVersion,c.newVersion,new Hd(a.transaction))}}catch(a){r(`Error opening indexedDB: ${a.message}`)}})}class ii{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new _n;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:i});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(sy(t))try{this.getOrInitializeService({instanceIdentifier:Vn})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(i);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(t=Vn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vn){return this.instances.has(t)}getOptions(t=Vn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);s===u&&c.resolve(r)}return r}onInit(t,i){var s;const r=this.normalizeInstanceIdentifier(i),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&t(c,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(!!s)for(const r of s)try{r(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iy(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Vn){return this.component?this.component.multipleInstances?t:Vn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iy(e){return e===Vn?void 0:e}function sy(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new ny(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Lt||(Lt={}));const ry={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},ay=Lt.INFO,ly={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},cy=(e,t,...i)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),r=ly[t];if(r)console[r](`[${s}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ml{constructor(t){this.name=t,this._logLevel=ay,this._logHandler=cy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ry[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(uy(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function uy(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Va="@firebase/app",Zh="0.7.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new Ml("@firebase/app"),dy="@firebase/app-compat",fy="@firebase/analytics-compat",_y="@firebase/analytics",py="@firebase/app-check-compat",my="@firebase/app-check",gy="@firebase/auth",vy="@firebase/auth-compat",yy="@firebase/database",wy="@firebase/database-compat",by="@firebase/functions",Cy="@firebase/functions-compat",xy="@firebase/installations",Ey="@firebase/installations-compat",Ty="@firebase/messaging",Py="@firebase/messaging-compat",Iy="@firebase/performance",Sy="@firebase/performance-compat",Ly="@firebase/remote-config",ky="@firebase/remote-config-compat",Ay="@firebase/storage",My="@firebase/storage-compat",Ny="@firebase/firestore",Ry="@firebase/firestore-compat",Oy="firebase",Dy="9.6.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="[DEFAULT]",By={[Va]:"fire-core",[dy]:"fire-core-compat",[_y]:"fire-analytics",[fy]:"fire-analytics-compat",[my]:"fire-app-check",[py]:"fire-app-check-compat",[gy]:"fire-auth",[vy]:"fire-auth-compat",[yy]:"fire-rtdb",[wy]:"fire-rtdb-compat",[by]:"fire-fn",[Cy]:"fire-fn-compat",[xy]:"fire-iid",[Ey]:"fire-iid-compat",[Ty]:"fire-fcm",[Py]:"fire-fcm-compat",[Iy]:"fire-perf",[Sy]:"fire-perf-compat",[Ly]:"fire-rc",[ky]:"fire-rc-compat",[Ay]:"fire-gcs",[My]:"fire-gcs-compat",[Ny]:"fire-fst",[Ry]:"fire-fst-compat","fire-js":"fire-js",[Oy]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new Map,ja=new Map;function Fy(e,t){try{e.container.addComponent(t)}catch(i){Nl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function Fi(e){const t=e.name;if(ja.has(t))return Nl.debug(`There were multiple attempts to register component ${t}.`),!1;ja.set(t,e);for(const i of qo.values())Fy(i,e);return!0}function Rl(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},si=new Al("app","Firebase",zy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(t,i,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=Dy;function Uy(e,t={}){typeof t!="object"&&(t={name:t});const i=Object.assign({name:Ud,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw si.create("bad-app-name",{appName:String(s)});const r=qo.get(s);if(r){if($a(e,r.options)&&$a(i,r.config))return r;throw si.create("duplicate-app",{appName:s})}const a=new oy(s);for(const u of ja.values())a.addComponent(u);const c=new Hy(e,i,a);return qo.set(s,c),c}function Zd(e=Ud){const t=qo.get(e);if(!t)throw si.create("no-app",{appName:e});return t}function ei(e,t,i){var s;let r=(s=By[e])!==null&&s!==void 0?s:e;i&&(r+=`-${i}`);const a=r.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const u=[`Unable to register library "${r}" with version "${t}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Nl.warn(u.join(" "));return}Fi(new ii(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="firebase-heartbeat-database",$y=1,Fs="firebase-heartbeat-store";let ya=null;function $d(){return ya||(ya=ey(Zy,$y,(e,t)=>{switch(t){case 0:e.createObjectStore(Fs)}}).catch(e=>{throw si.create("storage-open",{originalErrorMessage:e.message})})),ya}async function Vy(e){try{return(await $d()).transaction(Fs).objectStore(Fs).get(Vd(e))}catch(t){throw si.create("storage-get",{originalErrorMessage:t.message})}}async function $h(e,t){try{const s=(await $d()).transaction(Fs,"readwrite");return await s.objectStore(Fs).put(t,Vd(e)),s.complete}catch(i){throw si.create("storage-set",{originalErrorMessage:i.message})}}function Vd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=1024,qy=30*24*60*60*1e3;class Gy{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Yy(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vh();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const a=new Date(r.date).valueOf();return Date.now()-a<=qy}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Vh(),{heartbeatsToSend:i,unsentEntries:s}=Ky(this._heartbeatsCache.heartbeats),r=Od(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Vh(){return new Date().toISOString().substring(0,10)}function Ky(e,t=jy){const i=[];let s=e.slice();for(const r of e){const a=i.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),jh(i)>t){a.dates.pop();break}}else if(i.push({agent:r.agent,dates:[r.date]}),jh(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class Yy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ll()?Hv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Vy(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const r=await this.read();return $h(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const r=await this.read();return $h(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function jh(e){return Od(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(e){Fi(new ii("platform-logger",t=>new hy(t),"PRIVATE")),Fi(new ii("heartbeat",t=>new Gy(t),"PRIVATE")),ei(Va,Zh,e),ei(Va,Zh,"esm2017"),ei("fire-js","")}Qy("");var Xy="firebase",Jy="9.6.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei(Xy,Jy,"app");const qh="@firebase/database",Gh="0.12.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd="";function tw(e){jd=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),jt(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Bs(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return Ge(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=function(e){try{if(typeof window!="undefined"&&typeof window[e]!="undefined"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ew(t)}}catch{}return new nw},Qn=qd("localStorage"),qa=qd("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Ml("@firebase/database"),iw=function(){let e=1;return function(){return e++}}(),Gd=function(e){const t=Kv(e),i=new Gv;i.update(t);const s=i.digest();return wr.encodeByteArray(s)},qs=function(...e){let t="";for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=qs.apply(null,s):typeof s=="object"?t+=jt(s):t+=s,t+=" "}return t};let ni=null,Kh=!0;const sw=function(e,t){R(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Mi.logLevel=Lt.VERBOSE,ni=Mi.log.bind(Mi),t&&qa.set("logging_enabled",!0)):typeof e=="function"?ni=e:(ni=null,qa.remove("logging_enabled"))},Jt=function(...e){if(Kh===!0&&(Kh=!1,ni===null&&qa.get("logging_enabled")===!0&&sw(!0)),ni){const t=qs.apply(null,e);ni(t)}},Gs=function(e){return function(...t){Jt(e,...t)}},Ga=function(...e){const t="FIREBASE INTERNAL ERROR: "+qs(...e);Mi.error(t)},oi=function(...e){const t=`FIREBASE FATAL ERROR: ${qs(...e)}`;throw Mi.error(t),new Error(t)},ae=function(...e){const t="FIREBASE WARNING: "+qs(...e);Mi.warn(t)},ow=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ae("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ol=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},rw=function(e){if(document.readyState==="complete")e();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},zi="[MIN_NAME]",ri="[MAX_NAME]",ci=function(e,t){if(e===t)return 0;if(e===zi||t===ri)return-1;if(t===zi||e===ri)return 1;{const i=Yh(e),s=Yh(t);return i!==null?s!==null?i-s===0?e.length-t.length:i-s:-1:s!==null?1:e<t?-1:1}},aw=function(e,t){return e===t?0:e<t?-1:1},ms=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+jt(t))},Dl=function(e){if(typeof e!="object"||e===null)return jt(e);const t=[];for(const s in e)t.push(s);t.sort();let i="{";for(let s=0;s<t.length;s++)s!==0&&(i+=","),i+=jt(t[s]),i+=":",i+=Dl(e[t[s]]);return i+="}",i},Kd=function(e,t){const i=e.length;if(i<=t)return[e];const s=[];for(let r=0;r<i;r+=t)r+t>i?s.push(e.substring(r,i)):s.push(e.substring(r,r+t));return s};function ee(e,t){for(const i in e)e.hasOwnProperty(i)&&t(i,e[i])}const Yd=function(e){R(!Ol(e),"Invalid JSON number");const t=11,i=52,s=(1<<t-1)-1;let r,a,c,u,f;e===0?(a=0,c=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-s)?(u=Math.min(Math.floor(Math.log(e)/Math.LN2),s),a=u+s,c=Math.round(e*Math.pow(2,i-u)-Math.pow(2,i))):(a=0,c=Math.round(e/Math.pow(2,1-s-i))));const _=[];for(f=i;f;f-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(f=t;f;f-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(r?1:0),_.reverse();const g=_.join("");let m="";for(f=0;f<64;f+=8){let w=parseInt(g.substr(f,8),2).toString(16);w.length===1&&(w="0"+w),m=m+w}return m.toLowerCase()},lw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},cw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function hw(e,t){let i="Unknown Error";e==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?i="Client doesn't have permission to access the desired data.":e==="unavailable"&&(i="The service is unavailable");const s=new Error(e+" at "+t._path.toString()+": "+i);return s.code=e.toUpperCase(),s}const uw=new RegExp("^-?(0*)\\d{1,10}$"),dw=-2147483648,fw=2147483647,Yh=function(e){if(uw.test(e)){const t=Number(e);if(t>=dw&&t<=fw)return t}return null},Qi=function(e){try{e()}catch(t){setTimeout(()=>{const i=t.stack||"";throw ae("Exception was thrown by user callback.",i),t},Math.floor(0))}},_w=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ss=function(e,t){const i=setTimeout(e,t);return typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){ae(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(t,i,s){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(Jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ae(t)}}class Ka{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Ka.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl="5",Qd="v",Xd="s",Jd="r",tf="f",ef=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nf="ls",gw="p",Ya="ac",sf="websocket",of="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(t,i,s,r,a=!1,c="",u=!1){this.secure=i,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Qn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function yw(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function rf(e,t,i){R(typeof t=="string","typeof type must == string"),R(typeof i=="object","typeof params must == object");let s;if(t===sf)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===of)s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);yw(e)&&(i.ns=e.namespace);const r=[];return ee(i,(a,c)=>{r.push(a+"="+c)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.counters_={}}incrementCounter(t,i=1){Ge(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return Dv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa={},ba={};function Fl(e){const t=e.toString();return wa[t]||(wa[t]=new ww),wa[t]}function bw(e,t){const i=e.toString();return ba[i]||(ba[i]=t()),ba[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&Qi(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="start",xw="close",Ew="pLPCommand",Tw="pRTLPCB",af="id",lf="pw",cf="ser",Pw="cb",Iw="seg",Sw="ts",Lw="d",kw="dframe",hf=1870,uf=30,Aw=hf-uf,Mw=25e3,Nw=3e4;class Si{constructor(t,i,s,r,a,c,u){this.connId=t,this.repoInfo=i,this.applicationId=s,this.appCheckToken=r,this.authToken=a,this.transportSessionId=c,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gs(t),this.stats_=Fl(i),this.urlFn=f=>(this.appCheckToken&&(f[Ya]=this.appCheckToken),rf(i,of,f))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new Cw(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Nw)),rw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zl((...a)=>{const[c,u,f,_,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Qh)this.id=u,this.password=f;else if(c===xw)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,u)},()=>{this.onClosed_()},this.urlFn);const s={};s[Qh]="t",s[cf]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Pw]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Qd]=Bl,this.transportSessionId&&(s[Xd]=this.transportSessionId),this.lastSessionId&&(s[nf]=this.lastSessionId),this.applicationId&&(s[gw]=this.applicationId),this.appCheckToken&&(s[Ya]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&ef.test(location.hostname)&&(s[Jd]=tf);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Si.forceAllow_=!0}static forceDisallow(){Si.forceDisallow_=!0}static isAvailable(){return Si.forceAllow_?!0:!Si.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!lw()&&!cw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=jt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Rd(i),r=Kd(s,Aw);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const s={};s[kw]="t",s[af]=t,s[lf]=i,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=jt(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class zl{constructor(t,i,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=iw(),window[Ew+this.uniqueCallbackIdentifier]=t,window[Tw+this.uniqueCallbackIdentifier]=i,this.myIFrame=zl.createIFrame_();let a="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const u=document.domain;a='<script>document.domain="'+u+'";<\/script>'}const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(u){Jt("frame writing exception"),u.stack&&Jt(u.stack),Jt(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Jt("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[af]=this.myID,t[lf]=this.myPW,t[cf]=this.currentSerial;let i=this.urlFn(t),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uf+s.length<=hf;){const c=this.pendingSegs.shift();s=s+"&"+Iw+r+"="+c.seg+"&"+Sw+r+"="+c.ts+"&"+Lw+r+"="+c.d,r++}return i=i+s,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,s){this.pendingSegs.push({seg:t,ts:i,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const s=()=>{this.outstandingRequests.delete(i),this.newRequest_()},r=setTimeout(s,Math.floor(Mw)),a=()=>{clearTimeout(r),s()};this.addTag(t,a)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),i())},s.onerror=()=>{Jt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=16384,Ow=45e3;let Go=null;typeof MozWebSocket!="undefined"?Go=MozWebSocket:typeof WebSocket!="undefined"&&(Go=WebSocket);class Se{constructor(t,i,s,r,a,c,u){this.connId=t,this.applicationId=s,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gs(this.connId),this.stats_=Fl(i),this.connURL=Se.connectionURL_(i,c,u,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,r){const a={};return a[Qd]=Bl,typeof location!="undefined"&&location.hostname&&ef.test(location.hostname)&&(a[Jd]=tf),i&&(a[Xd]=i),s&&(a[nf]=s),r&&(a[Ya]=r),rf(t,sf,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qn.set("previous_websocket_failure",!0);try{if(!Fd()){const s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Go(this.connURL,[],s)}}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Se.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&Go!==null&&!Se.forceDisallow_}static previouslyFailed(){return Qn.isInMemoryStorage||Qn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=Bs(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(R(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=jt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Kd(i,Rw);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ow))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Se.responsesRequiredToBeHealthy=2;Se.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Si,Se]}initTransports_(t){const i=Se&&Se.isAvailable();let s=i&&!Se.previouslyFailed();if(t.webSocketOnly&&(i||ae("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Se];else{const r=this.transports_=[];for(const a of Hl.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=6e4,Bw=5e3,Fw=10*1024,zw=100*1024,Ca="t",Xh="d",Hw="s",Jh="r",Ww="e",tu="o",eu="a",nu="n",iu="p",Uw="h";class Zw{constructor(t,i,s,r,a,c,u,f,_,g){this.id=t,this.repoInfo_=i,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=c,this.onReady_=u,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gs("c:"+this.id+":"),this.transportManager_=new Hl(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,s)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ss(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Fw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Ca in t){const i=t[Ca];i===eu?this.upgradeIfSecondaryHealthy_():i===Jh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===tu&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=ms("t",t),s=ms("d",t);if(i==="c")this.onSecondaryControl_(s);else if(i==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:iu,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:eu,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:nu,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=ms("t",t),s=ms("d",t);i==="c"?this.onControl_(s):i==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=ms(Ca,t);if(Xh in t){const s=t[Xh];if(i===Uw)this.onHandshake_(s);else if(i===nu){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===Hw?this.onConnectionShutdown_(s):i===Jh?this.onReset_(s):i===Ww?Ga("Server Error: "+s):i===tu?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ga("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,s=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Bl!==s&&ae("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,s),Ss(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Dw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ss(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Bw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:iu,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{put(t,i,s,r){}merge(t,i,s,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,s){}onDisconnectMerge(t,i,s){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t){this.allowedEvents_=t,this.listeners_={},R(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,i)}}on(t,i,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:s});const r=this.getInitialEvent(t);r&&i.apply(s,r)}off(t,i,s){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let a=0;a<r.length;a++)if(r[a].callback===i&&(!s||s===r[a].context)){r.splice(a,1);return}}validateEventType_(t){R(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends ff{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Bd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ko}getInitialEvent(t){return R(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=32,ou=768;class Et{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function pt(){return new Et("")}function et(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Nn(e){return e.pieces_.length-e.pieceNum_}function kt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Et(e.pieces_,t)}function Wl(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function $w(e){let t="";for(let i=e.pieceNum_;i<e.pieces_.length;i++)e.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[i])));return t||"/"}function zs(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function _f(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let i=e.pieceNum_;i<e.pieces_.length-1;i++)t.push(e.pieces_[i]);return new Et(t,0)}function Bt(e,t){const i=[];for(let s=e.pieceNum_;s<e.pieces_.length;s++)i.push(e.pieces_[s]);if(t instanceof Et)for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);else{const s=t.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&i.push(s[r])}return new Et(i,0)}function at(e){return e.pieceNum_>=e.pieces_.length}function re(e,t){const i=et(e),s=et(t);if(i===null)return t;if(i===s)return re(kt(e),kt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Vw(e,t){const i=zs(e,0),s=zs(t,0);for(let r=0;r<i.length&&r<s.length;r++){const a=ci(i[r],s[r]);if(a!==0)return a}return i.length===s.length?0:i.length<s.length?-1:1}function Ul(e,t){if(Nn(e)!==Nn(t))return!1;for(let i=e.pieceNum_,s=t.pieceNum_;i<=e.pieces_.length;i++,s++)if(e.pieces_[i]!==t.pieces_[s])return!1;return!0}function Ce(e,t){let i=e.pieceNum_,s=t.pieceNum_;if(Nn(e)>Nn(t))return!1;for(;i<e.pieces_.length;){if(e.pieces_[i]!==t.pieces_[s])return!1;++i,++s}return!0}class jw{constructor(t,i){this.errorPrefix_=i,this.parts_=zs(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Cr(this.parts_[s]);pf(this)}}function qw(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Cr(t),pf(e)}function Gw(e){const t=e.parts_.pop();e.byteLength_-=Cr(t),e.parts_.length>0&&(e.byteLength_-=1)}function pf(e){if(e.byteLength_>ou)throw new Error(e.errorPrefix_+"has a key path longer than "+ou+" bytes ("+e.byteLength_+").");if(e.parts_.length>su)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+su+") or object contains a cycle "+jn(e))}function jn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends ff{constructor(){super(["visible"]);let t,i;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(i="visibilitychange",t="hidden"):typeof document.mozHidden!="undefined"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden!="undefined"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden!="undefined"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Zl}getInitialEvent(t){return R(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=1e3,Kw=60*5*1e3,Yw=3*1e3,ru=30*1e3,Qw=1.3,Xw=3e4,Jw="server_kill",au=3;class dn extends df{constructor(t,i,s,r,a,c,u,f){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=u,this.authOverride_=f,this.id=dn.nextPersistentConnectionId_++,this.log_=Gs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gs,this.maxReconnectDelay_=Kw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!Fd())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zl.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ko.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const r=++this.requestNumber_,a={r,a:t,b:i};this.log_(jt(a)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[r]=s)}get(t){this.initConnection_();const i=new _n,s={p:t._path.toString(),q:t._queryObject},r={action:"g",request:s,onComplete:c=>{const u=c.d;c.s==="ok"?(this.onDataUpdate_(s.p,u,!1,null),i.resolve(u)):i.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const c=this.outstandingGets_[a];c===void 0||r!==c||(delete this.outstandingGets_[a],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+a+" timed out on connection"),i.reject(new Error("Client is offline.")))},Yw),this.connected_&&this.sendGet_(a),i.promise}listen(t,i,s,r){this.initConnection_();const a=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),R(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:i,query:t,tag:s};this.listens.get(c).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);const a={p:s},c="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(c,a,u=>{const f=u.d,_=u.s;dn.warnOnListenWarnings_(f,i),(this.listens.get(s)&&this.listens.get(s).get(r))===t&&(this.log_("listen response",u),_!=="ok"&&this.removeListen_(s,r),t.onComplete&&t.onComplete(_,f))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Ge(t,"w")){const s=Bi(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();ae(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||jv(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ru)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=Vv(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{const a=r.s,c=r.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),R(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,t._queryObject,i)}sendUnlisten_(t,i,s,r){this.log_("Unlisten on "+t+" for "+i);const a={p:t},c="n";r&&(a.q=s,a.t=r),this.sendRequest(c,a)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,r){const a={p:i,d:s};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,c=>{r&&setTimeout(()=>{r(c.s,c.d)},Math.floor(0))})}put(t,i,s,r){this.putInternal("p",t,i,s,r)}merge(t,i,s,r){this.putInternal("m",t,i,s,r)}putInternal(t,i,s,r,a){this.initConnection_();const c={p:i,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:t,request:c,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+jt(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Ga("Unrecognized action received from server: "+jt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Xw&&(this.reconnectDelay_=gs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Qw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+dn.nextConnectionId_++,a=this.lastSessionId;let c=!1,u=null;const f=function(){u?u.close():(c=!0,s())},_=function(m){R(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:f,sendRequest:_};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,w]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);c?Jt("getToken() completed but was canceled"):(Jt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=w&&w.token,u=new Zw(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,s,T=>{ae(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(Jw)},a))}catch(m){this.log_("Failed to get token: "+m),c||(this.repoInfo_.nodeAdmin&&ae(m),f())}}}interrupt(t){Jt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Jt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],zh(this.interruptReasons_)&&(this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;i?s=i.map(a=>Dl(a)).join("$"):s="default";const r=this.removeListen_(t,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,i){const s=new Et(t).toString();let r;if(this.listens.has(s)){const a=this.listens.get(s);r=a.get(i),a.delete(i),a.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(t,i){Jt("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=au&&(this.reconnectDelay_=ru,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Jt("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=au&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+jd.replace(/\./g,"-")]=1,Bd()?t["framework.cordova"]=1:zv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ko.getInstance().currentlyOnline();return zh(this.interruptReasons_)&&t}}dn.nextPersistentConnectionId_=0;dn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new it(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const s=new it(zi,t),r=new it(zi,i);return this.compare(s,r)!==0}minPost(){return it.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So;class mf extends xr{static get __EMPTY_NODE(){return So}static set __EMPTY_NODE(t){So=t}compare(t,i){return ci(t.name,i.name)}isDefinedOn(t){throw Ki("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return it.MIN}maxPost(){return new it(ri,So)}makePost(t,i){return R(typeof t=="string","KeyIndex indexValue must always be a string."),new it(t,So)}toString(){return".key"}}const Ni=new mf;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t,i,s,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=i?s(t.key,i):1,r&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Yt{constructor(t,i,s,r,a){this.key=t,this.value=i,this.color=s!=null?s:Yt.RED,this.left=r!=null?r:ue.EMPTY_NODE,this.right=a!=null?a:ue.EMPTY_NODE}copy(t,i,s,r,a){return new Yt(t!=null?t:this.key,i!=null?i:this.value,s!=null?s:this.color,r!=null?r:this.left,a!=null?a:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let r=this;const a=s(t,r.key);return a<0?r=r.copy(null,null,null,r.left.insert(t,i,s),null):a===0?r=r.copy(null,i,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ue.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,r;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(t,s.key)===0){if(s.right.isEmpty())return ue.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Yt.RED=!0;Yt.BLACK=!1;class tb{copy(t,i,s,r,a){return this}insert(t,i,s){return new Yt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ue{constructor(t,i=ue.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new ue(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,Yt.BLACK,null,null))}remove(t){return new ue(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Yt.BLACK,null,null))}get(t){let i,s=this.root_;for(;!s.isEmpty();){if(i=this.comparator_(t,s.key),i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}getPredecessorKey(t){let i,s=this.root_,r=null;for(;!s.isEmpty();)if(i=this.comparator_(t,s.key),i===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else i<0?s=s.left:i>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Lo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Lo(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Lo(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Lo(this.root_,null,this.comparator_,!0,t)}}ue.EMPTY_NODE=new tb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(e,t){return ci(e.name,t.name)}function $l(e,t){return ci(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa;function nb(e){Qa=e}const gf=function(e){return typeof e=="number"?"number:"+Yd(e):"string:"+e},vf=function(e){if(e.isLeafNode()){const t=e.val();R(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ge(t,".sv"),"Priority must be a string or number.")}else R(e===Qa||e.isEmpty(),"priority of unexpected type.");R(e===Qa||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu;class Kt{constructor(t,i=Kt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vf(this.priorityNode_)}static set __childrenNodeConstructor(t){lu=t}static get __childrenNodeConstructor(){return lu}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Kt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return at(t)?this:et(t)===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:Kt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=et(t);return s===null?i:i.isEmpty()&&s!==".priority"?this:(R(s!==".priority"||Nn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Kt.__childrenNodeConstructor.EMPTY_NODE.updateChild(kt(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+gf(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=Yd(this.value_):t+=this.value_,this.lazyHash_=Gd(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Kt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Kt.__childrenNodeConstructor?-1:(R(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,r=Kt.VALUE_TYPE_ORDER.indexOf(i),a=Kt.VALUE_TYPE_ORDER.indexOf(s);return R(r>=0,"Unknown leaf type: "+i),R(a>=0,"Unknown leaf type: "+s),r===a?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}Kt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf,wf;function ib(e){yf=e}function sb(e){wf=e}class ob extends xr{compare(t,i){const s=t.node.getPriority(),r=i.node.getPriority(),a=s.compareTo(r);return a===0?ci(t.name,i.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return it.MIN}maxPost(){return new it(ri,new Kt("[PRIORITY-POST]",wf))}makePost(t,i){const s=yf(t);return new it(i,new Kt("[PRIORITY-POST]",s))}toString(){return".priority"}}const Ft=new ob;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=Math.log(2);class ab{constructor(t){const i=a=>parseInt(Math.log(a)/rb,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const r=s(this.count);this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Yo=function(e,t,i,s){e.sort(t);const r=function(f,_){const g=_-f;let m,w;if(g===0)return null;if(g===1)return m=e[f],w=i?i(m):m,new Yt(w,m.node,Yt.BLACK,null,null);{const T=parseInt(g/2,10)+f,A=r(f,T),O=r(T+1,_);return m=e[T],w=i?i(m):m,new Yt(w,m.node,Yt.BLACK,A,O)}},a=function(f){let _=null,g=null,m=e.length;const w=function(A,O){const Z=m-A,j=m;m-=A;const Y=r(Z+1,j),F=e[Z],X=i?i(F):F;T(new Yt(X,F.node,O,null,Y))},T=function(A){_?(_.left=A,_=A):(g=A,_=A)};for(let A=0;A<f.count;++A){const O=f.nextBitIsOne(),Z=Math.pow(2,f.count-(A+1));O?w(Z,Yt.BLACK):(w(Z,Yt.BLACK),w(Z,Yt.RED))}return g},c=new ab(e.length),u=a(c);return new ue(s||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa;const Ti={};class un{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return R(Ti&&Ft,"ChildrenNode.ts has not been loaded"),xa=xa||new un({".priority":Ti},{".priority":Ft}),xa}get(t){const i=Bi(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof ue?i:null}hasIndex(t){return Ge(this.indexSet_,t.toString())}addIndex(t,i){R(t!==Ni,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const a=i.getIterator(it.Wrap);let c=a.getNext();for(;c;)r=r||t.isDefinedOn(c.node),s.push(c),c=a.getNext();let u;r?u=Yo(s,t.getCompare()):u=Ti;const f=t.toString(),_=Object.assign({},this.indexSet_);_[f]=t;const g=Object.assign({},this.indexes_);return g[f]=u,new un(g,_)}addToIndexes(t,i){const s=jo(this.indexes_,(r,a)=>{const c=Bi(this.indexSet_,a);if(R(c,"Missing index implementation for "+a),r===Ti)if(c.isDefinedOn(t.node)){const u=[],f=i.getIterator(it.Wrap);let _=f.getNext();for(;_;)_.name!==t.name&&u.push(_),_=f.getNext();return u.push(t),Yo(u,c.getCompare())}else return Ti;else{const u=i.get(t.name);let f=r;return u&&(f=f.remove(new it(t.name,u))),f.insert(t,t.node)}});return new un(s,this.indexSet_)}removeFromIndexes(t,i){const s=jo(this.indexes_,r=>{if(r===Ti)return r;{const a=i.get(t.name);return a?r.remove(new it(t.name,a)):r}});return new un(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vs;class G{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&vf(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vs||(vs=new G(new ue($l),null,un.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vs}updatePriority(t){return this.children_.isEmpty()?this:new G(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?vs:i}}getChild(t){const i=et(t);return i===null?this:this.getImmediateChild(i).getChild(kt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(R(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const s=new it(t,i);let r,a;i.isEmpty()?(r=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(s,this.children_));const c=r.isEmpty()?vs:this.priorityNode_;return new G(r,c,a)}}updateChild(t,i){const s=et(t);if(s===null)return i;{R(et(t)!==".priority"||Nn(t)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(kt(t),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,r=0,a=!0;if(this.forEachChild(Ft,(c,u)=>{i[c]=u.val(t),s++,a&&G.INTEGER_REGEXP_.test(c)?r=Math.max(r,Number(c)):a=!1}),!t&&a&&r<2*s){const c=[];for(const u in i)c[u]=i[u];return c}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+gf(this.getPriority().val())+":"),this.forEachChild(Ft,(i,s)=>{const r=s.hash();r!==""&&(t+=":"+i+":"+r)}),this.lazyHash_=t===""?"":Gd(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const r=this.resolveIndex_(s);if(r){const a=r.getPredecessorKey(new it(t,i));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new it(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new it(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,it.Wrap);let a=r.peek();for(;a!=null&&i.compare(a,t)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,it.Wrap);let a=r.peek();for(;a!=null&&i.compare(a,t)>0;)r.getNext(),a=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ks?-1:0}withIndex(t){if(t===Ni||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new G(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ni||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const s=this.getIterator(Ft),r=i.getIterator(Ft);let a=s.getNext(),c=r.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=r.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===Ni?null:this.indexMap_.get(t.toString())}}G.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class lb extends G{constructor(){super(new ue($l),G.EMPTY_NODE,un.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return G.EMPTY_NODE}isEmpty(){return!1}}const Ks=new lb;Object.defineProperties(it,{MIN:{value:new it(zi,G.EMPTY_NODE)},MAX:{value:new it(ri,Ks)}});mf.__EMPTY_NODE=G.EMPTY_NODE;Kt.__childrenNodeConstructor=G;nb(Ks);sb(Ks);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=!0;function Vt(e,t=null){if(e===null)return G.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),R(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const i=e;return new Kt(i,Vt(t))}if(!(e instanceof Array)&&cb){const i=[];let s=!1;if(ee(e,(c,u)=>{if(c.substring(0,1)!=="."){const f=Vt(u);f.isEmpty()||(s=s||!f.getPriority().isEmpty(),i.push(new it(c,f)))}}),i.length===0)return G.EMPTY_NODE;const a=Yo(i,eb,c=>c.name,$l);if(s){const c=Yo(i,Ft.getCompare());return new G(a,Vt(t),new un({".priority":c},{".priority":Ft}))}else return new G(a,Vt(t),un.Default)}else{let i=G.EMPTY_NODE;return ee(e,(s,r)=>{if(Ge(e,s)&&s.substring(0,1)!=="."){const a=Vt(r);(a.isLeafNode()||!a.isEmpty())&&(i=i.updateImmediateChild(s,a))}}),i.updatePriority(Vt(t))}}ib(Vt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends xr{constructor(t){super(),this.indexPath_=t,R(!at(t)&&et(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const s=this.extractChild(t.node),r=this.extractChild(i.node),a=s.compareTo(r);return a===0?ci(t.name,i.name):a}makePost(t,i){const s=Vt(t),r=G.EMPTY_NODE.updateChild(this.indexPath_,s);return new it(i,r)}maxPost(){const t=G.EMPTY_NODE.updateChild(this.indexPath_,Ks);return new it(ri,t)}toString(){return zs(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends xr{compare(t,i){const s=t.node.compareTo(i.node);return s===0?ci(t.name,i.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return it.MIN}maxPost(){return it.MAX}makePost(t,i){const s=Vt(t);return new it(i,s)}toString(){return".value"}}const db=new ub;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(e){return{type:"value",snapshotNode:e}}function Hi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Hs(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ws(e,t,i){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:i}}function fb(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t){this.index_=t}updateChild(t,i,s,r,a,c){R(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(i);return u.getChild(r).equals(s.getChild(r))&&u.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?t.hasChild(i)?c.trackChildChange(Hs(i,u)):R(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?c.trackChildChange(Hi(i,s)):c.trackChildChange(Ws(i,s,u))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(i,s).withIndex(this.index_)}updateFullNode(t,i,s){return s!=null&&(t.isLeafNode()||t.forEachChild(Ft,(r,a)=>{i.hasChild(r)||s.trackChildChange(Hs(r,a))}),i.isLeafNode()||i.forEachChild(Ft,(r,a)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(a)||s.trackChildChange(Ws(r,a,c))}else s.trackChildChange(Hi(r,a))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?G.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t){this.indexedFilter_=new Vl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Us.getStartPost_(t),this.endPost_=Us.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,i,s,r,a,c){return this.matches(new it(i,s))||(s=G.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,s,r,a,c)}updateFullNode(t,i,s){i.isLeafNode()&&(i=G.EMPTY_NODE);let r=i.withIndex(this.index_);r=r.updatePriority(G.EMPTY_NODE);const a=this;return i.forEachChild(Ft,(c,u)=>{a.matches(new it(c,u))||(r=r.updateImmediateChild(c,G.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t){this.rangedFilter_=new Us(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,i,s,r,a,c){return this.rangedFilter_.matches(new it(i,s))||(s=G.EMPTY_NODE),t.getImmediateChild(i).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,s,r,a,c):this.fullLimitUpdateChild_(t,i,s,a,c)}updateFullNode(t,i,s){let r;if(i.isLeafNode()||i.isEmpty())r=G.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){r=G.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const u=a.getNext();let f;if(this.reverse_?f=this.index_.compare(this.rangedFilter_.getStartPost(),u)<=0:f=this.index_.compare(u,this.rangedFilter_.getEndPost())<=0,f)r=r.updateImmediateChild(u.name,u.node),c++;else break}}else{r=i.withIndex(this.index_),r=r.updatePriority(G.EMPTY_NODE);let a,c,u,f;if(this.reverse_){f=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const m=this.index_.getCompare();u=(w,T)=>m(T,w)}else f=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();let _=0,g=!1;for(;f.hasNext();){const m=f.getNext();!g&&u(a,m)<=0&&(g=!0),g&&_<this.limit_&&u(m,c)<=0?_++:r=r.updateImmediateChild(m.name,G.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,s,r,a){let c;if(this.reverse_){const m=this.index_.getCompare();c=(w,T)=>m(T,w)}else c=this.index_.getCompare();const u=t;R(u.numChildren()===this.limit_,"");const f=new it(i,s),_=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(u.hasChild(i)){const m=u.getImmediateChild(i);let w=r.getChildAfterChild(this.index_,_,this.reverse_);for(;w!=null&&(w.name===i||u.hasChild(w.name));)w=r.getChildAfterChild(this.index_,w,this.reverse_);const T=w==null?1:c(w,f);if(g&&!s.isEmpty()&&T>=0)return a!=null&&a.trackChildChange(Ws(i,s,m)),u.updateImmediateChild(i,s);{a!=null&&a.trackChildChange(Hs(i,m));const O=u.updateImmediateChild(i,G.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(a!=null&&a.trackChildChange(Hi(w.name,w.node)),O.updateImmediateChild(w.name,w.node)):O}}else return s.isEmpty()?t:g&&c(_,f)>=0?(a!=null&&(a.trackChildChange(Hs(_.name,_.node)),a.trackChildChange(Hi(i,s))),u.updateImmediateChild(i,s).updateImmediateChild(_.name,G.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ft}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zi}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ri}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ft}copy(){const t=new jl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function pb(e){return e.loadsAllData()?new Vl(e.getIndex()):e.hasLimit()?new _b(e):new Us(e)}function cu(e){const t={};if(e.isDefault())return t;let i;return e.index_===Ft?i="$priority":e.index_===db?i="$value":e.index_===Ni?i="$key":(R(e.index_ instanceof hb,"Unrecognized index type!"),i=e.index_.toString()),t.orderBy=jt(i),e.startSet_&&(t.startAt=jt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+jt(e.indexStartName_))),e.endSet_&&(t.endAt=jt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+jt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function hu(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let i=e.viewFrom_;i===""&&(e.isViewFromLeft()?i="l":i="r"),t.vf=i}return e.index_!==Ft&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends df{constructor(t,i,s,r){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=Gs("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(R(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,s,r){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const c=Qo.getListenId_(t,s),u={};this.listens_[c]=u;const f=cu(t._queryParams);this.restRequest_(a+".json",f,(_,g)=>{let m=g;if(_===404&&(m=null,_=null),_===null&&this.onDataUpdate_(a,m,!1,s),Bi(this.listens_,c)===u){let w;_?_===401?w="permission_denied":w="rest_error:"+_:w="ok",r(w,null)}})}unlisten(t,i){const s=Qo.getListenId_(t,i);delete this.listens_[s]}get(t){const i=cu(t._queryParams),s=t._path.toString(),r=new _n;return this.restRequest_(s+".json",i,(a,c)=>{let u=c;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(s,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(t){}restRequest_(t,i={},s){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(i.auth=r.accessToken),a&&a.token&&(i.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+qv(i);this.log_("Sending REST request for "+c);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(s&&u.readyState===4){this.log_("REST Response for "+c+" received. status:",u.status,"response:",u.responseText);let f=null;if(u.status>=200&&u.status<300){try{f=Bs(u.responseText)}catch{ae("Failed to parse JSON response for "+c+": "+u.responseText)}s(null,f)}else u.status!==401&&u.status!==404&&ae("Got unsuccessful REST response for "+c+" Status: "+u.status),s(u.status);s=null}},u.open("GET",c,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(){this.rootNode_=G.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(){return{value:null,children:new Map}}function Cf(e,t,i){if(at(t))e.value=i,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,i);else{const s=et(t);e.children.has(s)||e.children.set(s,Xo());const r=e.children.get(s);t=kt(t),Cf(r,t,i)}}function Xa(e,t,i){e.value!==null?i(t,e.value):gb(e,(s,r)=>{const a=new Et(t.toString()+"/"+s);Xa(r,a,i)})}function gb(e,t){e.children.forEach((i,s)=>{t(s,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&ee(this.last_,(s,r)=>{i[s]=i[s]-r}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=10*1e3,yb=30*1e3,wb=5*60*1e3;class bb{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new vb(t);const s=uu+(yb-uu)*Math.random();Ss(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),i={};let s=!1;ee(t,(r,a)=>{a>0&&Ge(this.statsToReport_,r)&&(i[r]=a,s=!0)}),s&&this.server_.reportStats(i),Ss(this.reportStats_.bind(this),Math.floor(Math.random()*2*wb))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ke||(ke={}));function ql(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Kl(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(t,i,s){this.path=t,this.affectedTree=i,this.revert=s,this.type=ke.ACK_USER_WRITE,this.source=ql()}operationForChild(t){if(at(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Et(t));return new Jo(pt(),i,this.revert)}}else return R(et(this.path)===t,"operationForChild called for unrelated child."),new Jo(kt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,i){this.source=t,this.path=i,this.type=ke.LISTEN_COMPLETE}operationForChild(t){return at(this.path)?new Zs(this.source,pt()):new Zs(this.source,kt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t,i,s){this.source=t,this.path=i,this.snap=s,this.type=ke.OVERWRITE}operationForChild(t){return at(this.path)?new ai(this.source,pt(),this.snap.getImmediateChild(t)):new ai(this.source,kt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t,i,s){this.source=t,this.path=i,this.children=s,this.type=ke.MERGE}operationForChild(t){if(at(this.path)){const i=this.children.subtree(new Et(t));return i.isEmpty()?null:i.value?new ai(this.source,pt(),i.value):new Wi(this.source,pt(),i)}else return R(et(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Wi(this.source,kt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t,i,s){this.node_=t,this.fullyInitialized_=i,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(at(t))return this.isFullyInitialized()&&!this.filtered_;const i=et(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function xb(e,t,i,s){const r=[],a=[];return t.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(fb(c.childName,c.snapshotNode))}),ys(e,r,"child_removed",t,s,i),ys(e,r,"child_added",t,s,i),ys(e,r,"child_moved",a,s,i),ys(e,r,"child_changed",t,s,i),ys(e,r,"value",t,s,i),r}function ys(e,t,i,s,r,a){const c=s.filter(u=>u.type===i);c.sort((u,f)=>Tb(e,u,f)),c.forEach(u=>{const f=Eb(e,u,a);r.forEach(_=>{_.respondsTo(u.type)&&t.push(_.createEvent(f,e.query_))})})}function Eb(e,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Tb(e,t,i){if(t.childName==null||i.childName==null)throw Ki("Should only compare child_ events.");const s=new it(t.childName,t.snapshotNode),r=new it(i.childName,i.snapshotNode);return e.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(e,t){return{eventCache:e,serverCache:t}}function Ls(e,t,i,s){return Er(new Rn(t,i,s),e.serverCache)}function xf(e,t,i,s){return Er(e.eventCache,new Rn(t,i,s))}function tr(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function li(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea;const Pb=()=>(Ea||(Ea=new ue(aw)),Ea);class St{constructor(t,i=Pb()){this.value=t,this.children=i}static fromObject(t){let i=new St(null);return ee(t,(s,r)=>{i=i.set(new Et(s),r)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:pt(),value:this.value};if(at(t))return null;{const s=et(t),r=this.children.get(s);if(r!==null){const a=r.findRootMostMatchingPathAndValue(kt(t),i);return a!=null?{path:Bt(new Et(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(at(t))return this;{const i=et(t),s=this.children.get(i);return s!==null?s.subtree(kt(t)):new St(null)}}set(t,i){if(at(t))return new St(i,this.children);{const s=et(t),a=(this.children.get(s)||new St(null)).set(kt(t),i),c=this.children.insert(s,a);return new St(this.value,c)}}remove(t){if(at(t))return this.children.isEmpty()?new St(null):new St(null,this.children);{const i=et(t),s=this.children.get(i);if(s){const r=s.remove(kt(t));let a;return r.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,r),this.value===null&&a.isEmpty()?new St(null):new St(this.value,a)}else return this}}get(t){if(at(t))return this.value;{const i=et(t),s=this.children.get(i);return s?s.get(kt(t)):null}}setTree(t,i){if(at(t))return i;{const s=et(t),a=(this.children.get(s)||new St(null)).setTree(kt(t),i);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new St(this.value,c)}}fold(t){return this.fold_(pt(),t)}fold_(t,i){const s={};return this.children.inorderTraversal((r,a)=>{s[r]=a.fold_(Bt(t,r),i)}),i(t,this.value,s)}findOnPath(t,i){return this.findOnPath_(t,pt(),i)}findOnPath_(t,i,s){const r=this.value?s(i,this.value):!1;if(r)return r;if(at(t))return null;{const a=et(t),c=this.children.get(a);return c?c.findOnPath_(kt(t),Bt(i,a),s):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,pt(),i)}foreachOnPath_(t,i,s){if(at(t))return this;{this.value&&s(i,this.value);const r=et(t),a=this.children.get(r);return a?a.foreachOnPath_(kt(t),Bt(i,r),s):new St(null)}}foreach(t){this.foreach_(pt(),t)}foreach_(t,i){this.children.inorderTraversal((s,r)=>{r.foreach_(Bt(t,s),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,s)=>{s.value&&t(i,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.writeTree_=t}static empty(){return new Me(new St(null))}}function ks(e,t,i){if(at(t))return new Me(new St(i));{const s=e.writeTree_.findRootMostValueAndPath(t);if(s!=null){const r=s.path;let a=s.value;const c=re(r,t);return a=a.updateChild(c,i),new Me(e.writeTree_.set(r,a))}else{const r=new St(i),a=e.writeTree_.setTree(t,r);return new Me(a)}}}function Ja(e,t,i){let s=e;return ee(i,(r,a)=>{s=ks(s,Bt(t,r),a)}),s}function du(e,t){if(at(t))return Me.empty();{const i=e.writeTree_.setTree(t,new St(null));return new Me(i)}}function tl(e,t){return hi(e,t)!=null}function hi(e,t){const i=e.writeTree_.findRootMostValueAndPath(t);return i!=null?e.writeTree_.get(i.path).getChild(re(i.path,t)):null}function fu(e){const t=[],i=e.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Ft,(s,r)=>{t.push(new it(s,r))}):e.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&t.push(new it(s,r.value))}),t}function kn(e,t){if(at(t))return e;{const i=hi(e,t);return i!=null?new Me(new St(i)):new Me(e.writeTree_.subtree(t))}}function el(e){return e.writeTree_.isEmpty()}function Ui(e,t){return Ef(pt(),e.writeTree_,t)}function Ef(e,t,i){if(t.value!=null)return i.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal((r,a)=>{r===".priority"?(R(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):i=Ef(Bt(e,r),a,i)}),!i.getChild(e).isEmpty()&&s!==null&&(i=i.updateChild(Bt(e,".priority"),s)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(e,t){return Sf(t,e)}function Ib(e,t,i,s,r){R(s>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:i,writeId:s,visible:r}),r&&(e.visibleWrites=ks(e.visibleWrites,t,i)),e.lastWriteId=s}function Sb(e,t,i,s){R(s>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:i,writeId:s,visible:!0}),e.visibleWrites=Ja(e.visibleWrites,t,i),e.lastWriteId=s}function Lb(e,t){for(let i=0;i<e.allWrites.length;i++){const s=e.allWrites[i];if(s.writeId===t)return s}return null}function kb(e,t){const i=e.allWrites.findIndex(u=>u.writeId===t);R(i>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[i];e.allWrites.splice(i,1);let r=s.visible,a=!1,c=e.allWrites.length-1;for(;r&&c>=0;){const u=e.allWrites[c];u.visible&&(c>=i&&Ab(u,s.path)?r=!1:Ce(s.path,u.path)&&(a=!0)),c--}if(r){if(a)return Mb(e),!0;if(s.snap)e.visibleWrites=du(e.visibleWrites,s.path);else{const u=s.children;ee(u,f=>{e.visibleWrites=du(e.visibleWrites,Bt(s.path,f))})}return!0}else return!1}function Ab(e,t){if(e.snap)return Ce(e.path,t);for(const i in e.children)if(e.children.hasOwnProperty(i)&&Ce(Bt(e.path,i),t))return!0;return!1}function Mb(e){e.visibleWrites=Tf(e.allWrites,Nb,pt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Nb(e){return e.visible}function Tf(e,t,i){let s=Me.empty();for(let r=0;r<e.length;++r){const a=e[r];if(t(a)){const c=a.path;let u;if(a.snap)Ce(i,c)?(u=re(i,c),s=ks(s,u,a.snap)):Ce(c,i)&&(u=re(c,i),s=ks(s,pt(),a.snap.getChild(u)));else if(a.children){if(Ce(i,c))u=re(i,c),s=Ja(s,u,a.children);else if(Ce(c,i))if(u=re(c,i),at(u))s=Ja(s,pt(),a.children);else{const f=Bi(a.children,et(u));if(f){const _=f.getChild(kt(u));s=ks(s,pt(),_)}}}else throw Ki("WriteRecord should have .snap or .children")}}return s}function Pf(e,t,i,s,r){if(!s&&!r){const a=hi(e.visibleWrites,t);if(a!=null)return a;{const c=kn(e.visibleWrites,t);if(el(c))return i;if(i==null&&!tl(c,pt()))return null;{const u=i||G.EMPTY_NODE;return Ui(c,u)}}}else{const a=kn(e.visibleWrites,t);if(!r&&el(a))return i;if(!r&&i==null&&!tl(a,pt()))return null;{const c=function(_){return(_.visible||r)&&(!s||!~s.indexOf(_.writeId))&&(Ce(_.path,t)||Ce(t,_.path))},u=Tf(e.allWrites,c,t),f=i||G.EMPTY_NODE;return Ui(u,f)}}}function Rb(e,t,i){let s=G.EMPTY_NODE;const r=hi(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Ft,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(i){const a=kn(e.visibleWrites,t);return i.forEachChild(Ft,(c,u)=>{const f=Ui(kn(a,new Et(c)),u);s=s.updateImmediateChild(c,f)}),fu(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=kn(e.visibleWrites,t);return fu(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function Ob(e,t,i,s,r){R(s||r,"Either existingEventSnap or existingServerSnap must exist");const a=Bt(t,i);if(tl(e.visibleWrites,a))return null;{const c=kn(e.visibleWrites,a);return el(c)?r.getChild(i):Ui(c,r.getChild(i))}}function Db(e,t,i,s){const r=Bt(t,i),a=hi(e.visibleWrites,r);if(a!=null)return a;if(s.isCompleteForChild(i)){const c=kn(e.visibleWrites,r);return Ui(c,s.getNode().getImmediateChild(i))}else return null}function Bb(e,t){return hi(e.visibleWrites,t)}function Fb(e,t,i,s,r,a,c){let u;const f=kn(e.visibleWrites,t),_=hi(f,pt());if(_!=null)u=_;else if(i!=null)u=Ui(f,i);else return[];if(u=u.withIndex(c),!u.isEmpty()&&!u.isLeafNode()){const g=[],m=c.getCompare(),w=a?u.getReverseIteratorFrom(s,c):u.getIteratorFrom(s,c);let T=w.getNext();for(;T&&g.length<r;)m(T,s)!==0&&g.push(T),T=w.getNext();return g}else return[]}function zb(){return{visibleWrites:Me.empty(),allWrites:[],lastWriteId:-1}}function er(e,t,i,s){return Pf(e.writeTree,e.treePath,t,i,s)}function Yl(e,t){return Rb(e.writeTree,e.treePath,t)}function _u(e,t,i,s){return Ob(e.writeTree,e.treePath,t,i,s)}function nr(e,t){return Bb(e.writeTree,Bt(e.treePath,t))}function Hb(e,t,i,s,r,a){return Fb(e.writeTree,e.treePath,t,i,s,r,a)}function Ql(e,t,i){return Db(e.writeTree,e.treePath,t,i)}function If(e,t){return Sf(Bt(e.treePath,t),e.writeTree)}function Sf(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,s=t.childName;R(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),R(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const a=r.type;if(i==="child_added"&&a==="child_removed")this.changeMap.set(s,Ws(s,t.snapshotNode,r.snapshotNode));else if(i==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(i==="child_removed"&&a==="child_changed")this.changeMap.set(s,Hs(s,r.oldSnap));else if(i==="child_changed"&&a==="child_added")this.changeMap.set(s,Hi(s,t.snapshotNode));else if(i==="child_changed"&&a==="child_changed")this.changeMap.set(s,Ws(s,t.snapshotNode,r.oldSnap));else throw Ki("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{getCompleteChild(t){return null}getChildAfterChild(t,i,s){return null}}const Lf=new Ub;class Xl{constructor(t,i,s=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=s}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new Rn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ql(this.writes_,t,s)}}getChildAfterChild(t,i,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:li(this.viewCache_),a=Hb(this.writes_,r,i,1,s,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(e){return{filter:e}}function $b(e,t){R(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),R(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Vb(e,t,i,s,r){const a=new Wb;let c,u;if(i.type===ke.OVERWRITE){const _=i;_.source.fromUser?c=nl(e,t,_.path,_.snap,s,r,a):(R(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered()&&!at(_.path),c=ir(e,t,_.path,_.snap,s,r,u,a))}else if(i.type===ke.MERGE){const _=i;_.source.fromUser?c=qb(e,t,_.path,_.children,s,r,a):(R(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered(),c=il(e,t,_.path,_.children,s,r,u,a))}else if(i.type===ke.ACK_USER_WRITE){const _=i;_.revert?c=Yb(e,t,_.path,s,r,a):c=Gb(e,t,_.path,_.affectedTree,s,r,a)}else if(i.type===ke.LISTEN_COMPLETE)c=Kb(e,t,i.path,s,a);else throw Ki("Unknown operation type: "+i.type);const f=a.getChanges();return jb(t,c,f),{viewCache:c,changes:f}}function jb(e,t,i){const s=t.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=tr(e);(i.length>0||!e.eventCache.isFullyInitialized()||r&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&i.push(bf(tr(t)))}}function kf(e,t,i,s,r,a){const c=t.eventCache;if(nr(s,i)!=null)return t;{let u,f;if(at(i))if(R(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=li(t),g=_ instanceof G?_:G.EMPTY_NODE,m=Yl(s,g);u=e.filter.updateFullNode(t.eventCache.getNode(),m,a)}else{const _=er(s,li(t));u=e.filter.updateFullNode(t.eventCache.getNode(),_,a)}else{const _=et(i);if(_===".priority"){R(Nn(i)===1,"Can't have a priority with additional path components");const g=c.getNode();f=t.serverCache.getNode();const m=_u(s,i,g,f);m!=null?u=e.filter.updatePriority(g,m):u=c.getNode()}else{const g=kt(i);let m;if(c.isCompleteForChild(_)){f=t.serverCache.getNode();const w=_u(s,i,c.getNode(),f);w!=null?m=c.getNode().getImmediateChild(_).updateChild(g,w):m=c.getNode().getImmediateChild(_)}else m=Ql(s,_,t.serverCache);m!=null?u=e.filter.updateChild(c.getNode(),_,m,g,r,a):u=c.getNode()}}return Ls(t,u,c.isFullyInitialized()||at(i),e.filter.filtersNodes())}}function ir(e,t,i,s,r,a,c,u){const f=t.serverCache;let _;const g=c?e.filter:e.filter.getIndexedFilter();if(at(i))_=g.updateFullNode(f.getNode(),s,null);else if(g.filtersNodes()&&!f.isFiltered()){const T=f.getNode().updateChild(i,s);_=g.updateFullNode(f.getNode(),T,null)}else{const T=et(i);if(!f.isCompleteForPath(i)&&Nn(i)>1)return t;const A=kt(i),Z=f.getNode().getImmediateChild(T).updateChild(A,s);T===".priority"?_=g.updatePriority(f.getNode(),Z):_=g.updateChild(f.getNode(),T,Z,A,Lf,null)}const m=xf(t,_,f.isFullyInitialized()||at(i),g.filtersNodes()),w=new Xl(r,m,a);return kf(e,m,i,r,w,u)}function nl(e,t,i,s,r,a,c){const u=t.eventCache;let f,_;const g=new Xl(r,t,a);if(at(i))_=e.filter.updateFullNode(t.eventCache.getNode(),s,c),f=Ls(t,_,!0,e.filter.filtersNodes());else{const m=et(i);if(m===".priority")_=e.filter.updatePriority(t.eventCache.getNode(),s),f=Ls(t,_,u.isFullyInitialized(),u.isFiltered());else{const w=kt(i),T=u.getNode().getImmediateChild(m);let A;if(at(w))A=s;else{const O=g.getCompleteChild(m);O!=null?Wl(w)===".priority"&&O.getChild(_f(w)).isEmpty()?A=O:A=O.updateChild(w,s):A=G.EMPTY_NODE}if(T.equals(A))f=t;else{const O=e.filter.updateChild(u.getNode(),m,A,w,g,c);f=Ls(t,O,u.isFullyInitialized(),e.filter.filtersNodes())}}}return f}function pu(e,t){return e.eventCache.isCompleteForChild(t)}function qb(e,t,i,s,r,a,c){let u=t;return s.foreach((f,_)=>{const g=Bt(i,f);pu(t,et(g))&&(u=nl(e,u,g,_,r,a,c))}),s.foreach((f,_)=>{const g=Bt(i,f);pu(t,et(g))||(u=nl(e,u,g,_,r,a,c))}),u}function mu(e,t,i){return i.foreach((s,r)=>{t=t.updateChild(s,r)}),t}function il(e,t,i,s,r,a,c,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let f=t,_;at(i)?_=s:_=new St(null).setTree(i,s);const g=t.serverCache.getNode();return _.children.inorderTraversal((m,w)=>{if(g.hasChild(m)){const T=t.serverCache.getNode().getImmediateChild(m),A=mu(e,T,w);f=ir(e,f,new Et(m),A,r,a,c,u)}}),_.children.inorderTraversal((m,w)=>{const T=!t.serverCache.isCompleteForChild(m)&&w.value===void 0;if(!g.hasChild(m)&&!T){const A=t.serverCache.getNode().getImmediateChild(m),O=mu(e,A,w);f=ir(e,f,new Et(m),O,r,a,c,u)}}),f}function Gb(e,t,i,s,r,a,c){if(nr(r,i)!=null)return t;const u=t.serverCache.isFiltered(),f=t.serverCache;if(s.value!=null){if(at(i)&&f.isFullyInitialized()||f.isCompleteForPath(i))return ir(e,t,i,f.getNode().getChild(i),r,a,u,c);if(at(i)){let _=new St(null);return f.getNode().forEachChild(Ni,(g,m)=>{_=_.set(new Et(g),m)}),il(e,t,i,_,r,a,u,c)}else return t}else{let _=new St(null);return s.foreach((g,m)=>{const w=Bt(i,g);f.isCompleteForPath(w)&&(_=_.set(g,f.getNode().getChild(w)))}),il(e,t,i,_,r,a,u,c)}}function Kb(e,t,i,s,r){const a=t.serverCache,c=xf(t,a.getNode(),a.isFullyInitialized()||at(i),a.isFiltered());return kf(e,c,i,s,Lf,r)}function Yb(e,t,i,s,r,a){let c;if(nr(s,i)!=null)return t;{const u=new Xl(s,t,r),f=t.eventCache.getNode();let _;if(at(i)||et(i)===".priority"){let g;if(t.serverCache.isFullyInitialized())g=er(s,li(t));else{const m=t.serverCache.getNode();R(m instanceof G,"serverChildren would be complete if leaf node"),g=Yl(s,m)}g=g,_=e.filter.updateFullNode(f,g,a)}else{const g=et(i);let m=Ql(s,g,t.serverCache);m==null&&t.serverCache.isCompleteForChild(g)&&(m=f.getImmediateChild(g)),m!=null?_=e.filter.updateChild(f,g,m,kt(i),u,a):t.eventCache.getNode().hasChild(g)?_=e.filter.updateChild(f,g,G.EMPTY_NODE,kt(i),u,a):_=f,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=er(s,li(t)),c.isLeafNode()&&(_=e.filter.updateFullNode(_,c,a)))}return c=t.serverCache.isFullyInitialized()||nr(s,pt())!=null,Ls(t,_,c,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new Vl(s.getIndex()),a=pb(s);this.processor_=Zb(a);const c=i.serverCache,u=i.eventCache,f=r.updateFullNode(G.EMPTY_NODE,c.getNode(),null),_=a.updateFullNode(G.EMPTY_NODE,u.getNode(),null),g=new Rn(f,c.isFullyInitialized(),r.filtersNodes()),m=new Rn(_,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=Er(m,g),this.eventGenerator_=new Cb(this.query_)}get query(){return this.query_}}function Xb(e){return e.viewCache_.serverCache.getNode()}function Jb(e){return tr(e.viewCache_)}function tC(e,t){const i=li(e.viewCache_);return i&&(e.query._queryParams.loadsAllData()||!at(t)&&!i.getImmediateChild(et(t)).isEmpty())?i.getChild(t):null}function gu(e){return e.eventRegistrations_.length===0}function eC(e,t){e.eventRegistrations_.push(t)}function vu(e,t,i){const s=[];if(i){R(t==null,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(i,r);c&&s.push(c)})}if(t){let r=[];for(let a=0;a<e.eventRegistrations_.length;++a){const c=e.eventRegistrations_[a];if(!c.matches(t))r.push(c);else if(t.hasAnyCallback()){r=r.concat(e.eventRegistrations_.slice(a+1));break}}e.eventRegistrations_=r}else e.eventRegistrations_=[];return s}function yu(e,t,i,s){t.type===ke.MERGE&&t.source.queryId!==null&&(R(li(e.viewCache_),"We should always have a full cache before handling merges"),R(tr(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,a=Vb(e.processor_,r,t,i,s);return $b(e.processor_,a.viewCache),R(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Af(e,a.changes,a.viewCache.eventCache.getNode(),null)}function nC(e,t){const i=e.viewCache_.eventCache,s=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Ft,(a,c)=>{s.push(Hi(a,c))}),i.isFullyInitialized()&&s.push(bf(i.getNode())),Af(e,s,i.getNode(),t)}function Af(e,t,i,s){const r=s?[s]:e.eventRegistrations_;return xb(e.eventGenerator_,t,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sr;class Mf{constructor(){this.views=new Map}}function iC(e){R(!sr,"__referenceConstructor has already been defined"),sr=e}function sC(){return R(sr,"Reference.ts has not been loaded"),sr}function oC(e){return e.views.size===0}function Jl(e,t,i,s){const r=t.source.queryId;if(r!==null){const a=e.views.get(r);return R(a!=null,"SyncTree gave us an op for an invalid query."),yu(a,t,i,s)}else{let a=[];for(const c of e.views.values())a=a.concat(yu(c,t,i,s));return a}}function Nf(e,t,i,s,r){const a=t._queryIdentifier,c=e.views.get(a);if(!c){let u=er(i,r?s:null),f=!1;u?f=!0:s instanceof G?(u=Yl(i,s),f=!1):(u=G.EMPTY_NODE,f=!1);const _=Er(new Rn(u,f,!1),new Rn(s,r,!1));return new Qb(t,_)}return c}function rC(e,t,i,s,r,a){const c=Nf(e,t,s,r,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,c),eC(c,i),nC(c,i)}function aC(e,t,i,s){const r=t._queryIdentifier,a=[];let c=[];const u=On(e);if(r==="default")for(const[f,_]of e.views.entries())c=c.concat(vu(_,i,s)),gu(_)&&(e.views.delete(f),_.query._queryParams.loadsAllData()||a.push(_.query));else{const f=e.views.get(r);f&&(c=c.concat(vu(f,i,s)),gu(f)&&(e.views.delete(r),f.query._queryParams.loadsAllData()||a.push(f.query)))}return u&&!On(e)&&a.push(new(sC())(t._repo,t._path)),{removed:a,events:c}}function Rf(e){const t=[];for(const i of e.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function An(e,t){let i=null;for(const s of e.views.values())i=i||tC(s,t);return i}function Of(e,t){if(t._queryParams.loadsAllData())return Pr(e);{const s=t._queryIdentifier;return e.views.get(s)}}function Df(e,t){return Of(e,t)!=null}function On(e){return Pr(e)!=null}function Pr(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let or;function lC(e){R(!or,"__referenceConstructor has already been defined"),or=e}function cC(){return R(or,"Reference.ts has not been loaded"),or}let hC=1;class wu{constructor(t){this.listenProvider_=t,this.syncPointTree_=new St(null),this.pendingWriteTree_=zb(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bf(e,t,i,s,r){return Ib(e.pendingWriteTree_,t,i,s,r),r?Xi(e,new ai(ql(),t,i)):[]}function uC(e,t,i,s){Sb(e.pendingWriteTree_,t,i,s);const r=St.fromObject(i);return Xi(e,new Wi(ql(),t,r))}function Pn(e,t,i=!1){const s=Lb(e.pendingWriteTree_,t);if(kb(e.pendingWriteTree_,t)){let a=new St(null);return s.snap!=null?a=a.set(pt(),!0):ee(s.children,c=>{a=a.set(new Et(c),!0)}),Xi(e,new Jo(s.path,a,i))}else return[]}function Ys(e,t,i){return Xi(e,new ai(Gl(),t,i))}function dC(e,t,i){const s=St.fromObject(i);return Xi(e,new Wi(Gl(),t,s))}function fC(e,t){return Xi(e,new Zs(Gl(),t))}function _C(e,t,i){const s=ec(e,i);if(s){const r=nc(s),a=r.path,c=r.queryId,u=re(a,t),f=new Zs(Kl(c),u);return ic(e,a,f)}else return[]}function sl(e,t,i,s){const r=t._path,a=e.syncPointTree_.get(r);let c=[];if(a&&(t._queryIdentifier==="default"||Df(a,t))){const u=aC(a,t,i,s);oC(a)&&(e.syncPointTree_=e.syncPointTree_.remove(r));const f=u.removed;c=u.events;const _=f.findIndex(m=>m._queryParams.loadsAllData())!==-1,g=e.syncPointTree_.findOnPath(r,(m,w)=>On(w));if(_&&!g){const m=e.syncPointTree_.subtree(r);if(!m.isEmpty()){const w=vC(m);for(let T=0;T<w.length;++T){const A=w[T],O=A.query,Z=Hf(e,A);e.listenProvider_.startListening(As(O),rr(e,O),Z.hashFn,Z.onComplete)}}}!g&&f.length>0&&!s&&(_?e.listenProvider_.stopListening(As(t),null):f.forEach(m=>{const w=e.queryToTagMap.get(Ir(m));e.listenProvider_.stopListening(As(m),w)})),yC(e,f)}return c}function pC(e,t,i,s){const r=ec(e,s);if(r!=null){const a=nc(r),c=a.path,u=a.queryId,f=re(c,t),_=new ai(Kl(u),f,i);return ic(e,c,_)}else return[]}function mC(e,t,i,s){const r=ec(e,s);if(r){const a=nc(r),c=a.path,u=a.queryId,f=re(c,t),_=St.fromObject(i),g=new Wi(Kl(u),f,_);return ic(e,c,g)}else return[]}function bu(e,t,i){const s=t._path;let r=null,a=!1;e.syncPointTree_.foreachOnPath(s,(m,w)=>{const T=re(m,s);r=r||An(w,T),a=a||On(w)});let c=e.syncPointTree_.get(s);c?(a=a||On(c),r=r||An(c,pt())):(c=new Mf,e.syncPointTree_=e.syncPointTree_.set(s,c));let u;r!=null?u=!0:(u=!1,r=G.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((w,T)=>{const A=An(T,pt());A&&(r=r.updateImmediateChild(w,A))}));const f=Df(c,t);if(!f&&!t._queryParams.loadsAllData()){const m=Ir(t);R(!e.queryToTagMap.has(m),"View does not exist, but we have a tag");const w=wC();e.queryToTagMap.set(m,w),e.tagToQueryMap.set(w,m)}const _=Tr(e.pendingWriteTree_,s);let g=rC(c,t,i,_,r,u);if(!f&&!a){const m=Of(c,t);g=g.concat(bC(e,t,m))}return g}function tc(e,t,i){const r=e.pendingWriteTree_,a=e.syncPointTree_.findOnPath(t,(c,u)=>{const f=re(c,t),_=An(u,f);if(_)return _});return Pf(r,t,a,i,!0)}function gC(e,t){const i=t._path;let s=null;e.syncPointTree_.foreachOnPath(i,(_,g)=>{const m=re(_,i);s=s||An(g,m)});let r=e.syncPointTree_.get(i);r?s=s||An(r,pt()):(r=new Mf,e.syncPointTree_=e.syncPointTree_.set(i,r));const a=s!=null,c=a?new Rn(s,!0,!1):null,u=Tr(e.pendingWriteTree_,t._path),f=Nf(r,t,u,a?c.getNode():G.EMPTY_NODE,a);return Jb(f)}function Xi(e,t){return Ff(t,e.syncPointTree_,null,Tr(e.pendingWriteTree_,pt()))}function Ff(e,t,i,s){if(at(e.path))return zf(e,t,i,s);{const r=t.get(pt());i==null&&r!=null&&(i=An(r,pt()));let a=[];const c=et(e.path),u=e.operationForChild(c),f=t.children.get(c);if(f&&u){const _=i?i.getImmediateChild(c):null,g=If(s,c);a=a.concat(Ff(u,f,_,g))}return r&&(a=a.concat(Jl(r,e,s,i))),a}}function zf(e,t,i,s){const r=t.get(pt());i==null&&r!=null&&(i=An(r,pt()));let a=[];return t.children.inorderTraversal((c,u)=>{const f=i?i.getImmediateChild(c):null,_=If(s,c),g=e.operationForChild(c);g&&(a=a.concat(zf(g,u,f,_)))}),r&&(a=a.concat(Jl(r,e,s,i))),a}function Hf(e,t){const i=t.query,s=rr(e,i);return{hashFn:()=>(Xb(t)||G.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?_C(e,i._path,s):fC(e,i._path);{const a=hw(r,i);return sl(e,i,null,a)}}}}function rr(e,t){const i=Ir(t);return e.queryToTagMap.get(i)}function Ir(e){return e._path.toString()+"$"+e._queryIdentifier}function ec(e,t){return e.tagToQueryMap.get(t)}function nc(e){const t=e.indexOf("$");return R(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Et(e.substr(0,t))}}function ic(e,t,i){const s=e.syncPointTree_.get(t);R(s,"Missing sync point for query tag that we're tracking");const r=Tr(e.pendingWriteTree_,t);return Jl(s,i,r,null)}function vC(e){return e.fold((t,i,s)=>{if(i&&On(i))return[Pr(i)];{let r=[];return i&&(r=Rf(i)),ee(s,(a,c)=>{r=r.concat(c)}),r}})}function As(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(cC())(e._repo,e._path):e}function yC(e,t){for(let i=0;i<t.length;++i){const s=t[i];if(!s._queryParams.loadsAllData()){const r=Ir(s),a=e.queryToTagMap.get(r);e.queryToTagMap.delete(r),e.tagToQueryMap.delete(a)}}}function wC(){return hC++}function bC(e,t,i){const s=t._path,r=rr(e,t),a=Hf(e,i),c=e.listenProvider_.startListening(As(t),r,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(s);if(r)R(!On(u.value),"If we're adding a query, it shouldn't be shadowed");else{const f=u.fold((_,g,m)=>{if(!at(_)&&g&&On(g))return[Pr(g).query];{let w=[];return g&&(w=w.concat(Rf(g).map(T=>T.query))),ee(m,(T,A)=>{w=w.concat(A)}),w}});for(let _=0;_<f.length;++_){const g=f[_];e.listenProvider_.stopListening(As(g),rr(e,g))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new sc(i)}node(){return this.node_}}class oc{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=Bt(this.path_,t);return new oc(this.syncTree_,i)}node(){return tc(this.syncTree_,this.path_)}}const CC=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Cu=function(e,t,i){if(!e||typeof e!="object")return e;if(R(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return xC(e[".sv"],t,i);if(typeof e[".sv"]=="object")return EC(e[".sv"],t);R(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},xC=function(e,t,i){switch(e){case"timestamp":return i.timestamp;default:R(!1,"Unexpected server value: "+e)}},EC=function(e,t,i){e.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;typeof s!="number"&&R(!1,"Unexpected increment value: "+s);const r=t.node();if(R(r!==null&&typeof r!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const c=r.getValue();return typeof c!="number"?s:c+s},Wf=function(e,t,i,s){return rc(t,new oc(i,e),s)},Uf=function(e,t,i){return rc(e,new sc(t),i)};function rc(e,t,i){const s=e.getPriority().val(),r=Cu(s,t.getImmediateChild(".priority"),i);let a;if(e.isLeafNode()){const c=e,u=Cu(c.getValue(),t,i);return u!==c.getValue()||r!==c.getPriority().val()?new Kt(u,Vt(r)):e}else{const c=e;return a=c,r!==c.getPriority().val()&&(a=a.updatePriority(new Kt(r))),c.forEachChild(Ft,(u,f)=>{const _=rc(f,t.getImmediateChild(u),i);_!==f&&(a=a.updateImmediateChild(u,_))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t="",i=null,s={children:{},childCount:0}){this.name=t,this.parent=i,this.node=s}}function lc(e,t){let i=t instanceof Et?t:new Et(t),s=e,r=et(i);for(;r!==null;){const a=Bi(s.node.children,r)||{children:{},childCount:0};s=new ac(r,s,a),i=kt(i),r=et(i)}return s}function Ji(e){return e.node.value}function Zf(e,t){e.node.value=t,ol(e)}function $f(e){return e.node.childCount>0}function TC(e){return Ji(e)===void 0&&!$f(e)}function Sr(e,t){ee(e.node.children,(i,s)=>{t(new ac(i,e,s))})}function Vf(e,t,i,s){i&&!s&&t(e),Sr(e,r=>{Vf(r,t,!0,s)}),i&&s&&t(e)}function PC(e,t,i){let s=i?e:e.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function Qs(e){return new Et(e.parent===null?e.name:Qs(e.parent)+"/"+e.name)}function ol(e){e.parent!==null&&IC(e.parent,e.name,e)}function IC(e,t,i){const s=TC(i),r=Ge(e.node.children,t);s&&r?(delete e.node.children[t],e.node.childCount--,ol(e)):!s&&!r&&(e.node.children[t]=i.node,e.node.childCount++,ol(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=/[\[\].#$\/\u0000-\u001F\u007F]/,LC=/[\[\].#$\u0000-\u001F\u007F]/,Ta=10*1024*1024,cc=function(e){return typeof e=="string"&&e.length!==0&&!SC.test(e)},jf=function(e){return typeof e=="string"&&e.length!==0&&!LC.test(e)},kC=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),jf(e)},AC=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Ol(e)||e&&typeof e=="object"&&Ge(e,".sv")},MC=function(e,t,i,s){s&&t===void 0||Lr(br(e,"value"),t,i)},Lr=function(e,t,i){const s=i instanceof Et?new jw(i,e):i;if(t===void 0)throw new Error(e+"contains undefined "+jn(s));if(typeof t=="function")throw new Error(e+"contains a function "+jn(s)+" with contents = "+t.toString());if(Ol(t))throw new Error(e+"contains "+t.toString()+" "+jn(s));if(typeof t=="string"&&t.length>Ta/3&&Cr(t)>Ta)throw new Error(e+"contains a string greater than "+Ta+" utf8 bytes "+jn(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,a=!1;if(ee(t,(c,u)=>{if(c===".value")r=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!cc(c)))throw new Error(e+" contains an invalid key ("+c+") "+jn(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);qw(s,c),Lr(e,u,s),Gw(s)}),r&&a)throw new Error(e+' contains ".value" child '+jn(s)+" in addition to actual children.")}},NC=function(e,t){let i,s;for(i=0;i<t.length;i++){s=t[i];const a=zs(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!cc(a[c]))throw new Error(e+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Vw);let r=null;for(i=0;i<t.length;i++){if(s=t[i],r!==null&&Ce(r,s))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+s.toString());r=s}},RC=function(e,t,i,s){if(s&&t===void 0)return;const r=br(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const a=[];ee(t,(c,u)=>{const f=new Et(c);if(Lr(r,u,Bt(i,f)),Wl(f)===".priority"&&!AC(u))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),NC(r,a)},qf=function(e,t,i,s){if(!(s&&i===void 0)&&!jf(i))throw new Error(br(e,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},OC=function(e,t,i,s){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),qf(e,t,i,s)},DC=function(e,t){if(et(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},BC=function(e,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!cc(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!kC(i))throw new Error(br(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kr(e,t){let i=null;for(let s=0;s<t.length;s++){const r=t[s],a=r.getPath();i!==null&&!Ul(a,i.path)&&(e.eventLists_.push(i),i=null),i===null&&(i={events:[],path:a}),i.events.push(r)}i&&e.eventLists_.push(i)}function hc(e,t,i){kr(e,i),Gf(e,s=>Ul(s,t))}function Ne(e,t,i){kr(e,i),Gf(e,s=>Ce(s,t)||Ce(t,s))}function Gf(e,t){e.recursionDepth_++;let i=!0;for(let s=0;s<e.eventLists_.length;s++){const r=e.eventLists_[s];if(r){const a=r.path;t(a)?(zC(e.eventLists_[s]),e.eventLists_[s]=null):i=!1}}i&&(e.eventLists_=[]),e.recursionDepth_--}function zC(e){for(let t=0;t<e.events.length;t++){const i=e.events[t];if(i!==null){e.events[t]=null;const s=i.getEventRunner();ni&&Jt("event: "+i.toString()),Qi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="repo_interrupt",WC=25;class UC{constructor(t,i,s,r){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new FC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xo(),this.transactionQueueTree_=new ac,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ZC(e,t,i){if(e.stats_=Fl(e.repoInfo_),e.forceRestClient_||_w())e.server_=new Qo(e.repoInfo_,(s,r,a,c)=>{xu(e,s,r,a,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Eu(e,!0),0);else{if(typeof i!="undefined"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{jt(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new dn(e.repoInfo_,t,(s,r,a,c)=>{xu(e,s,r,a,c)},s=>{Eu(e,s)},s=>{VC(e,s)},e.authTokenProvider_,e.appCheckProvider_,i),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(s=>{e.server_.refreshAuthToken(s)}),e.appCheckProvider_.addTokenChangeListener(s=>{e.server_.refreshAppCheckToken(s.token)}),e.statsReporter_=bw(e.repoInfo_,()=>new bb(e.stats_,e.server_)),e.infoData_=new mb,e.infoSyncTree_=new wu({startListening:(s,r,a,c)=>{let u=[];const f=e.infoData_.getNode(s._path);return f.isEmpty()||(u=Ys(e.infoSyncTree_,s._path,f),setTimeout(()=>{c("ok")},0)),u},stopListening:()=>{}}),uc(e,"connected",!1),e.serverSyncTree_=new wu({startListening:(s,r,a,c)=>(e.server_.listen(s,a,r,(u,f)=>{const _=c(u,f);Ne(e.eventQueue_,s._path,_)}),[]),stopListening:(s,r)=>{e.server_.unlisten(s,r)}})}function $C(e){const i=e.infoData_.getNode(new Et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Ar(e){return CC({timestamp:$C(e)})}function xu(e,t,i,s,r){e.dataUpdateCount++;const a=new Et(t);i=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,i):i;let c=[];if(r)if(s){const f=jo(i,_=>Vt(_));c=mC(e.serverSyncTree_,a,f,r)}else{const f=Vt(i);c=pC(e.serverSyncTree_,a,f,r)}else if(s){const f=jo(i,_=>Vt(_));c=dC(e.serverSyncTree_,a,f)}else{const f=Vt(i);c=Ys(e.serverSyncTree_,a,f)}let u=a;c.length>0&&(u=Zi(e,a)),Ne(e.eventQueue_,u,c)}function Eu(e,t){uc(e,"connected",t),t===!1&&KC(e)}function VC(e,t){ee(t,(i,s)=>{uc(e,i,s)})}function uc(e,t,i){const s=new Et("/.info/"+t),r=Vt(i);e.infoData_.updateSnapshot(s,r);const a=Ys(e.infoSyncTree_,s,r);Ne(e.eventQueue_,s,a)}function dc(e){return e.nextWriteId_++}function jC(e,t){const i=gC(e.serverSyncTree_,t);return i!=null?Promise.resolve(i):e.server_.get(t).then(s=>{const r=Vt(s).withIndex(t._queryParams.getIndex()),a=Ys(e.serverSyncTree_,t._path,r);return hc(e.eventQueue_,t._path,a),Promise.resolve(r)},s=>(Xs(e,"get for query "+jt(t)+" failed: "+s),Promise.reject(new Error(s))))}function qC(e,t,i,s,r){Xs(e,"set",{path:t.toString(),value:i,priority:s});const a=Ar(e),c=Vt(i,s),u=tc(e.serverSyncTree_,t),f=Uf(c,u,a),_=dc(e),g=Bf(e.serverSyncTree_,t,f,_,!0);kr(e.eventQueue_,g),e.server_.put(t.toString(),c.val(!0),(w,T)=>{const A=w==="ok";A||ae("set at "+t+" failed: "+w);const O=Pn(e.serverSyncTree_,_,!A);Ne(e.eventQueue_,t,O),rl(e,r,w,T)});const m=_c(e,t);Zi(e,m),Ne(e.eventQueue_,m,[])}function GC(e,t,i,s){Xs(e,"update",{path:t.toString(),value:i});let r=!0;const a=Ar(e),c={};if(ee(i,(u,f)=>{r=!1,c[u]=Wf(Bt(t,u),Vt(f),e.serverSyncTree_,a)}),r)Jt("update() called with empty data.  Don't do anything."),rl(e,s,"ok",void 0);else{const u=dc(e),f=uC(e.serverSyncTree_,t,c,u);kr(e.eventQueue_,f),e.server_.merge(t.toString(),i,(_,g)=>{const m=_==="ok";m||ae("update at "+t+" failed: "+_);const w=Pn(e.serverSyncTree_,u,!m),T=w.length>0?Zi(e,t):t;Ne(e.eventQueue_,T,w),rl(e,s,_,g)}),ee(i,_=>{const g=_c(e,Bt(t,_));Zi(e,g)}),Ne(e.eventQueue_,t,[])}}function KC(e){Xs(e,"onDisconnectEvents");const t=Ar(e),i=Xo();Xa(e.onDisconnect_,pt(),(r,a)=>{const c=Wf(r,a,e.serverSyncTree_,t);Cf(i,r,c)});let s=[];Xa(i,pt(),(r,a)=>{s=s.concat(Ys(e.serverSyncTree_,r,a));const c=_c(e,r);Zi(e,c)}),e.onDisconnect_=Xo(),Ne(e.eventQueue_,pt(),s)}function YC(e,t,i){let s;et(t._path)===".info"?s=bu(e.infoSyncTree_,t,i):s=bu(e.serverSyncTree_,t,i),hc(e.eventQueue_,t._path,s)}function Tu(e,t,i){let s;et(t._path)===".info"?s=sl(e.infoSyncTree_,t,i):s=sl(e.serverSyncTree_,t,i),hc(e.eventQueue_,t._path,s)}function QC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(HC)}function Xs(e,...t){let i="";e.persistentConnection_&&(i=e.persistentConnection_.id+":"),Jt(i,...t)}function rl(e,t,i,s){t&&Qi(()=>{if(i==="ok")t(null);else{const r=(i||"error").toUpperCase();let a=r;s&&(a+=": "+s);const c=new Error(a);c.code=r,t(c)}})}function Kf(e,t,i){return tc(e.serverSyncTree_,t,i)||G.EMPTY_NODE}function fc(e,t=e.transactionQueueTree_){if(t||Mr(e,t),Ji(t)){const i=Qf(e,t);R(i.length>0,"Sending zero length transaction queue"),i.every(r=>r.status===0)&&XC(e,Qs(t),i)}else $f(t)&&Sr(t,i=>{fc(e,i)})}function XC(e,t,i){const s=i.map(_=>_.currentWriteId),r=Kf(e,t,s);let a=r;const c=r.hash();for(let _=0;_<i.length;_++){const g=i[_];R(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const m=re(t,g.path);a=a.updateChild(m,g.currentOutputSnapshotRaw)}const u=a.val(!0),f=t;e.server_.put(f.toString(),u,_=>{Xs(e,"transaction put response",{path:f.toString(),status:_});let g=[];if(_==="ok"){const m=[];for(let w=0;w<i.length;w++)i[w].status=2,g=g.concat(Pn(e.serverSyncTree_,i[w].currentWriteId)),i[w].onComplete&&m.push(()=>i[w].onComplete(null,!0,i[w].currentOutputSnapshotResolved)),i[w].unwatcher();Mr(e,lc(e.transactionQueueTree_,t)),fc(e,e.transactionQueueTree_),Ne(e.eventQueue_,t,g);for(let w=0;w<m.length;w++)Qi(m[w])}else{if(_==="datastale")for(let m=0;m<i.length;m++)i[m].status===3?i[m].status=4:i[m].status=0;else{ae("transaction at "+f.toString()+" failed: "+_);for(let m=0;m<i.length;m++)i[m].status=4,i[m].abortReason=_}Zi(e,t)}},c)}function Zi(e,t){const i=Yf(e,t),s=Qs(i),r=Qf(e,i);return JC(e,r,s),s}function JC(e,t,i){if(t.length===0)return;const s=[];let r=[];const c=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const f=t[u],_=re(i,f.path);let g=!1,m;if(R(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,m=f.abortReason,r=r.concat(Pn(e.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=WC)g=!0,m="maxretry",r=r.concat(Pn(e.serverSyncTree_,f.currentWriteId,!0));else{const w=Kf(e,f.path,c);f.currentInputSnapshot=w;const T=t[u].update(w.val());if(T!==void 0){Lr("transaction failed: Data returned ",T,f.path);let A=Vt(T);typeof T=="object"&&T!=null&&Ge(T,".priority")||(A=A.updatePriority(w.getPriority()));const Z=f.currentWriteId,j=Ar(e),Y=Uf(A,w,j);f.currentOutputSnapshotRaw=A,f.currentOutputSnapshotResolved=Y,f.currentWriteId=dc(e),c.splice(c.indexOf(Z),1),r=r.concat(Bf(e.serverSyncTree_,f.path,Y,f.currentWriteId,f.applyLocally)),r=r.concat(Pn(e.serverSyncTree_,Z,!0))}else g=!0,m="nodata",r=r.concat(Pn(e.serverSyncTree_,f.currentWriteId,!0))}Ne(e.eventQueue_,i,r),r=[],g&&(t[u].status=2,function(w){setTimeout(w,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(m==="nodata"?s.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):s.push(()=>t[u].onComplete(new Error(m),!1,null))))}Mr(e,e.transactionQueueTree_);for(let u=0;u<s.length;u++)Qi(s[u]);fc(e,e.transactionQueueTree_)}function Yf(e,t){let i,s=e.transactionQueueTree_;for(i=et(t);i!==null&&Ji(s)===void 0;)s=lc(s,i),t=kt(t),i=et(t);return s}function Qf(e,t){const i=[];return Xf(e,t,i),i.sort((s,r)=>s.order-r.order),i}function Xf(e,t,i){const s=Ji(t);if(s)for(let r=0;r<s.length;r++)i.push(s[r]);Sr(t,r=>{Xf(e,r,i)})}function Mr(e,t){const i=Ji(t);if(i){let s=0;for(let r=0;r<i.length;r++)i[r].status!==2&&(i[s]=i[r],s++);i.length=s,Zf(t,i.length>0?i:void 0)}Sr(t,s=>{Mr(e,s)})}function _c(e,t){const i=Qs(Yf(e,t)),s=lc(e.transactionQueueTree_,t);return PC(s,r=>{Pa(e,r)}),Pa(e,s),Vf(s,r=>{Pa(e,r)}),i}function Pa(e,t){const i=Ji(t);if(i){const s=[];let r=[],a=-1;for(let c=0;c<i.length;c++)i[c].status===3||(i[c].status===1?(R(a===c-1,"All SENT items should be at beginning of queue."),a=c,i[c].status=3,i[c].abortReason="set"):(R(i[c].status===0,"Unexpected transaction status in abort"),i[c].unwatcher(),r=r.concat(Pn(e.serverSyncTree_,i[c].currentWriteId,!0)),i[c].onComplete&&s.push(i[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?Zf(t,void 0):i.length=a+1,Ne(e.eventQueue_,Qs(t),r);for(let c=0;c<s.length;c++)Qi(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(e){let t="";const i=e.split("/");for(let s=0;s<i.length;s++)if(i[s].length>0){let r=i[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function ex(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const i of e.split("&")){if(i.length===0)continue;const s=i.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ae(`Invalid query segment '${i}' in query '${e}'`)}return t}const Pu=function(e,t){const i=nx(e),s=i.namespace;i.domain==="firebase.com"&&oi(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&i.domain!=="localhost"&&oi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||ow();const r=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new vw(i.host,i.secure,s,t,r,"",s!==i.subdomain),path:new Et(i.pathString)}},nx=function(e){let t="",i="",s="",r="",a="",c=!0,u="https",f=443;if(typeof e=="string"){let _=e.indexOf("//");_>=0&&(u=e.substring(0,_-1),e=e.substring(_+2));let g=e.indexOf("/");g===-1&&(g=e.length);let m=e.indexOf("?");m===-1&&(m=e.length),t=e.substring(0,Math.min(g,m)),g<m&&(r=tx(e.substring(g,m)));const w=ex(e.substring(Math.min(e.length,m)));_=t.indexOf(":"),_>=0?(c=u==="https"||u==="wss",f=parseInt(t.substring(_+1),10)):_=t.length;const T=t.slice(0,_);if(T.toLowerCase()==="localhost")i="localhost";else if(T.split(".").length<=2)i=T;else{const A=t.indexOf(".");s=t.substring(0,A).toLowerCase(),i=t.substring(A+1),a=s}"ns"in w&&(a=w.ns)}return{host:t,port:f,domain:i,subdomain:s,secure:c,scheme:u,pathString:r,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,i,s,r){this.eventType=t,this.eventRegistration=i,this.snapshot=s,this.prevName=r}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+jt(this.snapshot.exportVal())}}class t_{constructor(t,i,s){this.eventRegistration=t,this.error=i,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,i,s,r){this._repo=t,this._path=i,this._queryParams=s,this._orderByCalled=r}get key(){return at(this._path)?null:Wl(this._path)}get ref(){return new Ke(this._repo,this._path)}get _queryIdentifier(){const t=hu(this._queryParams),i=Dl(t);return i==="{}"?"default":i}get _queryObject(){return hu(this._queryParams)}isEqual(t){if(t=Yi(t),!(t instanceof pc))return!1;const i=this._repo===t._repo,s=Ul(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return i&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+$w(this._path)}}class Ke extends pc{constructor(t,i){super(t,i,new jl,!1)}get parent(){const t=_f(this._path);return t===null?null:new Ke(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class $i{constructor(t,i,s){this._node=t,this.ref=i,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Et(t),s=$s(this.ref,t);return new $i(this._node.getChild(i),s,Ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>t(new $i(r,$s(this.ref,s),Ft)))}hasChild(t){const i=new Et(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ws(e,t){return e=Yi(e),e._checkNotDeleted("ref"),t!==void 0?$s(e._root,t):e._root}function $s(e,t){return e=Yi(e),et(e._path)===null?OC("child","path",t,!1):qf("child","path",t,!1),new Ke(e._repo,Bt(e._path,t))}function sx(e,t){e=Yi(e),DC("set",e._path),MC("set",t,e._path,!1);const i=new _n;return qC(e._repo,e._path,t,null,i.wrapCallback(()=>{})),i.promise}function Iu(e,t){RC("update",t,e._path,!1);const i=new _n;return GC(e._repo,e._path,t,i.wrapCallback(()=>{})),i.promise}function ox(e){return e=Yi(e),jC(e._repo,e).then(t=>new $i(t,new Ke(e._repo,e._path),e._queryParams.getIndex()))}class mc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const s=i._queryParams.getIndex();return new Jf("value",this,new $i(t.snapshotNode,new Ke(i._repo,i._path),s))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new t_(this,t,i):null}matches(t){return t instanceof mc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class gc{constructor(t,i){this.eventType=t,this.callbackContext=i}respondsTo(t){let i=t==="children_added"?"child_added":t;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new t_(this,t,i):null}createEvent(t,i){R(t.childName!=null,"Child events should have a childName.");const s=$s(new Ke(i._repo,i._path),t.childName),r=i._queryParams.getIndex();return new Jf(t.type,this,new $i(t.snapshotNode,s,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof gc?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function rx(e,t,i,s,r){let a;if(typeof s=="object"&&(a=void 0,r=s),typeof s=="function"&&(a=s),r&&r.onlyOnce){const f=i,_=(g,m)=>{Tu(e._repo,e,u),f(g,m)};_.userCallback=i.userCallback,_.context=i.context,i=_}const c=new ix(i,a||void 0),u=t==="value"?new mc(c):new gc(t,c);return YC(e._repo,e,u),()=>Tu(e._repo,e,u)}function ax(e,t,i,s){return rx(e,"value",t,i,s)}iC(Ke);lC(Ke);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="FIREBASE_DATABASE_EMULATOR_HOST",al={};let cx=!1;function hx(e,t,i,s,r){let a=s||e.options.databaseURL;a===void 0&&(e.options.projectId||oi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jt("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=Pu(a,r),u=c.repoInfo,f,_;typeof process!="undefined"&&(_=process.env[lx]),_?(f=!0,a=`http://${_}?ns=${u.namespace}`,c=Pu(a,r),u=c.repoInfo):f=!c.repoInfo.secure;const g=r&&f?new Ka(Ka.OWNER):new mw(e.name,e.options,t);BC("Invalid Firebase Database URL",c),at(c.path)||oi("Database URL must point to the root of a Firebase Database (not including a child path).");const m=dx(u,e,g,new pw(e.name,i));return new fx(m,e)}function ux(e,t){const i=al[t];(!i||i[e.key]!==e)&&oi(`Database ${t}(${e.repoInfo_}) has already been deleted.`),QC(e),delete i[e.key]}function dx(e,t,i,s){let r=al[t.name];r||(r={},al[t.name]=r);let a=r[e.toURLString()];return a&&oi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new UC(e,cx,i,s),r[e.toURLString()]=a,a}class fx{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ZC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ke(this._repo,pt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ux(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&oi("Cannot call "+t+" on a deleted database.")}}function _x(e=Zd(),t){return Rl(e,"database").getImmediate({identifier:t})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(e){tw(Wy),Fi(new ii("database",(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return hx(s,r,a,i)},"PUBLIC").setMultipleInstances(!0)),ei(qh,Gh,e),ei(qh,Gh,"esm2017")}dn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};dn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};px();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new Map,mx={activated:!1,tokenObservers:[]},gx={initialized:!1,enabled:!1};function ie(e){return e_.get(e)||mx}function pn(e,t){e_.set(e,t)}function Nr(){return gx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="https://content-firebaseappcheck.googleapis.com/v1beta",vx="exchangeRecaptchaToken",yx="exchangeDebugToken",Su={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},wx=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t,i,s,r,a){if(this.operation=t,this.retryPolicy=i,this.getWaitDuration=s,this.lowerBound=r,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=r,r>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new _n,await Cx(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new _n,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}}function Cx(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},_e=new Al("appCheck","AppCheck",xx);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function i_(e){if(!ie(e).activated)throw _e.create("use-before-activation",{appName:e.name})}function Ex(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function s_(e){const t=Math.round(e/1e3),i=Math.floor(t/(3600*24)),s=Math.floor((t-i*3600*24)/3600),r=Math.floor((t-i*3600*24-s*3600)/60),a=t-i*3600*24-s*3600-r*60;let c="";return i&&(c+=ko(i)+"d:"),s&&(c+=ko(s)+"h:"),c+=ko(r)+"m:"+ko(a)+"s",c}function ko(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_({url:e,body:t},i){const s={"Content-Type":"application/json"},r=i.getImmediate({optional:!0});if(r){const m=await r.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}const a={method:"POST",body:JSON.stringify(t),headers:s};let c;try{c=await fetch(e,a)}catch(m){throw _e.create("fetch-network-error",{originalErrorMessage:m.message})}if(c.status!==200)throw _e.create("fetch-status-error",{httpStatus:c.status});let u;try{u=await c.json()}catch(m){throw _e.create("fetch-parse-error",{originalErrorMessage:m.message})}const f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw _e.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const _=Number(f[1])*1e3,g=Date.now();return{token:u.attestationToken,expireTimeMillis:g+_,issuedAtTimeMillis:g}}function Tx(e,t){const{projectId:i,appId:s,apiKey:r}=e.options;return{url:`${n_}/projects/${i}/apps/${s}:${vx}?key=${r}`,body:{recaptcha_token:t}}}function Px(e,t){const{projectId:i,appId:s,apiKey:r}=e.options;return{url:`${n_}/projects/${i}/apps/${s}:${yx}?key=${r}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="firebase-app-check-database",Sx=1,Vs="firebase-app-check-store",r_="debug-token";let Ao=null;function a_(){return Ao||(Ao=new Promise((e,t)=>{try{const i=indexedDB.open(Ix,Sx);i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{var r;t(_e.create("storage-open",{originalErrorMessage:(r=s.target.error)===null||r===void 0?void 0:r.message}))},i.onupgradeneeded=s=>{const r=s.target.result;switch(s.oldVersion){case 0:r.createObjectStore(Vs,{keyPath:"compositeKey"})}}}catch(i){t(_e.create("storage-open",{originalErrorMessage:i.message}))}}),Ao)}function Lx(e){return c_(h_(e))}function kx(e,t){return l_(h_(e),t)}function Ax(e){return l_(r_,e)}function Mx(){return c_(r_)}async function l_(e,t){const s=(await a_()).transaction(Vs,"readwrite"),a=s.objectStore(Vs).put({compositeKey:e,value:t});return new Promise((c,u)=>{a.onsuccess=f=>{c()},s.onerror=f=>{var _;u(_e.create("storage-set",{originalErrorMessage:(_=f.target.error)===null||_===void 0?void 0:_.message}))}})}async function c_(e){const i=(await a_()).transaction(Vs,"readonly"),r=i.objectStore(Vs).get(e);return new Promise((a,c)=>{r.onsuccess=u=>{const f=u.target.result;a(f?f.value:void 0)},i.onerror=u=>{var f;c(_e.create("storage-get",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})}function h_(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Ml("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(e){if(Ll()){let t;try{t=await Lx(e)}catch(i){js.warn(`Failed to read token from IndexedDB. Error: ${i}`)}return t}}function ku(e,t){return Ll()?kx(e,t).catch(i=>{js.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}async function Rx(){let e;try{e=await Mx()}catch{}if(e)return e;{const t=Ex();return Ax(t).catch(i=>js.warn(`Failed to persist debug token to IndexedDB. Error: ${i}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){return Nr().enabled}async function d_(){const e=Nr();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Ox(){const e=Wv(),t=Nr();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const i=new _n;t.token=i,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?i.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):i.resolve(Rx())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={error:"UNKNOWN_ERROR"};function Bx(e){return wr.encodeString(JSON.stringify(e),!1)}async function ll(e,t=!1){const i=e.app;i_(i);const s=ie(i);let r=s.token,a;if(!r){const f=await s.cachedTokenPromise;f&&ar(f)&&(r=f)}if(!t&&r&&ar(r))return{token:r.token};let c=!1;if(u_()){s.exchangeTokenPromise||(s.exchangeTokenPromise=o_(Px(i,await d_()),e.heartbeatServiceProvider).then(_=>(s.exchangeTokenPromise=void 0,_)),c=!0);const f=await s.exchangeTokenPromise;return await ku(i,f),pn(i,Object.assign(Object.assign({},s),{token:f})),{token:f.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(f=>(s.exchangeTokenPromise=void 0,f)),c=!0),r=await s.exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"?js.warn(f.message):js.error(f),a=f}let u;return r?(u={token:r.token},pn(i,Object.assign(Object.assign({},s),{token:r})),await ku(i,r)):u=zx(a),c&&p_(i,u),u}function f_(e,t,i,s){const{app:r}=e,a=ie(r),c={next:i,error:s,type:t};if(pn(r,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&ar(a.token)){const u=a.token;Promise.resolve().then(()=>{i({token:u.token}),Au(e)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Au(e))}function __(e,t){const i=ie(e),s=i.tokenObservers.filter(r=>r.next!==t);s.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),pn(e,Object.assign(Object.assign({},i),{tokenObservers:s}))}function Au(e){const{app:t}=e,i=ie(t);let s=i.tokenRefresher;s||(s=Fx(e),pn(t,Object.assign(Object.assign({},i),{tokenRefresher:s}))),!s.isRunning()&&i.isTokenAutoRefreshEnabled&&s.start()}function Fx(e){const{app:t}=e;return new bx(async()=>{const i=ie(t);let s;if(i.token?s=await ll(e,!0):s=await ll(e),s.error)throw s.error},()=>!0,()=>{const i=ie(t);if(i.token){let s=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5;const r=i.token.expireTimeMillis-5*60*1e3;return s=Math.min(s,r),Math.max(0,s-Date.now())}else return 0},Su.RETRIAL_MIN_WAIT,Su.RETRIAL_MAX_WAIT)}function p_(e,t){const i=ie(e).tokenObservers;for(const s of i)try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}function ar(e){return e.expireTimeMillis-Date.now()>0}function zx(e){return{token:Bx(Dx),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(t,i){this.app=t,this.heartbeatServiceProvider=i}_delete(){const{tokenObservers:t}=ie(this.app);for(const i of t)__(this.app,i.next);return Promise.resolve()}}function Wx(e,t){return new Hx(e,t)}function Ux(e){return{getToken:t=>ll(e,t),addTokenListener:t=>f_(e,"INTERNAL",t),removeTokenListener:t=>__(e.app,t)}}const Zx="@firebase/app-check",$x="0.5.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="https://www.google.com/recaptcha/api.js";function jx(e,t){const i=ie(e),s=new _n;pn(e,Object.assign(Object.assign({},i),{reCAPTCHAState:{initialized:s}}));const r=qx(e),a=Lu(!1);return a?Mu(e,t,a,r,s):Yx(()=>{const c=Lu(!1);if(!c)throw new Error("no recaptcha");Mu(e,t,c,r,s)}),s.promise}function Mu(e,t,i,s,r){i.ready(()=>{Kx(e,t,i,s),r.resolve(i)})}function qx(e){const t=`fire_app_check_${e.name}`,i=document.createElement("div");return i.id=t,i.style.display="none",document.body.appendChild(i),t}async function Gx(e){i_(e);const i=await ie(e).reCAPTCHAState.initialized.promise;return new Promise((s,r)=>{const a=ie(e).reCAPTCHAState;i.ready(()=>{s(i.execute(a.widgetId,{action:"fire_app_check"}))})})}function Kx(e,t,i,s){const r=i.render(s,{sitekey:t,size:"invisible"}),a=ie(e);pn(e,Object.assign(Object.assign({},a),{reCAPTCHAState:Object.assign(Object.assign({},a.reCAPTCHAState),{widgetId:r})}))}function Yx(e){const t=document.createElement("script");t.src=Vx,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t;Xx(this._throttleData);const i=await Gx(this._app).catch(r=>{throw _e.create("recaptcha-error")});let s;try{s=await o_(Tx(this._app,i),this._heartbeatServiceProvider)}catch(r){throw r.code==="fetch-status-error"?(this._throttleData=Qx(Number((t=r.customData)===null||t===void 0?void 0:t.httpStatus),this._throttleData),_e.create("throttled",{time:s_(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=Rl(t,"heartbeat"),jx(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof vc?this._siteKey===t._siteKey:!1}}function Qx(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+wx,httpStatus:e};{const i=t?t.backoffCount:0,s=ty(i,1e3,2);return{backoffCount:i+1,allowRequestsAfter:Date.now()+s,httpStatus:e}}}function Xx(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw _e.create("throttled",{time:s_(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(e=Zd(),t){e=Yi(e);const i=Rl(e,"app-check");if(Nr().initialized||Ox(),u_()&&d_().then(r=>console.log(`App Check debug token: ${r}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),i.isInitialized()){const r=i.getImmediate(),a=i.getOptions();if(a.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&a.provider.isEqual(t.provider))return r;throw _e.create("already-initialized",{appName:e.name})}const s=i.initialize({options:t});return tE(e,t.provider,t.isTokenAutoRefreshEnabled),ie(e).isTokenAutoRefreshEnabled&&f_(s,"INTERNAL",()=>{}),s}function tE(e,t,i){const s=ie(e),r=Object.assign(Object.assign({},s),{activated:!0});r.provider=t,r.cachedTokenPromise=Nx(e).then(a=>(a&&ar(a)&&(pn(e,Object.assign(Object.assign({},ie(e)),{token:a})),p_(e,{token:a.token})),a)),r.isTokenAutoRefreshEnabled=i===void 0?e.automaticDataCollectionEnabled:i,pn(e,r),r.provider.initialize(e)}const eE="app-check",Nu="app-check-internal";function nE(){Fi(new ii(eE,e=>{const t=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat");return Wx(t,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider(Nu).initialize()})),Fi(new ii(Nu,e=>{const t=e.getProvider("app-check").getImmediate();return Ux(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ei(Zx,$x)}nE();const iE={key:0,class:"txt"},sE={key:0,class:"bg-dark border input"},oE={class:"row w-100 h-75 mx-auto mt-3"},rE={class:"col-9"},aE={class:"form-floating"},lE={for:"input",class:"text-light"},cE={class:"row mt-3 mx-2"},hE=H("div",{class:"col-2"},"Author",-1),uE={class:"row h-100"},dE=["onClick"],fE={key:0,class:"zero text-light h-75 mt-2 overflow-auto text-break text-wrap txt"},_E={key:1,class:"zero text-light d-flex align-self-center justify-content-end fw-light fs-6"},pE={setup(e){const i=Uy({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=_x(i);Jx(i,{provider:new vc("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let r=60,a=cn(""),c=cn(""),u=cn(""),f=cn({}),_=cn(0);Gi(()=>{O()});function g(F,X){_.value=1,c.value="message",a.value=F,u.value=X}function m(){_.value==0?_.value=1:_.value=0}function w(){let F=Math.ceil(Math.random()*360),X=Math.ceil(Math.random()*75)+25,J=Math.ceil(Math.random()*25)+5;return`background-color:hsla(${F},${X}%,${J}%)`}function T(F){ax(ws(s,`/msg/${F}`),X=>{let J=X.val();try{f.value[F]={msg:J.msg,date:J.date,bg:J.bg,nic:J.nic}}catch{f.value[F]={msg:"",date:"",bg:w(),nic:""}}})}function A(){let F=`pure front end message board
	language:javascript
	framework:Bootstrap,Vue.js
	database:firebase
============================
author:OrzOGC
	junior amatuer developer
	senior mechanical designer
	senior part-time gofer
	and road rage monster`;a.value=F,c.value="about",u.value="OrzOGC"}function O(){j();for(let F=1;F<=r;F++)T(F)}function Z(){let F=a.value,X,J=u.value;J==null&&(J=""),F==""&&(c.value="Oops!"),F!=""&&ox($s(ws(s,"/msg/"),"flag")).then(se=>{let ct=se.val();ct>=r?X=1:X=ct+1;let Ot={day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};sx(ws(s,`/msg/${X}`),{msg:F,date:new Date().toLocaleString("en-US",Ot),bg:w(),nic:J}),Iu(ws(s,"/msg/"),{flag:X}),O(),_.value=0})}function j(){a.value="",c.value="Write some messages",u.value=""}function Y(){for(let F=1;F<=r;F++)Iu(ws(s,`/msg/${F}`),{bg:w()});j()}return(F,X)=>lt(Ln).show_msg==!0?(Ue(),ln("div",iE,[H("div",{class:"bg-dark fab text-warning fs-1 lh-1 fw-bolder text-center",type:"button",onClick:m},"+"),lt(_)==1?(Ue(),ln("div",sE,[H("div",oE,[H("div",rE,[H("div",aE,[be(H("textarea",{id:"input",class:"zero text-light bg-dark h-100 form-control txt","onUpdate:modelValue":X[0]||(X[0]=J=>qt(a)?a.value=J:a=J)},Co(lt(a)),513),[[We,lt(a)]]),H("label",lE,Co(lt(c)),1)])]),H("div",{class:"col w-25 ms-3 me-4 g-1 flex-column d-flex h-100"},[H("div",{type:"button",class:"border rounded badge mb-2 text-success",onClick:Z},"post"),H("div",{type:"button",class:"border rounded mb-2 badge text-danger",onClick:j},"clear"),H("div",{type:"button",class:"border rounded badge mb-2 text-warning",onClick:Y},"reset"),H("div",{type:"button",class:"border rounded badge mb-2 text-info",onClick:A},"about"),H("div",{type:"button",class:"border rounded badge mt-auto",onClick:m},"close")])]),H("div",cE,[hE,be(H("input",{class:"col-5 bg-dark rounded border text-light",type:"text",placeholder:"\u516B\u5366\u5C71\u4E0B\u75E3\u4E5D",maxlength:"50","onUpdate:modelValue":X[1]||(X[1]=J=>qt(u)?u.value=J:u=J)},null,512),[[We,lt(u)]])])])):xs("",!0),H("div",uE,[(Ue(!0),ln(Ie,null,pg(lt(f),J=>(Ue(),ln("div",{class:"col-2 h-25",style:lr(J.bg),onClick:se=>g(J.msg,J.nic)},[J.msg!=""?(Ue(),ln("div",fE,Co(J.msg),1)):xs("",!0),J.date!=""?(Ue(),ln("div",_E,Co(J.date),1)):xs("",!0)],12,dE))),256))])])):xs("",!0)}};yr(nv).mount("#navbar");yr(Av).mount("#map-frame");yr(Rv).mount("#about");yr(pE).mount("#msg");
