const Wp=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}};Wp();function vl(e,t){const i=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)i[s[o]]=!0;return t?o=>!!i[o.toLowerCase()]:o=>!!i[o]}const Hp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Up=vl(Hp);function Vu(e){return!!e||e===""}function fo(e){if(J(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],o=te(s)?Vp(s):fo(s);if(o)for(const a in o)t[a]=o[a]}return t}else{if(te(e))return e;if(Vt(e))return e}}const Zp=/;(?![^(]*\))/g,$p=/:(.+)/;function Vp(e){const t={};return e.split(Zp).forEach(i=>{if(i){const s=i.split($p);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ke(e){let t="";if(te(e))t=e;else if(J(e))for(let i=0;i<e.length;i++){const s=Ke(e[i]);s&&(t+=s+" ")}else if(Vt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function qp(e,t){if(e.length!==t.length)return!1;let i=!0;for(let s=0;i&&s<e.length;s++)i=_o(e[s],t[s]);return i}function _o(e,t){if(e===t)return!0;let i=vh(e),s=vh(t);if(i||s)return i&&s?e.getTime()===t.getTime():!1;if(i=J(e),s=J(t),i||s)return i&&s?qp(e,t):!1;if(i=Vt(e),s=Vt(t),i||s){if(!i||!s)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const c in e){const u=e.hasOwnProperty(c),f=t.hasOwnProperty(c);if(u&&!f||!u&&f||!_o(e[c],t[c]))return!1}}return String(e)===String(t)}function jp(e,t){return e.findIndex(i=>_o(i,t))}const Ln=e=>te(e)?e:e==null?"":J(e)||Vt(e)&&(e.toString===Gu||!ot(e.toString))?JSON.stringify(e,qu,2):String(e),qu=(e,t)=>t&&t.__v_isRef?qu(e,t.value):zi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,o])=>(i[`${s} =>`]=o,i),{})}:mo(t)?{[`Set(${t.size})`]:[...t.values()]}:Vt(t)&&!J(t)&&!Ku(t)?String(t):t,Pt={},Fi=[],Fe=()=>{},Gp=()=>!1,Kp=/^on[^a-z]/,po=e=>Kp.test(e),yl=e=>e.startsWith("onUpdate:"),ae=Object.assign,wl=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Yp=Object.prototype.hasOwnProperty,gt=(e,t)=>Yp.call(e,t),J=Array.isArray,zi=e=>go(e)==="[object Map]",mo=e=>go(e)==="[object Set]",vh=e=>e instanceof Date,ot=e=>typeof e=="function",te=e=>typeof e=="string",bl=e=>typeof e=="symbol",Vt=e=>e!==null&&typeof e=="object",ju=e=>Vt(e)&&ot(e.then)&&ot(e.catch),Gu=Object.prototype.toString,go=e=>Gu.call(e),Qp=e=>go(e).slice(8,-1),Ku=e=>go(e)==="[object Object]",Cl=e=>te(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Rr=vl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vo=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Xp=/-(\w)/g,Ui=vo(e=>e.replace(Xp,(t,i)=>i?i.toUpperCase():"")),Jp=/\B([A-Z])/g,Xi=vo(e=>e.replace(Jp,"-$1").toLowerCase()),Yu=vo(e=>e.charAt(0).toUpperCase()+e.slice(1)),ba=vo(e=>e?`on${Yu(e)}`:""),Ds=(e,t)=>!Object.is(e,t),Or=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},zr=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Wr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let yh;const tm=()=>yh||(yh=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let dn;class em{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&dn&&(this.parent=dn,this.index=(dn.scopes||(dn.scopes=[])).push(this)-1)}run(t){if(this.active)try{return dn=this,t()}finally{dn=this.parent}}on(){dn=this}off(){dn=this.parent}stop(t){if(this.active){let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.scopes)for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function nm(e,t=dn){t&&t.active&&t.effects.push(e)}const xl=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Qu=e=>(e.w&Dn)>0,Xu=e=>(e.n&Dn)>0,im=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Dn},sm=e=>{const{deps:t}=e;if(t.length){let i=0;for(let s=0;s<t.length;s++){const o=t[s];Qu(o)&&!Xu(o)?o.delete(e):t[i++]=o,o.w&=~Dn,o.n&=~Dn}t.length=i}},Ra=new WeakMap;let Ps=0,Dn=1;const Oa=30;let Ye;const si=Symbol(""),Da=Symbol("");class El{constructor(t,i=null,s){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,nm(this,s)}run(){if(!this.active)return this.fn();let t=Ye,i=Mn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ye,Ye=this,Mn=!0,Dn=1<<++Ps,Ps<=Oa?im(this):wh(this),this.fn()}finally{Ps<=Oa&&sm(this),Dn=1<<--Ps,Ye=this.parent,Mn=i,this.parent=void 0}}stop(){this.active&&(wh(this),this.onStop&&this.onStop(),this.active=!1)}}function wh(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Mn=!0;const Ju=[];function Ji(){Ju.push(Mn),Mn=!1}function ts(){const e=Ju.pop();Mn=e===void 0?!0:e}function be(e,t,i){if(Mn&&Ye){let s=Ra.get(e);s||Ra.set(e,s=new Map);let o=s.get(i);o||s.set(i,o=xl()),td(o)}}function td(e,t){let i=!1;Ps<=Oa?Xu(e)||(e.n|=Dn,i=!Qu(e)):i=!e.has(Ye),i&&(e.add(Ye),Ye.deps.push(e))}function gn(e,t,i,s,o,a){const c=Ra.get(e);if(!c)return;let u=[];if(t==="clear")u=[...c.values()];else if(i==="length"&&J(e))c.forEach((f,_)=>{(_==="length"||_>=s)&&u.push(f)});else switch(i!==void 0&&u.push(c.get(i)),t){case"add":J(e)?Cl(i)&&u.push(c.get("length")):(u.push(c.get(si)),zi(e)&&u.push(c.get(Da)));break;case"delete":J(e)||(u.push(c.get(si)),zi(e)&&u.push(c.get(Da)));break;case"set":zi(e)&&u.push(c.get(si));break}if(u.length===1)u[0]&&Ba(u[0]);else{const f=[];for(const _ of u)_&&f.push(..._);Ba(xl(f))}}function Ba(e,t){for(const i of J(e)?e:[...e])(i!==Ye||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const rm=vl("__proto__,__v_isRef,__isVue"),ed=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(bl)),om=Tl(),am=Tl(!1,!0),lm=Tl(!0),bh=cm();function cm(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const s=yt(this);for(let a=0,c=this.length;a<c;a++)be(s,"get",a+"");const o=s[t](...i);return o===-1||o===!1?s[t](...i.map(yt)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){Ji();const s=yt(this)[t].apply(this,i);return ts(),s}}),e}function Tl(e=!1,t=!1){return function(s,o,a){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&a===(e?t?Tm:od:t?rd:sd).get(s))return s;const c=J(s);if(!e&&c&&gt(bh,o))return Reflect.get(bh,o,a);const u=Reflect.get(s,o,a);return(bl(o)?ed.has(o):rm(o))||(e||be(s,"get",o),t)?u:$t(u)?!c||!Cl(o)?u.value:u:Vt(u)?e?ad(u):Sl(u):u}}const hm=nd(),um=nd(!0);function nd(e=!1){return function(i,s,o,a){let c=i[s];if(Bs(c)&&$t(c)&&!$t(o))return!1;if(!e&&!Bs(o)&&(ld(o)||(o=yt(o),c=yt(c)),!J(i)&&$t(c)&&!$t(o)))return c.value=o,!0;const u=J(i)&&Cl(s)?Number(s)<i.length:gt(i,s),f=Reflect.set(i,s,o,a);return i===yt(a)&&(u?Ds(o,c)&&gn(i,"set",s,o):gn(i,"add",s,o)),f}}function dm(e,t){const i=gt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&gn(e,"delete",t,void 0),s}function fm(e,t){const i=Reflect.has(e,t);return(!bl(t)||!ed.has(t))&&be(e,"has",t),i}function _m(e){return be(e,"iterate",J(e)?"length":si),Reflect.ownKeys(e)}const id={get:om,set:hm,deleteProperty:dm,has:fm,ownKeys:_m},pm={get:lm,set(e,t){return!0},deleteProperty(e,t){return!0}},mm=ae({},id,{get:am,set:um}),Pl=e=>e,yo=e=>Reflect.getPrototypeOf(e);function Tr(e,t,i=!1,s=!1){e=e.__v_raw;const o=yt(e),a=yt(t);t!==a&&!i&&be(o,"get",t),!i&&be(o,"get",a);const{has:c}=yo(o),u=s?Pl:i?Ll:Fs;if(c.call(o,t))return u(e.get(t));if(c.call(o,a))return u(e.get(a));e!==o&&e.get(t)}function Pr(e,t=!1){const i=this.__v_raw,s=yt(i),o=yt(e);return e!==o&&!t&&be(s,"has",e),!t&&be(s,"has",o),e===o?i.has(e):i.has(e)||i.has(o)}function Ir(e,t=!1){return e=e.__v_raw,!t&&be(yt(e),"iterate",si),Reflect.get(e,"size",e)}function Ch(e){e=yt(e);const t=yt(this);return yo(t).has.call(t,e)||(t.add(e),gn(t,"add",e,e)),this}function xh(e,t){t=yt(t);const i=yt(this),{has:s,get:o}=yo(i);let a=s.call(i,e);a||(e=yt(e),a=s.call(i,e));const c=o.call(i,e);return i.set(e,t),a?Ds(t,c)&&gn(i,"set",e,t):gn(i,"add",e,t),this}function Eh(e){const t=yt(this),{has:i,get:s}=yo(t);let o=i.call(t,e);o||(e=yt(e),o=i.call(t,e)),s&&s.call(t,e);const a=t.delete(e);return o&&gn(t,"delete",e,void 0),a}function Th(){const e=yt(this),t=e.size!==0,i=e.clear();return t&&gn(e,"clear",void 0,void 0),i}function Sr(e,t){return function(s,o){const a=this,c=a.__v_raw,u=yt(c),f=t?Pl:e?Ll:Fs;return!e&&be(u,"iterate",si),c.forEach((_,g)=>s.call(o,f(_),f(g),a))}}function kr(e,t,i){return function(...s){const o=this.__v_raw,a=yt(o),c=zi(a),u=e==="entries"||e===Symbol.iterator&&c,f=e==="keys"&&c,_=o[e](...s),g=i?Pl:t?Ll:Fs;return!t&&be(a,"iterate",f?Da:si),{next(){const{value:m,done:v}=_.next();return v?{value:m,done:v}:{value:u?[g(m[0]),g(m[1])]:g(m),done:v}},[Symbol.iterator](){return this}}}}function Pn(e){return function(...t){return e==="delete"?!1:this}}function gm(){const e={get(a){return Tr(this,a)},get size(){return Ir(this)},has:Pr,add:Ch,set:xh,delete:Eh,clear:Th,forEach:Sr(!1,!1)},t={get(a){return Tr(this,a,!1,!0)},get size(){return Ir(this)},has:Pr,add:Ch,set:xh,delete:Eh,clear:Th,forEach:Sr(!1,!0)},i={get(a){return Tr(this,a,!0)},get size(){return Ir(this,!0)},has(a){return Pr.call(this,a,!0)},add:Pn("add"),set:Pn("set"),delete:Pn("delete"),clear:Pn("clear"),forEach:Sr(!0,!1)},s={get(a){return Tr(this,a,!0,!0)},get size(){return Ir(this,!0)},has(a){return Pr.call(this,a,!0)},add:Pn("add"),set:Pn("set"),delete:Pn("delete"),clear:Pn("clear"),forEach:Sr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=kr(a,!1,!1),i[a]=kr(a,!0,!1),t[a]=kr(a,!1,!0),s[a]=kr(a,!0,!0)}),[e,i,t,s]}const[vm,ym,wm,bm]=gm();function Il(e,t){const i=t?e?bm:wm:e?ym:vm;return(s,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(gt(i,o)&&o in s?i:s,o,a)}const Cm={get:Il(!1,!1)},xm={get:Il(!1,!0)},Em={get:Il(!0,!1)},sd=new WeakMap,rd=new WeakMap,od=new WeakMap,Tm=new WeakMap;function Pm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Im(e){return e.__v_skip||!Object.isExtensible(e)?0:Pm(Qp(e))}function Sl(e){return Bs(e)?e:kl(e,!1,id,Cm,sd)}function Sm(e){return kl(e,!1,mm,xm,rd)}function ad(e){return kl(e,!0,pm,Em,od)}function kl(e,t,i,s,o){if(!Vt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const c=Im(e);if(c===0)return e;const u=new Proxy(e,c===2?s:i);return o.set(e,u),u}function Wi(e){return Bs(e)?Wi(e.__v_raw):!!(e&&e.__v_isReactive)}function Bs(e){return!!(e&&e.__v_isReadonly)}function ld(e){return!!(e&&e.__v_isShallow)}function cd(e){return Wi(e)||Bs(e)}function yt(e){const t=e&&e.__v_raw;return t?yt(t):e}function hd(e){return zr(e,"__v_skip",!0),e}const Fs=e=>Vt(e)?Sl(e):e,Ll=e=>Vt(e)?ad(e):e;function ud(e){Mn&&Ye&&(e=yt(e),td(e.dep||(e.dep=xl())))}function dd(e,t){e=yt(e),e.dep&&Ba(e.dep)}function $t(e){return!!(e&&e.__v_isRef===!0)}function Re(e){return km(e,!1)}function km(e,t){return $t(e)?e:new Lm(e,t)}class Lm{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:yt(t),this._value=i?t:Fs(t)}get value(){return ud(this),this._value}set value(t){t=this.__v_isShallow?t:yt(t),Ds(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Fs(t),dd(this))}}function et(e){return $t(e)?e.value:e}const Am={get:(e,t,i)=>et(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const o=e[t];return $t(o)&&!$t(i)?(o.value=i,!0):Reflect.set(e,t,i,s)}};function fd(e){return Wi(e)?e:new Proxy(e,Am)}class Mm{constructor(t,i,s,o){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new El(t,()=>{this._dirty||(this._dirty=!0,dd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=yt(this);return ud(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Nm(e,t,i=!1){let s,o;const a=ot(e);return a?(s=e,o=Fe):(s=e.get,o=e.set),new Mm(s,o,a||!o,i)}Promise.resolve();function Nn(e,t,i,s){let o;try{o=s?e(...s):e()}catch(a){wo(a,t,i)}return o}function Le(e,t,i,s){if(ot(e)){const a=Nn(e,t,i,s);return a&&ju(a)&&a.catch(c=>{wo(c,t,i)}),a}const o=[];for(let a=0;a<e.length;a++)o.push(Le(e[a],t,i,s));return o}function wo(e,t,i,s=!0){const o=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,u=i;for(;a;){const _=a.ec;if(_){for(let g=0;g<_.length;g++)if(_[g](e,c,u)===!1)return}a=a.parent}const f=t.appContext.config.errorHandler;if(f){Nn(f,null,10,[e,c,u]);return}}Rm(e,i,o,s)}function Rm(e,t,i,s=!0){console.error(e)}let Hr=!1,Fa=!1;const ye=[];let fn=0;const ks=[];let Is=null,Ri=0;const Ls=[];let In=null,Oi=0;const _d=Promise.resolve();let Al=null,za=null;function Om(e){const t=Al||_d;return e?t.then(this?e.bind(this):e):t}function Dm(e){let t=fn+1,i=ye.length;for(;t<i;){const s=t+i>>>1;zs(ye[s])<e?t=s+1:i=s}return t}function pd(e){(!ye.length||!ye.includes(e,Hr&&e.allowRecurse?fn+1:fn))&&e!==za&&(e.id==null?ye.push(e):ye.splice(Dm(e.id),0,e),md())}function md(){!Hr&&!Fa&&(Fa=!0,Al=_d.then(yd))}function Bm(e){const t=ye.indexOf(e);t>fn&&ye.splice(t,1)}function gd(e,t,i,s){J(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&i.push(e),md()}function Fm(e){gd(e,Is,ks,Ri)}function zm(e){gd(e,In,Ls,Oi)}function Ml(e,t=null){if(ks.length){for(za=t,Is=[...new Set(ks)],ks.length=0,Ri=0;Ri<Is.length;Ri++)Is[Ri]();Is=null,Ri=0,za=null,Ml(e,t)}}function vd(e){if(Ls.length){const t=[...new Set(Ls)];if(Ls.length=0,In){In.push(...t);return}for(In=t,In.sort((i,s)=>zs(i)-zs(s)),Oi=0;Oi<In.length;Oi++)In[Oi]();In=null,Oi=0}}const zs=e=>e.id==null?1/0:e.id;function yd(e){Fa=!1,Hr=!0,Ml(e),ye.sort((i,s)=>zs(i)-zs(s));const t=Fe;try{for(fn=0;fn<ye.length;fn++){const i=ye[fn];i&&i.active!==!1&&Nn(i,null,14)}}finally{fn=0,ye.length=0,vd(),Hr=!1,Al=null,(ye.length||ks.length||Ls.length)&&yd(e)}}function Wm(e,t,...i){const s=e.vnode.props||Pt;let o=i;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:m,trim:v}=s[g]||Pt;v?o=i.map(T=>T.trim()):m&&(o=i.map(Wr))}let u,f=s[u=ba(t)]||s[u=ba(Ui(t))];!f&&a&&(f=s[u=ba(Xi(t))]),f&&Le(f,e,6,o);const _=s[u+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,Le(_,e,6,o)}}function wd(e,t,i=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const a=e.emits;let c={},u=!1;if(!ot(e)){const f=_=>{const g=wd(_,t,!0);g&&(u=!0,ae(c,g))};!i&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!a&&!u?(s.set(e,null),null):(J(a)?a.forEach(f=>c[f]=null):ae(c,a),s.set(e,c),c)}function Nl(e,t){return!e||!po(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,Xi(t))||gt(e,t))}let De=null,bd=null;function Ur(e){const t=De;return De=e,bd=e&&e.type.__scopeId||null,t}function Hm(e,t=De,i){if(!t||e._n)return e;const s=(...o)=>{s._d&&Oh(-1);const a=Ur(t),c=e(...o);return Ur(a),s._d&&Oh(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function Ca(e){const{type:t,vnode:i,proxy:s,withProxy:o,props:a,propsOptions:[c],slots:u,attrs:f,emit:_,render:g,renderCache:m,data:v,setupState:T,ctx:A,inheritAttrs:D}=e;let $,nt;const Mt=Ur(e);try{if(i.shapeFlag&4){const X=o||s;$=Ge(g.call(X,X,m,a,T,v,A)),nt=f}else{const X=t;$=Ge(X.length>1?X(a,{attrs:f,slots:u,emit:_}):X(a,null)),nt=t.props?f:Um(f)}}catch(X){As.length=0,wo(X,e,1),$=Xe(Je)}let q=$;if(nt&&D!==!1){const X=Object.keys(nt),{shapeFlag:tt}=q;X.length&&tt&7&&(c&&X.some(yl)&&(nt=Zm(nt,c)),q=Zi(q,nt))}return i.dirs&&(q.dirs=q.dirs?q.dirs.concat(i.dirs):i.dirs),i.transition&&(q.transition=i.transition),$=q,Ur(Mt),$}const Um=e=>{let t;for(const i in e)(i==="class"||i==="style"||po(i))&&((t||(t={}))[i]=e[i]);return t},Zm=(e,t)=>{const i={};for(const s in e)(!yl(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function $m(e,t,i){const{props:s,children:o,component:a}=e,{props:c,children:u,patchFlag:f}=t,_=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&f>=0){if(f&1024)return!0;if(f&16)return s?Ph(s,c,_):!!c;if(f&8){const g=t.dynamicProps;for(let m=0;m<g.length;m++){const v=g[m];if(c[v]!==s[v]&&!Nl(_,v))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:s===c?!1:s?c?Ph(s,c,_):!0:!!c;return!1}function Ph(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const a=s[o];if(t[a]!==e[a]&&!Nl(i,a))return!0}return!1}function Vm({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const qm=e=>e.__isSuspense;function jm(e,t){t&&t.pendingBranch?J(e)?t.effects.push(...e):t.effects.push(e):zm(e)}function Gm(e,t){if(ie){let i=ie.provides;const s=ie.parent&&ie.parent.provides;s===i&&(i=ie.provides=Object.create(s)),i[e]=t}}function xa(e,t,i=!1){const s=ie||De;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return i&&ot(t)?t.call(s.proxy):t}}const Ih={};function Dr(e,t,i){return Cd(e,t,i)}function Cd(e,t,{immediate:i,deep:s,flush:o,onTrack:a,onTrigger:c}=Pt){const u=ie;let f,_=!1,g=!1;if($t(e)?(f=()=>e.value,_=ld(e)):Wi(e)?(f=()=>e,s=!0):J(e)?(g=!0,_=e.some(Wi),f=()=>e.map(nt=>{if($t(nt))return nt.value;if(Wi(nt))return ni(nt);if(ot(nt))return Nn(nt,u,2)})):ot(e)?t?f=()=>Nn(e,u,2):f=()=>{if(!(u&&u.isUnmounted))return m&&m(),Le(e,u,3,[v])}:f=Fe,t&&s){const nt=f;f=()=>ni(nt())}let m,v=nt=>{m=$.onStop=()=>{Nn(nt,u,4)}};if(Ws)return v=Fe,t?i&&Le(t,u,3,[f(),g?[]:void 0,v]):f(),Fe;let T=g?[]:Ih;const A=()=>{if(!!$.active)if(t){const nt=$.run();(s||_||(g?nt.some((Mt,q)=>Ds(Mt,T[q])):Ds(nt,T)))&&(m&&m(),Le(t,u,3,[nt,T===Ih?void 0:T,v]),T=nt)}else $.run()};A.allowRecurse=!!t;let D;o==="sync"?D=A:o==="post"?D=()=>me(A,u&&u.suspense):D=()=>{!u||u.isMounted?Fm(A):A()};const $=new El(f,D);return t?i?A():T=$.run():o==="post"?me($.run.bind($),u&&u.suspense):$.run(),()=>{$.stop(),u&&u.scope&&wl(u.scope.effects,$)}}function Km(e,t,i){const s=this.proxy,o=te(e)?e.includes(".")?xd(s,e):()=>s[e]:e.bind(s,s);let a;ot(t)?a=t:(a=t.handler,i=t);const c=ie;$i(this);const u=Cd(o,a.bind(s),i);return c?$i(c):oi(),u}function xd(e,t){const i=t.split(".");return()=>{let s=e;for(let o=0;o<i.length&&s;o++)s=s[i[o]];return s}}function ni(e,t){if(!Vt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),$t(e))ni(e.value,t);else if(J(e))for(let i=0;i<e.length;i++)ni(e[i],t);else if(mo(e)||zi(e))e.forEach(i=>{ni(i,t)});else if(Ku(e))for(const i in e)ni(e[i],t);return e}function Ym(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return es(()=>{e.isMounted=!0}),Id(()=>{e.isUnmounting=!0}),e}const Te=[Function,Array],Qm={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Te,onEnter:Te,onAfterEnter:Te,onEnterCancelled:Te,onBeforeLeave:Te,onLeave:Te,onAfterLeave:Te,onLeaveCancelled:Te,onBeforeAppear:Te,onAppear:Te,onAfterAppear:Te,onAppearCancelled:Te},setup(e,{slots:t}){const i=Fg(),s=Ym();let o;return()=>{const a=t.default&&Td(t.default(),!0);if(!a||!a.length)return;const c=yt(e),{mode:u}=c,f=a[0];if(s.isLeaving)return Ea(f);const _=Sh(f);if(!_)return Ea(f);const g=Wa(_,c,s,i);Ha(_,g);const m=i.subTree,v=m&&Sh(m);let T=!1;const{getTransitionKey:A}=_.type;if(A){const D=A();o===void 0?o=D:D!==o&&(o=D,T=!0)}if(v&&v.type!==Je&&(!Jn(_,v)||T)){const D=Wa(v,c,s,i);if(Ha(v,D),u==="out-in")return s.isLeaving=!0,D.afterLeave=()=>{s.isLeaving=!1,i.update()},Ea(f);u==="in-out"&&_.type!==Je&&(D.delayLeave=($,nt,Mt)=>{const q=Ed(s,v);q[String(v.key)]=v,$._leaveCb=()=>{nt(),$._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=Mt})}return f}}},Xm=Qm;function Ed(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function Wa(e,t,i,s){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:_,onEnterCancelled:g,onBeforeLeave:m,onLeave:v,onAfterLeave:T,onLeaveCancelled:A,onBeforeAppear:D,onAppear:$,onAfterAppear:nt,onAppearCancelled:Mt}=t,q=String(e.key),X=Ed(i,e),tt=(ut,Nt)=>{ut&&Le(ut,s,9,Nt)},Yt={mode:a,persisted:c,beforeEnter(ut){let Nt=u;if(!i.isMounted)if(o)Nt=D||u;else return;ut._leaveCb&&ut._leaveCb(!0);const It=X[q];It&&Jn(e,It)&&It.el._leaveCb&&It.el._leaveCb(),tt(Nt,[ut])},enter(ut){let Nt=f,It=_,re=g;if(!i.isMounted)if(o)Nt=$||f,It=nt||_,re=Mt||g;else return;let W=!1;const M=ut._enterCb=K=>{W||(W=!0,K?tt(re,[ut]):tt(It,[ut]),Yt.delayedLeave&&Yt.delayedLeave(),ut._enterCb=void 0)};Nt?(Nt(ut,M),Nt.length<=1&&M()):M()},leave(ut,Nt){const It=String(e.key);if(ut._enterCb&&ut._enterCb(!0),i.isUnmounting)return Nt();tt(m,[ut]);let re=!1;const W=ut._leaveCb=M=>{re||(re=!0,Nt(),M?tt(A,[ut]):tt(T,[ut]),ut._leaveCb=void 0,X[It]===e&&delete X[It])};X[It]=e,v?(v(ut,W),v.length<=1&&W()):W()},clone(ut){return Wa(ut,t,i,s)}};return Yt}function Ea(e){if(bo(e))return e=Zi(e),e.children=null,e}function Sh(e){return bo(e)?e.children?e.children[0]:void 0:e}function Ha(e,t){e.shapeFlag&6&&e.component?Ha(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Td(e,t=!1){let i=[],s=0;for(let o=0;o<e.length;o++){const a=e[o];a.type===Se?(a.patchFlag&128&&s++,i=i.concat(Td(a.children,t))):(t||a.type!==Je)&&i.push(a)}if(s>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}const Ua=e=>!!e.type.__asyncLoader,bo=e=>e.type.__isKeepAlive;function Jm(e,t){Pd(e,"a",t)}function tg(e,t){Pd(e,"da",t)}function Pd(e,t,i=ie){const s=e.__wdc||(e.__wdc=()=>{let o=i;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Co(t,s,i),i){let o=i.parent;for(;o&&o.parent;)bo(o.parent.vnode)&&eg(s,t,i,o),o=o.parent}}function eg(e,t,i,s){const o=Co(t,e,s,!0);Sd(()=>{wl(s[t],o)},i)}function Co(e,t,i=ie,s=!1){if(i){const o=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...c)=>{if(i.isUnmounted)return;Ji(),$i(i);const u=Le(t,i,e,c);return oi(),ts(),u});return s?o.unshift(a):o.push(a),a}}const wn=e=>(t,i=ie)=>(!Ws||e==="sp")&&Co(e,t,i),ng=wn("bm"),es=wn("m"),ig=wn("bu"),sg=wn("u"),Id=wn("bum"),Sd=wn("um"),rg=wn("sp"),og=wn("rtg"),ag=wn("rtc");function lg(e,t=ie){Co("ec",e,t)}let Za=!0;function cg(e){const t=Ld(e),i=e.proxy,s=e.ctx;Za=!1,t.beforeCreate&&kh(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:u,provide:f,inject:_,created:g,beforeMount:m,mounted:v,beforeUpdate:T,updated:A,activated:D,deactivated:$,beforeDestroy:nt,beforeUnmount:Mt,destroyed:q,unmounted:X,render:tt,renderTracked:Yt,renderTriggered:ut,errorCaptured:Nt,serverPrefetch:It,expose:re,inheritAttrs:W,components:M,directives:K,filters:qt}=t;if(_&&hg(_,s,null,e.appContext.config.unwrapInjectedRef),c)for(const xt in c){const U=c[xt];ot(U)&&(s[xt]=U.bind(i))}if(o){const xt=o.call(i,i);Vt(xt)&&(e.data=Sl(xt))}if(Za=!0,a)for(const xt in a){const U=a[xt],Ce=ot(U)?U.bind(i,i):ot(U.get)?U.get.bind(i,i):Fe,lt=!ot(U)&&ot(U.set)?U.set.bind(i):Fe,wt=$g({get:Ce,set:lt});Object.defineProperty(s,xt,{enumerable:!0,configurable:!0,get:()=>wt.value,set:Qt=>wt.value=Qt})}if(u)for(const xt in u)kd(u[xt],s,i,xt);if(f){const xt=ot(f)?f.call(i):f;Reflect.ownKeys(xt).forEach(U=>{Gm(U,xt[U])})}g&&kh(g,e,"c");function dt(xt,U){J(U)?U.forEach(Ce=>xt(Ce.bind(i))):U&&xt(U.bind(i))}if(dt(ng,m),dt(es,v),dt(ig,T),dt(sg,A),dt(Jm,D),dt(tg,$),dt(lg,Nt),dt(ag,Yt),dt(og,ut),dt(Id,Mt),dt(Sd,X),dt(rg,It),J(re))if(re.length){const xt=e.exposed||(e.exposed={});re.forEach(U=>{Object.defineProperty(xt,U,{get:()=>i[U],set:Ce=>i[U]=Ce})})}else e.exposed||(e.exposed={});tt&&e.render===Fe&&(e.render=tt),W!=null&&(e.inheritAttrs=W),M&&(e.components=M),K&&(e.directives=K)}function hg(e,t,i=Fe,s=!1){J(e)&&(e=$a(e));for(const o in e){const a=e[o];let c;Vt(a)?"default"in a?c=xa(a.from||o,a.default,!0):c=xa(a.from||o):c=xa(a),$t(c)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>c.value,set:u=>c.value=u}):t[o]=c}}function kh(e,t,i){Le(J(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function kd(e,t,i,s){const o=s.includes(".")?xd(i,s):()=>i[s];if(te(e)){const a=t[e];ot(a)&&Dr(o,a)}else if(ot(e))Dr(o,e.bind(i));else if(Vt(e))if(J(e))e.forEach(a=>kd(a,t,i,s));else{const a=ot(e.handler)?e.handler.bind(i):t[e.handler];ot(a)&&Dr(o,a,e)}}function Ld(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,u=a.get(t);let f;return u?f=u:!o.length&&!i&&!s?f=t:(f={},o.length&&o.forEach(_=>Zr(f,_,c,!0)),Zr(f,t,c)),a.set(t,f),f}function Zr(e,t,i,s=!1){const{mixins:o,extends:a}=t;a&&Zr(e,a,i,!0),o&&o.forEach(c=>Zr(e,c,i,!0));for(const c in t)if(!(s&&c==="expose")){const u=ug[c]||i&&i[c];e[c]=u?u(e[c],t[c]):t[c]}return e}const ug={data:Lh,props:Yn,emits:Yn,methods:Yn,computed:Yn,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:Yn,directives:Yn,watch:fg,provide:Lh,inject:dg};function Lh(e,t){return t?e?function(){return ae(ot(e)?e.call(this,this):e,ot(t)?t.call(this,this):t)}:t:e}function dg(e,t){return Yn($a(e),$a(t))}function $a(e){if(J(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ce(e,t){return e?[...new Set([].concat(e,t))]:t}function Yn(e,t){return e?ae(ae(Object.create(null),e),t):t}function fg(e,t){if(!e)return t;if(!t)return e;const i=ae(Object.create(null),e);for(const s in t)i[s]=ce(e[s],t[s]);return i}function _g(e,t,i,s=!1){const o={},a={};zr(a,xo,1),e.propsDefaults=Object.create(null),Ad(e,t,o,a);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);i?e.props=s?o:Sm(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function pg(e,t,i,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,u=yt(o),[f]=e.propsOptions;let _=!1;if((s||c>0)&&!(c&16)){if(c&8){const g=e.vnode.dynamicProps;for(let m=0;m<g.length;m++){let v=g[m];const T=t[v];if(f)if(gt(a,v))T!==a[v]&&(a[v]=T,_=!0);else{const A=Ui(v);o[A]=Va(f,u,A,T,e,!1)}else T!==a[v]&&(a[v]=T,_=!0)}}}else{Ad(e,t,o,a)&&(_=!0);let g;for(const m in u)(!t||!gt(t,m)&&((g=Xi(m))===m||!gt(t,g)))&&(f?i&&(i[m]!==void 0||i[g]!==void 0)&&(o[m]=Va(f,u,m,void 0,e,!0)):delete o[m]);if(a!==u)for(const m in a)(!t||!gt(t,m)&&!0)&&(delete a[m],_=!0)}_&&gn(e,"set","$attrs")}function Ad(e,t,i,s){const[o,a]=e.propsOptions;let c=!1,u;if(t)for(let f in t){if(Rr(f))continue;const _=t[f];let g;o&&gt(o,g=Ui(f))?!a||!a.includes(g)?i[g]=_:(u||(u={}))[g]=_:Nl(e.emitsOptions,f)||(!(f in s)||_!==s[f])&&(s[f]=_,c=!0)}if(a){const f=yt(i),_=u||Pt;for(let g=0;g<a.length;g++){const m=a[g];i[m]=Va(o,f,m,_[m],e,!gt(_,m))}}return c}function Va(e,t,i,s,o,a){const c=e[i];if(c!=null){const u=gt(c,"default");if(u&&s===void 0){const f=c.default;if(c.type!==Function&&ot(f)){const{propsDefaults:_}=o;i in _?s=_[i]:($i(o),s=_[i]=f.call(null,t),oi())}else s=f}c[0]&&(a&&!u?s=!1:c[1]&&(s===""||s===Xi(i))&&(s=!0))}return s}function Md(e,t,i=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const a=e.props,c={},u=[];let f=!1;if(!ot(e)){const g=m=>{f=!0;const[v,T]=Md(m,t,!0);ae(c,v),T&&u.push(...T)};!i&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!f)return s.set(e,Fi),Fi;if(J(a))for(let g=0;g<a.length;g++){const m=Ui(a[g]);Ah(m)&&(c[m]=Pt)}else if(a)for(const g in a){const m=Ui(g);if(Ah(m)){const v=a[g],T=c[m]=J(v)||ot(v)?{type:v}:v;if(T){const A=Rh(Boolean,T.type),D=Rh(String,T.type);T[0]=A>-1,T[1]=D<0||A<D,(A>-1||gt(T,"default"))&&u.push(m)}}}const _=[c,u];return s.set(e,_),_}function Ah(e){return e[0]!=="$"}function Mh(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Nh(e,t){return Mh(e)===Mh(t)}function Rh(e,t){return J(t)?t.findIndex(i=>Nh(i,e)):ot(t)&&Nh(t,e)?0:-1}const Nd=e=>e[0]==="_"||e==="$stable",Rl=e=>J(e)?e.map(Ge):[Ge(e)],mg=(e,t,i)=>{const s=Hm((...o)=>Rl(t(...o)),i);return s._c=!1,s},Rd=(e,t,i)=>{const s=e._ctx;for(const o in e){if(Nd(o))continue;const a=e[o];if(ot(a))t[o]=mg(o,a,s);else if(a!=null){const c=Rl(a);t[o]=()=>c}}},Od=(e,t)=>{const i=Rl(t);e.slots.default=()=>i},gg=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=yt(t),zr(t,"_",i)):Rd(t,e.slots={})}else e.slots={},t&&Od(e,t);zr(e.slots,xo,1)},vg=(e,t,i)=>{const{vnode:s,slots:o}=e;let a=!0,c=Pt;if(s.shapeFlag&32){const u=t._;u?i&&u===1?a=!1:(ae(o,t),!i&&u===1&&delete o._):(a=!t.$stable,Rd(t,o)),c=t}else t&&(Od(e,t),c={default:1});if(a)for(const u in o)!Nd(u)&&!(u in c)&&delete o[u]};function pe(e,t){const i=De;if(i===null)return e;const s=i.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[c,u,f,_=Pt]=t[a];ot(c)&&(c={mounted:c,updated:c}),c.deep&&ni(u),o.push({dir:c,instance:s,value:u,oldValue:void 0,arg:f,modifiers:_})}return e}function Gn(e,t,i,s){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const u=o[c];a&&(u.oldValue=a[c].value);let f=u.dir[s];f&&(Ji(),Le(f,i,8,[e.el,u,e,t]),ts())}}function Dd(){return{app:null,config:{isNativeTag:Gp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yg=0;function wg(e,t){return function(s,o=null){o!=null&&!Vt(o)&&(o=null);const a=Dd(),c=new Set;let u=!1;const f=a.app={_uid:yg++,_component:s,_props:o,_container:null,_context:a,_instance:null,version:Vg,get config(){return a.config},set config(_){},use(_,...g){return c.has(_)||(_&&ot(_.install)?(c.add(_),_.install(f,...g)):ot(_)&&(c.add(_),_(f,...g))),f},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),f},component(_,g){return g?(a.components[_]=g,f):a.components[_]},directive(_,g){return g?(a.directives[_]=g,f):a.directives[_]},mount(_,g,m){if(!u){const v=Xe(s,o);return v.appContext=a,g&&t?t(v,_):e(v,_,m),u=!0,f._container=_,_.__vue_app__=f,Bl(v.component)||v.component.proxy}},unmount(){u&&(e(null,f._container),delete f._container.__vue_app__)},provide(_,g){return a.provides[_]=g,f}};return f}}function qa(e,t,i,s,o=!1){if(J(e)){e.forEach((v,T)=>qa(v,t&&(J(t)?t[T]:t),i,s,o));return}if(Ua(s)&&!o)return;const a=s.shapeFlag&4?Bl(s.component)||s.component.proxy:s.el,c=o?null:a,{i:u,r:f}=e,_=t&&t.r,g=u.refs===Pt?u.refs={}:u.refs,m=u.setupState;if(_!=null&&_!==f&&(te(_)?(g[_]=null,gt(m,_)&&(m[_]=null)):$t(_)&&(_.value=null)),ot(f))Nn(f,u,12,[c,g]);else{const v=te(f),T=$t(f);if(v||T){const A=()=>{if(e.f){const D=v?g[f]:f.value;o?J(D)&&wl(D,a):J(D)?D.includes(a)||D.push(a):v?g[f]=[a]:(f.value=[a],e.k&&(g[e.k]=f.value))}else v?(g[f]=c,gt(m,f)&&(m[f]=c)):$t(f)&&(f.value=c,e.k&&(g[e.k]=c))};c?(A.id=-1,me(A,i)):A()}}}const me=jm;function bg(e){return Cg(e)}function Cg(e,t){const i=tm();i.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:u,createComment:f,setText:_,setElementText:g,parentNode:m,nextSibling:v,setScopeId:T=Fe,cloneNode:A,insertStaticContent:D}=e,$=(y,b,E,S=null,I=null,R=null,z=!1,N=null,B=!!b.dynamicChildren)=>{if(y===b)return;y&&!Jn(y,b)&&(S=ve(y),Ot(y,I,R,!0),y=null),b.patchFlag===-2&&(B=!1,b.dynamicChildren=null);const{type:k,ref:V,shapeFlag:Z}=b;switch(k){case Ol:nt(y,b,E,S);break;case Je:Mt(y,b,E,S);break;case Br:y==null&&q(b,E,S,z);break;case Se:K(y,b,E,S,I,R,z,N,B);break;default:Z&1?Yt(y,b,E,S,I,R,z,N,B):Z&6?qt(y,b,E,S,I,R,z,N,B):(Z&64||Z&128)&&k.process(y,b,E,S,I,R,z,N,B,He)}V!=null&&I&&qa(V,y&&y.ref,R,b||y,!b)},nt=(y,b,E,S)=>{if(y==null)s(b.el=u(b.children),E,S);else{const I=b.el=y.el;b.children!==y.children&&_(I,b.children)}},Mt=(y,b,E,S)=>{y==null?s(b.el=f(b.children||""),E,S):b.el=y.el},q=(y,b,E,S)=>{[y.el,y.anchor]=D(y.children,b,E,S,y.el,y.anchor)},X=({el:y,anchor:b},E,S)=>{let I;for(;y&&y!==b;)I=v(y),s(y,E,S),y=I;s(b,E,S)},tt=({el:y,anchor:b})=>{let E;for(;y&&y!==b;)E=v(y),o(y),y=E;o(b)},Yt=(y,b,E,S,I,R,z,N,B)=>{z=z||b.type==="svg",y==null?ut(b,E,S,I,R,z,N,B):re(y,b,I,R,z,N,B)},ut=(y,b,E,S,I,R,z,N)=>{let B,k;const{type:V,props:Z,shapeFlag:j,transition:Q,patchFlag:ct,dirs:Et}=y;if(y.el&&A!==void 0&&ct===-1)B=y.el=A(y.el);else{if(B=y.el=c(y.type,R,Z&&Z.is,Z),j&8?g(B,y.children):j&16&&It(y.children,B,null,S,I,R&&V!=="foreignObject",z,N),Et&&Gn(y,null,S,"created"),Z){for(const Tt in Z)Tt!=="value"&&!Rr(Tt)&&a(B,Tt,null,Z[Tt],R,y.children,S,I,jt);"value"in Z&&a(B,"value",null,Z.value),(k=Z.onVnodeBeforeMount)&&je(k,S,y)}Nt(B,y,y.scopeId,z,S)}Et&&Gn(y,null,S,"beforeMount");const _t=(!I||I&&!I.pendingBranch)&&Q&&!Q.persisted;_t&&Q.beforeEnter(B),s(B,b,E),((k=Z&&Z.onVnodeMounted)||_t||Et)&&me(()=>{k&&je(k,S,y),_t&&Q.enter(B),Et&&Gn(y,null,S,"mounted")},I)},Nt=(y,b,E,S,I)=>{if(E&&T(y,E),S)for(let R=0;R<S.length;R++)T(y,S[R]);if(I){let R=I.subTree;if(b===R){const z=I.vnode;Nt(y,z,z.scopeId,z.slotScopeIds,I.parent)}}},It=(y,b,E,S,I,R,z,N,B=0)=>{for(let k=B;k<y.length;k++){const V=y[k]=N?Sn(y[k]):Ge(y[k]);$(null,V,b,E,S,I,R,z,N)}},re=(y,b,E,S,I,R,z)=>{const N=b.el=y.el;let{patchFlag:B,dynamicChildren:k,dirs:V}=b;B|=y.patchFlag&16;const Z=y.props||Pt,j=b.props||Pt;let Q;E&&Kn(E,!1),(Q=j.onVnodeBeforeUpdate)&&je(Q,E,b,y),V&&Gn(b,y,E,"beforeUpdate"),E&&Kn(E,!0);const ct=I&&b.type!=="foreignObject";if(k?W(y.dynamicChildren,k,N,E,S,ct,R):z||Ce(y,b,N,null,E,S,ct,R,!1),B>0){if(B&16)M(N,b,Z,j,E,S,I);else if(B&2&&Z.class!==j.class&&a(N,"class",null,j.class,I),B&4&&a(N,"style",Z.style,j.style,I),B&8){const Et=b.dynamicProps;for(let _t=0;_t<Et.length;_t++){const Tt=Et[_t],fe=Z[Tt],sn=j[Tt];(sn!==fe||Tt==="value")&&a(N,Tt,fe,sn,I,y.children,E,S,jt)}}B&1&&y.children!==b.children&&g(N,b.children)}else!z&&k==null&&M(N,b,Z,j,E,S,I);((Q=j.onVnodeUpdated)||V)&&me(()=>{Q&&je(Q,E,b,y),V&&Gn(b,y,E,"updated")},S)},W=(y,b,E,S,I,R,z)=>{for(let N=0;N<b.length;N++){const B=y[N],k=b[N],V=B.el&&(B.type===Se||!Jn(B,k)||B.shapeFlag&70)?m(B.el):E;$(B,k,V,null,S,I,R,z,!0)}},M=(y,b,E,S,I,R,z)=>{if(E!==S){for(const N in S){if(Rr(N))continue;const B=S[N],k=E[N];B!==k&&N!=="value"&&a(y,N,k,B,z,b.children,I,R,jt)}if(E!==Pt)for(const N in E)!Rr(N)&&!(N in S)&&a(y,N,E[N],null,z,b.children,I,R,jt);"value"in S&&a(y,"value",E.value,S.value)}},K=(y,b,E,S,I,R,z,N,B)=>{const k=b.el=y?y.el:u(""),V=b.anchor=y?y.anchor:u("");let{patchFlag:Z,dynamicChildren:j,slotScopeIds:Q}=b;Q&&(N=N?N.concat(Q):Q),y==null?(s(k,E,S),s(V,E,S),It(b.children,E,V,I,R,z,N,B)):Z>0&&Z&64&&j&&y.dynamicChildren?(W(y.dynamicChildren,j,E,I,R,z,N),(b.key!=null||I&&b===I.subTree)&&Bd(y,b,!0)):Ce(y,b,E,V,I,R,z,N,B)},qt=(y,b,E,S,I,R,z,N,B)=>{b.slotScopeIds=N,y==null?b.shapeFlag&512?I.ctx.activate(b,E,S,z,B):Hn(b,E,S,I,R,z,B):dt(y,b,B)},Hn=(y,b,E,S,I,R,z)=>{const N=y.component=Bg(y,S,I);if(bo(y)&&(N.ctx.renderer=He),zg(N),N.asyncDep){if(I&&I.registerDep(N,xt),!y.el){const B=N.subTree=Xe(Je);Mt(null,B,b,E)}return}xt(N,y,b,E,I,R,z)},dt=(y,b,E)=>{const S=b.component=y.component;if($m(y,b,E))if(S.asyncDep&&!S.asyncResolved){U(S,b,E);return}else S.next=b,Bm(S.update),S.update();else b.component=y.component,b.el=y.el,S.vnode=b},xt=(y,b,E,S,I,R,z)=>{const N=()=>{if(y.isMounted){let{next:V,bu:Z,u:j,parent:Q,vnode:ct}=y,Et=V,_t;Kn(y,!1),V?(V.el=ct.el,U(y,V,z)):V=ct,Z&&Or(Z),(_t=V.props&&V.props.onVnodeBeforeUpdate)&&je(_t,Q,V,ct),Kn(y,!0);const Tt=Ca(y),fe=y.subTree;y.subTree=Tt,$(fe,Tt,m(fe.el),ve(fe),y,I,R),V.el=Tt.el,Et===null&&Vm(y,Tt.el),j&&me(j,I),(_t=V.props&&V.props.onVnodeUpdated)&&me(()=>je(_t,Q,V,ct),I)}else{let V;const{el:Z,props:j}=b,{bm:Q,m:ct,parent:Et}=y,_t=Ua(b);if(Kn(y,!1),Q&&Or(Q),!_t&&(V=j&&j.onVnodeBeforeMount)&&je(V,Et,b),Kn(y,!0),Z&&nn){const Tt=()=>{y.subTree=Ca(y),nn(Z,y.subTree,y,I,null)};_t?b.type.__asyncLoader().then(()=>!y.isUnmounted&&Tt()):Tt()}else{const Tt=y.subTree=Ca(y);$(null,Tt,E,S,y,I,R),b.el=Tt.el}if(ct&&me(ct,I),!_t&&(V=j&&j.onVnodeMounted)){const Tt=b;me(()=>je(V,Et,Tt),I)}b.shapeFlag&256&&y.a&&me(y.a,I),y.isMounted=!0,b=E=S=null}},B=y.effect=new El(N,()=>pd(y.update),y.scope),k=y.update=B.run.bind(B);k.id=y.uid,Kn(y,!0),k()},U=(y,b,E)=>{b.component=y;const S=y.vnode.props;y.vnode=b,y.next=null,pg(y,b.props,S,E),vg(y,b.children,E),Ji(),Ml(void 0,y.update),ts()},Ce=(y,b,E,S,I,R,z,N,B=!1)=>{const k=y&&y.children,V=y?y.shapeFlag:0,Z=b.children,{patchFlag:j,shapeFlag:Q}=b;if(j>0){if(j&128){wt(k,Z,E,S,I,R,z,N,B);return}else if(j&256){lt(k,Z,E,S,I,R,z,N,B);return}}Q&8?(V&16&&jt(k,I,R),Z!==k&&g(E,Z)):V&16?Q&16?wt(k,Z,E,S,I,R,z,N,B):jt(k,I,R,!0):(V&8&&g(E,""),Q&16&&It(Z,E,S,I,R,z,N,B))},lt=(y,b,E,S,I,R,z,N,B)=>{y=y||Fi,b=b||Fi;const k=y.length,V=b.length,Z=Math.min(k,V);let j;for(j=0;j<Z;j++){const Q=b[j]=B?Sn(b[j]):Ge(b[j]);$(y[j],Q,E,null,I,R,z,N,B)}k>V?jt(y,I,R,!0,!1,Z):It(b,E,S,I,R,z,N,B,Z)},wt=(y,b,E,S,I,R,z,N,B)=>{let k=0;const V=b.length;let Z=y.length-1,j=V-1;for(;k<=Z&&k<=j;){const Q=y[k],ct=b[k]=B?Sn(b[k]):Ge(b[k]);if(Jn(Q,ct))$(Q,ct,E,null,I,R,z,N,B);else break;k++}for(;k<=Z&&k<=j;){const Q=y[Z],ct=b[j]=B?Sn(b[j]):Ge(b[j]);if(Jn(Q,ct))$(Q,ct,E,null,I,R,z,N,B);else break;Z--,j--}if(k>Z){if(k<=j){const Q=j+1,ct=Q<V?b[Q].el:S;for(;k<=j;)$(null,b[k]=B?Sn(b[k]):Ge(b[k]),E,ct,I,R,z,N,B),k++}}else if(k>j)for(;k<=Z;)Ot(y[k],I,R,!0),k++;else{const Q=k,ct=k,Et=new Map;for(k=ct;k<=j;k++){const St=b[k]=B?Sn(b[k]):Ge(b[k]);St.key!=null&&Et.set(St.key,k)}let _t,Tt=0;const fe=j-ct+1;let sn=!1,yi=0;const rn=new Array(fe);for(k=0;k<fe;k++)rn[k]=0;for(k=Q;k<=Z;k++){const St=y[k];if(Tt>=fe){Ot(St,I,R,!0);continue}let ee;if(St.key!=null)ee=Et.get(St.key);else for(_t=ct;_t<=j;_t++)if(rn[_t-ct]===0&&Jn(St,b[_t])){ee=_t;break}ee===void 0?Ot(St,I,R,!0):(rn[ee-ct]=k+1,ee>=yi?yi=ee:sn=!0,$(St,b[ee],E,null,I,R,z,N,B),Tt++)}const ls=sn?xg(rn):Fi;for(_t=ls.length-1,k=fe-1;k>=0;k--){const St=ct+k,ee=b[St],ir=St+1<V?b[St+1].el:S;rn[k]===0?$(null,ee,E,ir,I,R,z,N,B):sn&&(_t<0||k!==ls[_t]?Qt(ee,E,ir,2):_t--)}}},Qt=(y,b,E,S,I=null)=>{const{el:R,type:z,transition:N,children:B,shapeFlag:k}=y;if(k&6){Qt(y.component.subTree,b,E,S);return}if(k&128){y.suspense.move(b,E,S);return}if(k&64){z.move(y,b,E,He);return}if(z===Se){s(R,b,E);for(let Z=0;Z<B.length;Z++)Qt(B[Z],b,E,S);s(y.anchor,b,E);return}if(z===Br){X(y,b,E);return}if(S!==2&&k&1&&N)if(S===0)N.beforeEnter(R),s(R,b,E),me(()=>N.enter(R),I);else{const{leave:Z,delayLeave:j,afterLeave:Q}=N,ct=()=>s(R,b,E),Et=()=>{Z(R,()=>{ct(),Q&&Q()})};j?j(R,ct,Et):Et()}else s(R,b,E)},Ot=(y,b,E,S=!1,I=!1)=>{const{type:R,props:z,ref:N,children:B,dynamicChildren:k,shapeFlag:V,patchFlag:Z,dirs:j}=y;if(N!=null&&qa(N,null,E,y,!0),V&256){b.ctx.deactivate(y);return}const Q=V&1&&j,ct=!Ua(y);let Et;if(ct&&(Et=z&&z.onVnodeBeforeUnmount)&&je(Et,b,y),V&6)Rt(y.component,E,S);else{if(V&128){y.suspense.unmount(E,S);return}Q&&Gn(y,null,b,"beforeUnmount"),V&64?y.type.remove(y,b,E,I,He,S):k&&(R!==Se||Z>0&&Z&64)?jt(k,b,E,!1,!0):(R===Se&&Z&384||!I&&V&16)&&jt(B,b,E),S&&Wt(y)}(ct&&(Et=z&&z.onVnodeUnmounted)||Q)&&me(()=>{Et&&je(Et,b,y),Q&&Gn(y,null,b,"unmounted")},E)},Wt=y=>{const{type:b,el:E,anchor:S,transition:I}=y;if(b===Se){bt(E,S);return}if(b===Br){tt(y);return}const R=()=>{o(E),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(y.shapeFlag&1&&I&&!I.persisted){const{leave:z,delayLeave:N}=I,B=()=>z(E,R);N?N(y.el,R,B):B()}else R()},bt=(y,b)=>{let E;for(;y!==b;)E=v(y),o(y),y=E;o(b)},Rt=(y,b,E)=>{const{bum:S,scope:I,update:R,subTree:z,um:N}=y;S&&Or(S),I.stop(),R&&(R.active=!1,Ot(z,y,b,E)),N&&me(N,b),me(()=>{y.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},jt=(y,b,E,S=!1,I=!1,R=0)=>{for(let z=R;z<y.length;z++)Ot(y[z],b,E,S,I)},ve=y=>y.shapeFlag&6?ve(y.component.subTree):y.shapeFlag&128?y.suspense.next():v(y.anchor||y.el),as=(y,b,E)=>{y==null?b._vnode&&Ot(b._vnode,null,null,!0):$(b._vnode||null,y,b,null,null,null,E),vd(),b._vnode=y},He={p:$,um:Ot,m:Qt,r:Wt,mt:Hn,mc:It,pc:Ce,pbc:W,n:ve,o:e};let Un,nn;return t&&([Un,nn]=t(He)),{render:as,hydrate:Un,createApp:wg(as,Un)}}function Kn({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function Bd(e,t,i=!1){const s=e.children,o=t.children;if(J(s)&&J(o))for(let a=0;a<s.length;a++){const c=s[a];let u=o[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[a]=Sn(o[a]),u.el=c.el),i||Bd(c,u))}}function xg(e){const t=e.slice(),i=[0];let s,o,a,c,u;const f=e.length;for(s=0;s<f;s++){const _=e[s];if(_!==0){if(o=i[i.length-1],e[o]<_){t[s]=o,i.push(s);continue}for(a=0,c=i.length-1;a<c;)u=a+c>>1,e[i[u]]<_?a=u+1:c=u;_<e[i[a]]&&(a>0&&(t[s]=i[a-1]),i[a]=s)}}for(a=i.length,c=i[a-1];a-- >0;)i[a]=c,c=t[c];return i}const Eg=e=>e.__isTeleport,Tg=Symbol(),Se=Symbol(void 0),Ol=Symbol(void 0),Je=Symbol(void 0),Br=Symbol(void 0),As=[];let ri=null;function oe(e=!1){As.push(ri=e?null:[])}function Pg(){As.pop(),ri=As[As.length-1]||null}let $r=1;function Oh(e){$r+=e}function Fd(e){return e.dynamicChildren=$r>0?ri||Fi:null,Pg(),$r>0&&ri&&ri.push(e),e}function he(e,t,i,s,o,a){return Fd(F(e,t,i,s,o,a,!0))}function Ig(e,t,i,s,o){return Fd(Xe(e,t,i,s,o,!0))}function Sg(e){return e?e.__v_isVNode===!0:!1}function Jn(e,t){return e.type===t.type&&e.key===t.key}const xo="__vInternal",zd=({key:e})=>e!=null?e:null,Fr=({ref:e,ref_key:t,ref_for:i})=>e!=null?te(e)||$t(e)||ot(e)?{i:De,r:e,k:t,f:!!i}:e:null;function F(e,t=null,i=null,s=0,o=null,a=e===Se?0:1,c=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&zd(t),ref:t&&Fr(t),scopeId:bd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return u?(Dl(f,i),a&128&&e.normalize(f)):i&&(f.shapeFlag|=te(i)?8:16),$r>0&&!c&&ri&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&ri.push(f),f}const Xe=kg;function kg(e,t=null,i=null,s=0,o=null,a=!1){if((!e||e===Tg)&&(e=Je),Sg(e)){const u=Zi(e,t,!0);return i&&Dl(u,i),u}if(Zg(e)&&(e=e.__vccOpts),t){t=Lg(t);let{class:u,style:f}=t;u&&!te(u)&&(t.class=Ke(u)),Vt(f)&&(cd(f)&&!J(f)&&(f=ae({},f)),t.style=fo(f))}const c=te(e)?1:qm(e)?128:Eg(e)?64:Vt(e)?4:ot(e)?2:0;return F(e,t,i,s,o,c,a,!0)}function Lg(e){return e?cd(e)||xo in e?ae({},e):e:null}function Zi(e,t,i=!1){const{props:s,ref:o,patchFlag:a,children:c}=e,u=t?Ng(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&zd(u),ref:t&&t.ref?i&&o?J(o)?o.concat(Fr(t)):[o,Fr(t)]:Fr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Se?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zi(e.ssContent),ssFallback:e.ssFallback&&Zi(e.ssFallback),el:e.el,anchor:e.anchor}}function Ag(e=" ",t=0){return Xe(Ol,null,e,t)}function Mg(e,t){const i=Xe(Br,null,e);return i.staticCount=t,i}function _n(e="",t=!1){return t?(oe(),Ig(Je,null,e)):Xe(Je,null,e)}function Ge(e){return e==null||typeof e=="boolean"?Xe(Je):J(e)?Xe(Se,null,e.slice()):typeof e=="object"?Sn(e):Xe(Ol,null,String(e))}function Sn(e){return e.el===null||e.memo?e:Zi(e)}function Dl(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(J(t))i=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Dl(e,o()),o._c&&(o._d=!0));return}else{i=32;const o=t._;!o&&!(xo in t)?t._ctx=De:o===3&&De&&(De.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ot(t)?(t={default:t,_ctx:De},i=32):(t=String(t),s&64?(i=16,t=[Ag(t)]):i=8);e.children=t,e.shapeFlag|=i}function Ng(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Ke([t.class,s.class]));else if(o==="style")t.style=fo([t.style,s.style]);else if(po(o)){const a=t[o],c=s[o];c&&a!==c&&!(J(a)&&a.includes(c))&&(t[o]=a?[].concat(a,c):c)}else o!==""&&(t[o]=s[o])}return t}function je(e,t,i,s=null){Le(e,t,7,[i,s])}function Wd(e,t,i,s){let o;const a=i&&i[s];if(J(e)||te(e)){o=new Array(e.length);for(let c=0,u=e.length;c<u;c++)o[c]=t(e[c],c,void 0,a&&a[c])}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,a&&a[c])}else if(Vt(e))if(e[Symbol.iterator])o=Array.from(e,(c,u)=>t(c,u,void 0,a&&a[u]));else{const c=Object.keys(e);o=new Array(c.length);for(let u=0,f=c.length;u<f;u++){const _=c[u];o[u]=t(e[_],_,u,a&&a[u])}}else o=[];return i&&(i[s]=o),o}const ja=e=>e?Hd(e)?Bl(e)||e.proxy:ja(e.parent):null,Vr=ae(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ja(e.parent),$root:e=>ja(e.root),$emit:e=>e.emit,$options:e=>Ld(e),$forceUpdate:e=>()=>pd(e.update),$nextTick:e=>Om.bind(e.proxy),$watch:e=>Km.bind(e)}),Rg={get({_:e},t){const{ctx:i,setupState:s,data:o,props:a,accessCache:c,type:u,appContext:f}=e;let _;if(t[0]!=="$"){const T=c[t];if(T!==void 0)switch(T){case 1:return s[t];case 2:return o[t];case 4:return i[t];case 3:return a[t]}else{if(s!==Pt&&gt(s,t))return c[t]=1,s[t];if(o!==Pt&&gt(o,t))return c[t]=2,o[t];if((_=e.propsOptions[0])&&gt(_,t))return c[t]=3,a[t];if(i!==Pt&&gt(i,t))return c[t]=4,i[t];Za&&(c[t]=0)}}const g=Vr[t];let m,v;if(g)return t==="$attrs"&&be(e,"get",t),g(e);if((m=u.__cssModules)&&(m=m[t]))return m;if(i!==Pt&&gt(i,t))return c[t]=4,i[t];if(v=f.config.globalProperties,gt(v,t))return v[t]},set({_:e},t,i){const{data:s,setupState:o,ctx:a}=e;return o!==Pt&&gt(o,t)?(o[t]=i,!0):s!==Pt&&gt(s,t)?(s[t]=i,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:o,propsOptions:a}},c){let u;return!!i[c]||e!==Pt&&gt(e,c)||t!==Pt&&gt(t,c)||(u=a[0])&&gt(u,c)||gt(s,c)||gt(Vr,c)||gt(o.config.globalProperties,c)},defineProperty(e,t,i){return i.get!=null?this.set(e,t,i.get(),null):i.value!=null&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},Og=Dd();let Dg=0;function Bg(e,t,i){const s=e.type,o=(t?t.appContext:e.appContext)||Og,a={uid:Dg++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new em(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Md(s,o),emitsOptions:wd(s,o),emit:null,emitted:null,propsDefaults:Pt,inheritAttrs:s.inheritAttrs,ctx:Pt,data:Pt,props:Pt,attrs:Pt,slots:Pt,refs:Pt,setupState:Pt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Wm.bind(null,a),e.ce&&e.ce(a),a}let ie=null;const Fg=()=>ie||De,$i=e=>{ie=e,e.scope.on()},oi=()=>{ie&&ie.scope.off(),ie=null};function Hd(e){return e.vnode.shapeFlag&4}let Ws=!1;function zg(e,t=!1){Ws=t;const{props:i,children:s}=e.vnode,o=Hd(e);_g(e,i,o,t),gg(e,s);const a=o?Wg(e,t):void 0;return Ws=!1,a}function Wg(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=hd(new Proxy(e.ctx,Rg));const{setup:s}=i;if(s){const o=e.setupContext=s.length>1?Ug(e):null;$i(e),Ji();const a=Nn(s,e,0,[e.props,o]);if(ts(),oi(),ju(a)){if(a.then(oi,oi),t)return a.then(c=>{Dh(e,c,t)}).catch(c=>{wo(c,e,0)});e.asyncDep=a}else Dh(e,a,t)}else Ud(e,t)}function Dh(e,t,i){ot(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Vt(t)&&(e.setupState=fd(t)),Ud(e,i)}let Bh;function Ud(e,t,i){const s=e.type;if(!e.render){if(!t&&Bh&&!s.render){const o=s.template;if(o){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:u,compilerOptions:f}=s,_=ae(ae({isCustomElement:a,delimiters:u},c),f);s.render=Bh(o,_)}}e.render=s.render||Fe}$i(e),Ji(),cg(e),ts(),oi()}function Hg(e){return new Proxy(e.attrs,{get(t,i){return be(e,"get","$attrs"),t[i]}})}function Ug(e){const t=s=>{e.exposed=s||{}};let i;return{get attrs(){return i||(i=Hg(e))},slots:e.slots,emit:e.emit,expose:t}}function Bl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(fd(hd(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Vr)return Vr[i](e)}}))}function Zg(e){return ot(e)&&"__vccOpts"in e}const $g=(e,t)=>Nm(e,t,Ws),Vg="3.2.31",qg="http://www.w3.org/2000/svg",ti=typeof document!="undefined"?document:null,Fh=ti&&ti.createElement("template"),jg={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const o=t?ti.createElementNS(qg,e):ti.createElement(e,i?{is:i}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>ti.createTextNode(e),createComment:e=>ti.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ti.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,s,o,a){const c=i?i.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),i),!(o===a||!(o=o.nextSibling)););else{Fh.innerHTML=s?`<svg>${e}</svg>`:e;const u=Fh.content;if(s){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}t.insertBefore(u,i)}return[c?c.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Gg(e,t,i){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Kg(e,t,i){const s=e.style,o=te(i);if(i&&!o){for(const a in i)Ga(s,a,i[a]);if(t&&!te(t))for(const a in t)i[a]==null&&Ga(s,a,"")}else{const a=s.display;o?t!==i&&(s.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=a)}}const zh=/\s*!important$/;function Ga(e,t,i){if(J(i))i.forEach(s=>Ga(e,t,s));else if(t.startsWith("--"))e.setProperty(t,i);else{const s=Yg(e,t);zh.test(i)?e.setProperty(Xi(s),i.replace(zh,""),"important"):e[s]=i}}const Wh=["Webkit","Moz","ms"],Ta={};function Yg(e,t){const i=Ta[t];if(i)return i;let s=Ui(t);if(s!=="filter"&&s in e)return Ta[t]=s;s=Yu(s);for(let o=0;o<Wh.length;o++){const a=Wh[o]+s;if(a in e)return Ta[t]=a}return t}const Hh="http://www.w3.org/1999/xlink";function Qg(e,t,i,s,o){if(s&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Hh,t.slice(6,t.length)):e.setAttributeNS(Hh,t,i);else{const a=Up(t);i==null||a&&!Vu(i)?e.removeAttribute(t):e.setAttribute(t,a?"":i)}}function Xg(e,t,i,s,o,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,o,a),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const u=i==null?"":i;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const u=typeof e[t];if(u==="boolean"){e[t]=Vu(i);return}else if(i==null&&u==="string"){e[t]="",e.removeAttribute(t);return}else if(u==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let qr=Date.now,Zd=!1;if(typeof window!="undefined"){qr()>document.createEvent("Event").timeStamp&&(qr=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Zd=!!(e&&Number(e[1])<=53)}let Ka=0;const Jg=Promise.resolve(),tv=()=>{Ka=0},ev=()=>Ka||(Jg.then(tv),Ka=qr());function ei(e,t,i,s){e.addEventListener(t,i,s)}function nv(e,t,i,s){e.removeEventListener(t,i,s)}function iv(e,t,i,s,o=null){const a=e._vei||(e._vei={}),c=a[t];if(s&&c)c.value=s;else{const[u,f]=sv(t);if(s){const _=a[t]=rv(s,o);ei(e,u,_,f)}else c&&(nv(e,u,c,f),a[t]=void 0)}}const Uh=/(?:Once|Passive|Capture)$/;function sv(e){let t;if(Uh.test(e)){t={};let i;for(;i=e.match(Uh);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[Xi(e.slice(2)),t]}function rv(e,t){const i=s=>{const o=s.timeStamp||qr();(Zd||o>=i.attached-1)&&Le(ov(s,i.value),t,5,[s])};return i.value=e,i.attached=ev(),i}function ov(e,t){if(J(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Zh=/^on[a-z]/,av=(e,t,i,s,o=!1,a,c,u,f)=>{t==="class"?Gg(e,s,o):t==="style"?Kg(e,i,s):po(t)?yl(t)||iv(e,t,i,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lv(e,t,s,o))?Xg(e,t,s,a,c,u,f):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Qg(e,t,s,o))};function lv(e,t,i,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&Zh.test(t)&&ot(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Zh.test(t)&&te(i)?!1:t in e}const cv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Xm.props;const jr=e=>{const t=e.props["onUpdate:modelValue"];return J(t)?i=>Or(t,i):t};function hv(e){e.target.composing=!0}function $h(e){const t=e.target;t.composing&&(t.composing=!1,uv(t,"input"))}function uv(e,t){const i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}const Pe={created(e,{modifiers:{lazy:t,trim:i,number:s}},o){e._assign=jr(o);const a=s||o.props&&o.props.type==="number";ei(e,t?"change":"input",c=>{if(c.target.composing)return;let u=e.value;i?u=u.trim():a&&(u=Wr(u)),e._assign(u)}),i&&ei(e,"change",()=>{e.value=e.value.trim()}),t||(ei(e,"compositionstart",hv),ei(e,"compositionend",$h),ei(e,"change",$h))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:s,number:o}},a){if(e._assign=jr(a),e.composing||document.activeElement===e&&(i||s&&e.value.trim()===t||(o||e.type==="number")&&Wr(e.value)===t))return;const c=t==null?"":t;e.value!==c&&(e.value=c)}},dv={deep:!0,created(e,{value:t,modifiers:{number:i}},s){const o=mo(t);ei(e,"change",()=>{const a=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>i?Wr(Gr(c)):Gr(c));e._assign(e.multiple?o?new Set(a):a:a[0])}),e._assign=jr(s)},mounted(e,{value:t}){Vh(e,t)},beforeUpdate(e,t,i){e._assign=jr(i)},updated(e,{value:t}){Vh(e,t)}};function Vh(e,t){const i=e.multiple;if(!(i&&!J(t)&&!mo(t))){for(let s=0,o=e.options.length;s<o;s++){const a=e.options[s],c=Gr(a);if(i)J(t)?a.selected=jp(t,c)>-1:a.selected=t.has(c);else if(_o(Gr(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Gr(e){return"_value"in e?e._value:e.value}const fv={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):bs(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:s}){!t!=!i&&(s?t?(s.beforeEnter(e),bs(e,!0),s.enter(e)):s.leave(e,()=>{bs(e,!1)}):bs(e,t))},beforeUnmount(e,{value:t}){bs(e,t)}};function bs(e,t){e.style.display=t?e._vod:"none"}const _v=ae({patchProp:av},jg);let qh;function pv(){return qh||(qh=bg(_v))}const Eo=(...e)=>{const t=pv().createApp(...e),{mount:i}=t;return t.mount=s=>{const o=mv(s);if(!o)return;const a=t._component;!ot(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const c=i(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},t};function mv(e){return te(e)?document.querySelector(e):e}const Qe=Re({show_map:!1,show_about:!1,show_msg:!1,show_search:!1}),kn=Re("");const gv={class:"container-fluid d-flex pe-0 navtxt"},vv={class:"d-flex col-4 my-1 ms-auto"},yv=F("div",{class:"col-4 align-self-center text-light"},"Finding SanBau",-1),wv={setup(e){let t=Re({map:"",about:"",msg:""});function i(f){for(let _ in Qe.value)Qe.value[_]=!1;for(let _ in t.value)t.value[_]="";Qe.value[`show_${f}`]=!0,t.value[f]="text-warning"}function s(){i("map")}function o(){i("about")}function a(){i("msg")}function c(){window.open("https://github.com/OGC-Fever")}function u(){kn.value==""||kn.value==null||(s(),Qe.value.show_search=!0)}return es(()=>{s()}),(f,_)=>(oe(),he("div",gv,[F("div",{class:"navbar-brand text-light",type:"button",onClick:s},"Cyber Butchers"),F("div",{class:Ke(["navbar-brand fs-6",et(t).map]),type:"button",onClick:s},"SanBau Map ",2),F("div",{class:Ke(["navbar-brand fs-6",et(t).about]),type:"button",onClick:o},"About",2),F("div",{class:Ke(["navbar-brand fs-6",et(t).msg]),type:"button",onClick:a},"Message Board",2),F("div",{class:"navbar-brand fs-6",type:"button",onClick:c},"GitHub"),F("div",vv,[yv,pe(F("input",{class:"col-6 px-2 my-1 border border-secondary rounded bg-dark text-light",type:"text",placeholder:"Plate/Nickname",maxlength:"20","onUpdate:modelValue":_[0]||(_[0]=g=>$t(kn)?kn.value=g:null)},null,512),[[Pe,et(kn)]]),F("div",{class:"col fs-4 px-0 badge align-self-center text-warning",type:"button",onClick:u},"Go")])]))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=function(e,t){if(!e)throw ns(t)},ns=function(e){return new Error("Firebase Database ("+$d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let o=e.charCodeAt(s);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++s)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},bv=function(e){const t=[];let i=0,s=0;for(;i<e.length;){const o=e[i++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=e[i++];t[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=e[i++],c=e[i++],u=e[i++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;t[s++]=String.fromCharCode(55296+(f>>10)),t[s++]=String.fromCharCode(56320+(f&1023))}else{const a=e[i++],c=e[i++];t[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return t.join("")},To={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<e.length;o+=3){const a=e[o],c=o+1<e.length,u=c?e[o+1]:0,f=o+2<e.length,_=f?e[o+2]:0,g=a>>2,m=(a&3)<<4|u>>4;let v=(u&15)<<2|_>>6,T=_&63;f||(T=64,c||(v=64)),s.push(i[g],i[m],i[v],i[T])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):bv(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<e.length;){const a=i[e.charAt(o++)],u=o<e.length?i[e.charAt(o)]:0;++o;const _=o<e.length?i[e.charAt(o)]:64;++o;const m=o<e.length?i[e.charAt(o)]:64;if(++o,a==null||u==null||_==null||m==null)throw Error();const v=a<<2|u>>4;if(s.push(v),_!==64){const T=u<<4&240|_>>2;if(s.push(T),m!==64){const A=_<<6&192|m;s.push(A)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},qd=function(e){const t=Vd(e);return To.encodeByteArray(t,!0)},jd=function(e){return qd(e).replace(/\./g,"")},jh=function(e){try{return To.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(e){return Gd(void 0,e)}function Gd(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!xv(i)||(e[i]=Gd(e[i],t[i]));return e}function xv(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kd(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ev())}function Tv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yd(){return $d.NODE_ADMIN===!0}function Fl(){return typeof indexedDB=="object"}function Pv(){return new Promise((e,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(s),e(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var a;t(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(i){t(i)}})}function Iv(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="FirebaseError";class zl extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=Sv,Object.setPrototypeOf(this,zl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wl.prototype.create)}}class Wl{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},o=`${this.service}/${t}`,a=this.errors[t],c=a?kv(a,s):"Error",u=`${this.serviceName}: ${c} (${o}).`;return new zl(o,u,s)}}function kv(e,t){return e.replace(Lv,(i,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const Lv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(e){return JSON.parse(e)}function Kt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=function(e){let t={},i={},s={},o="";try{const a=e.split(".");t=Hs(jh(a[0])||""),i=Hs(jh(a[1])||""),o=a[2],s=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:s,signature:o}},Av=function(e){const t=Qd(e),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},Mv=function(e){const t=Qd(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Vi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Gh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Kr(e,t,i){const s={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s[o]=t.call(i,e[o],o,e));return s}function Ya(e,t){if(e===t)return!0;const i=Object.keys(e),s=Object.keys(t);for(const o of i){if(!s.includes(o))return!1;const a=e[o],c=t[o];if(Kh(a)&&Kh(c)){if(!Ya(a,c))return!1}else if(a!==c)return!1}for(const o of s)if(!i.includes(o))return!1;return!0}function Kh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(e){const t=[];for(const[i,s]of Object.entries(e))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const s=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)s[m]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let m=0;m<16;m++)s[m]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let m=16;m<80;m++){const v=s[m-3]^s[m-8]^s[m-14]^s[m-16];s[m]=(v<<1|v>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],u=this.chain_[3],f=this.chain_[4],_,g;for(let m=0;m<80;m++){m<40?m<20?(_=u^a&(c^u),g=1518500249):(_=a^c^u,g=1859775393):m<60?(_=a&c|u&(a|c),g=2400959708):(_=a^c^u,g=3395469782);const v=(o<<5|o>>>27)+_+f+g+s[m]&4294967295;f=u,u=c,c=(a<<30|a>>>2)&4294967295,a=o,o=v}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const s=i-this.blockSize;let o=0;const a=this.buf_;let c=this.inbuf_;for(;o<i;){if(c===0)for(;o<=s;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<i;)if(a[c]=t.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}else for(;o<i;)if(a[c]=t[o],++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)t[s]=this.chain_[o]>>a&255,++s;return t}}function Ys(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=function(e){const t=[];let i=0;for(let s=0;s<e.length;s++){let o=e.charCodeAt(s);if(o>=55296&&o<=56319){const a=o-55296;s++,O(s<e.length,"Surrogate pair missing trail surrogate.");const c=e.charCodeAt(s)-56320;o=65536+(a<<10)+c}o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):o<65536?(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},Po=function(e){let t=0;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=1e3,Bv=2,Fv=4*60*60*1e3,zv=.5;function Wv(e,t=Dv,i=Bv){const s=t*Math.pow(i,e),o=Math.round(zv*s*(Math.random()-.5)*2);return Math.min(Fv,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(e,t){return new Promise((i,s)=>{e.onsuccess=o=>{i(o.target.result)},e.onerror=o=>{var a;s(`${t}: ${(a=o.target.error)===null||a===void 0?void 0:a.message}`)}})}class Yh{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,i){return new Xd(this._db.transaction.call(this._db,t,i))}createObjectStore(t,i){return new Jd(this._db.createObjectStore(t,i))}close(){this._db.close()}}class Xd{constructor(t){this._transaction=t,this.complete=new Promise((i,s)=>{this._transaction.oncomplete=function(){i()},this._transaction.onerror=()=>{s(this._transaction.error)},this._transaction.onabort=()=>{s(this._transaction.error)}})}objectStore(t){return new Jd(this._transaction.objectStore(t))}}class Jd{constructor(t){this._store=t}index(t){return new Qh(this._store.index(t))}createIndex(t,i,s){return new Qh(this._store.createIndex(t,i,s))}get(t){const i=this._store.get(t);return Ss(i,"Error reading from IndexedDB")}put(t,i){const s=this._store.put(t,i);return Ss(s,"Error writing to IndexedDB")}delete(t){const i=this._store.delete(t);return Ss(i,"Error deleting from IndexedDB")}clear(){const t=this._store.clear();return Ss(t,"Error clearing IndexedDB object store")}}class Qh{constructor(t){this._index=t}get(t){const i=this._index.get(t);return Ss(i,"Error reading from IndexedDB")}}function Hv(e,t,i){return new Promise((s,o)=>{try{const a=indexedDB.open(e,t);a.onsuccess=c=>{s(new Yh(c.target.result))},a.onerror=c=>{var u;o(`Error opening indexedDB: ${(u=c.target.error)===null||u===void 0?void 0:u.message}`)},a.onupgradeneeded=c=>{i(new Yh(a.result),c.oldVersion,c.newVersion,new Xd(a.transaction))}}catch(a){o(`Error opening indexedDB: ${a.message}`)}})}class hi{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new vn;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if($v(t))try{this.getOrInitializeService({instanceIdentifier:Qn})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(t=Qn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Qn){return this.instances.has(t)}getOptions(t=Qn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);s===u&&c.resolve(o)}return o}onInit(t,i){var s;const o=this.normalizeInstanceIdentifier(i),a=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&t(c,o),()=>{a.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(!!s)for(const o of s)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Zv(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Qn){return this.component?this.component.multipleInstances?t:Qn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zv(e){return e===Qn?void 0:e}function $v(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new Uv(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Lt||(Lt={}));const qv={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},jv=Lt.INFO,Gv={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},Kv=(e,t,...i)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),o=Gv[t];if(o)console[o](`[${s}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Hl{constructor(t){this.name=t,this._logLevel=jv,this._logHandler=Kv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(Qv(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function Qv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Qa="@firebase/app",Xh="0.7.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new Hl("@firebase/app"),Xv="@firebase/app-compat",Jv="@firebase/analytics-compat",ty="@firebase/analytics",ey="@firebase/app-check-compat",ny="@firebase/app-check",iy="@firebase/auth",sy="@firebase/auth-compat",ry="@firebase/database",oy="@firebase/database-compat",ay="@firebase/functions",ly="@firebase/functions-compat",cy="@firebase/installations",hy="@firebase/installations-compat",uy="@firebase/messaging",dy="@firebase/messaging-compat",fy="@firebase/performance",_y="@firebase/performance-compat",py="@firebase/remote-config",my="@firebase/remote-config-compat",gy="@firebase/storage",vy="@firebase/storage-compat",yy="@firebase/firestore",wy="@firebase/firestore-compat",by="firebase",Cy="9.6.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="[DEFAULT]",xy={[Qa]:"fire-core",[Xv]:"fire-core-compat",[ty]:"fire-analytics",[Jv]:"fire-analytics-compat",[ny]:"fire-app-check",[ey]:"fire-app-check-compat",[iy]:"fire-auth",[sy]:"fire-auth-compat",[ry]:"fire-rtdb",[oy]:"fire-rtdb-compat",[ay]:"fire-fn",[ly]:"fire-fn-compat",[cy]:"fire-iid",[hy]:"fire-iid-compat",[uy]:"fire-fcm",[dy]:"fire-fcm-compat",[fy]:"fire-perf",[_y]:"fire-perf-compat",[py]:"fire-rc",[my]:"fire-rc-compat",[gy]:"fire-gcs",[vy]:"fire-gcs-compat",[yy]:"fire-fst",[wy]:"fire-fst-compat","fire-js":"fire-js",[by]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Map,Xa=new Map;function Ey(e,t){try{e.container.addComponent(t)}catch(i){Ul.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function qi(e){const t=e.name;if(Xa.has(t))return Ul.debug(`There were multiple attempts to register component ${t}.`),!1;Xa.set(t,e);for(const i of Yr.values())Ey(i,e);return!0}function Zl(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},ui=new Wl("app","Firebase",Ty);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(t,i,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=Cy;function ef(e,t={}){typeof t!="object"&&(t={name:t});const i=Object.assign({name:tf,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw ui.create("bad-app-name",{appName:String(s)});const o=Yr.get(s);if(o){if(Ya(e,o.options)&&Ya(i,o.config))return o;throw ui.create("duplicate-app",{appName:s})}const a=new Vv(s);for(const u of Xa.values())a.addComponent(u);const c=new Py(e,i,a);return Yr.set(s,c),c}function nf(e=tf){const t=Yr.get(e);if(!t)throw ui.create("no-app",{appName:e});return t}function ai(e,t,i){var s;let o=(s=xy[e])!==null&&s!==void 0?s:e;i&&(o+=`-${i}`);const a=o.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const u=[`Unable to register library "${o}" with version "${t}":`];a&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ul.warn(u.join(" "));return}qi(new hi(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="firebase-heartbeat-database",ky=1,Us="firebase-heartbeat-store";let Pa=null;function sf(){return Pa||(Pa=Hv(Sy,ky,(e,t)=>{switch(t){case 0:e.createObjectStore(Us)}}).catch(e=>{throw ui.create("storage-open",{originalErrorMessage:e.message})})),Pa}async function Ly(e){try{return(await sf()).transaction(Us).objectStore(Us).get(rf(e))}catch(t){throw ui.create("storage-get",{originalErrorMessage:t.message})}}async function Jh(e,t){try{const s=(await sf()).transaction(Us,"readwrite");return await s.objectStore(Us).put(t,rf(e)),s.complete}catch(i){throw ui.create("storage-set",{originalErrorMessage:i.message})}}function rf(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=1024,My=30*24*60*60*1e3;class Ny{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Oy(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tu();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=My}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tu(),{heartbeatsToSend:i,unsentEntries:s}=Ry(this._heartbeatsCache.heartbeats),o=jd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function tu(){return new Date().toISOString().substring(0,10)}function Ry(e,t=Ay){const i=[];let s=e.slice();for(const o of e){const a=i.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),eu(i)>t){a.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),eu(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class Oy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fl()?Pv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Ly(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Jh(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Jh(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function eu(e){return jd(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(e){qi(new hi("platform-logger",t=>new Yv(t),"PRIVATE")),qi(new hi("heartbeat",t=>new Ny(t),"PRIVATE")),ai(Qa,Xh,e),ai(Qa,Xh,"esm2017"),ai("fire-js","")}Dy("");var By="firebase",Fy="9.6.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai(By,Fy,"app");const nu="@firebase/database",iu="0.12.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of="";function zy(e){of=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Kt(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Hs(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return tn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=function(e){try{if(typeof window!="undefined"&&typeof window[e]!="undefined"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Wy(t)}}catch{}return new Hy},ii=af("localStorage"),Ja=af("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new Hl("@firebase/database"),Uy=function(){let e=1;return function(){return e++}}(),lf=function(e){const t=Ov(e),i=new Rv;i.update(t);const s=i.digest();return To.encodeByteArray(s)},Qs=function(...e){let t="";for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=Qs.apply(null,s):typeof s=="object"?t+=Kt(s):t+=s,t+=" "}return t};let li=null,su=!0;const Zy=function(e,t){O(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Hi.logLevel=Lt.VERBOSE,li=Hi.log.bind(Hi),t&&Ja.set("logging_enabled",!0)):typeof e=="function"?li=e:(li=null,Ja.remove("logging_enabled"))},ne=function(...e){if(su===!0&&(su=!1,li===null&&Ja.get("logging_enabled")===!0&&Zy(!0)),li){const t=Qs.apply(null,e);li(t)}},Xs=function(e){return function(...t){ne(e,...t)}},tl=function(...e){const t="FIREBASE INTERNAL ERROR: "+Qs(...e);Hi.error(t)},di=function(...e){const t=`FIREBASE FATAL ERROR: ${Qs(...e)}`;throw Hi.error(t),new Error(t)},de=function(...e){const t="FIREBASE WARNING: "+Qs(...e);Hi.warn(t)},$y=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&de("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$l=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Vy=function(e){if(document.readyState==="complete")e();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},fi="[MIN_NAME]",Bn="[MAX_NAME]",gi=function(e,t){if(e===t)return 0;if(e===fi||t===Bn)return-1;if(t===fi||e===Bn)return 1;{const i=ru(e),s=ru(t);return i!==null?s!==null?i-s===0?e.length-t.length:i-s:-1:s!==null?1:e<t?-1:1}},qy=function(e,t){return e===t?0:e<t?-1:1},Cs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Kt(t))},Vl=function(e){if(typeof e!="object"||e===null)return Kt(e);const t=[];for(const s in e)t.push(s);t.sort();let i="{";for(let s=0;s<t.length;s++)s!==0&&(i+=","),i+=Kt(t[s]),i+=":",i+=Vl(e[t[s]]);return i+="}",i},cf=function(e,t){const i=e.length;if(i<=t)return[e];const s=[];for(let o=0;o<i;o+=t)o+t>i?s.push(e.substring(o,i)):s.push(e.substring(o,o+t));return s};function se(e,t){for(const i in e)e.hasOwnProperty(i)&&t(i,e[i])}const hf=function(e){O(!$l(e),"Invalid JSON number");const t=11,i=52,s=(1<<t-1)-1;let o,a,c,u,f;e===0?(a=0,c=0,o=1/e===-1/0?1:0):(o=e<0,e=Math.abs(e),e>=Math.pow(2,1-s)?(u=Math.min(Math.floor(Math.log(e)/Math.LN2),s),a=u+s,c=Math.round(e*Math.pow(2,i-u)-Math.pow(2,i))):(a=0,c=Math.round(e/Math.pow(2,1-s-i))));const _=[];for(f=i;f;f-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(f=t;f;f-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(o?1:0),_.reverse();const g=_.join("");let m="";for(f=0;f<64;f+=8){let v=parseInt(g.substr(f,8),2).toString(16);v.length===1&&(v="0"+v),m=m+v}return m.toLowerCase()},jy=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Gy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ky(e,t){let i="Unknown Error";e==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?i="Client doesn't have permission to access the desired data.":e==="unavailable"&&(i="The service is unavailable");const s=new Error(e+" at "+t._path.toString()+": "+i);return s.code=e.toUpperCase(),s}const Yy=new RegExp("^-?(0*)\\d{1,10}$"),Qy=-2147483648,Xy=2147483647,ru=function(e){if(Yy.test(e)){const t=Number(e);if(t>=Qy&&t<=Xy)return t}return null},is=function(e){try{e()}catch(t){setTimeout(()=>{const i=t.stack||"";throw de("Exception was thrown by user callback.",i),t},Math.floor(0))}},Jy=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ms=function(e,t){const i=setTimeout(e,t);return typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(t,i){this.appName_=t,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((i,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){de(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t,i,s){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(ne("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,s):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',de(t)}}class el{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}el.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql="5",uf="v",df="s",ff="r",_f="f",pf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mf="ls",nw="p",nl="ac",gf="websocket",vf="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t,i,s,o,a=!1,c="",u=!1){this.secure=i,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ii.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ii.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function sw(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function yf(e,t,i){O(typeof t=="string","typeof type must == string"),O(typeof i=="object","typeof params must == object");let s;if(t===gf)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===vf)s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);sw(e)&&(i.ns=e.namespace);const o=[];return se(i,(a,c)=>{o.push(a+"="+c)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.counters_={}}incrementCounter(t,i=1){tn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return Cv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia={},Sa={};function jl(e){const t=e.toString();return Ia[t]||(Ia[t]=new rw),Ia[t]}function ow(e,t){const i=e.toString();return Sa[i]||(Sa[i]=t()),Sa[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&is(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou="start",lw="close",cw="pLPCommand",hw="pRTLPCB",wf="id",bf="pw",Cf="ser",uw="cb",dw="seg",fw="ts",_w="d",pw="dframe",xf=1870,Ef=30,mw=xf-Ef,gw=25e3,vw=3e4;class Bi{constructor(t,i,s,o,a,c,u){this.connId=t,this.repoInfo=i,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.transportSessionId=c,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xs(t),this.stats_=jl(i),this.urlFn=f=>(this.appCheckToken&&(f[nl]=this.appCheckToken),yf(i,vf,f))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new aw(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(vw)),Vy(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gl((...a)=>{const[c,u,f,_,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===ou)this.id=u,this.password=f;else if(c===lw)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,u)},()=>{this.onClosed_()},this.urlFn);const s={};s[ou]="t",s[Cf]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[uw]=this.scriptTagHolder.uniqueCallbackIdentifier),s[uf]=ql,this.transportSessionId&&(s[df]=this.transportSessionId),this.lastSessionId&&(s[mf]=this.lastSessionId),this.applicationId&&(s[nw]=this.applicationId),this.appCheckToken&&(s[nl]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&pf.test(location.hostname)&&(s[ff]=_f);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bi.forceAllow_=!0}static forceDisallow(){Bi.forceDisallow_=!0}static isAvailable(){return Bi.forceAllow_?!0:!Bi.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!jy()&&!Gy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=Kt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=qd(i),o=cf(s,mw);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const s={};s[pw]="t",s[wf]=t,s[bf]=i,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=Kt(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Gl{constructor(t,i,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Uy(),window[cw+this.uniqueCallbackIdentifier]=t,window[hw+this.uniqueCallbackIdentifier]=i,this.myIFrame=Gl.createIFrame_();let a="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const u=document.domain;a='<script>document.domain="'+u+'";<\/script>'}const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(u){ne("frame writing exception"),u.stack&&ne(u.stack),ne(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ne("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[wf]=this.myID,t[bf]=this.myPW,t[Cf]=this.currentSerial;let i=this.urlFn(t),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ef+s.length<=xf;){const c=this.pendingSegs.shift();s=s+"&"+dw+o+"="+c.seg+"&"+fw+o+"="+c.ts+"&"+_w+o+"="+c.d,o++}return i=i+s,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,s){this.pendingSegs.push({seg:t,ts:i,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const s=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(s,Math.floor(gw)),a=()=>{clearTimeout(o),s()};this.addTag(t,a)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),i())},s.onerror=()=>{ne("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=16384,ww=45e3;let Qr=null;typeof MozWebSocket!="undefined"?Qr=MozWebSocket:typeof WebSocket!="undefined"&&(Qr=WebSocket);class Oe{constructor(t,i,s,o,a,c,u){this.connId=t,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xs(this.connId),this.stats_=jl(i),this.connURL=Oe.connectionURL_(i,c,u,o),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,o){const a={};return a[uf]=ql,typeof location!="undefined"&&location.hostname&&pf.test(location.hostname)&&(a[ff]=_f),i&&(a[df]=i),s&&(a[mf]=s),o&&(a[nl]=o),yf(t,gf,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ii.set("previous_websocket_failure",!0);try{if(!Yd()){const s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Qr(this.connURL,[],s)}}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Oe.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&Qr!==null&&!Oe.forceDisallow_}static previouslyFailed(){return ii.isInMemoryStorage||ii.get("previous_websocket_failure")===!0}markConnectionHealthy(){ii.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=Hs(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(O(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=Kt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=cf(i,yw);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ww))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Oe.responsesRequiredToBeHealthy=2;Oe.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bi,Oe]}initTransports_(t){const i=Oe&&Oe.isAvailable();let s=i&&!Oe.previouslyFailed();if(t.webSocketOnly&&(i||de("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Oe];else{const o=this.transports_=[];for(const a of Kl.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=6e4,Cw=5e3,xw=10*1024,Ew=100*1024,ka="t",au="d",Tw="s",lu="r",Pw="e",cu="o",hu="a",uu="n",du="p",Iw="h";class Sw{constructor(t,i,s,o,a,c,u,f,_,g){this.id=t,this.repoInfo_=i,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=c,this.onReady_=u,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xs("c:"+this.id+":"),this.transportManager_=new Kl(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,s)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ms(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ew?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>xw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ka in t){const i=t[ka];i===hu?this.upgradeIfSecondaryHealthy_():i===lu?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===cu&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=Cs("t",t),s=Cs("d",t);if(i==="c")this.onSecondaryControl_(s);else if(i==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:du,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hu,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uu,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=Cs("t",t),s=Cs("d",t);i==="c"?this.onControl_(s):i==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=Cs(ka,t);if(au in t){const s=t[au];if(i===Iw)this.onHandshake_(s);else if(i===uu){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===Tw?this.onConnectionShutdown_(s):i===lu?this.onReset_(s):i===Pw?tl("Server Error: "+s):i===cu?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tl("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,s=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),ql!==s&&de("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,s),Ms(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ms(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Cw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:du,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ii.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{put(t,i,s,o){}merge(t,i,s,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,s){}onDisconnectMerge(t,i,s){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(t){this.allowedEvents_=t,this.listeners_={},O(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,i)}}on(t,i,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:s});const o=this.getInitialEvent(t);o&&i.apply(s,o)}off(t,i,s){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let a=0;a<o.length;a++)if(o[a].callback===i&&(!s||s===o[a].context)){o.splice(a,1);return}}validateEventType_(t){O(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Pf{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Kd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Xr}getInitialEvent(t){return O(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=32,_u=768;class Ct{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function vt(){return new Ct("")}function st(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Fn(e){return e.pieces_.length-e.pieceNum_}function At(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ct(e.pieces_,t)}function Yl(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function kw(e){let t="";for(let i=e.pieceNum_;i<e.pieces_.length;i++)e.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[i])));return t||"/"}function Zs(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function If(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let i=e.pieceNum_;i<e.pieces_.length-1;i++)t.push(e.pieces_[i]);return new Ct(t,0)}function zt(e,t){const i=[];for(let s=e.pieceNum_;s<e.pieces_.length;s++)i.push(e.pieces_[s]);if(t instanceof Ct)for(let s=t.pieceNum_;s<t.pieces_.length;s++)i.push(t.pieces_[s]);else{const s=t.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&i.push(s[o])}return new Ct(i,0)}function rt(e){return e.pieceNum_>=e.pieces_.length}function ue(e,t){const i=st(e),s=st(t);if(i===null)return t;if(i===s)return ue(At(e),At(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Lw(e,t){const i=Zs(e,0),s=Zs(t,0);for(let o=0;o<i.length&&o<s.length;o++){const a=gi(i[o],s[o]);if(a!==0)return a}return i.length===s.length?0:i.length<s.length?-1:1}function Ql(e,t){if(Fn(e)!==Fn(t))return!1;for(let i=e.pieceNum_,s=t.pieceNum_;i<=e.pieces_.length;i++,s++)if(e.pieces_[i]!==t.pieces_[s])return!1;return!0}function ke(e,t){let i=e.pieceNum_,s=t.pieceNum_;if(Fn(e)>Fn(t))return!1;for(;i<e.pieces_.length;){if(e.pieces_[i]!==t.pieces_[s])return!1;++i,++s}return!0}class Aw{constructor(t,i){this.errorPrefix_=i,this.parts_=Zs(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Po(this.parts_[s]);Sf(this)}}function Mw(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Po(t),Sf(e)}function Nw(e){const t=e.parts_.pop();e.byteLength_-=Po(t),e.parts_.length>0&&(e.byteLength_-=1)}function Sf(e){if(e.byteLength_>_u)throw new Error(e.errorPrefix_+"has a key path longer than "+_u+" bytes ("+e.byteLength_+").");if(e.parts_.length>fu)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fu+") or object contains a cycle "+Xn(e))}function Xn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends Pf{constructor(){super(["visible"]);let t,i;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(i="visibilitychange",t="hidden"):typeof document.mozHidden!="undefined"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden!="undefined"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden!="undefined"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Xl}getInitialEvent(t){return O(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=1e3,Rw=60*5*1e3,Ow=3*1e3,pu=30*1e3,Dw=1.3,Bw=3e4,Fw="server_kill",mu=3;class mn extends Tf{constructor(t,i,s,o,a,c,u,f){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=u,this.authOverride_=f,this.id=mn.nextPersistentConnectionId_++,this.log_=Xs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xs,this.maxReconnectDelay_=Rw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!Yd())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xl.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Xr.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const o=++this.requestNumber_,a={r:o,a:t,b:i};this.log_(Kt(a)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[o]=s)}get(t){this.initConnection_();const i=new vn,s={p:t._path.toString(),q:t._queryObject},o={action:"g",request:s,onComplete:c=>{const u=c.d;c.s==="ok"?(this.onDataUpdate_(s.p,u,!1,null),i.resolve(u)):i.reject(u)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const c=this.outstandingGets_[a];c===void 0||o!==c||(delete this.outstandingGets_[a],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+a+" timed out on connection"),i.reject(new Error("Client is offline.")))},Ow),this.connected_&&this.sendGet_(a),i.promise}listen(t,i,s,o){this.initConnection_();const a=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const u={onComplete:o,hashFn:i,query:t,tag:s};this.listens.get(c).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+s+" for "+o);const a={p:s},c="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(c,a,u=>{const f=u.d,_=u.s;mn.warnOnListenWarnings_(f,i),(this.listens.get(s)&&this.listens.get(s).get(o))===t&&(this.log_("listen response",u),_!=="ok"&&this.removeListen_(s,o),t.onComplete&&t.onComplete(_,f))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&tn(t,"w")){const s=Vi(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();de(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Mv(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pu)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=Av(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,o=>{const a=o.s,c=o.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,t._queryObject,i)}sendUnlisten_(t,i,s,o){this.log_("Unlisten on "+t+" for "+i);const a={p:t},c="n";o&&(a.q=s,a.t=o),this.sendRequest(c,a)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,o){const a={p:i,d:s};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(t,i,s,o){this.putInternal("p",t,i,s,o)}merge(t,i,s,o){this.putInternal("m",t,i,s,o)}putInternal(t,i,s,o,a){this.initConnection_();const c={p:i,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:t,request:c,onComplete:o}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Kt(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):tl("Unrecognized action received from server: "+Kt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=xs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Bw&&(this.reconnectDelay_=xs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Dw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+mn.nextConnectionId_++,a=this.lastSessionId;let c=!1,u=null;const f=function(){u?u.close():(c=!0,s())},_=function(m){O(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:f,sendRequest:_};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,v]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);c?ne("getToken() completed but was canceled"):(ne("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,u=new Sw(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,s,T=>{de(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(Fw)},a))}catch(m){this.log_("Failed to get token: "+m),c||(this.repoInfo_.nodeAdmin&&de(m),f())}}}interrupt(t){ne("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ne("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Gh(this.interruptReasons_)&&(this.reconnectDelay_=xs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;i?s=i.map(a=>Vl(a)).join("$"):s="default";const o=this.removeListen_(t,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const s=new Ct(t).toString();let o;if(this.listens.has(s)){const a=this.listens.get(s);o=a.get(i),a.delete(i),a.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(t,i){ne("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=mu&&(this.reconnectDelay_=pu,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ne("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=mu&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+of.replace(/\./g,"-")]=1,Kd()?t["framework.cordova"]=1:Tv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Xr.getInstance().currentlyOnline();return Gh(this.interruptReasons_)&&t}}mn.nextPersistentConnectionId_=0;mn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new at(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const s=new at(fi,t),o=new at(fi,i);return this.compare(s,o)!==0}minPost(){return at.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lr;class kf extends Io{static get __EMPTY_NODE(){return Lr}static set __EMPTY_NODE(t){Lr=t}compare(t,i){return gi(t.name,i.name)}isDefinedOn(t){throw ns("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return at.MIN}maxPost(){return new at(Bn,Lr)}makePost(t,i){return O(typeof t=="string","KeyIndex indexValue must always be a string."),new at(t,Lr)}toString(){return".key"}}const ci=new kf;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(t,i,s,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=i?s(t.key,i):1,o&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Jt{constructor(t,i,s,o,a){this.key=t,this.value=i,this.color=s!=null?s:Jt.RED,this.left=o!=null?o:ge.EMPTY_NODE,this.right=a!=null?a:ge.EMPTY_NODE}copy(t,i,s,o,a){return new Jt(t!=null?t:this.key,i!=null?i:this.value,s!=null?s:this.color,o!=null?o:this.left,a!=null?a:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let o=this;const a=s(t,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(t,i,s),null):a===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ge.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,o;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(t,s.key)===0){if(s.right.isEmpty())return ge.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Jt.RED=!0;Jt.BLACK=!1;class zw{copy(t,i,s,o,a){return this}insert(t,i,s){return new Jt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ge{constructor(t,i=ge.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new ge(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,Jt.BLACK,null,null))}remove(t){return new ge(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Jt.BLACK,null,null))}get(t){let i,s=this.root_;for(;!s.isEmpty();){if(i=this.comparator_(t,s.key),i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}getPredecessorKey(t){let i,s=this.root_,o=null;for(;!s.isEmpty();)if(i=this.comparator_(t,s.key),i===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else i<0?s=s.left:i>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ar(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Ar(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Ar(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Ar(this.root_,null,this.comparator_,!0,t)}}ge.EMPTY_NODE=new zw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(e,t){return gi(e.name,t.name)}function Jl(e,t){return gi(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il;function Hw(e){il=e}const Lf=function(e){return typeof e=="number"?"number:"+hf(e):"string:"+e},Af=function(e){if(e.isLeafNode()){const t=e.val();O(typeof t=="string"||typeof t=="number"||typeof t=="object"&&tn(t,".sv"),"Priority must be a string or number.")}else O(e===il||e.isEmpty(),"priority of unexpected type.");O(e===il||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu;class Xt{constructor(t,i=Xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Af(this.priorityNode_)}static set __childrenNodeConstructor(t){gu=t}static get __childrenNodeConstructor(){return gu}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Xt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return rt(t)?this:st(t)===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:Xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=st(t);return s===null?i:i.isEmpty()&&s!==".priority"?this:(O(s!==".priority"||Fn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(At(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Lf(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=hf(this.value_):t+=this.value_,this.lazyHash_=lf(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Xt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Xt.__childrenNodeConstructor?-1:(O(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,o=Xt.VALUE_TYPE_ORDER.indexOf(i),a=Xt.VALUE_TYPE_ORDER.indexOf(s);return O(o>=0,"Unknown leaf type: "+i),O(a>=0,"Unknown leaf type: "+s),o===a?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}Xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf,Nf;function Uw(e){Mf=e}function Zw(e){Nf=e}class $w extends Io{compare(t,i){const s=t.node.getPriority(),o=i.node.getPriority(),a=s.compareTo(o);return a===0?gi(t.name,i.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return at.MIN}maxPost(){return new at(Bn,new Xt("[PRIORITY-POST]",Nf))}makePost(t,i){const s=Mf(t);return new at(i,new Xt("[PRIORITY-POST]",s))}toString(){return".priority"}}const Bt=new $w;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=Math.log(2);class qw{constructor(t){const i=a=>parseInt(Math.log(a)/Vw,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=s(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Jr=function(e,t,i,s){e.sort(t);const o=function(f,_){const g=_-f;let m,v;if(g===0)return null;if(g===1)return m=e[f],v=i?i(m):m,new Jt(v,m.node,Jt.BLACK,null,null);{const T=parseInt(g/2,10)+f,A=o(f,T),D=o(T+1,_);return m=e[T],v=i?i(m):m,new Jt(v,m.node,Jt.BLACK,A,D)}},a=function(f){let _=null,g=null,m=e.length;const v=function(A,D){const $=m-A,nt=m;m-=A;const Mt=o($+1,nt),q=e[$],X=i?i(q):q;T(new Jt(X,q.node,D,null,Mt))},T=function(A){_?(_.left=A,_=A):(g=A,_=A)};for(let A=0;A<f.count;++A){const D=f.nextBitIsOne(),$=Math.pow(2,f.count-(A+1));D?v($,Jt.BLACK):(v($,Jt.BLACK),v($,Jt.RED))}return g},c=new qw(e.length),u=a(c);return new ge(s||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La;const Ni={};class pn{constructor(t,i){this.indexes_=t,this.indexSet_=i}static get Default(){return O(Ni&&Bt,"ChildrenNode.ts has not been loaded"),La=La||new pn({".priority":Ni},{".priority":Bt}),La}get(t){const i=Vi(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof ge?i:null}hasIndex(t){return tn(this.indexSet_,t.toString())}addIndex(t,i){O(t!==ci,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const a=i.getIterator(at.Wrap);let c=a.getNext();for(;c;)o=o||t.isDefinedOn(c.node),s.push(c),c=a.getNext();let u;o?u=Jr(s,t.getCompare()):u=Ni;const f=t.toString(),_=Object.assign({},this.indexSet_);_[f]=t;const g=Object.assign({},this.indexes_);return g[f]=u,new pn(g,_)}addToIndexes(t,i){const s=Kr(this.indexes_,(o,a)=>{const c=Vi(this.indexSet_,a);if(O(c,"Missing index implementation for "+a),o===Ni)if(c.isDefinedOn(t.node)){const u=[],f=i.getIterator(at.Wrap);let _=f.getNext();for(;_;)_.name!==t.name&&u.push(_),_=f.getNext();return u.push(t),Jr(u,c.getCompare())}else return Ni;else{const u=i.get(t.name);let f=o;return u&&(f=f.remove(new at(t.name,u))),f.insert(t,t.node)}});return new pn(s,this.indexSet_)}removeFromIndexes(t,i){const s=Kr(this.indexes_,o=>{if(o===Ni)return o;{const a=i.get(t.name);return a?o.remove(new at(t.name,a)):o}});return new pn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Es;class Y{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Af(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Es||(Es=new Y(new ge(Jl),null,pn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Es}updatePriority(t){return this.children_.isEmpty()?this:new Y(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?Es:i}}getChild(t){const i=st(t);return i===null?this:this.getImmediateChild(i).getChild(At(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(O(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const s=new at(t,i);let o,a;i.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(s,this.children_));const c=o.isEmpty()?Es:this.priorityNode_;return new Y(o,c,a)}}updateChild(t,i){const s=st(t);if(s===null)return i;{O(st(t)!==".priority"||Fn(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(At(t),i);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,o=0,a=!0;if(this.forEachChild(Bt,(c,u)=>{i[c]=u.val(t),s++,a&&Y.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!t&&a&&o<2*s){const c=[];for(const u in i)c[u]=i[u];return c}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Lf(this.getPriority().val())+":"),this.forEachChild(Bt,(i,s)=>{const o=s.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":lf(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const o=this.resolveIndex_(s);if(o){const a=o.getPredecessorKey(new at(t,i));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new at(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new at(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,at.Wrap);let a=o.peek();for(;a!=null&&i.compare(a,t)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,at.Wrap);let a=o.peek();for(;a!=null&&i.compare(a,t)>0;)o.getNext(),a=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Js?-1:0}withIndex(t){if(t===ci||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new Y(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ci||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const s=this.getIterator(Bt),o=i.getIterator(Bt);let a=s.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=o.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===ci?null:this.indexMap_.get(t.toString())}}Y.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class jw extends Y{constructor(){super(new ge(Jl),Y.EMPTY_NODE,pn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Y.EMPTY_NODE}isEmpty(){return!1}}const Js=new jw;Object.defineProperties(at,{MIN:{value:new at(fi,Y.EMPTY_NODE)},MAX:{value:new at(Bn,Js)}});kf.__EMPTY_NODE=Y.EMPTY_NODE;Xt.__childrenNodeConstructor=Y;Hw(Js);Zw(Js);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=!0;function Gt(e,t=null){if(e===null)return Y.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),O(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const i=e;return new Xt(i,Gt(t))}if(!(e instanceof Array)&&Gw){const i=[];let s=!1;if(se(e,(c,u)=>{if(c.substring(0,1)!=="."){const f=Gt(u);f.isEmpty()||(s=s||!f.getPriority().isEmpty(),i.push(new at(c,f)))}}),i.length===0)return Y.EMPTY_NODE;const a=Jr(i,Ww,c=>c.name,Jl);if(s){const c=Jr(i,Bt.getCompare());return new Y(a,Gt(t),new pn({".priority":c},{".priority":Bt}))}else return new Y(a,Gt(t),pn.Default)}else{let i=Y.EMPTY_NODE;return se(e,(s,o)=>{if(tn(e,s)&&s.substring(0,1)!=="."){const a=Gt(o);(a.isLeafNode()||!a.isEmpty())&&(i=i.updateImmediateChild(s,a))}}),i.updatePriority(Gt(t))}}Uw(Gt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends Io{constructor(t){super(),this.indexPath_=t,O(!rt(t)&&st(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const s=this.extractChild(t.node),o=this.extractChild(i.node),a=s.compareTo(o);return a===0?gi(t.name,i.name):a}makePost(t,i){const s=Gt(t),o=Y.EMPTY_NODE.updateChild(this.indexPath_,s);return new at(i,o)}maxPost(){const t=Y.EMPTY_NODE.updateChild(this.indexPath_,Js);return new at(Bn,t)}toString(){return Zs(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends Io{compare(t,i){const s=t.node.compareTo(i.node);return s===0?gi(t.name,i.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return at.MIN}maxPost(){return at.MAX}makePost(t,i){const s=Gt(t);return new at(i,s)}toString(){return".value"}}const Rf=new Kw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(e){return{type:"value",snapshotNode:e}}function ji(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function $s(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Vs(e,t,i){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:i}}function Yw(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t){this.index_=t}updateChild(t,i,s,o,a,c){O(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(i);return u.getChild(o).equals(s.getChild(o))&&u.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?t.hasChild(i)?c.trackChildChange($s(i,u)):O(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?c.trackChildChange(ji(i,s)):c.trackChildChange(Vs(i,s,u))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(i,s).withIndex(this.index_)}updateFullNode(t,i,s){return s!=null&&(t.isLeafNode()||t.forEachChild(Bt,(o,a)=>{i.hasChild(o)||s.trackChildChange($s(o,a))}),i.isLeafNode()||i.forEachChild(Bt,(o,a)=>{if(t.hasChild(o)){const c=t.getImmediateChild(o);c.equals(a)||s.trackChildChange(Vs(o,a,c))}else s.trackChildChange(ji(o,a))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?Y.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this.indexedFilter_=new ec(t.getIndex()),this.index_=t.getIndex(),this.startPost_=qs.getStartPost_(t),this.endPost_=qs.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,i,s,o,a,c){return this.matches(new at(i,s))||(s=Y.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,s,o,a,c)}updateFullNode(t,i,s){i.isLeafNode()&&(i=Y.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(Y.EMPTY_NODE);const a=this;return i.forEachChild(Bt,(c,u)=>{a.matches(new at(c,u))||(o=o.updateImmediateChild(c,Y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t){this.rangedFilter_=new qs(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,i,s,o,a,c){return this.rangedFilter_.matches(new at(i,s))||(s=Y.EMPTY_NODE),t.getImmediateChild(i).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,s,o,a,c):this.fullLimitUpdateChild_(t,i,s,a,c)}updateFullNode(t,i,s){let o;if(i.isLeafNode()||i.isEmpty())o=Y.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=Y.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const u=a.getNext();let f;if(this.reverse_?f=this.index_.compare(this.rangedFilter_.getStartPost(),u)<=0:f=this.index_.compare(u,this.rangedFilter_.getEndPost())<=0,f)o=o.updateImmediateChild(u.name,u.node),c++;else break}}else{o=i.withIndex(this.index_),o=o.updatePriority(Y.EMPTY_NODE);let a,c,u,f;if(this.reverse_){f=o.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const m=this.index_.getCompare();u=(v,T)=>m(T,v)}else f=o.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();let _=0,g=!1;for(;f.hasNext();){const m=f.getNext();!g&&u(a,m)<=0&&(g=!0),g&&_<this.limit_&&u(m,c)<=0?_++:o=o.updateImmediateChild(m.name,Y.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,s)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,s,o,a){let c;if(this.reverse_){const m=this.index_.getCompare();c=(v,T)=>m(T,v)}else c=this.index_.getCompare();const u=t;O(u.numChildren()===this.limit_,"");const f=new at(i,s),_=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(u.hasChild(i)){const m=u.getImmediateChild(i);let v=o.getChildAfterChild(this.index_,_,this.reverse_);for(;v!=null&&(v.name===i||u.hasChild(v.name));)v=o.getChildAfterChild(this.index_,v,this.reverse_);const T=v==null?1:c(v,f);if(g&&!s.isEmpty()&&T>=0)return a!=null&&a.trackChildChange(Vs(i,s,m)),u.updateImmediateChild(i,s);{a!=null&&a.trackChildChange($s(i,m));const D=u.updateImmediateChild(i,Y.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a!=null&&a.trackChildChange(ji(v.name,v.node)),D.updateImmediateChild(v.name,v.node)):D}}else return s.isEmpty()?t:g&&c(_,f)>=0?(a!=null&&(a.trackChildChange($s(_.name,_.node)),a.trackChildChange(ji(i,s))),u.updateImmediateChild(i,s).updateImmediateChild(_.name,Y.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fi}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bt}copy(){const t=new nc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Xw(e){return e.loadsAllData()?new ec(e.getIndex()):e.hasLimit()?new Qw(e):new qs(e)}function Jw(e,t,i){const s=e.copy();return s.startSet_=!0,t===void 0&&(t=null),s.indexStartValue_=t,i!=null?(s.startNameSet_=!0,s.indexStartName_=i):(s.startNameSet_=!1,s.indexStartName_=""),s}function tb(e,t,i){const s=e.copy();return s.endSet_=!0,t===void 0&&(t=null),s.indexEndValue_=t,i!==void 0?(s.endNameSet_=!0,s.indexEndName_=i):(s.endNameSet_=!1,s.indexEndName_=""),s}function eb(e,t){const i=e.copy();return i.index_=t,i}function vu(e){const t={};if(e.isDefault())return t;let i;return e.index_===Bt?i="$priority":e.index_===Rf?i="$value":e.index_===ci?i="$key":(O(e.index_ instanceof tc,"Unrecognized index type!"),i=e.index_.toString()),t.orderBy=Kt(i),e.startSet_&&(t.startAt=Kt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Kt(e.indexStartName_))),e.endSet_&&(t.endAt=Kt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Kt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function yu(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let i=e.viewFrom_;i===""&&(e.isViewFromLeft()?i="l":i="r"),t.vf=i}return e.index_!==Bt&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Tf{constructor(t,i,s,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=Xs("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(O(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,i,s,o){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const c=to.getListenId_(t,s),u={};this.listens_[c]=u;const f=vu(t._queryParams);this.restRequest_(a+".json",f,(_,g)=>{let m=g;if(_===404&&(m=null,_=null),_===null&&this.onDataUpdate_(a,m,!1,s),Vi(this.listens_,c)===u){let v;_?_===401?v="permission_denied":v="rest_error:"+_:v="ok",o(v,null)}})}unlisten(t,i){const s=to.getListenId_(t,i);delete this.listens_[s]}get(t){const i=vu(t._queryParams),s=t._path.toString(),o=new vn;return this.restRequest_(s+".json",i,(a,c)=>{let u=c;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(s,u,!1,null),o.resolve(u)):o.reject(new Error(u))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},s){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(i.auth=o.accessToken),a&&a.token&&(i.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Nv(i);this.log_("Sending REST request for "+c);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(s&&u.readyState===4){this.log_("REST Response for "+c+" received. status:",u.status,"response:",u.responseText);let f=null;if(u.status>=200&&u.status<300){try{f=Hs(u.responseText)}catch{de("Failed to parse JSON response for "+c+": "+u.responseText)}s(null,f)}else u.status!==401&&u.status!==404&&de("Got unsuccessful REST response for "+c+" Status: "+u.status),s(u.status);s=null}},u.open("GET",c,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.rootNode_=Y.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(){return{value:null,children:new Map}}function Df(e,t,i){if(rt(t))e.value=i,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,i);else{const s=st(t);e.children.has(s)||e.children.set(s,eo());const o=e.children.get(s);t=At(t),Df(o,t,i)}}function sl(e,t,i){e.value!==null?i(t,e.value):ib(e,(s,o)=>{const a=new Ct(t.toString()+"/"+s);sl(o,a,i)})}function ib(e,t){e.children.forEach((i,s)=>{t(s,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&se(this.last_,(s,o)=>{i[s]=i[s]-o}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=10*1e3,rb=30*1e3,ob=5*60*1e3;class ab{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new sb(t);const s=wu+(rb-wu)*Math.random();Ms(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),i={};let s=!1;se(t,(o,a)=>{a>0&&tn(this.statsToReport_,o)&&(i[o]=a,s=!0)}),s&&this.server_.reportStats(i),Ms(this.reportStats_.bind(this),Math.floor(Math.random()*2*ob))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Be||(Be={}));function ic(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rc(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t,i,s){this.path=t,this.affectedTree=i,this.revert=s,this.type=Be.ACK_USER_WRITE,this.source=ic()}operationForChild(t){if(rt(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Ct(t));return new no(vt(),i,this.revert)}}else return O(st(this.path)===t,"operationForChild called for unrelated child."),new no(At(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t,i){this.source=t,this.path=i,this.type=Be.LISTEN_COMPLETE}operationForChild(t){return rt(this.path)?new js(this.source,vt()):new js(this.source,At(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t,i,s){this.source=t,this.path=i,this.snap=s,this.type=Be.OVERWRITE}operationForChild(t){return rt(this.path)?new _i(this.source,vt(),this.snap.getImmediateChild(t)):new _i(this.source,At(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,i,s){this.source=t,this.path=i,this.children=s,this.type=Be.MERGE}operationForChild(t){if(rt(this.path)){const i=this.children.subtree(new Ct(t));return i.isEmpty()?null:i.value?new _i(this.source,vt(),i.value):new Gi(this.source,vt(),i)}else return O(st(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Gi(this.source,At(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(t,i,s){this.node_=t,this.fullyInitialized_=i,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(rt(t))return this.isFullyInitialized()&&!this.filtered_;const i=st(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function cb(e,t,i,s){const o=[],a=[];return t.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(Yw(c.childName,c.snapshotNode))}),Ts(e,o,"child_removed",t,s,i),Ts(e,o,"child_added",t,s,i),Ts(e,o,"child_moved",a,s,i),Ts(e,o,"child_changed",t,s,i),Ts(e,o,"value",t,s,i),o}function Ts(e,t,i,s,o,a){const c=s.filter(u=>u.type===i);c.sort((u,f)=>ub(e,u,f)),c.forEach(u=>{const f=hb(e,u,a);o.forEach(_=>{_.respondsTo(u.type)&&t.push(_.createEvent(f,e.query_))})})}function hb(e,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function ub(e,t,i){if(t.childName==null||i.childName==null)throw ns("Should only compare child_ events.");const s=new at(t.childName,t.snapshotNode),o=new at(i.childName,i.snapshotNode);return e.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(e,t){return{eventCache:e,serverCache:t}}function Ns(e,t,i,s){return So(new zn(t,i,s),e.serverCache)}function Bf(e,t,i,s){return So(e.eventCache,new zn(t,i,s))}function io(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function pi(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa;const db=()=>(Aa||(Aa=new ge(qy)),Aa);class kt{constructor(t,i=db()){this.value=t,this.children=i}static fromObject(t){let i=new kt(null);return se(t,(s,o)=>{i=i.set(new Ct(s),o)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:vt(),value:this.value};if(rt(t))return null;{const s=st(t),o=this.children.get(s);if(o!==null){const a=o.findRootMostMatchingPathAndValue(At(t),i);return a!=null?{path:zt(new Ct(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(rt(t))return this;{const i=st(t),s=this.children.get(i);return s!==null?s.subtree(At(t)):new kt(null)}}set(t,i){if(rt(t))return new kt(i,this.children);{const s=st(t),a=(this.children.get(s)||new kt(null)).set(At(t),i),c=this.children.insert(s,a);return new kt(this.value,c)}}remove(t){if(rt(t))return this.children.isEmpty()?new kt(null):new kt(null,this.children);{const i=st(t),s=this.children.get(i);if(s){const o=s.remove(At(t));let a;return o.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,o),this.value===null&&a.isEmpty()?new kt(null):new kt(this.value,a)}else return this}}get(t){if(rt(t))return this.value;{const i=st(t),s=this.children.get(i);return s?s.get(At(t)):null}}setTree(t,i){if(rt(t))return i;{const s=st(t),a=(this.children.get(s)||new kt(null)).setTree(At(t),i);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new kt(this.value,c)}}fold(t){return this.fold_(vt(),t)}fold_(t,i){const s={};return this.children.inorderTraversal((o,a)=>{s[o]=a.fold_(zt(t,o),i)}),i(t,this.value,s)}findOnPath(t,i){return this.findOnPath_(t,vt(),i)}findOnPath_(t,i,s){const o=this.value?s(i,this.value):!1;if(o)return o;if(rt(t))return null;{const a=st(t),c=this.children.get(a);return c?c.findOnPath_(At(t),zt(i,a),s):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,vt(),i)}foreachOnPath_(t,i,s){if(rt(t))return this;{this.value&&s(i,this.value);const o=st(t),a=this.children.get(o);return a?a.foreachOnPath_(At(t),zt(i,o),s):new kt(null)}}foreach(t){this.foreach_(vt(),t)}foreach_(t,i){this.children.inorderTraversal((s,o)=>{o.foreach_(zt(t,s),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,s)=>{s.value&&t(i,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.writeTree_=t}static empty(){return new ze(new kt(null))}}function Rs(e,t,i){if(rt(t))return new ze(new kt(i));{const s=e.writeTree_.findRootMostValueAndPath(t);if(s!=null){const o=s.path;let a=s.value;const c=ue(o,t);return a=a.updateChild(c,i),new ze(e.writeTree_.set(o,a))}else{const o=new kt(i),a=e.writeTree_.setTree(t,o);return new ze(a)}}}function rl(e,t,i){let s=e;return se(i,(o,a)=>{s=Rs(s,zt(t,o),a)}),s}function bu(e,t){if(rt(t))return ze.empty();{const i=e.writeTree_.setTree(t,new kt(null));return new ze(i)}}function ol(e,t){return vi(e,t)!=null}function vi(e,t){const i=e.writeTree_.findRootMostValueAndPath(t);return i!=null?e.writeTree_.get(i.path).getChild(ue(i.path,t)):null}function Cu(e){const t=[],i=e.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Bt,(s,o)=>{t.push(new at(s,o))}):e.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&t.push(new at(s,o.value))}),t}function Rn(e,t){if(rt(t))return e;{const i=vi(e,t);return i!=null?new ze(new kt(i)):new ze(e.writeTree_.subtree(t))}}function al(e){return e.writeTree_.isEmpty()}function Ki(e,t){return Ff(vt(),e.writeTree_,t)}function Ff(e,t,i){if(t.value!=null)return i.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal((o,a)=>{o===".priority"?(O(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):i=Ff(zt(e,o),a,i)}),!i.getChild(e).isEmpty()&&s!==null&&(i=i.updateChild(zt(e,".priority"),s)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(e,t){return Uf(t,e)}function fb(e,t,i,s,o){O(s>e.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),e.allWrites.push({path:t,snap:i,writeId:s,visible:o}),o&&(e.visibleWrites=Rs(e.visibleWrites,t,i)),e.lastWriteId=s}function _b(e,t,i,s){O(s>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:i,writeId:s,visible:!0}),e.visibleWrites=rl(e.visibleWrites,t,i),e.lastWriteId=s}function pb(e,t){for(let i=0;i<e.allWrites.length;i++){const s=e.allWrites[i];if(s.writeId===t)return s}return null}function mb(e,t){const i=e.allWrites.findIndex(u=>u.writeId===t);O(i>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[i];e.allWrites.splice(i,1);let o=s.visible,a=!1,c=e.allWrites.length-1;for(;o&&c>=0;){const u=e.allWrites[c];u.visible&&(c>=i&&gb(u,s.path)?o=!1:ke(s.path,u.path)&&(a=!0)),c--}if(o){if(a)return vb(e),!0;if(s.snap)e.visibleWrites=bu(e.visibleWrites,s.path);else{const u=s.children;se(u,f=>{e.visibleWrites=bu(e.visibleWrites,zt(s.path,f))})}return!0}else return!1}function gb(e,t){if(e.snap)return ke(e.path,t);for(const i in e.children)if(e.children.hasOwnProperty(i)&&ke(zt(e.path,i),t))return!0;return!1}function vb(e){e.visibleWrites=zf(e.allWrites,yb,vt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function yb(e){return e.visible}function zf(e,t,i){let s=ze.empty();for(let o=0;o<e.length;++o){const a=e[o];if(t(a)){const c=a.path;let u;if(a.snap)ke(i,c)?(u=ue(i,c),s=Rs(s,u,a.snap)):ke(c,i)&&(u=ue(c,i),s=Rs(s,vt(),a.snap.getChild(u)));else if(a.children){if(ke(i,c))u=ue(i,c),s=rl(s,u,a.children);else if(ke(c,i))if(u=ue(c,i),rt(u))s=rl(s,vt(),a.children);else{const f=Vi(a.children,st(u));if(f){const _=f.getChild(At(u));s=Rs(s,vt(),_)}}}else throw ns("WriteRecord should have .snap or .children")}}return s}function Wf(e,t,i,s,o){if(!s&&!o){const a=vi(e.visibleWrites,t);if(a!=null)return a;{const c=Rn(e.visibleWrites,t);if(al(c))return i;if(i==null&&!ol(c,vt()))return null;{const u=i||Y.EMPTY_NODE;return Ki(c,u)}}}else{const a=Rn(e.visibleWrites,t);if(!o&&al(a))return i;if(!o&&i==null&&!ol(a,vt()))return null;{const c=function(_){return(_.visible||o)&&(!s||!~s.indexOf(_.writeId))&&(ke(_.path,t)||ke(t,_.path))},u=zf(e.allWrites,c,t),f=i||Y.EMPTY_NODE;return Ki(u,f)}}}function wb(e,t,i){let s=Y.EMPTY_NODE;const o=vi(e.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Bt,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(i){const a=Rn(e.visibleWrites,t);return i.forEachChild(Bt,(c,u)=>{const f=Ki(Rn(a,new Ct(c)),u);s=s.updateImmediateChild(c,f)}),Cu(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=Rn(e.visibleWrites,t);return Cu(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function bb(e,t,i,s,o){O(s||o,"Either existingEventSnap or existingServerSnap must exist");const a=zt(t,i);if(ol(e.visibleWrites,a))return null;{const c=Rn(e.visibleWrites,a);return al(c)?o.getChild(i):Ki(c,o.getChild(i))}}function Cb(e,t,i,s){const o=zt(t,i),a=vi(e.visibleWrites,o);if(a!=null)return a;if(s.isCompleteForChild(i)){const c=Rn(e.visibleWrites,o);return Ki(c,s.getNode().getImmediateChild(i))}else return null}function xb(e,t){return vi(e.visibleWrites,t)}function Eb(e,t,i,s,o,a,c){let u;const f=Rn(e.visibleWrites,t),_=vi(f,vt());if(_!=null)u=_;else if(i!=null)u=Ki(f,i);else return[];if(u=u.withIndex(c),!u.isEmpty()&&!u.isLeafNode()){const g=[],m=c.getCompare(),v=a?u.getReverseIteratorFrom(s,c):u.getIteratorFrom(s,c);let T=v.getNext();for(;T&&g.length<o;)m(T,s)!==0&&g.push(T),T=v.getNext();return g}else return[]}function Tb(){return{visibleWrites:ze.empty(),allWrites:[],lastWriteId:-1}}function so(e,t,i,s){return Wf(e.writeTree,e.treePath,t,i,s)}function oc(e,t){return wb(e.writeTree,e.treePath,t)}function xu(e,t,i,s){return bb(e.writeTree,e.treePath,t,i,s)}function ro(e,t){return xb(e.writeTree,zt(e.treePath,t))}function Pb(e,t,i,s,o,a){return Eb(e.writeTree,e.treePath,t,i,s,o,a)}function ac(e,t,i){return Cb(e.writeTree,e.treePath,t,i)}function Hf(e,t){return Uf(zt(e.treePath,t),e.writeTree)}function Uf(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,s=t.childName;O(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),O(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const a=o.type;if(i==="child_added"&&a==="child_removed")this.changeMap.set(s,Vs(s,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(i==="child_removed"&&a==="child_changed")this.changeMap.set(s,$s(s,o.oldSnap));else if(i==="child_changed"&&a==="child_added")this.changeMap.set(s,ji(s,t.snapshotNode));else if(i==="child_changed"&&a==="child_changed")this.changeMap.set(s,Vs(s,t.snapshotNode,o.oldSnap));else throw ns("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{getCompleteChild(t){return null}getChildAfterChild(t,i,s){return null}}const Zf=new Sb;class lc{constructor(t,i,s=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=s}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new zn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ac(this.writes_,t,s)}}getChildAfterChild(t,i,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:pi(this.viewCache_),a=Pb(this.writes_,o,i,1,s,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(e){return{filter:e}}function Lb(e,t){O(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),O(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Ab(e,t,i,s,o){const a=new Ib;let c,u;if(i.type===Be.OVERWRITE){const _=i;_.source.fromUser?c=ll(e,t,_.path,_.snap,s,o,a):(O(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered()&&!rt(_.path),c=oo(e,t,_.path,_.snap,s,o,u,a))}else if(i.type===Be.MERGE){const _=i;_.source.fromUser?c=Nb(e,t,_.path,_.children,s,o,a):(O(_.source.fromServer,"Unknown source."),u=_.source.tagged||t.serverCache.isFiltered(),c=cl(e,t,_.path,_.children,s,o,u,a))}else if(i.type===Be.ACK_USER_WRITE){const _=i;_.revert?c=Db(e,t,_.path,s,o,a):c=Rb(e,t,_.path,_.affectedTree,s,o,a)}else if(i.type===Be.LISTEN_COMPLETE)c=Ob(e,t,i.path,s,a);else throw ns("Unknown operation type: "+i.type);const f=a.getChanges();return Mb(t,c,f),{viewCache:c,changes:f}}function Mb(e,t,i){const s=t.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=io(e);(i.length>0||!e.eventCache.isFullyInitialized()||o&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&i.push(Of(io(t)))}}function $f(e,t,i,s,o,a){const c=t.eventCache;if(ro(s,i)!=null)return t;{let u,f;if(rt(i))if(O(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=pi(t),g=_ instanceof Y?_:Y.EMPTY_NODE,m=oc(s,g);u=e.filter.updateFullNode(t.eventCache.getNode(),m,a)}else{const _=so(s,pi(t));u=e.filter.updateFullNode(t.eventCache.getNode(),_,a)}else{const _=st(i);if(_===".priority"){O(Fn(i)===1,"Can't have a priority with additional path components");const g=c.getNode();f=t.serverCache.getNode();const m=xu(s,i,g,f);m!=null?u=e.filter.updatePriority(g,m):u=c.getNode()}else{const g=At(i);let m;if(c.isCompleteForChild(_)){f=t.serverCache.getNode();const v=xu(s,i,c.getNode(),f);v!=null?m=c.getNode().getImmediateChild(_).updateChild(g,v):m=c.getNode().getImmediateChild(_)}else m=ac(s,_,t.serverCache);m!=null?u=e.filter.updateChild(c.getNode(),_,m,g,o,a):u=c.getNode()}}return Ns(t,u,c.isFullyInitialized()||rt(i),e.filter.filtersNodes())}}function oo(e,t,i,s,o,a,c,u){const f=t.serverCache;let _;const g=c?e.filter:e.filter.getIndexedFilter();if(rt(i))_=g.updateFullNode(f.getNode(),s,null);else if(g.filtersNodes()&&!f.isFiltered()){const T=f.getNode().updateChild(i,s);_=g.updateFullNode(f.getNode(),T,null)}else{const T=st(i);if(!f.isCompleteForPath(i)&&Fn(i)>1)return t;const A=At(i),$=f.getNode().getImmediateChild(T).updateChild(A,s);T===".priority"?_=g.updatePriority(f.getNode(),$):_=g.updateChild(f.getNode(),T,$,A,Zf,null)}const m=Bf(t,_,f.isFullyInitialized()||rt(i),g.filtersNodes()),v=new lc(o,m,a);return $f(e,m,i,o,v,u)}function ll(e,t,i,s,o,a,c){const u=t.eventCache;let f,_;const g=new lc(o,t,a);if(rt(i))_=e.filter.updateFullNode(t.eventCache.getNode(),s,c),f=Ns(t,_,!0,e.filter.filtersNodes());else{const m=st(i);if(m===".priority")_=e.filter.updatePriority(t.eventCache.getNode(),s),f=Ns(t,_,u.isFullyInitialized(),u.isFiltered());else{const v=At(i),T=u.getNode().getImmediateChild(m);let A;if(rt(v))A=s;else{const D=g.getCompleteChild(m);D!=null?Yl(v)===".priority"&&D.getChild(If(v)).isEmpty()?A=D:A=D.updateChild(v,s):A=Y.EMPTY_NODE}if(T.equals(A))f=t;else{const D=e.filter.updateChild(u.getNode(),m,A,v,g,c);f=Ns(t,D,u.isFullyInitialized(),e.filter.filtersNodes())}}}return f}function Eu(e,t){return e.eventCache.isCompleteForChild(t)}function Nb(e,t,i,s,o,a,c){let u=t;return s.foreach((f,_)=>{const g=zt(i,f);Eu(t,st(g))&&(u=ll(e,u,g,_,o,a,c))}),s.foreach((f,_)=>{const g=zt(i,f);Eu(t,st(g))||(u=ll(e,u,g,_,o,a,c))}),u}function Tu(e,t,i){return i.foreach((s,o)=>{t=t.updateChild(s,o)}),t}function cl(e,t,i,s,o,a,c,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let f=t,_;rt(i)?_=s:_=new kt(null).setTree(i,s);const g=t.serverCache.getNode();return _.children.inorderTraversal((m,v)=>{if(g.hasChild(m)){const T=t.serverCache.getNode().getImmediateChild(m),A=Tu(e,T,v);f=oo(e,f,new Ct(m),A,o,a,c,u)}}),_.children.inorderTraversal((m,v)=>{const T=!t.serverCache.isCompleteForChild(m)&&v.value===void 0;if(!g.hasChild(m)&&!T){const A=t.serverCache.getNode().getImmediateChild(m),D=Tu(e,A,v);f=oo(e,f,new Ct(m),D,o,a,c,u)}}),f}function Rb(e,t,i,s,o,a,c){if(ro(o,i)!=null)return t;const u=t.serverCache.isFiltered(),f=t.serverCache;if(s.value!=null){if(rt(i)&&f.isFullyInitialized()||f.isCompleteForPath(i))return oo(e,t,i,f.getNode().getChild(i),o,a,u,c);if(rt(i)){let _=new kt(null);return f.getNode().forEachChild(ci,(g,m)=>{_=_.set(new Ct(g),m)}),cl(e,t,i,_,o,a,u,c)}else return t}else{let _=new kt(null);return s.foreach((g,m)=>{const v=zt(i,g);f.isCompleteForPath(v)&&(_=_.set(g,f.getNode().getChild(v)))}),cl(e,t,i,_,o,a,u,c)}}function Ob(e,t,i,s,o){const a=t.serverCache,c=Bf(t,a.getNode(),a.isFullyInitialized()||rt(i),a.isFiltered());return $f(e,c,i,s,Zf,o)}function Db(e,t,i,s,o,a){let c;if(ro(s,i)!=null)return t;{const u=new lc(s,t,o),f=t.eventCache.getNode();let _;if(rt(i)||st(i)===".priority"){let g;if(t.serverCache.isFullyInitialized())g=so(s,pi(t));else{const m=t.serverCache.getNode();O(m instanceof Y,"serverChildren would be complete if leaf node"),g=oc(s,m)}g=g,_=e.filter.updateFullNode(f,g,a)}else{const g=st(i);let m=ac(s,g,t.serverCache);m==null&&t.serverCache.isCompleteForChild(g)&&(m=f.getImmediateChild(g)),m!=null?_=e.filter.updateChild(f,g,m,At(i),u,a):t.eventCache.getNode().hasChild(g)?_=e.filter.updateChild(f,g,Y.EMPTY_NODE,At(i),u,a):_=f,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=so(s,pi(t)),c.isLeafNode()&&(_=e.filter.updateFullNode(_,c,a)))}return c=t.serverCache.isFullyInitialized()||ro(s,vt())!=null,Ns(t,_,c,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new ec(s.getIndex()),a=Xw(s);this.processor_=kb(a);const c=i.serverCache,u=i.eventCache,f=o.updateFullNode(Y.EMPTY_NODE,c.getNode(),null),_=a.updateFullNode(Y.EMPTY_NODE,u.getNode(),null),g=new zn(f,c.isFullyInitialized(),o.filtersNodes()),m=new zn(_,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=So(m,g),this.eventGenerator_=new lb(this.query_)}get query(){return this.query_}}function Fb(e){return e.viewCache_.serverCache.getNode()}function zb(e){return io(e.viewCache_)}function Wb(e,t){const i=pi(e.viewCache_);return i&&(e.query._queryParams.loadsAllData()||!rt(t)&&!i.getImmediateChild(st(t)).isEmpty())?i.getChild(t):null}function Pu(e){return e.eventRegistrations_.length===0}function Hb(e,t){e.eventRegistrations_.push(t)}function Iu(e,t,i){const s=[];if(i){O(t==null,"A cancel should cancel all event registrations.");const o=e.query._path;e.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(i,o);c&&s.push(c)})}if(t){let o=[];for(let a=0;a<e.eventRegistrations_.length;++a){const c=e.eventRegistrations_[a];if(!c.matches(t))o.push(c);else if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}e.eventRegistrations_=o}else e.eventRegistrations_=[];return s}function Su(e,t,i,s){t.type===Be.MERGE&&t.source.queryId!==null&&(O(pi(e.viewCache_),"We should always have a full cache before handling merges"),O(io(e.viewCache_),"Missing event cache, even though we have a server cache"));const o=e.viewCache_,a=Ab(e.processor_,o,t,i,s);return Lb(e.processor_,a.viewCache),O(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Vf(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Ub(e,t){const i=e.viewCache_.eventCache,s=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Bt,(a,c)=>{s.push(ji(a,c))}),i.isFullyInitialized()&&s.push(Of(i.getNode())),Vf(e,s,i.getNode(),t)}function Vf(e,t,i,s){const o=s?[s]:e.eventRegistrations_;return cb(e.eventGenerator_,t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao;class qf{constructor(){this.views=new Map}}function Zb(e){O(!ao,"__referenceConstructor has already been defined"),ao=e}function $b(){return O(ao,"Reference.ts has not been loaded"),ao}function Vb(e){return e.views.size===0}function cc(e,t,i,s){const o=t.source.queryId;if(o!==null){const a=e.views.get(o);return O(a!=null,"SyncTree gave us an op for an invalid query."),Su(a,t,i,s)}else{let a=[];for(const c of e.views.values())a=a.concat(Su(c,t,i,s));return a}}function jf(e,t,i,s,o){const a=t._queryIdentifier,c=e.views.get(a);if(!c){let u=so(i,o?s:null),f=!1;u?f=!0:s instanceof Y?(u=oc(i,s),f=!1):(u=Y.EMPTY_NODE,f=!1);const _=So(new zn(u,f,!1),new zn(s,o,!1));return new Bb(t,_)}return c}function qb(e,t,i,s,o,a){const c=jf(e,t,s,o,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,c),Hb(c,i),Ub(c,i)}function jb(e,t,i,s){const o=t._queryIdentifier,a=[];let c=[];const u=Wn(e);if(o==="default")for(const[f,_]of e.views.entries())c=c.concat(Iu(_,i,s)),Pu(_)&&(e.views.delete(f),_.query._queryParams.loadsAllData()||a.push(_.query));else{const f=e.views.get(o);f&&(c=c.concat(Iu(f,i,s)),Pu(f)&&(e.views.delete(o),f.query._queryParams.loadsAllData()||a.push(f.query)))}return u&&!Wn(e)&&a.push(new($b())(t._repo,t._path)),{removed:a,events:c}}function Gf(e){const t=[];for(const i of e.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function On(e,t){let i=null;for(const s of e.views.values())i=i||Wb(s,t);return i}function Kf(e,t){if(t._queryParams.loadsAllData())return Lo(e);{const s=t._queryIdentifier;return e.views.get(s)}}function Yf(e,t){return Kf(e,t)!=null}function Wn(e){return Lo(e)!=null}function Lo(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo;function Gb(e){O(!lo,"__referenceConstructor has already been defined"),lo=e}function Kb(){return O(lo,"Reference.ts has not been loaded"),lo}let Yb=1;class ku{constructor(t){this.listenProvider_=t,this.syncPointTree_=new kt(null),this.pendingWriteTree_=Tb(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qf(e,t,i,s,o){return fb(e.pendingWriteTree_,t,i,s,o),o?ss(e,new _i(ic(),t,i)):[]}function Qb(e,t,i,s){_b(e.pendingWriteTree_,t,i,s);const o=kt.fromObject(i);return ss(e,new Gi(ic(),t,o))}function An(e,t,i=!1){const s=pb(e.pendingWriteTree_,t);if(mb(e.pendingWriteTree_,t)){let a=new kt(null);return s.snap!=null?a=a.set(vt(),!0):se(s.children,c=>{a=a.set(new Ct(c),!0)}),ss(e,new no(s.path,a,i))}else return[]}function tr(e,t,i){return ss(e,new _i(sc(),t,i))}function Xb(e,t,i){const s=kt.fromObject(i);return ss(e,new Gi(sc(),t,s))}function Jb(e,t){return ss(e,new js(sc(),t))}function tC(e,t,i){const s=uc(e,i);if(s){const o=dc(s),a=o.path,c=o.queryId,u=ue(a,t),f=new js(rc(c),u);return fc(e,a,f)}else return[]}function hl(e,t,i,s){const o=t._path,a=e.syncPointTree_.get(o);let c=[];if(a&&(t._queryIdentifier==="default"||Yf(a,t))){const u=jb(a,t,i,s);Vb(a)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const f=u.removed;c=u.events;const _=f.findIndex(m=>m._queryParams.loadsAllData())!==-1,g=e.syncPointTree_.findOnPath(o,(m,v)=>Wn(v));if(_&&!g){const m=e.syncPointTree_.subtree(o);if(!m.isEmpty()){const v=sC(m);for(let T=0;T<v.length;++T){const A=v[T],D=A.query,$=t_(e,A);e.listenProvider_.startListening(Os(D),co(e,D),$.hashFn,$.onComplete)}}}!g&&f.length>0&&!s&&(_?e.listenProvider_.stopListening(Os(t),null):f.forEach(m=>{const v=e.queryToTagMap.get(Ao(m));e.listenProvider_.stopListening(Os(m),v)})),rC(e,f)}return c}function eC(e,t,i,s){const o=uc(e,s);if(o!=null){const a=dc(o),c=a.path,u=a.queryId,f=ue(c,t),_=new _i(rc(u),f,i);return fc(e,c,_)}else return[]}function nC(e,t,i,s){const o=uc(e,s);if(o){const a=dc(o),c=a.path,u=a.queryId,f=ue(c,t),_=kt.fromObject(i),g=new Gi(rc(u),f,_);return fc(e,c,g)}else return[]}function Lu(e,t,i){const s=t._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(s,(m,v)=>{const T=ue(m,s);o=o||On(v,T),a=a||Wn(v)});let c=e.syncPointTree_.get(s);c?(a=a||Wn(c),o=o||On(c,vt())):(c=new qf,e.syncPointTree_=e.syncPointTree_.set(s,c));let u;o!=null?u=!0:(u=!1,o=Y.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((v,T)=>{const A=On(T,vt());A&&(o=o.updateImmediateChild(v,A))}));const f=Yf(c,t);if(!f&&!t._queryParams.loadsAllData()){const m=Ao(t);O(!e.queryToTagMap.has(m),"View does not exist, but we have a tag");const v=oC();e.queryToTagMap.set(m,v),e.tagToQueryMap.set(v,m)}const _=ko(e.pendingWriteTree_,s);let g=qb(c,t,i,_,o,u);if(!f&&!a){const m=Kf(c,t);g=g.concat(aC(e,t,m))}return g}function hc(e,t,i){const o=e.pendingWriteTree_,a=e.syncPointTree_.findOnPath(t,(c,u)=>{const f=ue(c,t),_=On(u,f);if(_)return _});return Wf(o,t,a,i,!0)}function iC(e,t){const i=t._path;let s=null;e.syncPointTree_.foreachOnPath(i,(_,g)=>{const m=ue(_,i);s=s||On(g,m)});let o=e.syncPointTree_.get(i);o?s=s||On(o,vt()):(o=new qf,e.syncPointTree_=e.syncPointTree_.set(i,o));const a=s!=null,c=a?new zn(s,!0,!1):null,u=ko(e.pendingWriteTree_,t._path),f=jf(o,t,u,a?c.getNode():Y.EMPTY_NODE,a);return zb(f)}function ss(e,t){return Xf(t,e.syncPointTree_,null,ko(e.pendingWriteTree_,vt()))}function Xf(e,t,i,s){if(rt(e.path))return Jf(e,t,i,s);{const o=t.get(vt());i==null&&o!=null&&(i=On(o,vt()));let a=[];const c=st(e.path),u=e.operationForChild(c),f=t.children.get(c);if(f&&u){const _=i?i.getImmediateChild(c):null,g=Hf(s,c);a=a.concat(Xf(u,f,_,g))}return o&&(a=a.concat(cc(o,e,s,i))),a}}function Jf(e,t,i,s){const o=t.get(vt());i==null&&o!=null&&(i=On(o,vt()));let a=[];return t.children.inorderTraversal((c,u)=>{const f=i?i.getImmediateChild(c):null,_=Hf(s,c),g=e.operationForChild(c);g&&(a=a.concat(Jf(g,u,f,_)))}),o&&(a=a.concat(cc(o,e,s,i))),a}function t_(e,t){const i=t.query,s=co(e,i);return{hashFn:()=>(Fb(t)||Y.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?tC(e,i._path,s):Jb(e,i._path);{const a=Ky(o,i);return hl(e,i,null,a)}}}}function co(e,t){const i=Ao(t);return e.queryToTagMap.get(i)}function Ao(e){return e._path.toString()+"$"+e._queryIdentifier}function uc(e,t){return e.tagToQueryMap.get(t)}function dc(e){const t=e.indexOf("$");return O(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ct(e.substr(0,t))}}function fc(e,t,i){const s=e.syncPointTree_.get(t);O(s,"Missing sync point for query tag that we're tracking");const o=ko(e.pendingWriteTree_,t);return cc(s,i,o,null)}function sC(e){return e.fold((t,i,s)=>{if(i&&Wn(i))return[Lo(i)];{let o=[];return i&&(o=Gf(i)),se(s,(a,c)=>{o=o.concat(c)}),o}})}function Os(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Kb())(e._repo,e._path):e}function rC(e,t){for(let i=0;i<t.length;++i){const s=t[i];if(!s._queryParams.loadsAllData()){const o=Ao(s),a=e.queryToTagMap.get(o);e.queryToTagMap.delete(o),e.tagToQueryMap.delete(a)}}}function oC(){return Yb++}function aC(e,t,i){const s=t._path,o=co(e,t),a=t_(e,i),c=e.listenProvider_.startListening(Os(t),o,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(s);if(o)O(!Wn(u.value),"If we're adding a query, it shouldn't be shadowed");else{const f=u.fold((_,g,m)=>{if(!rt(_)&&g&&Wn(g))return[Lo(g).query];{let v=[];return g&&(v=v.concat(Gf(g).map(T=>T.query))),se(m,(T,A)=>{v=v.concat(A)}),v}});for(let _=0;_<f.length;++_){const g=f[_];e.listenProvider_.stopListening(Os(g),co(e,g))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new _c(i)}node(){return this.node_}}class pc{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=zt(this.path_,t);return new pc(this.syncTree_,i)}node(){return hc(this.syncTree_,this.path_)}}const lC=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Au=function(e,t,i){if(!e||typeof e!="object")return e;if(O(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return cC(e[".sv"],t,i);if(typeof e[".sv"]=="object")return hC(e[".sv"],t);O(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},cC=function(e,t,i){switch(e){case"timestamp":return i.timestamp;default:O(!1,"Unexpected server value: "+e)}},hC=function(e,t,i){e.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;typeof s!="number"&&O(!1,"Unexpected increment value: "+s);const o=t.node();if(O(o!==null&&typeof o!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const c=o.getValue();return typeof c!="number"?s:c+s},e_=function(e,t,i,s){return mc(t,new pc(i,e),s)},n_=function(e,t,i){return mc(e,new _c(t),i)};function mc(e,t,i){const s=e.getPriority().val(),o=Au(s,t.getImmediateChild(".priority"),i);let a;if(e.isLeafNode()){const c=e,u=Au(c.getValue(),t,i);return u!==c.getValue()||o!==c.getPriority().val()?new Xt(u,Gt(o)):e}else{const c=e;return a=c,o!==c.getPriority().val()&&(a=a.updatePriority(new Xt(o))),c.forEachChild(Bt,(u,f)=>{const _=mc(f,t.getImmediateChild(u),i);_!==f&&(a=a.updateImmediateChild(u,_))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t="",i=null,s={children:{},childCount:0}){this.name=t,this.parent=i,this.node=s}}function vc(e,t){let i=t instanceof Ct?t:new Ct(t),s=e,o=st(i);for(;o!==null;){const a=Vi(s.node.children,o)||{children:{},childCount:0};s=new gc(o,s,a),i=At(i),o=st(i)}return s}function rs(e){return e.node.value}function i_(e,t){e.node.value=t,ul(e)}function s_(e){return e.node.childCount>0}function uC(e){return rs(e)===void 0&&!s_(e)}function Mo(e,t){se(e.node.children,(i,s)=>{t(new gc(i,e,s))})}function r_(e,t,i,s){i&&!s&&t(e),Mo(e,o=>{r_(o,t,!0,s)}),i&&s&&t(e)}function dC(e,t,i){let s=i?e:e.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function er(e){return new Ct(e.parent===null?e.name:er(e.parent)+"/"+e.name)}function ul(e){e.parent!==null&&fC(e.parent,e.name,e)}function fC(e,t,i){const s=uC(i),o=tn(e.node.children,t);s&&o?(delete e.node.children[t],e.node.childCount--,ul(e)):!s&&!o&&(e.node.children[t]=i.node,e.node.childCount++,ul(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/[\[\].#$\/\u0000-\u001F\u007F]/,pC=/[\[\].#$\u0000-\u001F\u007F]/,Ma=10*1024*1024,No=function(e){return typeof e=="string"&&e.length!==0&&!_C.test(e)},o_=function(e){return typeof e=="string"&&e.length!==0&&!pC.test(e)},mC=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),o_(e)},dl=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!$l(e)||e&&typeof e=="object"&&tn(e,".sv")},Ro=function(e,t,i,s){s&&t===void 0||Oo(Ys(e,"value"),t,i)},Oo=function(e,t,i){const s=i instanceof Ct?new Aw(i,e):i;if(t===void 0)throw new Error(e+"contains undefined "+Xn(s));if(typeof t=="function")throw new Error(e+"contains a function "+Xn(s)+" with contents = "+t.toString());if($l(t))throw new Error(e+"contains "+t.toString()+" "+Xn(s));if(typeof t=="string"&&t.length>Ma/3&&Po(t)>Ma)throw new Error(e+"contains a string greater than "+Ma+" utf8 bytes "+Xn(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,a=!1;if(se(t,(c,u)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!No(c)))throw new Error(e+" contains an invalid key ("+c+") "+Xn(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Mw(s,c),Oo(e,u,s),Nw(s)}),o&&a)throw new Error(e+' contains ".value" child '+Xn(s)+" in addition to actual children.")}},gC=function(e,t){let i,s;for(i=0;i<t.length;i++){s=t[i];const a=Zs(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!No(a[c]))throw new Error(e+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Lw);let o=null;for(i=0;i<t.length;i++){if(s=t[i],o!==null&&ke(o,s))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}},vC=function(e,t,i,s){if(s&&t===void 0)return;const o=Ys(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const a=[];se(t,(c,u)=>{const f=new Ct(c);if(Oo(o,u,zt(i,f)),Yl(f)===".priority"&&!dl(u))throw new Error(o+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),gC(o,a)},a_=function(e,t,i,s){if(!(s&&i===void 0)&&!No(i))throw new Error(Ys(e,t)+'was an invalid key = "'+i+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},yc=function(e,t,i,s){if(!(s&&i===void 0)&&!o_(i))throw new Error(Ys(e,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},yC=function(e,t,i,s){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),yc(e,t,i,s)},wC=function(e,t){if(st(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},bC=function(e,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!No(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!mC(i))throw new Error(Ys(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Do(e,t){let i=null;for(let s=0;s<t.length;s++){const o=t[s],a=o.getPath();i!==null&&!Ql(a,i.path)&&(e.eventLists_.push(i),i=null),i===null&&(i={events:[],path:a}),i.events.push(o)}i&&e.eventLists_.push(i)}function wc(e,t,i){Do(e,i),l_(e,s=>Ql(s,t))}function We(e,t,i){Do(e,i),l_(e,s=>ke(s,t)||ke(t,s))}function l_(e,t){e.recursionDepth_++;let i=!0;for(let s=0;s<e.eventLists_.length;s++){const o=e.eventLists_[s];if(o){const a=o.path;t(a)?(xC(e.eventLists_[s]),e.eventLists_[s]=null):i=!1}}i&&(e.eventLists_=[]),e.recursionDepth_--}function xC(e){for(let t=0;t<e.events.length;t++){const i=e.events[t];if(i!==null){e.events[t]=null;const s=i.getEventRunner();li&&ne("event: "+i.toString()),is(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="repo_interrupt",TC=25;class PC{constructor(t,i,s,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eo(),this.transactionQueueTree_=new gc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function IC(e,t,i){if(e.stats_=jl(e.repoInfo_),e.forceRestClient_||Jy())e.server_=new to(e.repoInfo_,(s,o,a,c)=>{Mu(e,s,o,a,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Nu(e,!0),0);else{if(typeof i!="undefined"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Kt(i)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new mn(e.repoInfo_,t,(s,o,a,c)=>{Mu(e,s,o,a,c)},s=>{Nu(e,s)},s=>{kC(e,s)},e.authTokenProvider_,e.appCheckProvider_,i),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(s=>{e.server_.refreshAuthToken(s)}),e.appCheckProvider_.addTokenChangeListener(s=>{e.server_.refreshAppCheckToken(s.token)}),e.statsReporter_=ow(e.repoInfo_,()=>new ab(e.stats_,e.server_)),e.infoData_=new nb,e.infoSyncTree_=new ku({startListening:(s,o,a,c)=>{let u=[];const f=e.infoData_.getNode(s._path);return f.isEmpty()||(u=tr(e.infoSyncTree_,s._path,f),setTimeout(()=>{c("ok")},0)),u},stopListening:()=>{}}),bc(e,"connected",!1),e.serverSyncTree_=new ku({startListening:(s,o,a,c)=>(e.server_.listen(s,a,o,(u,f)=>{const _=c(u,f);We(e.eventQueue_,s._path,_)}),[]),stopListening:(s,o)=>{e.server_.unlisten(s,o)}})}function SC(e){const i=e.infoData_.getNode(new Ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Bo(e){return lC({timestamp:SC(e)})}function Mu(e,t,i,s,o){e.dataUpdateCount++;const a=new Ct(t);i=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,i):i;let c=[];if(o)if(s){const f=Kr(i,_=>Gt(_));c=nC(e.serverSyncTree_,a,f,o)}else{const f=Gt(i);c=eC(e.serverSyncTree_,a,f,o)}else if(s){const f=Kr(i,_=>Gt(_));c=Xb(e.serverSyncTree_,a,f)}else{const f=Gt(i);c=tr(e.serverSyncTree_,a,f)}let u=a;c.length>0&&(u=Yi(e,a)),We(e.eventQueue_,u,c)}function Nu(e,t){bc(e,"connected",t),t===!1&&NC(e)}function kC(e,t){se(t,(i,s)=>{bc(e,i,s)})}function bc(e,t,i){const s=new Ct("/.info/"+t),o=Gt(i);e.infoData_.updateSnapshot(s,o);const a=tr(e.infoSyncTree_,s,o);We(e.eventQueue_,s,a)}function Cc(e){return e.nextWriteId_++}function LC(e,t){const i=iC(e.serverSyncTree_,t);return i!=null?Promise.resolve(i):e.server_.get(t).then(s=>{const o=Gt(s).withIndex(t._queryParams.getIndex()),a=tr(e.serverSyncTree_,t._path,o);return wc(e.eventQueue_,t._path,a),Promise.resolve(o)},s=>(nr(e,"get for query "+Kt(t)+" failed: "+s),Promise.reject(new Error(s))))}function AC(e,t,i,s,o){nr(e,"set",{path:t.toString(),value:i,priority:s});const a=Bo(e),c=Gt(i,s),u=hc(e.serverSyncTree_,t),f=n_(c,u,a),_=Cc(e),g=Qf(e.serverSyncTree_,t,f,_,!0);Do(e.eventQueue_,g),e.server_.put(t.toString(),c.val(!0),(v,T)=>{const A=v==="ok";A||de("set at "+t+" failed: "+v);const D=An(e.serverSyncTree_,_,!A);We(e.eventQueue_,t,D),fl(e,o,v,T)});const m=Ec(e,t);Yi(e,m),We(e.eventQueue_,m,[])}function MC(e,t,i,s){nr(e,"update",{path:t.toString(),value:i});let o=!0;const a=Bo(e),c={};if(se(i,(u,f)=>{o=!1,c[u]=e_(zt(t,u),Gt(f),e.serverSyncTree_,a)}),o)ne("update() called with empty data.  Don't do anything."),fl(e,s,"ok",void 0);else{const u=Cc(e),f=Qb(e.serverSyncTree_,t,c,u);Do(e.eventQueue_,f),e.server_.merge(t.toString(),i,(_,g)=>{const m=_==="ok";m||de("update at "+t+" failed: "+_);const v=An(e.serverSyncTree_,u,!m),T=v.length>0?Yi(e,t):t;We(e.eventQueue_,T,v),fl(e,s,_,g)}),se(i,_=>{const g=Ec(e,zt(t,_));Yi(e,g)}),We(e.eventQueue_,t,[])}}function NC(e){nr(e,"onDisconnectEvents");const t=Bo(e),i=eo();sl(e.onDisconnect_,vt(),(o,a)=>{const c=e_(o,a,e.serverSyncTree_,t);Df(i,o,c)});let s=[];sl(i,vt(),(o,a)=>{s=s.concat(tr(e.serverSyncTree_,o,a));const c=Ec(e,o);Yi(e,c)}),e.onDisconnect_=eo(),We(e.eventQueue_,vt(),s)}function RC(e,t,i){let s;st(t._path)===".info"?s=Lu(e.infoSyncTree_,t,i):s=Lu(e.serverSyncTree_,t,i),wc(e.eventQueue_,t._path,s)}function Ru(e,t,i){let s;st(t._path)===".info"?s=hl(e.infoSyncTree_,t,i):s=hl(e.serverSyncTree_,t,i),wc(e.eventQueue_,t._path,s)}function OC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(EC)}function nr(e,...t){let i="";e.persistentConnection_&&(i=e.persistentConnection_.id+":"),ne(i,...t)}function fl(e,t,i,s){t&&is(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let a=o;s&&(a+=": "+s);const c=new Error(a);c.code=o,t(c)}})}function c_(e,t,i){return hc(e.serverSyncTree_,t,i)||Y.EMPTY_NODE}function xc(e,t=e.transactionQueueTree_){if(t||Fo(e,t),rs(t)){const i=u_(e,t);O(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&DC(e,er(t),i)}else s_(t)&&Mo(t,i=>{xc(e,i)})}function DC(e,t,i){const s=i.map(_=>_.currentWriteId),o=c_(e,t,s);let a=o;const c=o.hash();for(let _=0;_<i.length;_++){const g=i[_];O(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const m=ue(t,g.path);a=a.updateChild(m,g.currentOutputSnapshotRaw)}const u=a.val(!0),f=t;e.server_.put(f.toString(),u,_=>{nr(e,"transaction put response",{path:f.toString(),status:_});let g=[];if(_==="ok"){const m=[];for(let v=0;v<i.length;v++)i[v].status=2,g=g.concat(An(e.serverSyncTree_,i[v].currentWriteId)),i[v].onComplete&&m.push(()=>i[v].onComplete(null,!0,i[v].currentOutputSnapshotResolved)),i[v].unwatcher();Fo(e,vc(e.transactionQueueTree_,t)),xc(e,e.transactionQueueTree_),We(e.eventQueue_,t,g);for(let v=0;v<m.length;v++)is(m[v])}else{if(_==="datastale")for(let m=0;m<i.length;m++)i[m].status===3?i[m].status=4:i[m].status=0;else{de("transaction at "+f.toString()+" failed: "+_);for(let m=0;m<i.length;m++)i[m].status=4,i[m].abortReason=_}Yi(e,t)}},c)}function Yi(e,t){const i=h_(e,t),s=er(i),o=u_(e,i);return BC(e,o,s),s}function BC(e,t,i){if(t.length===0)return;const s=[];let o=[];const c=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const f=t[u],_=ue(i,f.path);let g=!1,m;if(O(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,m=f.abortReason,o=o.concat(An(e.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=TC)g=!0,m="maxretry",o=o.concat(An(e.serverSyncTree_,f.currentWriteId,!0));else{const v=c_(e,f.path,c);f.currentInputSnapshot=v;const T=t[u].update(v.val());if(T!==void 0){Oo("transaction failed: Data returned ",T,f.path);let A=Gt(T);typeof T=="object"&&T!=null&&tn(T,".priority")||(A=A.updatePriority(v.getPriority()));const $=f.currentWriteId,nt=Bo(e),Mt=n_(A,v,nt);f.currentOutputSnapshotRaw=A,f.currentOutputSnapshotResolved=Mt,f.currentWriteId=Cc(e),c.splice(c.indexOf($),1),o=o.concat(Qf(e.serverSyncTree_,f.path,Mt,f.currentWriteId,f.applyLocally)),o=o.concat(An(e.serverSyncTree_,$,!0))}else g=!0,m="nodata",o=o.concat(An(e.serverSyncTree_,f.currentWriteId,!0))}We(e.eventQueue_,i,o),o=[],g&&(t[u].status=2,function(v){setTimeout(v,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(m==="nodata"?s.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):s.push(()=>t[u].onComplete(new Error(m),!1,null))))}Fo(e,e.transactionQueueTree_);for(let u=0;u<s.length;u++)is(s[u]);xc(e,e.transactionQueueTree_)}function h_(e,t){let i,s=e.transactionQueueTree_;for(i=st(t);i!==null&&rs(s)===void 0;)s=vc(s,i),t=At(t),i=st(t);return s}function u_(e,t){const i=[];return d_(e,t,i),i.sort((s,o)=>s.order-o.order),i}function d_(e,t,i){const s=rs(t);if(s)for(let o=0;o<s.length;o++)i.push(s[o]);Mo(t,o=>{d_(e,o,i)})}function Fo(e,t){const i=rs(t);if(i){let s=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[s]=i[o],s++);i.length=s,i_(t,i.length>0?i:void 0)}Mo(t,s=>{Fo(e,s)})}function Ec(e,t){const i=er(h_(e,t)),s=vc(e.transactionQueueTree_,t);return dC(s,o=>{Na(e,o)}),Na(e,s),r_(s,o=>{Na(e,o)}),i}function Na(e,t){const i=rs(t);if(i){const s=[];let o=[],a=-1;for(let c=0;c<i.length;c++)i[c].status===3||(i[c].status===1?(O(a===c-1,"All SENT items should be at beginning of queue."),a=c,i[c].status=3,i[c].abortReason="set"):(O(i[c].status===0,"Unexpected transaction status in abort"),i[c].unwatcher(),o=o.concat(An(e.serverSyncTree_,i[c].currentWriteId,!0)),i[c].onComplete&&s.push(i[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?i_(t,void 0):i.length=a+1,We(e.eventQueue_,er(t),o);for(let c=0;c<s.length;c++)is(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(e){let t="";const i=e.split("/");for(let s=0;s<i.length;s++)if(i[s].length>0){let o=i[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function zC(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const i of e.split("&")){if(i.length===0)continue;const s=i.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):de(`Invalid query segment '${i}' in query '${e}'`)}return t}const Ou=function(e,t){const i=WC(e),s=i.namespace;i.domain==="firebase.com"&&di(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&i.domain!=="localhost"&&di("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||$y();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new iw(i.host,i.secure,s,t,o,"",s!==i.subdomain),path:new Ct(i.pathString)}},WC=function(e){let t="",i="",s="",o="",a="",c=!0,u="https",f=443;if(typeof e=="string"){let _=e.indexOf("//");_>=0&&(u=e.substring(0,_-1),e=e.substring(_+2));let g=e.indexOf("/");g===-1&&(g=e.length);let m=e.indexOf("?");m===-1&&(m=e.length),t=e.substring(0,Math.min(g,m)),g<m&&(o=FC(e.substring(g,m)));const v=zC(e.substring(Math.min(e.length,m)));_=t.indexOf(":"),_>=0?(c=u==="https"||u==="wss",f=parseInt(t.substring(_+1),10)):_=t.length;const T=t.slice(0,_);if(T.toLowerCase()==="localhost")i="localhost";else if(T.split(".").length<=2)i=T;else{const A=t.indexOf(".");s=t.substring(0,A).toLowerCase(),i=t.substring(A+1),a=s}"ns"in v&&(a=v.ns)}return{host:t,port:f,domain:i,subdomain:s,secure:c,scheme:u,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(t,i,s,o){this.eventType=t,this.eventRegistration=i,this.snapshot=s,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Kt(this.snapshot.exportVal())}}class __{constructor(t,i,s){this.eventRegistration=t,this.error=i,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return O(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t,i,s,o){this._repo=t,this._path=i,this._queryParams=s,this._orderByCalled=o}get key(){return rt(this._path)?null:Yl(this._path)}get ref(){return new en(this._repo,this._path)}get _queryIdentifier(){const t=yu(this._queryParams),i=Vl(t);return i==="{}"?"default":i}get _queryObject(){return yu(this._queryParams)}isEqual(t){if(t=mi(t),!(t instanceof os))return!1;const i=this._repo===t._repo,s=Ql(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+kw(this._path)}}function UC(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Tc(e){let t=null,i=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(i=e.getIndexEndValue()),e.getIndex()===ci){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==fi)throw new Error(s);if(typeof t!="string")throw new Error(o)}if(e.hasEnd()){if(e.getIndexEndName()!==Bn)throw new Error(s);if(typeof i!="string")throw new Error(o)}}else if(e.getIndex()===Bt){if(t!=null&&!dl(t)||i!=null&&!dl(i))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(O(e.getIndex()instanceof tc||e.getIndex()===Rf,"unknown index type."),t!=null&&typeof t=="object"||i!=null&&typeof i=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function p_(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class en extends os{constructor(t,i){super(t,i,new nc,!1)}get parent(){const t=If(this._path);return t===null?null:new en(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Qi{constructor(t,i,s){this._node=t,this.ref=i,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Ct(t),s=ho(this.ref,t);return new Qi(this._node.getChild(i),s,Bt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>t(new Qi(o,ho(this.ref,s),Bt)))}hasChild(t){const i=new Ct(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ie(e,t){return e=mi(e),e._checkNotDeleted("ref"),t!==void 0?ho(e._root,t):e._root}function ho(e,t){return e=mi(e),st(e._path)===null?yC("child","path",t,!1):yc("child","path",t,!1),new en(e._repo,zt(e._path,t))}function m_(e,t){e=mi(e),wC("set",e._path),Ro("set",t,e._path,!1);const i=new vn;return AC(e._repo,e._path,t,null,i.wrapCallback(()=>{})),i.promise}function _l(e,t){vC("update",t,e._path,!1);const i=new vn;return MC(e._repo,e._path,t,i.wrapCallback(()=>{})),i.promise}function Di(e){return e=mi(e),LC(e._repo,e).then(t=>new Qi(t,new en(e._repo,e._path),e._queryParams.getIndex()))}class Pc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const s=i._queryParams.getIndex();return new f_("value",this,new Qi(t.snapshotNode,new en(i._repo,i._path),s))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new __(this,t,i):null}matches(t){return t instanceof Pc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Ic{constructor(t,i){this.eventType=t,this.callbackContext=i}respondsTo(t){let i=t==="children_added"?"child_added":t;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new __(this,t,i):null}createEvent(t,i){O(t.childName!=null,"Child events should have a childName.");const s=ho(new en(i._repo,i._path),t.childName),o=i._queryParams.getIndex();return new f_(t.type,this,new Qi(t.snapshotNode,s,o),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Ic?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function ZC(e,t,i,s,o){let a;if(typeof s=="object"&&(a=void 0,o=s),typeof s=="function"&&(a=s),o&&o.onlyOnce){const f=i,_=(g,m)=>{Ru(e._repo,e,u),f(g,m)};_.userCallback=i.userCallback,_.context=i.context,i=_}const c=new HC(i,a||void 0),u=t==="value"?new Pc(c):new Ic(t,c);return RC(e._repo,e,u),()=>Ru(e._repo,e,u)}function $C(e,t,i,s){return ZC(e,"value",t,i,s)}class zo{}class VC extends zo{constructor(t,i){super(),this._value=t,this._key=i}_apply(t){Ro("endAt",this._value,t._path,!0);const i=tb(t._queryParams,this._value,this._key);if(p_(i),Tc(i),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new os(t._repo,t._path,i,t._orderByCalled)}}class g_ extends zo{constructor(t,i){super(),this._value=t,this._key=i}_apply(t){Ro("startAt",this._value,t._path,!0);const i=Jw(t._queryParams,this._value,this._key);if(p_(i),Tc(i),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new os(t._repo,t._path,i,t._orderByCalled)}}function Du(e=null,t){return a_("startAt","key",t,!0),new g_(e,t)}class qC extends zo{constructor(t){super(),this._path=t}_apply(t){UC(t,"orderByChild");const i=new Ct(this._path);if(rt(i))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new tc(i),o=eb(t._queryParams,s);return Tc(o),new os(t._repo,t._path,o,!0)}}function Bu(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yc("orderByChild","path",e,!1),new qC(e)}class jC extends zo{constructor(t,i){super(),this._value=t,this._key=i}_apply(t){if(Ro("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new VC(this._value,this._key)._apply(new g_(this._value,this._key)._apply(t))}}function GC(e,t){return a_("equalTo","key",t,!0),new jC(e,t)}function Fu(e,...t){let i=mi(e);for(const s of t)i=s._apply(i);return i}Zb(en);Gb(en);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="FIREBASE_DATABASE_EMULATOR_HOST",pl={};let YC=!1;function QC(e,t,i,s,o){let a=s||e.options.databaseURL;a===void 0&&(e.options.projectId||di("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ne("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=Ou(a,o),u=c.repoInfo,f,_;typeof process!="undefined"&&(_=process.env[KC]),_?(f=!0,a=`http://${_}?ns=${u.namespace}`,c=Ou(a,o),u=c.repoInfo):f=!c.repoInfo.secure;const g=o&&f?new el(el.OWNER):new ew(e.name,e.options,t);bC("Invalid Firebase Database URL",c),rt(c.path)||di("Database URL must point to the root of a Firebase Database (not including a child path).");const m=JC(u,e,g,new tw(e.name,i));return new tx(m,e)}function XC(e,t){const i=pl[t];(!i||i[e.key]!==e)&&di(`Database ${t}(${e.repoInfo_}) has already been deleted.`),OC(e),delete i[e.key]}function JC(e,t,i,s){let o=pl[t.name];o||(o={},pl[t.name]=o);let a=o[e.toURLString()];return a&&di("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new PC(e,YC,i,s),o[e.toURLString()]=a,a}class tx{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(IC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new en(this._repo,vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&di("Cannot call "+t+" on a deleted database.")}}function v_(e=nf(),t){return Zl(e,"database").getImmediate({identifier:t})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(e){zy(Iy),qi(new hi("database",(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return QC(s,o,a,i)},"PUBLIC").setMultipleInstances(!0)),ai(nu,iu,e),ai(nu,iu,"esm2017")}mn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};mn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};ex();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=new Map,nx={activated:!1,tokenObservers:[]},ix={initialized:!1,enabled:!1};function le(e){return y_.get(e)||nx}function yn(e,t){y_.set(e,t)}function Wo(){return ix}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="https://content-firebaseappcheck.googleapis.com/v1beta",sx="exchangeRecaptchaToken",rx="exchangeDebugToken",zu={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ox=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(t,i,s,o,a){if(this.operation=t,this.retryPolicy=i,this.getWaitDuration=s,this.lowerBound=o,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=o,o>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new vn,await lx(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new vn,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}}function lx(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},we=new Wl("appCheck","AppCheck",cx);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function b_(e){if(!le(e).activated)throw we.create("use-before-activation",{appName:e.name})}function hx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function C_(e){const t=Math.round(e/1e3),i=Math.floor(t/(3600*24)),s=Math.floor((t-i*3600*24)/3600),o=Math.floor((t-i*3600*24-s*3600)/60),a=t-i*3600*24-s*3600-o*60;let c="";return i&&(c+=Mr(i)+"d:"),s&&(c+=Mr(s)+"h:"),c+=Mr(o)+"m:"+Mr(a)+"s",c}function Mr(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x_({url:e,body:t},i){const s={"Content-Type":"application/json"},o=i.getImmediate({optional:!0});if(o){const m=await o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}const a={method:"POST",body:JSON.stringify(t),headers:s};let c;try{c=await fetch(e,a)}catch(m){throw we.create("fetch-network-error",{originalErrorMessage:m.message})}if(c.status!==200)throw we.create("fetch-status-error",{httpStatus:c.status});let u;try{u=await c.json()}catch(m){throw we.create("fetch-parse-error",{originalErrorMessage:m.message})}const f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw we.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const _=Number(f[1])*1e3,g=Date.now();return{token:u.attestationToken,expireTimeMillis:g+_,issuedAtTimeMillis:g}}function ux(e,t){const{projectId:i,appId:s,apiKey:o}=e.options;return{url:`${w_}/projects/${i}/apps/${s}:${sx}?key=${o}`,body:{recaptcha_token:t}}}function dx(e,t){const{projectId:i,appId:s,apiKey:o}=e.options;return{url:`${w_}/projects/${i}/apps/${s}:${rx}?key=${o}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="firebase-app-check-database",_x=1,Gs="firebase-app-check-store",E_="debug-token";let Nr=null;function T_(){return Nr||(Nr=new Promise((e,t)=>{try{const i=indexedDB.open(fx,_x);i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{var o;t(we.create("storage-open",{originalErrorMessage:(o=s.target.error)===null||o===void 0?void 0:o.message}))},i.onupgradeneeded=s=>{const o=s.target.result;switch(s.oldVersion){case 0:o.createObjectStore(Gs,{keyPath:"compositeKey"})}}}catch(i){t(we.create("storage-open",{originalErrorMessage:i.message}))}}),Nr)}function px(e){return I_(S_(e))}function mx(e,t){return P_(S_(e),t)}function gx(e){return P_(E_,e)}function vx(){return I_(E_)}async function P_(e,t){const s=(await T_()).transaction(Gs,"readwrite"),a=s.objectStore(Gs).put({compositeKey:e,value:t});return new Promise((c,u)=>{a.onsuccess=f=>{c()},s.onerror=f=>{var _;u(we.create("storage-set",{originalErrorMessage:(_=f.target.error)===null||_===void 0?void 0:_.message}))}})}async function I_(e){const i=(await T_()).transaction(Gs,"readonly"),o=i.objectStore(Gs).get(e);return new Promise((a,c)=>{o.onsuccess=u=>{const f=u.target.result;a(f?f.value:void 0)},i.onerror=u=>{var f;c(we.create("storage-get",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})}function S_(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Hl("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(e){if(Fl()){let t;try{t=await px(e)}catch(i){Ks.warn(`Failed to read token from IndexedDB. Error: ${i}`)}return t}}function Hu(e,t){return Fl()?mx(e,t).catch(i=>{Ks.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}async function wx(){let e;try{e=await vx()}catch{}if(e)return e;{const t=hx();return gx(t).catch(i=>Ks.warn(`Failed to persist debug token to IndexedDB. Error: ${i}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(){return Wo().enabled}async function L_(){const e=Wo();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function bx(){const e=Iv(),t=Wo();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const i=new vn;t.token=i,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?i.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):i.resolve(wx())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={error:"UNKNOWN_ERROR"};function xx(e){return To.encodeString(JSON.stringify(e),!1)}async function ml(e,t=!1){const i=e.app;b_(i);const s=le(i);let o=s.token,a;if(!o){const f=await s.cachedTokenPromise;f&&uo(f)&&(o=f)}if(!t&&o&&uo(o))return{token:o.token};let c=!1;if(k_()){s.exchangeTokenPromise||(s.exchangeTokenPromise=x_(dx(i,await L_()),e.heartbeatServiceProvider).then(_=>(s.exchangeTokenPromise=void 0,_)),c=!0);const f=await s.exchangeTokenPromise;return await Hu(i,f),yn(i,Object.assign(Object.assign({},s),{token:f})),{token:f.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(f=>(s.exchangeTokenPromise=void 0,f)),c=!0),o=await s.exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"?Ks.warn(f.message):Ks.error(f),a=f}let u;return o?(u={token:o.token},yn(i,Object.assign(Object.assign({},s),{token:o})),await Hu(i,o)):u=Tx(a),c&&N_(i,u),u}function A_(e,t,i,s){const{app:o}=e,a=le(o),c={next:i,error:s,type:t};if(yn(o,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&uo(a.token)){const u=a.token;Promise.resolve().then(()=>{i({token:u.token}),Uu(e)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Uu(e))}function M_(e,t){const i=le(e),s=i.tokenObservers.filter(o=>o.next!==t);s.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),yn(e,Object.assign(Object.assign({},i),{tokenObservers:s}))}function Uu(e){const{app:t}=e,i=le(t);let s=i.tokenRefresher;s||(s=Ex(e),yn(t,Object.assign(Object.assign({},i),{tokenRefresher:s}))),!s.isRunning()&&i.isTokenAutoRefreshEnabled&&s.start()}function Ex(e){const{app:t}=e;return new ax(async()=>{const i=le(t);let s;if(i.token?s=await ml(e,!0):s=await ml(e),s.error)throw s.error},()=>!0,()=>{const i=le(t);if(i.token){let s=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5;const o=i.token.expireTimeMillis-5*60*1e3;return s=Math.min(s,o),Math.max(0,s-Date.now())}else return 0},zu.RETRIAL_MIN_WAIT,zu.RETRIAL_MAX_WAIT)}function N_(e,t){const i=le(e).tokenObservers;for(const s of i)try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}function uo(e){return e.expireTimeMillis-Date.now()>0}function Tx(e){return{token:xx(Cx),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(t,i){this.app=t,this.heartbeatServiceProvider=i}_delete(){const{tokenObservers:t}=le(this.app);for(const i of t)M_(this.app,i.next);return Promise.resolve()}}function Ix(e,t){return new Px(e,t)}function Sx(e){return{getToken:t=>ml(e,t),addTokenListener:t=>A_(e,"INTERNAL",t),removeTokenListener:t=>M_(e.app,t)}}const kx="@firebase/app-check",Lx="0.5.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="https://www.google.com/recaptcha/api.js";function Mx(e,t){const i=le(e),s=new vn;yn(e,Object.assign(Object.assign({},i),{reCAPTCHAState:{initialized:s}}));const o=Nx(e),a=Wu(!1);return a?Zu(e,t,a,o,s):Dx(()=>{const c=Wu(!1);if(!c)throw new Error("no recaptcha");Zu(e,t,c,o,s)}),s.promise}function Zu(e,t,i,s,o){i.ready(()=>{Ox(e,t,i,s),o.resolve(i)})}function Nx(e){const t=`fire_app_check_${e.name}`,i=document.createElement("div");return i.id=t,i.style.display="none",document.body.appendChild(i),t}async function Rx(e){b_(e);const i=await le(e).reCAPTCHAState.initialized.promise;return new Promise((s,o)=>{const a=le(e).reCAPTCHAState;i.ready(()=>{s(i.execute(a.widgetId,{action:"fire_app_check"}))})})}function Ox(e,t,i,s){const o=i.render(s,{sitekey:t,size:"invisible"}),a=le(e);yn(e,Object.assign(Object.assign({},a),{reCAPTCHAState:Object.assign(Object.assign({},a.reCAPTCHAState),{widgetId:o})}))}function Dx(e){const t=document.createElement("script");t.src=Ax,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t;Fx(this._throttleData);const i=await Rx(this._app).catch(o=>{throw we.create("recaptcha-error")});let s;try{s=await x_(ux(this._app,i),this._heartbeatServiceProvider)}catch(o){throw o.code==="fetch-status-error"?(this._throttleData=Bx(Number((t=o.customData)===null||t===void 0?void 0:t.httpStatus),this._throttleData),we.create("throttled",{time:C_(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=Zl(t,"heartbeat"),Mx(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Ho?this._siteKey===t._siteKey:!1}}function Bx(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+ox,httpStatus:e};{const i=t?t.backoffCount:0,s=Wv(i,1e3,2);return{backoffCount:i+1,allowRequestsAfter:Date.now()+s,httpStatus:e}}}function Fx(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw we.create("throttled",{time:C_(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(e=nf(),t){e=mi(e);const i=Zl(e,"app-check");if(Wo().initialized||bx(),k_()&&L_().then(o=>console.log(`App Check debug token: ${o}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),i.isInitialized()){const o=i.getImmediate(),a=i.getOptions();if(a.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&a.provider.isEqual(t.provider))return o;throw we.create("already-initialized",{appName:e.name})}const s=i.initialize({options:t});return zx(e,t.provider,t.isTokenAutoRefreshEnabled),le(e).isTokenAutoRefreshEnabled&&A_(s,"INTERNAL",()=>{}),s}function zx(e,t,i){const s=le(e),o=Object.assign(Object.assign({},s),{activated:!0});o.provider=t,o.cachedTokenPromise=yx(e).then(a=>(a&&uo(a)&&(yn(e,Object.assign(Object.assign({},le(e)),{token:a})),N_(e,{token:a.token})),a)),o.isTokenAutoRefreshEnabled=i===void 0?e.automaticDataCollectionEnabled:i,yn(e,o),o.provider.initialize(e)}const Wx="app-check",$u="app-check-internal";function Hx(){qi(new hi(Wx,e=>{const t=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat");return Ix(t,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider($u).initialize()})),qi(new hi($u,e=>{const t=e.getProvider("app-check").getImmediate();return Sx(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ai(kx,Lx)}Hx();var Ux=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},gl={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(i,s){s(t)})(Ux,function(i){var s="1.7.1";function o(n){var r,l,h,d;for(l=1,h=arguments.length;l<h;l++){d=arguments[l];for(r in d)n[r]=d[r]}return n}var a=Object.create||function(){function n(){}return function(r){return n.prototype=r,new n}}();function c(n,r){var l=Array.prototype.slice;if(n.bind)return n.bind.apply(n,l.call(arguments,1));var h=l.call(arguments,2);return function(){return n.apply(r,h.length?h.concat(l.call(arguments)):arguments)}}var u=0;function f(n){return n._leaflet_id=n._leaflet_id||++u,n._leaflet_id}function _(n,r,l){var h,d,p,w;return w=function(){h=!1,d&&(p.apply(l,d),d=!1)},p=function(){h?d=arguments:(n.apply(l,arguments),setTimeout(w,r),h=!0)},p}function g(n,r,l){var h=r[1],d=r[0],p=h-d;return n===h&&l?n:((n-d)%p+p)%p+d}function m(){return!1}function v(n,r){var l=Math.pow(10,r===void 0?6:r);return Math.round(n*l)/l}function T(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function A(n){return T(n).split(/\s+/)}function D(n,r){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?a(n.options):{});for(var l in r)n.options[l]=r[l];return n.options}function $(n,r,l){var h=[];for(var d in n)h.push(encodeURIComponent(l?d.toUpperCase():d)+"="+encodeURIComponent(n[d]));return(!r||r.indexOf("?")===-1?"?":"&")+h.join("&")}var nt=/\{ *([\w_-]+) *\}/g;function Mt(n,r){return n.replace(nt,function(l,h){var d=r[h];if(d===void 0)throw new Error("No value provided for variable "+l);return typeof d=="function"&&(d=d(r)),d})}var q=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function X(n,r){for(var l=0;l<n.length;l++)if(n[l]===r)return l;return-1}var tt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Yt(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var ut=0;function Nt(n){var r=+new Date,l=Math.max(0,16-(r-ut));return ut=r+l,window.setTimeout(n,l)}var It=window.requestAnimationFrame||Yt("RequestAnimationFrame")||Nt,re=window.cancelAnimationFrame||Yt("CancelAnimationFrame")||Yt("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function W(n,r,l){if(l&&It===Nt)n.call(r);else return It.call(window,c(n,r))}function M(n){n&&re.call(window,n)}var K={extend:o,create:a,bind:c,lastId:u,stamp:f,throttle:_,wrapNum:g,falseFn:m,formatNum:v,trim:T,splitWords:A,setOptions:D,getParamString:$,template:Mt,isArray:q,indexOf:X,emptyImageUrl:tt,requestFn:It,cancelFn:re,requestAnimFrame:W,cancelAnimFrame:M};function qt(){}qt.extend=function(n){var r=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=r.__super__=this.prototype,h=a(l);h.constructor=r,r.prototype=h;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(r[d]=this[d]);return n.statics&&(o(r,n.statics),delete n.statics),n.includes&&(Hn(n.includes),o.apply(null,[h].concat(n.includes)),delete n.includes),h.options&&(n.options=o(a(h.options),n.options)),o(h,n),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,w=h._initHooks.length;p<w;p++)h._initHooks[p].call(this)}},r},qt.include=function(n){return o(this.prototype,n),this},qt.mergeOptions=function(n){return o(this.prototype.options,n),this},qt.addInitHook=function(n){var r=Array.prototype.slice.call(arguments,1),l=typeof n=="function"?n:function(){this[n].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function Hn(n){if(!(typeof L=="undefined"||!L||!L.Mixin)){n=q(n)?n:[n];for(var r=0;r<n.length;r++)n[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var dt={on:function(n,r,l){if(typeof n=="object")for(var h in n)this._on(h,n[h],r);else{n=A(n);for(var d=0,p=n.length;d<p;d++)this._on(n[d],r,l)}return this},off:function(n,r,l){if(!n)delete this._events;else if(typeof n=="object")for(var h in n)this._off(h,n[h],r);else{n=A(n);for(var d=0,p=n.length;d<p;d++)this._off(n[d],r,l)}return this},_on:function(n,r,l){this._events=this._events||{};var h=this._events[n];h||(h=[],this._events[n]=h),l===this&&(l=void 0);for(var d={fn:r,ctx:l},p=h,w=0,C=p.length;w<C;w++)if(p[w].fn===r&&p[w].ctx===l)return;p.push(d)},_off:function(n,r,l){var h,d,p;if(!!this._events&&(h=this._events[n],!!h)){if(!r){for(d=0,p=h.length;d<p;d++)h[d].fn=m;delete this._events[n];return}if(l===this&&(l=void 0),h)for(d=0,p=h.length;d<p;d++){var w=h[d];if(w.ctx===l&&w.fn===r){w.fn=m,this._firingCount&&(this._events[n]=h=h.slice()),h.splice(d,1);return}}}},fire:function(n,r,l){if(!this.listens(n,l))return this;var h=o({},r,{type:n,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var d=this._events[n];if(d){this._firingCount=this._firingCount+1||1;for(var p=0,w=d.length;p<w;p++){var C=d[p];C.fn.call(C.ctx||this,h)}this._firingCount--}}return l&&this._propagateEvent(h),this},listens:function(n,r){var l=this._events&&this._events[n];if(l&&l.length)return!0;if(r){for(var h in this._eventParents)if(this._eventParents[h].listens(n,r))return!0}return!1},once:function(n,r,l){if(typeof n=="object"){for(var h in n)this.once(h,n[h],r);return this}var d=c(function(){this.off(n,r,l).off(n,d,l)},this);return this.on(n,r,l).on(n,d,l)},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[f(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[f(n)],this},_propagateEvent:function(n){for(var r in this._eventParents)this._eventParents[r].fire(n.type,o({layer:n.target,propagatedFrom:n.target},n),!0)}};dt.addEventListener=dt.on,dt.removeEventListener=dt.clearAllEventListeners=dt.off,dt.addOneTimeEventListener=dt.once,dt.fireEvent=dt.fire,dt.hasEventListeners=dt.listens;var xt=qt.extend(dt);function U(n,r,l){this.x=l?Math.round(n):n,this.y=l?Math.round(r):r}var Ce=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(n){return this.clone()._add(lt(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(lt(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new U(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new U(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ce(this.x),this.y=Ce(this.y),this},distanceTo:function(n){n=lt(n);var r=n.x-this.x,l=n.y-this.y;return Math.sqrt(r*r+l*l)},equals:function(n){return n=lt(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=lt(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function lt(n,r,l){return n instanceof U?n:q(n)?new U(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new U(n.x,n.y):new U(n,r,l)}function wt(n,r){if(!!n)for(var l=r?[n,r]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}wt.prototype={extend:function(n){return n=lt(n),!this.min&&!this.max?(this.min=n.clone(),this.max=n.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(n){return new U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new U(this.min.x,this.max.y)},getTopRight:function(){return new U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var r,l;return typeof n[0]=="number"||n instanceof U?n=lt(n):n=Qt(n),n instanceof wt?(r=n.min,l=n.max):r=l=n,r.x>=this.min.x&&l.x<=this.max.x&&r.y>=this.min.y&&l.y<=this.max.y},intersects:function(n){n=Qt(n);var r=this.min,l=this.max,h=n.min,d=n.max,p=d.x>=r.x&&h.x<=l.x,w=d.y>=r.y&&h.y<=l.y;return p&&w},overlaps:function(n){n=Qt(n);var r=this.min,l=this.max,h=n.min,d=n.max,p=d.x>r.x&&h.x<l.x,w=d.y>r.y&&h.y<l.y;return p&&w},isValid:function(){return!!(this.min&&this.max)}};function Qt(n,r){return!n||n instanceof wt?n:new wt(n,r)}function Ot(n,r){if(!!n)for(var l=r?[n,r]:n,h=0,d=l.length;h<d;h++)this.extend(l[h])}Ot.prototype={extend:function(n){var r=this._southWest,l=this._northEast,h,d;if(n instanceof bt)h=n,d=n;else if(n instanceof Ot){if(h=n._southWest,d=n._northEast,!h||!d)return this}else return n?this.extend(Rt(n)||Wt(n)):this;return!r&&!l?(this._southWest=new bt(h.lat,h.lng),this._northEast=new bt(d.lat,d.lng)):(r.lat=Math.min(h.lat,r.lat),r.lng=Math.min(h.lng,r.lng),l.lat=Math.max(d.lat,l.lat),l.lng=Math.max(d.lng,l.lng)),this},pad:function(n){var r=this._southWest,l=this._northEast,h=Math.abs(r.lat-l.lat)*n,d=Math.abs(r.lng-l.lng)*n;return new Ot(new bt(r.lat-h,r.lng-d),new bt(l.lat+h,l.lng+d))},getCenter:function(){return new bt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new bt(this.getNorth(),this.getWest())},getSouthEast:function(){return new bt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof bt||"lat"in n?n=Rt(n):n=Wt(n);var r=this._southWest,l=this._northEast,h,d;return n instanceof Ot?(h=n.getSouthWest(),d=n.getNorthEast()):h=d=n,h.lat>=r.lat&&d.lat<=l.lat&&h.lng>=r.lng&&d.lng<=l.lng},intersects:function(n){n=Wt(n);var r=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>=r.lat&&h.lat<=l.lat,w=d.lng>=r.lng&&h.lng<=l.lng;return p&&w},overlaps:function(n){n=Wt(n);var r=this._southWest,l=this._northEast,h=n.getSouthWest(),d=n.getNorthEast(),p=d.lat>r.lat&&h.lat<l.lat,w=d.lng>r.lng&&h.lng<l.lng;return p&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,r){return n?(n=Wt(n),this._southWest.equals(n.getSouthWest(),r)&&this._northEast.equals(n.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Wt(n,r){return n instanceof Ot?n:new Ot(n,r)}function bt(n,r,l){if(isNaN(n)||isNaN(r))throw new Error("Invalid LatLng object: ("+n+", "+r+")");this.lat=+n,this.lng=+r,l!==void 0&&(this.alt=+l)}bt.prototype={equals:function(n,r){if(!n)return!1;n=Rt(n);var l=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return l<=(r===void 0?1e-9:r)},toString:function(n){return"LatLng("+v(this.lat,n)+", "+v(this.lng,n)+")"},distanceTo:function(n){return ve.distance(this,Rt(n))},wrap:function(){return ve.wrapLatLng(this)},toBounds:function(n){var r=180*n/40075017,l=r/Math.cos(Math.PI/180*this.lat);return Wt([this.lat-r,this.lng-l],[this.lat+r,this.lng+l])},clone:function(){return new bt(this.lat,this.lng,this.alt)}};function Rt(n,r,l){return n instanceof bt?n:q(n)&&typeof n[0]!="object"?n.length===3?new bt(n[0],n[1],n[2]):n.length===2?new bt(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new bt(n.lat,"lng"in n?n.lng:n.lon,n.alt):r===void 0?null:new bt(n,r,l)}var jt={latLngToPoint:function(n,r){var l=this.projection.project(n),h=this.scale(r);return this.transformation._transform(l,h)},pointToLatLng:function(n,r){var l=this.scale(r),h=this.transformation.untransform(n,l);return this.projection.unproject(h)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var r=this.projection.bounds,l=this.scale(n),h=this.transformation.transform(r.min,l),d=this.transformation.transform(r.max,l);return new wt(h,d)},infinite:!1,wrapLatLng:function(n){var r=this.wrapLng?g(n.lng,this.wrapLng,!0):n.lng,l=this.wrapLat?g(n.lat,this.wrapLat,!0):n.lat,h=n.alt;return new bt(l,r,h)},wrapLatLngBounds:function(n){var r=n.getCenter(),l=this.wrapLatLng(r),h=r.lat-l.lat,d=r.lng-l.lng;if(h===0&&d===0)return n;var p=n.getSouthWest(),w=n.getNorthEast(),C=new bt(p.lat-h,p.lng-d),x=new bt(w.lat-h,w.lng-d);return new Ot(C,x)}},ve=o({},jt,{wrapLng:[-180,180],R:6371e3,distance:function(n,r){var l=Math.PI/180,h=n.lat*l,d=r.lat*l,p=Math.sin((r.lat-n.lat)*l/2),w=Math.sin((r.lng-n.lng)*l/2),C=p*p+Math.cos(h)*Math.cos(d)*w*w,x=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*x}}),as=6378137,He={R:as,MAX_LATITUDE:85.0511287798,project:function(n){var r=Math.PI/180,l=this.MAX_LATITUDE,h=Math.max(Math.min(l,n.lat),-l),d=Math.sin(h*r);return new U(this.R*n.lng*r,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(n){var r=180/Math.PI;return new bt((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*r,n.x*r/this.R)},bounds:function(){var n=as*Math.PI;return new wt([-n,-n],[n,n])}()};function Un(n,r,l,h){if(q(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=r,this._c=l,this._d=h}Un.prototype={transform:function(n,r){return this._transform(n.clone(),r)},_transform:function(n,r){return r=r||1,n.x=r*(this._a*n.x+this._b),n.y=r*(this._c*n.y+this._d),n},untransform:function(n,r){return r=r||1,new U((n.x/r-this._b)/this._a,(n.y/r-this._d)/this._c)}};function nn(n,r,l,h){return new Un(n,r,l,h)}var y=o({},ve,{code:"EPSG:3857",projection:He,transformation:function(){var n=.5/(Math.PI*He.R);return nn(n,.5,-n,.5)}()}),b=o({},y,{code:"EPSG:900913"});function E(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function S(n,r){var l="",h,d,p,w,C,x;for(h=0,p=n.length;h<p;h++){for(C=n[h],d=0,w=C.length;d<w;d++)x=C[d],l+=(d?"L":"M")+x.x+" "+x.y;l+=r?sr?"z":"x":""}return l||"M0 0"}var I=document.documentElement.style,R="ActiveXObject"in window,z=R&&!document.addEventListener,N="msLaunchUri"in navigator&&!("documentMode"in document),B=$e("webkit"),k=$e("android"),V=$e("android 2")||$e("android 3"),Z=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),j=k&&$e("Google")&&Z<537&&!("AudioNode"in window),Q=!!window.opera,ct=!N&&$e("chrome"),Et=$e("gecko")&&!B&&!Q&&!R,_t=!ct&&$e("safari"),Tt=$e("phantom"),fe="OTransition"in I,sn=navigator.platform.indexOf("Win")===0,yi=R&&"transition"in I,rn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!V,ls="MozPerspective"in I,St=!window.L_DISABLE_3D&&(yi||rn||ls)&&!fe&&!Tt,ee=typeof orientation!="undefined"||$e("mobile"),ir=ee&&B,O_=ee&&rn,bn=!window.PointerEvent&&window.MSPointerEvent,Ue=!!(window.PointerEvent||bn),Ze=!window.L_NO_TOUCH&&(Ue||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Sc=ee&&Q,D_=ee&&Et,Cn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,wi=function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",m,r),window.removeEventListener("testPassiveEventSupport",m,r)}catch{}return n}(),kc=function(){return!!document.createElement("canvas").getContext}(),sr=!!(document.createElementNS&&E("svg").createSVGRect),rr=!sr&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var r=n.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}();function $e(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var B_={ie:R,ielt9:z,edge:N,webkit:B,android:k,android23:V,androidStock:j,opera:Q,chrome:ct,gecko:Et,safari:_t,phantom:Tt,opera12:fe,win:sn,ie3d:yi,webkit3d:rn,gecko3d:ls,any3d:St,mobile:ee,mobileWebkit:ir,mobileWebkit3d:O_,msPointer:bn,pointer:Ue,touch:Ze,mobileOpera:Sc,mobileGecko:D_,retina:Cn,passiveEvents:wi,canvas:kc,svg:sr,vml:rr},Uo=bn?"MSPointerDown":"pointerdown",Zo=bn?"MSPointerMove":"pointermove",$o=bn?"MSPointerUp":"pointerup",Vo=bn?"MSPointerCancel":"pointercancel",bi={},Lc=!1;function F_(n,r,l,h){return r==="touchstart"?W_(n,l,h):r==="touchmove"?Z_(n,l,h):r==="touchend"&&$_(n,l,h),this}function z_(n,r,l){var h=n["_leaflet_"+r+l];return r==="touchstart"?n.removeEventListener(Uo,h,!1):r==="touchmove"?n.removeEventListener(Zo,h,!1):r==="touchend"&&(n.removeEventListener($o,h,!1),n.removeEventListener(Vo,h,!1)),this}function W_(n,r,l){var h=c(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Ee(d),qo(d,r)});n["_leaflet_touchstart"+l]=h,n.addEventListener(Uo,h,!1),Lc||(document.addEventListener(Uo,H_,!0),document.addEventListener(Zo,U_,!0),document.addEventListener($o,Ac,!0),document.addEventListener(Vo,Ac,!0),Lc=!0)}function H_(n){bi[n.pointerId]=n}function U_(n){bi[n.pointerId]&&(bi[n.pointerId]=n)}function Ac(n){delete bi[n.pointerId]}function qo(n,r){n.touches=[];for(var l in bi)n.touches.push(bi[l]);n.changedTouches=[n],r(n)}function Z_(n,r,l){var h=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||qo(d,r)};n["_leaflet_touchmove"+l]=h,n.addEventListener(Zo,h,!1)}function $_(n,r,l){var h=function(d){qo(d,r)};n["_leaflet_touchend"+l]=h,n.addEventListener($o,h,!1),n.addEventListener(Vo,h,!1)}var or=bn?"MSPointerDown":Ue?"pointerdown":"touchstart",ar=bn?"MSPointerUp":Ue?"pointerup":"touchend",Ci="_leaflet_";function V_(n,r,l){var h,d,p=!1,w=250;function C(P){if(Ue){if(!P.isPrimary||P.pointerType==="mouse")return}else if(P.touches.length>1)return;var H=Date.now(),G=H-(h||H);d=P.touches?P.touches[0]:P,p=G>0&&G<=w,h=H}function x(P){if(p&&!d.cancelBubble){if(Ue){if(P.pointerType==="mouse")return;var H={},G,mt;for(mt in d)G=d[mt],H[mt]=G&&G.bind?G.bind(d):G;d=H}d.type="dblclick",d.button=0,r(d),h=null}}return n[Ci+or+l]=C,n[Ci+ar+l]=x,n[Ci+"dblclick"+l]=r,n.addEventListener(or,C,wi?{passive:!1}:!1),n.addEventListener(ar,x,wi?{passive:!1}:!1),n.addEventListener("dblclick",r,!1),this}function q_(n,r){var l=n[Ci+or+r],h=n[Ci+ar+r],d=n[Ci+"dblclick"+r];return n.removeEventListener(or,l,wi?{passive:!1}:!1),n.removeEventListener(ar,h,wi?{passive:!1}:!1),n.removeEventListener("dblclick",d,!1),this}var jo=hr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),cs=hr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Mc=cs==="webkitTransition"||cs==="OTransition"?cs+"End":"transitionend";function Nc(n){return typeof n=="string"?document.getElementById(n):n}function hs(n,r){var l=n.style[r]||n.currentStyle&&n.currentStyle[r];if((!l||l==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(n,null);l=h?h[r]:null}return l==="auto"?null:l}function pt(n,r,l){var h=document.createElement(n);return h.className=r||"",l&&l.appendChild(h),h}function Dt(n){var r=n.parentNode;r&&r.removeChild(n)}function lr(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function xi(n){var r=n.parentNode;r&&r.lastChild!==n&&r.appendChild(n)}function Ei(n){var r=n.parentNode;r&&r.firstChild!==n&&r.insertBefore(n,r.firstChild)}function Go(n,r){if(n.classList!==void 0)return n.classList.contains(r);var l=cr(n);return l.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(l)}function it(n,r){if(n.classList!==void 0)for(var l=A(r),h=0,d=l.length;h<d;h++)n.classList.add(l[h]);else if(!Go(n,r)){var p=cr(n);Ko(n,(p?p+" ":"")+r)}}function Ft(n,r){n.classList!==void 0?n.classList.remove(r):Ko(n,T((" "+cr(n)+" ").replace(" "+r+" "," ")))}function Ko(n,r){n.className.baseVal===void 0?n.className=r:n.className.baseVal=r}function cr(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function xe(n,r){"opacity"in n.style?n.style.opacity=r:"filter"in n.style&&j_(n,r)}function j_(n,r){var l=!1,h="DXImageTransform.Microsoft.Alpha";try{l=n.filters.item(h)}catch{if(r===1)return}r=Math.round(r*100),l?(l.Enabled=r!==100,l.Opacity=r):n.style.filter+=" progid:"+h+"(opacity="+r+")"}function hr(n){for(var r=document.documentElement.style,l=0;l<n.length;l++)if(n[l]in r)return n[l];return!1}function Zn(n,r,l){var h=r||new U(0,0);n.style[jo]=(yi?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(l?" scale("+l+")":"")}function Ut(n,r){n._leaflet_pos=r,St?Zn(n,r):(n.style.left=r.x+"px",n.style.top=r.y+"px")}function xn(n){return n._leaflet_pos||new U(0,0)}var us,ds,Yo;if("onselectstart"in document)us=function(){ht(window,"selectstart",Ee)},ds=function(){Ht(window,"selectstart",Ee)};else{var fs=hr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);us=function(){if(fs){var n=document.documentElement.style;Yo=n[fs],n[fs]="none"}},ds=function(){fs&&(document.documentElement.style[fs]=Yo,Yo=void 0)}}function Qo(){ht(window,"dragstart",Ee)}function Xo(){Ht(window,"dragstart",Ee)}var ur,Jo;function ta(n){for(;n.tabIndex===-1;)n=n.parentNode;!n.style||(dr(),ur=n,Jo=n.style.outline,n.style.outline="none",ht(window,"keydown",dr))}function dr(){!ur||(ur.style.outline=Jo,ur=void 0,Jo=void 0,Ht(window,"keydown",dr))}function Rc(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function ea(n){var r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth||1,y:r.height/n.offsetHeight||1,boundingClientRect:r}}var G_={TRANSFORM:jo,TRANSITION:cs,TRANSITION_END:Mc,get:Nc,getStyle:hs,create:pt,remove:Dt,empty:lr,toFront:xi,toBack:Ei,hasClass:Go,addClass:it,removeClass:Ft,setClass:Ko,getClass:cr,setOpacity:xe,testProp:hr,setTransform:Zn,setPosition:Ut,getPosition:xn,disableTextSelection:us,enableTextSelection:ds,disableImageDrag:Qo,enableImageDrag:Xo,preventOutline:ta,restoreOutline:dr,getSizedParentNode:Rc,getScale:ea};function ht(n,r,l,h){if(typeof r=="object")for(var d in r)fr(n,d,r[d],l);else{r=A(r);for(var p=0,w=r.length;p<w;p++)fr(n,r[p],l,h)}return this}var Ae="_leaflet_events";function Ht(n,r,l,h){if(typeof r=="object")for(var d in r)ia(n,d,r[d],l);else if(r){r=A(r);for(var p=0,w=r.length;p<w;p++)ia(n,r[p],l,h)}else{for(var C in n[Ae])ia(n,C,n[Ae][C]);delete n[Ae]}return this}function Oc(){if(Ue)return!(N||_t)}var na={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fr(n,r,l,h){var d=r+f(l)+(h?"_"+f(h):"");if(n[Ae]&&n[Ae][d])return this;var p=function(C){return l.call(h||n,C||window.event)},w=p;Ue&&r.indexOf("touch")===0?F_(n,r,p,d):Ze&&r==="dblclick"&&!Oc()?V_(n,p,d):"addEventListener"in n?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?n.addEventListener(na[r]||r,p,wi?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(p=function(C){C=C||window.event,_r(n,C)&&w(C)},n.addEventListener(na[r],p,!1)):n.addEventListener(r,w,!1):"attachEvent"in n&&n.attachEvent("on"+r,p),n[Ae]=n[Ae]||{},n[Ae][d]=p}function ia(n,r,l,h){var d=r+f(l)+(h?"_"+f(h):""),p=n[Ae]&&n[Ae][d];if(!p)return this;Ue&&r.indexOf("touch")===0?z_(n,r,d):Ze&&r==="dblclick"&&!Oc()?q_(n,d):"removeEventListener"in n?n.removeEventListener(na[r]||r,p,!1):"detachEvent"in n&&n.detachEvent("on"+r,p),n[Ae][d]=null}function $n(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,aa(n),this}function sa(n){return fr(n,"wheel",$n),this}function _s(n){return ht(n,"mousedown touchstart dblclick",$n),fr(n,"click",oa),this}function Ee(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function on(n){return Ee(n),$n(n),this}function Dc(n,r){if(!r)return new U(n.clientX,n.clientY);var l=ea(r),h=l.boundingClientRect;return new U((n.clientX-h.left)/l.x-r.clientLeft,(n.clientY-h.top)/l.y-r.clientTop)}var K_=sn&&ct?2*window.devicePixelRatio:Et?window.devicePixelRatio:1;function Bc(n){return N?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/K_:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}var ra={};function oa(n){ra[n.type]=!0}function aa(n){var r=ra[n.type];return ra[n.type]=!1,r}function _r(n,r){var l=r.relatedTarget;if(!l)return!0;try{for(;l&&l!==n;)l=l.parentNode}catch{return!1}return l!==n}var Y_={on:ht,off:Ht,stopPropagation:$n,disableScrollPropagation:sa,disableClickPropagation:_s,preventDefault:Ee,stop:on,getMousePosition:Dc,getWheelDelta:Bc,fakeStop:oa,skipped:aa,isExternalTarget:_r,addListener:ht,removeListener:Ht},Fc=xt.extend({run:function(n,r,l,h){this.stop(),this._el=n,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=xn(n),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=W(this._animate,this),this._step()},_step:function(n){var r=+new Date-this._startTime,l=this._duration*1e3;r<l?this._runFrame(this._easeOut(r/l),n):(this._runFrame(1),this._complete())},_runFrame:function(n,r){var l=this._startPos.add(this._offset.multiplyBy(n));r&&l._round(),Ut(this._el,l),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),ft=xt.extend({options:{crs:y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,r){r=D(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(Rt(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=cs&&St&&!Sc&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,Mc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,r,l){if(r=r===void 0?this._zoom:this._limitZoom(r),n=this._limitCenter(Rt(n),r,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var h=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,r,l.zoom):this._tryAnimatedPan(n,l.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(n,r),this},setZoom:function(n,r){return this._loaded?this.setView(this.getCenter(),n,{zoom:r}):(this._zoom=n,this)},zoomIn:function(n,r){return n=n||(St?this.options.zoomDelta:1),this.setZoom(this._zoom+n,r)},zoomOut:function(n,r){return n=n||(St?this.options.zoomDelta:1),this.setZoom(this._zoom-n,r)},setZoomAround:function(n,r,l){var h=this.getZoomScale(r),d=this.getSize().divideBy(2),p=n instanceof U?n:this.latLngToContainerPoint(n),w=p.subtract(d).multiplyBy(1-1/h),C=this.containerPointToLatLng(d.add(w));return this.setView(C,r,{zoom:l})},_getBoundsCenterZoom:function(n,r){r=r||{},n=n.getBounds?n.getBounds():Wt(n);var l=lt(r.paddingTopLeft||r.padding||[0,0]),h=lt(r.paddingBottomRight||r.padding||[0,0]),d=this.getBoundsZoom(n,!1,l.add(h));if(d=typeof r.maxZoom=="number"?Math.min(r.maxZoom,d):d,d===1/0)return{center:n.getCenter(),zoom:d};var p=h.subtract(l).divideBy(2),w=this.project(n.getSouthWest(),d),C=this.project(n.getNorthEast(),d),x=this.unproject(w.add(C).divideBy(2).add(p),d);return{center:x,zoom:d}},fitBounds:function(n,r){if(n=Wt(n),!n.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(n,r);return this.setView(l.center,l.zoom,r)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,r){return this.setView(n,this._zoom,{pan:r})},panBy:function(n,r){if(n=lt(n).round(),r=r||{},!n.x&&!n.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){it(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,l,r.duration||.25,r.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,r,l){if(l=l||{},l.animate===!1||!St)return this.setView(n,r,l);this._stop();var h=this.project(this.getCenter()),d=this.project(n),p=this.getSize(),w=this._zoom;n=Rt(n),r=r===void 0?w:r;var C=Math.max(p.x,p.y),x=C*this.getZoomScale(w,r),P=d.distanceTo(h)||1,H=1.42,G=H*H;function mt(Zt){var Er=Zt?-1:1,Dp=Zt?x:C,Bp=x*x-C*C+Er*G*G*P*P,Fp=2*Dp*G*P,wa=Bp/Fp,gh=Math.sqrt(wa*wa+1)-wa,zp=gh<1e-9?-18:Math.log(gh);return zp}function un(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function jn(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}function xr(Zt){return un(Zt)/jn(Zt)}var Tn=mt(0);function ya(Zt){return C*(jn(Tn)/jn(Tn+H*Zt))}function Mp(Zt){return C*(jn(Tn)*xr(Tn+H*Zt)-un(Tn))/G}function Np(Zt){return 1-Math.pow(1-Zt,1.5)}var Rp=Date.now(),ph=(mt(1)-Tn)/H,Op=l.duration?1e3*l.duration:1e3*ph*.8;function mh(){var Zt=(Date.now()-Rp)/Op,Er=Np(Zt)*ph;Zt<=1?(this._flyToFrame=W(mh,this),this._move(this.unproject(h.add(d.subtract(h).multiplyBy(Mp(Er)/P)),w),this.getScaleZoom(C/ya(Er),w),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),mh.call(this),this},flyToBounds:function(n,r){var l=this._getBoundsCenterZoom(n,r);return this.flyTo(l.center,l.zoom,r)},setMaxBounds:function(n){if(n=Wt(n),n.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(n){var r=this.options.minZoom;return this.options.minZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var r=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,r){this._enforcingBounds=!0;var l=this.getCenter(),h=this._limitCenter(l,this._zoom,Wt(n));return l.equals(h)||this.panTo(h,r),this._enforcingBounds=!1,this},panInside:function(n,r){r=r||{};var l=lt(r.paddingTopLeft||r.padding||[0,0]),h=lt(r.paddingBottomRight||r.padding||[0,0]),d=this.getCenter(),p=this.project(d),w=this.project(n),C=this.getPixelBounds(),x=C.getSize().divideBy(2),P=Qt([C.min.add(l),C.max.subtract(h)]);if(!P.contains(w)){this._enforcingBounds=!0;var H=p.subtract(w),G=lt(w.x+H.x,w.y+H.y);(w.x<P.min.x||w.x>P.max.x)&&(G.x=p.x-H.x,H.x>0?G.x+=x.x-l.x:G.x-=x.x-h.x),(w.y<P.min.y||w.y>P.max.y)&&(G.y=p.y-H.y,H.y>0?G.y+=x.y-l.y:G.y-=x.y-h.y),this.panTo(this.unproject(G),r),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=o({animate:!1,pan:!0},n===!0?{animate:!0}:n);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),h=r.divideBy(2).round(),d=l.divideBy(2).round(),p=h.subtract(d);return!p.x&&!p.y?this:(n.animate&&n.pan?this.panBy(p):(n.pan&&this._rawPanBy(p),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=o({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=c(this._handleGeolocationResponse,this),l=c(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,l,n):navigator.geolocation.getCurrentPosition(r,l,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){var r=n.code,l=n.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+l+"."})},_handleGeolocationResponse:function(n){var r=n.coords.latitude,l=n.coords.longitude,h=new bt(r,l),d=h.toBounds(n.coords.accuracy*2),p=this._locateOptions;if(p.setView){var w=this.getBoundsZoom(d);this.setView(h,p.maxZoom?Math.min(w,p.maxZoom):w)}var C={latlng:h,bounds:d,timestamp:n.timestamp};for(var x in n.coords)typeof n.coords[x]=="number"&&(C[x]=n.coords[x]);this.fire("locationfound",C)},addHandler:function(n,r){if(!r)return this;var l=this[n]=new r(this);return this._handlers.push(l),this.options[n]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Dt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,r){var l="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),h=pt("div",l,r||this._mapPane);return n&&(this._panes[n]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),r=this.unproject(n.getBottomLeft()),l=this.unproject(n.getTopRight());return new Ot(r,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,r,l){n=Wt(n),l=lt(l||[0,0]);var h=this.getZoom()||0,d=this.getMinZoom(),p=this.getMaxZoom(),w=n.getNorthWest(),C=n.getSouthEast(),x=this.getSize().subtract(l),P=Qt(this.project(C,h),this.project(w,h)).getSize(),H=St?this.options.zoomSnap:1,G=x.x/P.x,mt=x.y/P.y,un=r?Math.max(G,mt):Math.min(G,mt);return h=this.getScaleZoom(un,h),H&&(h=Math.round(h/(H/100))*(H/100),h=r?Math.ceil(h/H)*H:Math.floor(h/H)*H),Math.max(d,Math.min(p,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,r){var l=this._getTopLeftPoint(n,r);return new wt(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,r){var l=this.options.crs;return r=r===void 0?this._zoom:r,l.scale(n)/l.scale(r)},getScaleZoom:function(n,r){var l=this.options.crs;r=r===void 0?this._zoom:r;var h=l.zoom(n*l.scale(r));return isNaN(h)?1/0:h},project:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(Rt(n),r)},unproject:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(lt(n),r)},layerPointToLatLng:function(n){var r=lt(n).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(n){var r=this.project(Rt(n))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Rt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Wt(n))},distance:function(n,r){return this.options.crs.distance(Rt(n),Rt(r))},containerPointToLayerPoint:function(n){return lt(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return lt(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var r=this.containerPointToLayerPoint(lt(n));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Rt(n)))},mouseEventToContainerPoint:function(n){return Dc(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var r=this._container=Nc(n);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(r,"scroll",this._onScroll,this),this._containerId=f(r)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&St,it(n,"leaflet-container"+(Ze?" leaflet-touch":"")+(Cn?" leaflet-retina":"")+(z?" leaflet-oldie":"")+(_t?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=hs(n,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ut(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(it(n.markerPane,"leaflet-zoom-hide"),it(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,r){Ut(this._mapPane,new U(0,0));var l=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var h=this._zoom!==r;this._moveStart(h,!1)._move(n,r)._moveEnd(h),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(n,r){return n&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(n,r,l){r===void 0&&(r=this._zoom);var h=this._zoom!==r;return this._zoom=r,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),(h||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Ut(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[f(this._container)]=this;var r=n?Ht:ht;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),St&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=W(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,r){for(var l=[],h,d=r==="mouseout"||r==="mouseover",p=n.target||n.srcElement,w=!1;p;){if(h=this._targets[f(p)],h&&(r==="click"||r==="preclick")&&!n._simulated&&this._draggableMoved(h)){w=!0;break}if(h&&h.listens(r,!0)&&(d&&!_r(p,n)||(l.push(h),d))||p===this._container)break;p=p.parentNode}return!l.length&&!w&&!d&&_r(p,n)&&(l=[this]),l},_handleDOMEvent:function(n){if(!(!this._loaded||aa(n))){var r=n.type;(r==="mousedown"||r==="keypress"||r==="keyup"||r==="keydown")&&ta(n.target||n.srcElement),this._fireDOMEvent(n,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,r,l){if(n.type==="click"){var h=o({},n);h.type="preclick",this._fireDOMEvent(h,h.type,l)}if(!n._stopped&&(l=(l||[]).concat(this._findEventTargets(n,r)),!!l.length)){var d=l[0];r==="contextmenu"&&d.listens(r,!0)&&Ee(n);var p={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var w=d.getLatLng&&(!d._radius||d._radius<=10);p.containerPoint=w?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(n),p.layerPoint=this.containerPointToLayerPoint(p.containerPoint),p.latlng=w?d.getLatLng():this.layerPointToLatLng(p.layerPoint)}for(var C=0;C<l.length;C++)if(l[C].fire(r,p,!0),p.originalEvent._stopped||l[C].options.bubblingMouseEvents===!1&&X(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,r=this._handlers.length;n<r;n++)this._handlers[n].disable()},whenReady:function(n,r){return this._loaded?n.call(r||this,{target:this}):this.on("load",n,r),this},_getMapPanePos:function(){return xn(this._mapPane)||new U(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,r){var l=n&&r!==void 0?this._getNewPixelOrigin(n,r):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,r){var l=this.getSize()._divideBy(2);return this.project(n,r)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,r,l){var h=this._getNewPixelOrigin(l,r);return this.project(n,r)._subtract(h)},_latLngBoundsToNewLayerBounds:function(n,r,l){var h=this._getNewPixelOrigin(l,r);return Qt([this.project(n.getSouthWest(),r)._subtract(h),this.project(n.getNorthWest(),r)._subtract(h),this.project(n.getSouthEast(),r)._subtract(h),this.project(n.getNorthEast(),r)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,r,l){if(!l)return n;var h=this.project(n,r),d=this.getSize().divideBy(2),p=new wt(h.subtract(d),h.add(d)),w=this._getBoundsOffset(p,l,r);return w.round().equals([0,0])?n:this.unproject(h.add(w),r)},_limitOffset:function(n,r){if(!r)return n;var l=this.getPixelBounds(),h=new wt(l.min.add(n),l.max.add(n));return n.add(this._getBoundsOffset(h,r))},_getBoundsOffset:function(n,r,l){var h=Qt(this.project(r.getNorthEast(),l),this.project(r.getSouthWest(),l)),d=h.min.subtract(n.min),p=h.max.subtract(n.max),w=this._rebound(d.x,-p.x),C=this._rebound(d.y,-p.y);return new U(w,C)},_rebound:function(n,r){return n+r>0?Math.round(n-r)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(r))},_limitZoom:function(n){var r=this.getMinZoom(),l=this.getMaxZoom(),h=St?this.options.zoomSnap:1;return h&&(n=Math.round(n/h)*h),Math.max(r,Math.min(l,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ft(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,r){var l=this._getCenterOffset(n)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,r),!0)},_createAnimProxy:function(){var n=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(r){var l=jo,h=this._proxy.style[l];Zn(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),h===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),r=this.getZoom();Zn(this._proxy,this.project(n,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,r,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(r),d=this._getCenterOffset(n)._divideBy(1-1/h);return l.animate!==!0&&!this.getSize().contains(d)?!1:(W(function(){this._moveStart(!0,!1)._animateZoom(n,r,!0)},this),!0)},_animateZoom:function(n,r,l,h){!this._mapPane||(l&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=r,it(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:r,noUpdate:h}),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Ft(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),W(function(){this._moveEnd(!0)},this))}});function Q_(n,r){return new ft(n,r)}var Me=qt.extend({options:{position:"topright"},initialize:function(n){D(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var r=this._map;return r&&r.removeControl(this),this.options.position=n,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var r=this._container=this.onAdd(n),l=this.getPosition(),h=n._controlCorners[l];return it(r,"leaflet-control"),l.indexOf("bottom")!==-1?h.insertBefore(r,h.firstChild):h.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),ps=function(n){return new Me(n)};ft.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",l=this._controlContainer=pt("div",r+"control-container",this._container);function h(d,p){var w=r+d+" "+r+p;n[d+p]=pt("div",w,l)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Dt(this._controlCorners[n]);Dt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zc=Me.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,r,l,h){return l<h?-1:h<l?1:0}},initialize:function(n,r,l){D(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var h in n)this._addLayer(n[h],h);for(h in r)this._addLayer(r[h],h,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Me.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,r){return this._addLayer(n,r),this._map?this._update():this},addOverlay:function(n,r){return this._addLayer(n,r,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var r=this._getLayer(f(n));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){it(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(it(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Ft(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ft(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",r=this._container=pt("div",n),l=this.options.collapsed;r.setAttribute("aria-haspopup",!0),_s(r),sa(r);var h=this._section=pt("section",n+"-list");l&&(this._map.on("click",this.collapse,this),k||ht(r,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=pt("a",n+"-toggle",r);d.href="#",d.title="Layers",Ze?(ht(d,"click",on),ht(d,"click",this.expand,this)):ht(d,"focus",this.expand,this),l||this.expand(),this._baseLayersList=pt("div",n+"-base",h),this._separator=pt("div",n+"-separator",h),this._overlaysList=pt("div",n+"-overlays",h),r.appendChild(h)},_getLayer:function(n){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&f(this._layers[r].layer)===n)return this._layers[r]},_addLayer:function(n,r,l){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:r,overlay:l}),this.options.sortLayers&&this._layers.sort(c(function(h,d){return this.options.sortFunction(h.layer,d.layer,h.name,d.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;lr(this._baseLayersList),lr(this._overlaysList),this._layerControlInputs=[];var n,r,l,h,d=0;for(l=0;l<this._layers.length;l++)h=this._layers[l],this._addItem(h),r=r||h.overlay,n=n||!h.overlay,d+=h.overlay?0:1;return this.options.hideSingleBase&&(n=n&&d>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=r&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var r=this._getLayer(f(n.target)),l=r.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;l&&this._map.fire(l,r)},_createRadioElement:function(n,r){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(r?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=l,h.firstChild},_addItem:function(n){var r=document.createElement("label"),l=this._map.hasLayer(n.layer),h;n.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=l):h=this._createRadioElement("leaflet-base-layers_"+f(this),l),this._layerControlInputs.push(h),h.layerId=f(n.layer),ht(h,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+n.name;var p=document.createElement("div");r.appendChild(p),p.appendChild(h),p.appendChild(d);var w=n.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){var n=this._layerControlInputs,r,l,h=[],d=[];this._handlingClick=!0;for(var p=n.length-1;p>=0;p--)r=n[p],l=this._getLayer(r.layerId).layer,r.checked?h.push(l):r.checked||d.push(l);for(p=0;p<d.length;p++)this._map.hasLayer(d[p])&&this._map.removeLayer(d[p]);for(p=0;p<h.length;p++)this._map.hasLayer(h[p])||this._map.addLayer(h[p]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,r,l,h=this._map.getZoom(),d=n.length-1;d>=0;d--)r=n[d],l=this._getLayer(r.layerId).layer,r.disabled=l.options.minZoom!==void 0&&h<l.options.minZoom||l.options.maxZoom!==void 0&&h>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),X_=function(n,r,l){return new zc(n,r,l)},la=Me.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(n){var r="leaflet-control-zoom",l=pt("div",r+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,r+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,r+"-out",l,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,r,l,h,d){var p=pt("a",l,h);return p.innerHTML=n,p.href="#",p.title=r,p.setAttribute("role","button"),p.setAttribute("aria-label",r),_s(p),ht(p,"click",on),ht(p,"click",d,this),ht(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var n=this._map,r="leaflet-disabled";Ft(this._zoomInButton,r),Ft(this._zoomOutButton,r),(this._disabled||n._zoom===n.getMinZoom())&&it(this._zoomOutButton,r),(this._disabled||n._zoom===n.getMaxZoom())&&it(this._zoomInButton,r)}});ft.mergeOptions({zoomControl:!0}),ft.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new la,this.addControl(this.zoomControl))});var J_=function(n){return new la(n)},Wc=Me.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var r="leaflet-control-scale",l=pt("div",r),h=this.options;return this._addScales(h,r+"-line",l),n.on(h.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),l},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,r,l){n.metric&&(this._mScale=pt("div",r,l)),n.imperial&&(this._iScale=pt("div",r,l))},_update:function(){var n=this._map,r=n.getSize().y/2,l=n.distance(n.containerPointToLatLng([0,r]),n.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(l)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var r=this._getRoundNum(n),l=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,l,r/n)},_updateImperial:function(n){var r=n*3.2808399,l,h,d;r>5280?(l=r/5280,h=this._getRoundNum(l),this._updateScale(this._iScale,h+" mi",h/l)):(d=this._getRoundNum(r),this._updateScale(this._iScale,d+" ft",d/r))},_updateScale:function(n,r,l){n.style.width=Math.round(this.options.maxWidth*l)+"px",n.innerHTML=r},_getRoundNum:function(n){var r=Math.pow(10,(Math.floor(n)+"").length-1),l=n/r;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,r*l}}),tp=function(n){return new Wc(n)},ca=Me.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(n){D(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),_s(this._container);for(var r in n._layers)n._layers[r].getAttribution&&this.addAttribution(n._layers[r].getAttribution());return this._update(),this._container},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(!!this._map){var n=[];for(var r in this._attributions)this._attributions[r]&&n.push(r);var l=[];this.options.prefix&&l.push(this.options.prefix),n.length&&l.push(n.join(", ")),this._container.innerHTML=l.join(" | ")}}});ft.mergeOptions({attributionControl:!0}),ft.addInitHook(function(){this.options.attributionControl&&new ca().addTo(this)});var ep=function(n){return new ca(n)};Me.Layers=zc,Me.Zoom=la,Me.Scale=Wc,Me.Attribution=ca,ps.layers=X_,ps.zoom=J_,ps.scale=tp,ps.attribution=ep;var Ve=qt.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ve.addTo=function(n,r){return n.addHandler(r,this),this};var np={Events:dt},Hc=Ze?"touchstart mousedown":"mousedown",Uc={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ha={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Vn=xt.extend({options:{clickTolerance:3},initialize:function(n,r,l,h){D(this,h),this._element=n,this._dragStartTarget=r||n,this._preventOutline=l},enable:function(){this._enabled||(ht(this._dragStartTarget,Hc,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Vn._dragging===this&&this.finishDrag(),Ht(this._dragStartTarget,Hc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(!(n._simulated||!this._enabled)&&(this._moved=!1,!Go(this._element,"leaflet-zoom-anim")&&!(Vn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Vn._dragging=this,this._preventOutline&&ta(this._element),Qo(),us(),!this._moving))){this.fire("down");var r=n.touches?n.touches[0]:n,l=Rc(this._element);this._startPoint=new U(r.clientX,r.clientY),this._parentScale=ea(l),ht(document,ha[n.type],this._onMove,this),ht(document,Uc[n.type],this._onUp,this)}},_onMove:function(n){if(!(n._simulated||!this._enabled)){if(n.touches&&n.touches.length>1){this._moved=!0;return}var r=n.touches&&n.touches.length===1?n.touches[0]:n,l=new U(r.clientX,r.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,Ee(n),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=xn(this._element).subtract(l),it(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),it(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,M(this._animRequest),this._lastEvent=n,this._animRequest=W(this._updatePosition,this,!0))}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Ut(this._element,this._newPos),this.fire("drag",n)},_onUp:function(n){n._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){Ft(document.body,"leaflet-dragging"),this._lastTarget&&(Ft(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var n in ha)Ht(document,ha[n],this._onMove,this),Ht(document,Uc[n],this._onUp,this);Xo(),ds(),this._moved&&this._moving&&(M(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Vn._dragging=!1}});function Zc(n,r){if(!r||!n.length)return n.slice();var l=r*r;return n=rp(n,l),n=sp(n,l),n}function $c(n,r,l){return Math.sqrt(ms(n,r,l,!0))}function ip(n,r,l){return ms(n,r,l)}function sp(n,r){var l=n.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new h(l);d[0]=d[l-1]=1,ua(n,d,r,0,l-1);var p,w=[];for(p=0;p<l;p++)d[p]&&w.push(n[p]);return w}function ua(n,r,l,h,d){var p=0,w,C,x;for(C=h+1;C<=d-1;C++)x=ms(n[C],n[h],n[d],!0),x>p&&(w=C,p=x);p>l&&(r[w]=1,ua(n,r,l,h,w),ua(n,r,l,w,d))}function rp(n,r){for(var l=[n[0]],h=1,d=0,p=n.length;h<p;h++)op(n[h],n[d])>r&&(l.push(n[h]),d=h);return d<p-1&&l.push(n[p-1]),l}var Vc;function qc(n,r,l,h,d){var p=h?Vc:qn(n,l),w=qn(r,l),C,x,P;for(Vc=w;;){if(!(p|w))return[n,r];if(p&w)return!1;C=p||w,x=pr(n,r,C,l,d),P=qn(x,l),C===p?(n=x,p=P):(r=x,w=P)}}function pr(n,r,l,h,d){var p=r.x-n.x,w=r.y-n.y,C=h.min,x=h.max,P,H;return l&8?(P=n.x+p*(x.y-n.y)/w,H=x.y):l&4?(P=n.x+p*(C.y-n.y)/w,H=C.y):l&2?(P=x.x,H=n.y+w*(x.x-n.x)/p):l&1&&(P=C.x,H=n.y+w*(C.x-n.x)/p),new U(P,H,d)}function qn(n,r){var l=0;return n.x<r.min.x?l|=1:n.x>r.max.x&&(l|=2),n.y<r.min.y?l|=4:n.y>r.max.y&&(l|=8),l}function op(n,r){var l=r.x-n.x,h=r.y-n.y;return l*l+h*h}function ms(n,r,l,h){var d=r.x,p=r.y,w=l.x-d,C=l.y-p,x=w*w+C*C,P;return x>0&&(P=((n.x-d)*w+(n.y-p)*C)/x,P>1?(d=l.x,p=l.y):P>0&&(d+=w*P,p+=C*P)),w=n.x-d,C=n.y-p,h?w*w+C*C:new U(d,p)}function an(n){return!q(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]!="undefined"}function jc(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),an(n)}var ap={simplify:Zc,pointToSegmentDistance:$c,closestPointOnSegment:ip,clipSegment:qc,_getEdgeIntersection:pr,_getBitCode:qn,_sqClosestPointOnSegment:ms,isFlat:an,_flat:jc};function Gc(n,r,l){var h,d=[1,4,2,8],p,w,C,x,P,H,G,mt;for(p=0,H=n.length;p<H;p++)n[p]._code=qn(n[p],r);for(C=0;C<4;C++){for(G=d[C],h=[],p=0,H=n.length,w=H-1;p<H;w=p++)x=n[p],P=n[w],x._code&G?P._code&G||(mt=pr(P,x,G,r,l),mt._code=qn(mt,r),h.push(mt)):(P._code&G&&(mt=pr(P,x,G,r,l),mt._code=qn(mt,r),h.push(mt)),h.push(x));n=h}return n}var lp={clipPolygon:Gc},da={project:function(n){return new U(n.lng,n.lat)},unproject:function(n){return new bt(n.y,n.x)},bounds:new wt([-180,-90],[180,90])},fa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new wt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var r=Math.PI/180,l=this.R,h=n.lat*r,d=this.R_MINOR/l,p=Math.sqrt(1-d*d),w=p*Math.sin(h),C=Math.tan(Math.PI/4-h/2)/Math.pow((1-w)/(1+w),p/2);return h=-l*Math.log(Math.max(C,1e-10)),new U(n.lng*r*l,h)},unproject:function(n){for(var r=180/Math.PI,l=this.R,h=this.R_MINOR/l,d=Math.sqrt(1-h*h),p=Math.exp(-n.y/l),w=Math.PI/2-2*Math.atan(p),C=0,x=.1,P;C<15&&Math.abs(x)>1e-7;C++)P=d*Math.sin(w),P=Math.pow((1-P)/(1+P),d/2),x=Math.PI/2-2*Math.atan(p*P)-w,w+=x;return new bt(w*r,n.x*r/l)}},cp={LonLat:da,Mercator:fa,SphericalMercator:He},hp=o({},ve,{code:"EPSG:3395",projection:fa,transformation:function(){var n=.5/(Math.PI*fa.R);return nn(n,.5,-n,.5)}()}),Kc=o({},ve,{code:"EPSG:4326",projection:da,transformation:nn(1/180,1,-1/180,.5)}),up=o({},jt,{projection:da,transformation:nn(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,r){var l=r.lng-n.lng,h=r.lat-n.lat;return Math.sqrt(l*l+h*h)},infinite:!0});jt.Earth=ve,jt.EPSG3395=hp,jt.EPSG3857=y,jt.EPSG900913=b,jt.EPSG4326=Kc,jt.Simple=up;var Ne=xt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[f(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[f(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var r=n.target;if(!!r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var l=this.getEvents();r.on(l,this),this.once("remove",function(){r.off(l,this)},this)}this.onAdd(r),this.getAttribution&&r.attributionControl&&r.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),r.fire("layeradd",{layer:this})}}});ft.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var r=f(n);return this._layers[r]?this:(this._layers[r]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var r=f(n);return this._layers[r]?(this._loaded&&n.onRemove(this),n.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(n.getAttribution()),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return!!n&&f(n)in this._layers},eachLayer:function(n,r){for(var l in this._layers)n.call(r,this._layers[l]);return this},_addLayers:function(n){n=n?q(n)?n:[n]:[];for(var r=0,l=n.length;r<l;r++)this.addLayer(n[r])},_addZoomLimit:function(n){(isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[f(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var r=f(n);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,r=-1/0,l=this._getZoomSpan();for(var h in this._zoomBoundLayers){var d=this._zoomBoundLayers[h].options;n=d.minZoom===void 0?n:Math.min(n,d.minZoom),r=d.maxZoom===void 0?r:Math.max(r,d.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=n===1/0?void 0:n,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ti=Ne.extend({initialize:function(n,r){D(this,r),this._layers={};var l,h;if(n)for(l=0,h=n.length;l<h;l++)this.addLayer(n[l])},addLayer:function(n){var r=this.getLayerId(n);return this._layers[r]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var r=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(n){if(!n)return!1;var r=typeof n=="number"?n:this.getLayerId(n);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),l,h;for(l in this._layers)h=this._layers[l],h[n]&&h[n].apply(h,r);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,r){for(var l in this._layers)n.call(r,this._layers[l]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return f(n)}}),dp=function(n,r){return new Ti(n,r)},Pi=Ti.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Ti.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Ti.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Ot;for(var r in this._layers){var l=this._layers[r];n.extend(l.getBounds?l.getBounds():l.getLatLng())}return n}}),fp=function(n,r){return new Pi(n,r)},Ii=qt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(n){D(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,r){var l=this._getIconUrl(n);if(!l){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(l,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(h,n),h},_setIconStyles:function(n,r){var l=this.options,h=l[r+"Size"];typeof h=="number"&&(h=[h,h]);var d=lt(h),p=lt(r==="shadow"&&l.shadowAnchor||l.iconAnchor||d&&d.divideBy(2,!0));n.className="leaflet-marker-"+r+" "+(l.className||""),p&&(n.style.marginLeft=-p.x+"px",n.style.marginTop=-p.y+"px"),d&&(n.style.width=d.x+"px",n.style.height=d.y+"px")},_createImg:function(n,r){return r=r||document.createElement("img"),r.src=n,r},_getIconUrl:function(n){return Cn&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function _p(n){return new Ii(n)}var gs=Ii.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return gs.imagePath||(gs.imagePath=this._detectIconPath()),(this.options.imagePath||gs.imagePath)+Ii.prototype._getIconUrl.call(this,n)},_detectIconPath:function(){var n=pt("div","leaflet-default-icon-path",document.body),r=hs(n,"background-image")||hs(n,"backgroundImage");return document.body.removeChild(n),r===null||r.indexOf("url")!==0?r="":r=r.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),r}}),Yc=Ve.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Vn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),it(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ft(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var r=this._marker,l=r._map,h=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,p=xn(r._icon),w=l.getPixelBounds(),C=l.getPixelOrigin(),x=Qt(w.min._subtract(C).add(d),w.max._subtract(C).subtract(d));if(!x.contains(p)){var P=lt((Math.max(x.max.x,p.x)-x.max.x)/(w.max.x-x.max.x)-(Math.min(x.min.x,p.x)-x.min.x)/(w.min.x-x.min.x),(Math.max(x.max.y,p.y)-x.max.y)/(w.max.y-x.max.y)-(Math.min(x.min.y,p.y)-x.min.y)/(w.min.y-x.min.y)).multiplyBy(h);l.panBy(P,{animate:!1}),this._draggable._newPos._add(P),this._draggable._startPos._add(P),Ut(r._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=W(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=W(this._adjustPan.bind(this,n)))},_onDrag:function(n){var r=this._marker,l=r._shadow,h=xn(r._icon),d=r._map.layerPointToLatLng(h);l&&Ut(l,h),r._latlng=d,n.latlng=d,n.oldLatLng=this._oldLatLng,r.fire("move",n).fire("drag",n)},_onDragEnd:function(n){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),mr=Ne.extend({options:{icon:new gs,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,r){D(this,r),this._latlng=Rt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var r=this._latlng;return this._latlng=Rt(n),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=n.icon.createIcon(this._icon),h=!1;l!==this._icon&&(this._icon&&this._removeIcon(),h=!0,n.title&&(l.title=n.title),l.tagName==="IMG"&&(l.alt=n.alt||"")),it(l,r),n.keyboard&&(l.tabIndex="0"),this._icon=l,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=n.icon.createShadow(this._shadow),p=!1;d!==this._shadow&&(this._removeShadow(),p=!0),d&&(it(d,r),d.alt=""),this._shadow=d,n.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&p&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Dt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Ut(this._icon,n),this._shadow&&Ut(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(r)},_initInteraction:function(){if(!!this.options.interactive&&(it(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yc)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yc(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&xe(this._icon,n),this._shadow&&xe(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pp(n,r){return new mr(n,r)}var En=Ne.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return D(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),gr=En.extend({options:{fill:!0,radius:10},initialize:function(n,r){D(this,r),this._latlng=Rt(n),this._radius=this.options.radius},setLatLng:function(n){var r=this._latlng;return this._latlng=Rt(n),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var r=n&&n.radius||this._radius;return En.prototype.setStyle.call(this,n),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,r=this._radiusY||n,l=this._clickTolerance(),h=[n+l,r+l];this._pxBounds=new wt(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function mp(n,r){return new gr(n,r)}var _a=gr.extend({initialize:function(n,r,l){if(typeof r=="number"&&(r=o({},l,{radius:r})),D(this,r),this._latlng=Rt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Ot(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:En.prototype.setStyle,_project:function(){var n=this._latlng.lng,r=this._latlng.lat,l=this._map,h=l.options.crs;if(h.distance===ve.distance){var d=Math.PI/180,p=this._mRadius/ve.R/d,w=l.project([r+p,n]),C=l.project([r-p,n]),x=w.add(C).divideBy(2),P=l.unproject(x).lat,H=Math.acos((Math.cos(p*d)-Math.sin(r*d)*Math.sin(P*d))/(Math.cos(r*d)*Math.cos(P*d)))/d;(isNaN(H)||H===0)&&(H=p/Math.cos(Math.PI/180*r)),this._point=x.subtract(l.getPixelOrigin()),this._radius=isNaN(H)?0:x.x-l.project([P,n-H]).x,this._radiusY=x.y-w.y}else{var G=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(G).x}this._updateBounds()}});function gp(n,r,l){return new _a(n,r,l)}var ln=En.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,r){D(this,r),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var r=1/0,l=null,h=ms,d,p,w=0,C=this._parts.length;w<C;w++)for(var x=this._parts[w],P=1,H=x.length;P<H;P++){d=x[P-1],p=x[P];var G=h(n,d,p,!0);G<r&&(r=G,l=h(n,d,p))}return l&&(l.distance=Math.sqrt(r)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,r,l,h,d,p,w,C=this._rings[0],x=C.length;if(!x)return null;for(n=0,r=0;n<x-1;n++)r+=C[n].distanceTo(C[n+1])/2;if(r===0)return this._map.layerPointToLatLng(C[0]);for(n=0,h=0;n<x-1;n++)if(d=C[n],p=C[n+1],l=d.distanceTo(p),h+=l,h>r)return w=(h-r)/l,this._map.layerPointToLatLng([p.x-w*(p.x-d.x),p.y-w*(p.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(n,r){return r=r||this._defaultShape(),n=Rt(n),r.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Ot,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return an(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var r=[],l=an(n),h=0,d=n.length;h<d;h++)l?(r[h]=Rt(n[h]),this._bounds.extend(r[h])):r[h]=this._convertLatLngs(n[h]);return r},_project:function(){var n=new wt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),r=new U(n,n);this._pxBounds=new wt([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)])},_projectLatlngs:function(n,r,l){var h=n[0]instanceof bt,d=n.length,p,w;if(h){for(w=[],p=0;p<d;p++)w[p]=this._map.latLngToLayerPoint(n[p]),l.extend(w[p]);r.push(w)}else for(p=0;p<d;p++)this._projectLatlngs(n[p],r,l)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,l,h,d,p,w,C,x;for(l=0,d=0,p=this._rings.length;l<p;l++)for(x=this._rings[l],h=0,w=x.length;h<w-1;h++)C=qc(x[h],x[h+1],n,h,!0),C&&(r[d]=r[d]||[],r[d].push(C[0]),(C[1]!==x[h+1]||h===w-2)&&(r[d].push(C[1]),d++))}},_simplifyPoints:function(){for(var n=this._parts,r=this.options.smoothFactor,l=0,h=n.length;l<h;l++)n[l]=Zc(n[l],r)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,r){var l,h,d,p,w,C,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(l=0,p=this._parts.length;l<p;l++)for(C=this._parts[l],h=0,w=C.length,d=w-1;h<w;d=h++)if(!(!r&&h===0)&&$c(n,C[d],C[h])<=x)return!0;return!1}});function vp(n,r){return new ln(n,r)}ln._flat=jc;var Si=ln.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,r,l,h,d,p,w,C,x,P=this._rings[0],H=P.length;if(!H)return null;for(p=w=C=0,n=0,r=H-1;n<H;r=n++)l=P[n],h=P[r],d=l.y*h.x-h.y*l.x,w+=(l.x+h.x)*d,C+=(l.y+h.y)*d,p+=d*3;return p===0?x=P[0]:x=[w/p,C/p],this._map.layerPointToLatLng(x)},_convertLatLngs:function(n){var r=ln.prototype._convertLatLngs.call(this,n),l=r.length;return l>=2&&r[0]instanceof bt&&r[0].equals(r[l-1])&&r.pop(),r},_setLatLngs:function(n){ln.prototype._setLatLngs.call(this,n),an(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return an(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,r=this.options.weight,l=new U(r,r);if(n=new wt(n.min.subtract(l),n.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,d=this._rings.length,p;h<d;h++)p=Gc(this._rings[h],n,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var r=!1,l,h,d,p,w,C,x,P;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(p=0,x=this._parts.length;p<x;p++)for(l=this._parts[p],w=0,P=l.length,C=P-1;w<P;C=w++)h=l[w],d=l[C],h.y>n.y!=d.y>n.y&&n.x<(d.x-h.x)*(n.y-h.y)/(d.y-h.y)+h.x&&(r=!r);return r||ln.prototype._containsPoint.call(this,n,!0)}});function yp(n,r){return new Si(n,r)}var cn=Pi.extend({initialize:function(n,r){D(this,r),this._layers={},n&&this.addData(n)},addData:function(n){var r=q(n)?n:n.features,l,h,d;if(r){for(l=0,h=r.length;l<h;l++)d=r[l],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var p=this.options;if(p.filter&&!p.filter(n))return this;var w=pa(n,p);return w?(w.feature=wr(n),w.defaultOptions=w.options,this.resetStyle(w),p.onEachFeature&&p.onEachFeature(n,w),this.addLayer(w)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=o({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(r){this._setLayerStyle(r,n)},this)},_setLayerStyle:function(n,r){n.setStyle&&(typeof r=="function"&&(r=r(n.feature)),n.setStyle(r))}});function pa(n,r){var l=n.type==="Feature"?n.geometry:n,h=l?l.coordinates:null,d=[],p=r&&r.pointToLayer,w=r&&r.coordsToLatLng||ma,C,x,P,H;if(!h&&!l)return null;switch(l.type){case"Point":return C=w(h),Qc(p,n,C,r);case"MultiPoint":for(P=0,H=h.length;P<H;P++)C=w(h[P]),d.push(Qc(p,n,C,r));return new Pi(d);case"LineString":case"MultiLineString":return x=vr(h,l.type==="LineString"?0:1,w),new ln(x,r);case"Polygon":case"MultiPolygon":return x=vr(h,l.type==="Polygon"?1:2,w),new Si(x,r);case"GeometryCollection":for(P=0,H=l.geometries.length;P<H;P++){var G=pa({geometry:l.geometries[P],type:"Feature",properties:n.properties},r);G&&d.push(G)}return new Pi(d);default:throw new Error("Invalid GeoJSON object.")}}function Qc(n,r,l,h){return n?n(r,l):new mr(l,h&&h.markersInheritOptions&&h)}function ma(n){return new bt(n[1],n[0],n[2])}function vr(n,r,l){for(var h=[],d=0,p=n.length,w;d<p;d++)w=r?vr(n[d],r-1,l):(l||ma)(n[d]),h.push(w);return h}function ga(n,r){return r=typeof r=="number"?r:6,n.alt!==void 0?[v(n.lng,r),v(n.lat,r),v(n.alt,r)]:[v(n.lng,r),v(n.lat,r)]}function yr(n,r,l,h){for(var d=[],p=0,w=n.length;p<w;p++)d.push(r?yr(n[p],r-1,l,h):ga(n[p],h));return!r&&l&&d.push(d[0]),d}function ki(n,r){return n.feature?o({},n.feature,{geometry:r}):wr(r)}function wr(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var va={toGeoJSON:function(n){return ki(this,{type:"Point",coordinates:ga(this.getLatLng(),n)})}};mr.include(va),_a.include(va),gr.include(va),ln.include({toGeoJSON:function(n){var r=!an(this._latlngs),l=yr(this._latlngs,r?1:0,!1,n);return ki(this,{type:(r?"Multi":"")+"LineString",coordinates:l})}}),Si.include({toGeoJSON:function(n){var r=!an(this._latlngs),l=r&&!an(this._latlngs[0]),h=yr(this._latlngs,l?2:r?1:0,!0,n);return r||(h=[h]),ki(this,{type:(l?"Multi":"")+"Polygon",coordinates:h})}}),Ti.include({toMultiPoint:function(n){var r=[];return this.eachLayer(function(l){r.push(l.toGeoJSON(n).geometry.coordinates)}),ki(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(n){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(n);var l=r==="GeometryCollection",h=[];return this.eachLayer(function(d){if(d.toGeoJSON){var p=d.toGeoJSON(n);if(l)h.push(p.geometry);else{var w=wr(p);w.type==="FeatureCollection"?h.push.apply(h,w.features):h.push(w)}}}),l?ki(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function Xc(n,r){return new cn(n,r)}var wp=Xc,br=Ne.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,r,l){this._url=n,this._bounds=Wt(r),D(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(it(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&xi(this._image),this},bringToBack:function(){return this._map&&Ei(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Wt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",r=this._image=n?this._url:pt("img");if(it(r,"leaflet-image-layer"),this._zoomAnimated&&it(r,"leaflet-zoom-animated"),this.options.className&&it(r,this.options.className),r.onselectstart=m,r.onmousemove=m,r.onload=c(this.fire,this,"load"),r.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(n){var r=this._map.getZoomScale(n.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Zn(this._image,l,r)},_reset:function(){var n=this._image,r=new wt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=r.getSize();Ut(n,r.min),n.style.width=l.x+"px",n.style.height=l.y+"px"},_updateOpacity:function(){xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)}}),bp=function(n,r,l){return new br(n,r,l)},Jc=br.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var n=this._url.tagName==="VIDEO",r=this._image=n?this._url:pt("video");if(it(r,"leaflet-image-layer"),this._zoomAnimated&&it(r,"leaflet-zoom-animated"),this.options.className&&it(r,this.options.className),r.onselectstart=m,r.onmousemove=m,r.onloadeddata=c(this.fire,this,"load"),n){for(var l=r.getElementsByTagName("source"),h=[],d=0;d<l.length;d++)h.push(l[d].src);this._url=l.length>0?h:[r.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted;for(var p=0;p<this._url.length;p++){var w=pt("source");w.src=this._url[p],r.appendChild(w)}}});function Cp(n,r,l){return new Jc(n,r,l)}var th=br.extend({_initImage:function(){var n=this._image=this._url;it(n,"leaflet-image-layer"),this._zoomAnimated&&it(n,"leaflet-zoom-animated"),this.options.className&&it(n,this.options.className),n.onselectstart=m,n.onmousemove=m}});function xp(n,r,l){return new th(n,r,l)}var hn=Ne.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(n,r){D(this,n),this._source=r},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&xe(this._container,1),this.bringToFront()},onRemove:function(n){n._fadeAnimated?(xe(this._container,0),this._removeTimeout=setTimeout(c(Dt,void 0,this._container),200)):Dt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Rt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&xi(this._container),this},bringToBack:function(){return this._map&&Ei(this._container),this},_prepareOpen:function(n,r,l){if(r instanceof Ne||(l=r,r=n),r instanceof Pi)for(var h in n._layers){r=n._layers[h];break}if(!l)if(r.getCenter)l=r.getCenter();else if(r.getLatLng)l=r.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=r,this.update(),l},_updateContent:function(){if(!!this._content){var n=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")n.innerHTML=r;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var n=this._map.latLngToLayerPoint(this._latlng),r=lt(this.options.offset),l=this._getAnchor();this._zoomAnimated?Ut(this._container,n.add(l)):r=r.add(n).add(l);var h=this._containerBottom=-r.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=h+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),Li=hn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n.openPopup(this),this},onAdd:function(n){hn.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof En||this._source.on("preclick",$n))},onRemove:function(n){hn.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof En||this._source.off("preclick",$n))},getEvents:function(){var n=hn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this._close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var n="leaflet-popup",r=this._container=pt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=pt("div",n+"-content-wrapper",r);if(this._contentNode=pt("div",n+"-content",l),_s(r),sa(this._contentNode),ht(r,"contextmenu",$n),this._tipContainer=pt("div",n+"-tip-container",r),this._tip=pt("div",n+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=pt("a",n+"-close-button",r);h.href="#close",h.innerHTML="&#215;",ht(h,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var n=this._contentNode,r=n.style;r.width="",r.whiteSpace="nowrap";var l=n.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),r.width=l+1+"px",r.whiteSpace="",r.height="";var h=n.offsetHeight,d=this.options.maxHeight,p="leaflet-popup-scrolled";d&&h>d?(r.height=d+"px",it(n,p)):Ft(n,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),l=this._getAnchor();Ut(this._container,r.add(l))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var n=this._map,r=parseInt(hs(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+r,h=this._containerWidth,d=new U(this._containerLeft,-l-this._containerBottom);d._add(xn(this._container));var p=n.layerPointToContainerPoint(d),w=lt(this.options.autoPanPadding),C=lt(this.options.autoPanPaddingTopLeft||w),x=lt(this.options.autoPanPaddingBottomRight||w),P=n.getSize(),H=0,G=0;p.x+h+x.x>P.x&&(H=p.x+h-P.x+x.x),p.x-H-C.x<0&&(H=p.x-C.x),p.y+l+x.y>P.y&&(G=p.y+l-P.y+x.y),p.y-G-C.y<0&&(G=p.y-C.y),(H||G)&&n.fire("autopanstart").panBy([H,G])}},_onCloseButtonClick:function(n){this._close(),on(n)},_getAnchor:function(){return lt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ep=function(n,r){return new Li(n,r)};ft.mergeOptions({closePopupOnClick:!0}),ft.include({openPopup:function(n,r,l){return n instanceof Li||(n=new Li(l).setContent(n)),r&&n.setLatLng(r),this.hasLayer(n)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=n,this.addLayer(n))},closePopup:function(n){return(!n||n===this._popup)&&(n=this._popup,this._popup=null),n&&this.removeLayer(n),this}}),Ne.include({bindPopup:function(n,r){return n instanceof Li?(D(n,r),this._popup=n,n._source=this):((!this._popup||r)&&(this._popup=new Li(r,this)),this._popup.setContent(n)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n,r){return this._popup&&this._map&&(r=this._popup._prepareOpen(this,n,r),this._map.openPopup(this._popup,r)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(n){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(n)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){var r=n.layer||n.target;if(!!this._popup&&!!this._map){if(on(n),r instanceof En){this.openPopup(n.layer||n.target,n.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===r?this.closePopup():this.openPopup(r,n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ai=hn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(n){hn.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(n){hn.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var n=hn.prototype.getEvents.call(this);return Ze&&!this.options.permanent&&(n.preclick=this._close),n},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var n="leaflet-tooltip",r=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",r)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var r,l,h=this._map,d=this._container,p=h.latLngToContainerPoint(h.getCenter()),w=h.layerPointToContainerPoint(n),C=this.options.direction,x=d.offsetWidth,P=d.offsetHeight,H=lt(this.options.offset),G=this._getAnchor();C==="top"?(r=x/2,l=P):C==="bottom"?(r=x/2,l=0):C==="center"?(r=x/2,l=P/2):C==="right"?(r=0,l=P/2):C==="left"?(r=x,l=P/2):w.x<p.x?(C="right",r=0,l=P/2):(C="left",r=x+(H.x+G.x)*2,l=P/2),n=n.subtract(lt(r,l,!0)).add(H).add(G),Ft(d,"leaflet-tooltip-right"),Ft(d,"leaflet-tooltip-left"),Ft(d,"leaflet-tooltip-top"),Ft(d,"leaflet-tooltip-bottom"),it(d,"leaflet-tooltip-"+C),Ut(d,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&xe(this._container,n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(r)},_getAnchor:function(){return lt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Tp=function(n,r){return new Ai(n,r)};ft.include({openTooltip:function(n,r,l){return n instanceof Ai||(n=new Ai(l).setContent(n)),r&&n.setLatLng(r),this.hasLayer(n)?this:this.addLayer(n)},closeTooltip:function(n){return n&&this.removeLayer(n),this}}),Ne.include({bindTooltip:function(n,r){return n instanceof Ai?(D(n,r),this._tooltip=n,n._source=this):((!this._tooltip||r)&&(this._tooltip=new Ai(r,this)),this._tooltip.setContent(n)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var r=n?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),Ze&&(l.click=this._openTooltip)),this[r](l),this._tooltipHandlersAdded=!n}},openTooltip:function(n,r){return this._tooltip&&this._map&&(r=this._tooltip._prepareOpen(this,n,r),this._map.openTooltip(this._tooltip,r),this._tooltip.options.interactive&&this._tooltip._container&&(it(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Ft(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(n){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(n)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_openTooltip:function(n){var r=n.layer||n.target;!this._tooltip||!this._map||this.openTooltip(r,this._tooltip.options.sticky?n.latlng:void 0)},_moveTooltip:function(n){var r=n.latlng,l,h;this._tooltip.options.sticky&&n.originalEvent&&(l=this._map.mouseEventToContainerPoint(n.originalEvent),h=this._map.containerPointToLayerPoint(l),r=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(r)}});var eh=Ii.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var r=n&&n.tagName==="DIV"?n:document.createElement("div"),l=this.options;if(l.html instanceof Element?(lr(r),r.appendChild(l.html)):r.innerHTML=l.html!==!1?l.html:"",l.bgPos){var h=lt(l.bgPos);r.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function Pp(n){return new eh(n)}Ii.Default=gs;var vs=Ne.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ee,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){D(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Dt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(xi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ei(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof U?n:new U(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r=this.getPane().children,l=-n(-1/0,1/0),h=0,d=r.length,p;h<d;h++)p=r[h].style.zIndex,r[h]!==this._container&&p&&(l=n(l,+p));isFinite(l)&&(this.options.zIndex=l+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!z){xe(this._container,this.options.opacity);var n=+new Date,r=!1,l=!1;for(var h in this._tiles){var d=this._tiles[h];if(!(!d.current||!d.loaded)){var p=Math.min(1,(n-d.loaded)/200);xe(d.el,p),p<1?r=!0:(d.active?l=!0:this._onOpaqueTile(d),d.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),r&&(M(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,r=this.options.maxZoom;if(n!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===n?(this._levels[l].el.style.zIndex=r-Math.abs(n-l),this._onUpdateLevel(l)):(Dt(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var h=this._levels[n],d=this._map;return h||(h=this._levels[n]={},h.el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=r,h.origin=d.project(d.unproject(d.getPixelOrigin()),n).round(),h.zoom=n,this._setZoomTransform(h,d.getCenter(),d.getZoom()),m(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(!!this._map){var n,r,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)r=this._tiles[n],r.retain=r.current;for(n in this._tiles)if(r=this._tiles[n],r.current&&!r.active){var h=r.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var r in this._tiles)this._tiles[r].coords.z===n&&this._removeTile(r)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Dt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,r,l,h){var d=Math.floor(n/2),p=Math.floor(r/2),w=l-1,C=new U(+d,+p);C.z=+w;var x=this._tileCoordsToKey(C),P=this._tiles[x];return P&&P.active?(P.retain=!0,!0):(P&&P.loaded&&(P.retain=!0),w>h?this._retainParent(d,p,w,h):!1)},_retainChildren:function(n,r,l,h){for(var d=2*n;d<2*n+2;d++)for(var p=2*r;p<2*r+2;p++){var w=new U(d,p);w.z=l+1;var C=this._tileCoordsToKey(w),x=this._tiles[C];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);l+1<h&&this._retainChildren(d,p,l+1,h)}},_resetView:function(n){var r=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var r=this.options;return r.minNativeZoom!==void 0&&n<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<n?r.maxNativeZoom:n},_setView:function(n,r,l,h){var d=Math.round(r);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var p=this.options.updateWhenZooming&&d!==this._tileZoom;(!h||p)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(n),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(n,r)},_setZoomTransforms:function(n,r){for(var l in this._levels)this._setZoomTransform(this._levels[l],n,r)},_setZoomTransform:function(n,r,l){var h=this._map.getZoomScale(l,n.zoom),d=n.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(r,l)).round();St?Zn(n.el,d,h):Ut(n.el,d)},_resetGrid:function(){var n=this._map,r=n.options.crs,l=this._tileSize=this.getTileSize(),h=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,r.wrapLng[0]],h).x/l.x),Math.ceil(n.project([0,r.wrapLng[1]],h).x/l.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([r.wrapLat[0],0],h).y/l.x),Math.ceil(n.project([r.wrapLat[1],0],h).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var r=this._map,l=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),h=r.getZoomScale(l,this._tileZoom),d=r.project(n,this._tileZoom).floor(),p=r.getSize().divideBy(h*2);return new wt(d.subtract(p),d.add(p))},_update:function(n){var r=this._map;if(!!r){var l=this._clampZoom(r.getZoom());if(n===void 0&&(n=r.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(n),d=this._pxBoundsToTileRange(h),p=d.getCenter(),w=[],C=this.options.keepBuffer,x=new wt(d.getBottomLeft().subtract([C,-C]),d.getTopRight().add([C,-C]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var P in this._tiles){var H=this._tiles[P].coords;(H.z!==this._tileZoom||!x.contains(new U(H.x,H.y)))&&(this._tiles[P].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(n,l);return}for(var G=d.min.y;G<=d.max.y;G++)for(var mt=d.min.x;mt<=d.max.x;mt++){var un=new U(mt,G);if(un.z=this._tileZoom,!!this._isValidTile(un)){var jn=this._tiles[this._tileCoordsToKey(un)];jn?jn.current=!0:w.push(un)}}if(w.sort(function(Tn,ya){return Tn.distanceTo(p)-ya.distanceTo(p)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xr=document.createDocumentFragment();for(mt=0;mt<w.length;mt++)this._addTile(w[mt],xr);this._level.el.appendChild(xr)}}}},_isValidTile:function(n){var r=this._map.options.crs;if(!r.infinite){var l=this._globalTileRange;if(!r.wrapLng&&(n.x<l.min.x||n.x>l.max.x)||!r.wrapLat&&(n.y<l.min.y||n.y>l.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(n);return Wt(this.options.bounds).overlaps(h)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var r=this._map,l=this.getTileSize(),h=n.scaleBy(l),d=h.add(l),p=r.unproject(h,n.z),w=r.unproject(d,n.z);return[p,w]},_tileCoordsToBounds:function(n){var r=this._tileCoordsToNwSe(n),l=new Ot(r[0],r[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var r=n.split(":"),l=new U(+r[0],+r[1]);return l.z=+r[2],l},_removeTile:function(n){var r=this._tiles[n];!r||(Dt(r.el),delete this._tiles[n],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){it(n,"leaflet-tile");var r=this.getTileSize();n.style.width=r.x+"px",n.style.height=r.y+"px",n.onselectstart=m,n.onmousemove=m,z&&this.options.opacity<1&&xe(n,this.options.opacity),k&&!V&&(n.style.WebkitBackfaceVisibility="hidden")},_addTile:function(n,r){var l=this._getTilePos(n),h=this._tileCoordsToKey(n),d=this.createTile(this._wrapCoords(n),c(this._tileReady,this,n));this._initTile(d),this.createTile.length<2&&W(c(this._tileReady,this,n,null,d)),Ut(d,l),this._tiles[h]={el:d,coords:n,current:!0},r.appendChild(d),this.fire("tileloadstart",{tile:d,coords:n})},_tileReady:function(n,r,l){r&&this.fire("tileerror",{error:r,tile:l,coords:n});var h=this._tileCoordsToKey(n);l=this._tiles[h],l&&(l.loaded=+new Date,this._map._fadeAnimated?(xe(l.el,0),M(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),r||(it(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),z||!this._map._fadeAnimated?W(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var r=new U(this._wrapX?g(n.x,this._wrapX):n.x,this._wrapY?g(n.y,this._wrapY):n.y);return r.z=n.z,r},_pxBoundsToTileRange:function(n){var r=this.getTileSize();return new wt(n.min.unscaleBy(r).floor(),n.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function Ip(n){return new vs(n)}var Mi=vs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(n,r){this._url=n,r=D(this,r),r.detectRetina&&Cn&&r.maxZoom>0&&(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom++):(r.zoomOffset++,r.maxZoom--),r.minZoom=Math.max(0,r.minZoom)),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),k||this.on("tileunload",this._onTileRemove)},setUrl:function(n,r){return this._url===n&&r===void 0&&(r=!0),this._url=n,r||this.redraw(),this},createTile:function(n,r){var l=document.createElement("img");return ht(l,"load",c(this._tileOnLoad,this,r,l)),ht(l,"error",c(this._tileOnError,this,r,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l.alt="",l.setAttribute("role","presentation"),l.src=this.getTileUrl(n),l},getTileUrl:function(n){var r={r:Cn?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-n.y;this.options.tms&&(r.y=l),r["-y"]=l}return Mt(this._url,o(r,this.options))},_tileOnLoad:function(n,r){z?setTimeout(c(n,this,null,r),0):n(null,r)},_tileOnError:function(n,r,l){var h=this.options.errorTileUrl;h&&r.getAttribute("src")!==h&&(r.src=h),n(l,r)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,r=this.options.maxZoom,l=this.options.zoomReverse,h=this.options.zoomOffset;return l&&(n=r-n),n+h},_getSubdomain:function(n){var r=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var n,r;for(n in this._tiles)this._tiles[n].coords.z!==this._tileZoom&&(r=this._tiles[n].el,r.onload=m,r.onerror=m,r.complete||(r.src=tt,Dt(r),delete this._tiles[n]))},_removeTile:function(n){var r=this._tiles[n];if(!!r)return j||r.el.setAttribute("src",tt),vs.prototype._removeTile.call(this,n)},_tileReady:function(n,r,l){if(!(!this._map||l&&l.getAttribute("src")===tt))return vs.prototype._tileReady.call(this,n,r,l)}});function nh(n,r){return new Mi(n,r)}var ih=Mi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,r){this._url=n;var l=o({},this.defaultWmsParams);for(var h in r)h in this.options||(l[h]=r[h]);r=D(this,r);var d=r.detectRetina&&Cn?2:1,p=this.getTileSize();l.width=p.x*d,l.height=p.y*d,this.wmsParams=l},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,Mi.prototype.onAdd.call(this,n)},getTileUrl:function(n){var r=this._tileCoordsToNwSe(n),l=this._crs,h=Qt(l.project(r[0]),l.project(r[1])),d=h.min,p=h.max,w=(this._wmsVersion>=1.3&&this._crs===Kc?[d.y,d.x,p.y,p.x]:[d.x,d.y,p.x,p.y]).join(","),C=Mi.prototype.getTileUrl.call(this,n);return C+$(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(n,r){return o(this.wmsParams,n),r||this.redraw(),this}});function Sp(n,r){return new ih(n,r)}Mi.WMS=ih,nh.wms=Sp;var qe=Ne.extend({options:{padding:.1,tolerance:0},initialize:function(n){D(this,n),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&it(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,r){var l=this._map.getZoomScale(r,this._zoom),h=xn(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,r),w=this._map.project(n,r),C=w.subtract(p),x=d.multiplyBy(-l).add(h).add(d).subtract(C);St?Zn(this._container,x,l):Ut(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,r=this._map.getSize(),l=this._map.containerPointToLayerPoint(r.multiplyBy(-n)).round();this._bounds=new wt(l,l.add(r.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sh=qe.extend({getEvents:function(){var n=qe.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qe.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");ht(n,"mousemove",this._onMouseMove,this),ht(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(n,"mouseout",this._handleMouseOut,this),this._ctx=n.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,Dt(this._container),Ht(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var r in this._layers)n=this._layers[r],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qe.prototype._update.call(this);var n=this._bounds,r=this._container,l=n.getSize(),h=Cn?2:1;Ut(r,n.min),r.width=h*l.x,r.height=h*l.y,r.style.width=l.x+"px",r.style.height=l.y+"px",Cn&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){qe.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[f(n)]=n;var r=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var r=n._order,l=r.next,h=r.prev;l?l.prev=h:this._drawLast=h,h?h.next=l:this._drawFirst=l,delete n._order,delete this._layers[f(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var r=n.options.dashArray.split(/[, ]+/),l=[],h,d;for(d=0;d<r.length;d++){if(h=Number(r[d]),isNaN(h))return;l.push(h)}n.options._dashArray=l}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){!this._map||(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||W(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var r=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new wt,this._redrawBounds.extend(n._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(n._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var r=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,r=this._redrawBounds;if(this._ctx.save(),r){var l=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)n=h.layer,(!r||n._pxBounds&&n._pxBounds.intersects(r))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,r){if(!!this._drawing){var l,h,d,p,w=n._parts,C=w.length,x=this._ctx;if(!!C){for(x.beginPath(),l=0;l<C;l++){for(h=0,d=w[l].length;h<d;h++)p=w[l][h],x[h?"lineTo":"moveTo"](p.x,p.y);r&&x.closePath()}this._fillStroke(x,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var r=n._point,l=this._ctx,h=Math.max(Math.round(n._radius),1),d=(Math.max(Math.round(n._radiusY),1)||h)/h;d!==1&&(l.save(),l.scale(1,d)),l.beginPath(),l.arc(r.x,r.y/d,h,0,Math.PI*2,!1),d!==1&&l.restore(),this._fillStroke(l,n)}},_fillStroke:function(n,r){var l=r.options;l.fill&&(n.globalAlpha=l.fillOpacity,n.fillStyle=l.fillColor||l.color,n.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(n.setLineDash&&n.setLineDash(r.options&&r.options._dashArray||[]),n.globalAlpha=l.opacity,n.lineWidth=l.weight,n.strokeStyle=l.color,n.lineCap=l.lineCap,n.lineJoin=l.lineJoin,n.stroke())},_onClick:function(n){for(var r=this._map.mouseEventToLayerPoint(n),l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(r)&&(!(n.type==="click"||n.type!=="preclick")||!this._map._draggableMoved(l))&&(h=l);h&&(oa(n),this._fireEvent([h],n))},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,r)}},_handleMouseOut:function(n){var r=this._hoveredLayer;r&&(Ft(this._container,"leaflet-interactive"),this._fireEvent([r],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,r){if(!this._mouseHoverThrottled){for(var l,h,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(r)&&(h=l);h!==this._hoveredLayer&&(this._handleMouseOut(n),h&&(it(this._container,"leaflet-interactive"),this._fireEvent([h],n,"mouseover"),this._hoveredLayer=h)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],n),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,r,l){this._map._fireDOMEvent(r,l||r.type,n)},_bringToFront:function(n){var r=n._order;if(!!r){var l=r.next,h=r.prev;if(l)l.prev=h;else return;h?h.next=l:l&&(this._drawFirst=l),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(n)}},_bringToBack:function(n){var r=n._order;if(!!r){var l=r.next,h=r.prev;if(h)h.next=l;else return;l?l.prev=h:h&&(this._drawLast=h),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(n)}}});function rh(n){return kc?new sh(n):null}var ys=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),kp={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qe.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var r=n._container=ys("shape");it(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",n._path=ys("path"),r.appendChild(n._path),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){var r=n._container;this._container.appendChild(r),n.options.interactive&&n.addInteractiveTarget(r)},_removePath:function(n){var r=n._container;Dt(r),n.removeInteractiveTarget(r),delete this._layers[f(n)]},_updateStyle:function(n){var r=n._stroke,l=n._fill,h=n.options,d=n._container;d.stroked=!!h.stroke,d.filled=!!h.fill,h.stroke?(r||(r=n._stroke=ys("stroke")),d.appendChild(r),r.weight=h.weight+"px",r.color=h.color,r.opacity=h.opacity,h.dashArray?r.dashStyle=q(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=h.lineCap.replace("butt","flat"),r.joinstyle=h.lineJoin):r&&(d.removeChild(r),n._stroke=null),h.fill?(l||(l=n._fill=ys("fill")),d.appendChild(l),l.color=h.fillColor||h.color,l.opacity=h.fillOpacity):l&&(d.removeChild(l),n._fill=null)},_updateCircle:function(n){var r=n._point.round(),l=Math.round(n._radius),h=Math.round(n._radiusY||l);this._setPath(n,n._empty()?"M0 0":"AL "+r.x+","+r.y+" "+l+","+h+" 0,"+65535*360)},_setPath:function(n,r){n._path.v=r},_bringToFront:function(n){xi(n._container)},_bringToBack:function(n){Ei(n._container)}},Cr=rr?ys:E,ws=qe.extend({getEvents:function(){var n=qe.prototype.getEvents.call(this);return n.zoomstart=this._onZoomStart,n},_initContainer:function(){this._container=Cr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Cr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dt(this._container),Ht(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qe.prototype._update.call(this);var n=this._bounds,r=n.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,l.setAttribute("width",r.x),l.setAttribute("height",r.y)),Ut(l,n.min),l.setAttribute("viewBox",[n.min.x,n.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(n){var r=n._path=Cr("path");n.options.className&&it(r,n.options.className),n.options.interactive&&it(r,"leaflet-interactive"),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Dt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[f(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var r=n._path,l=n.options;!r||(l.stroke?(r.setAttribute("stroke",l.color),r.setAttribute("stroke-opacity",l.opacity),r.setAttribute("stroke-width",l.weight),r.setAttribute("stroke-linecap",l.lineCap),r.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?r.setAttribute("stroke-dasharray",l.dashArray):r.removeAttribute("stroke-dasharray"),l.dashOffset?r.setAttribute("stroke-dashoffset",l.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),l.fill?(r.setAttribute("fill",l.fillColor||l.color),r.setAttribute("fill-opacity",l.fillOpacity),r.setAttribute("fill-rule",l.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(n,r){this._setPath(n,S(n._parts,r))},_updateCircle:function(n){var r=n._point,l=Math.max(Math.round(n._radius),1),h=Math.max(Math.round(n._radiusY),1)||l,d="a"+l+","+h+" 0 1,0 ",p=n._empty()?"M0 0":"M"+(r.x-l)+","+r.y+d+l*2+",0 "+d+-l*2+",0 ";this._setPath(n,p)},_setPath:function(n,r){n._path.setAttribute("d",r)},_bringToFront:function(n){xi(n._path)},_bringToBack:function(n){Ei(n._path)}});rr&&ws.include(kp);function oh(n){return sr||rr?new ws(n):null}ft.include({getRenderer:function(n){var r=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var r=this._paneRenderers[n];return r===void 0&&(r=this._createRenderer({pane:n}),this._paneRenderers[n]=r),r},_createRenderer:function(n){return this.options.preferCanvas&&rh(n)||oh(n)}});var ah=Si.extend({initialize:function(n,r){Si.prototype.initialize.call(this,this._boundsToLatLngs(n),r)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Wt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Lp(n,r){return new ah(n,r)}ws.create=Cr,ws.pointsToPath=S,cn.geometryToLayer=pa,cn.coordsToLatLng=ma,cn.coordsToLatLngs=vr,cn.latLngToCoords=ga,cn.latLngsToCoords=yr,cn.getFeature=ki,cn.asFeature=wr,ft.mergeOptions({boxZoom:!0});var lh=Ve.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ht(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),us(),Qo(),this._startPoint=this._map.mouseEventToContainerPoint(n),ht(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),it(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var r=new wt(this._point,this._startPoint),l=r.getSize();Ut(this._box,r.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Dt(this._box),Ft(this._container,"leaflet-crosshair")),ds(),Xo(),Ht(document,{contextmenu:on,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var r=new Ot(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(n){n.keyCode===27&&this._finish()}});ft.addInitHook("addHandler","boxZoom",lh),ft.mergeOptions({doubleClickZoom:!0});var ch=Ve.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var r=this._map,l=r.getZoom(),h=r.options.zoomDelta,d=n.originalEvent.shiftKey?l-h:l+h;r.options.doubleClickZoom==="center"?r.setZoom(d):r.setZoomAround(n.containerPoint,d)}});ft.addInitHook("addHandler","doubleClickZoom",ch),ft.mergeOptions({dragging:!0,inertia:!V,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hh=Ve.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Vn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}it(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ft(this._map._container,"leaflet-grab"),Ft(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=Wt(this._map.options.maxBounds);this._offsetLimit=Qt(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var r=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(r),this._prunePositions(r)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,r){return n-(n-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;n.x<r.min.x&&(n.x=this._viscousLimit(n.x,r.min.x)),n.y<r.min.y&&(n.y=this._viscousLimit(n.y,r.min.y)),n.x>r.max.x&&(n.x=this._viscousLimit(n.x,r.max.x)),n.y>r.max.y&&(n.y=this._viscousLimit(n.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,r=Math.round(n/2),l=this._initialWorldOffset,h=this._draggable._newPos.x,d=(h-r+l)%n+r-l,p=(h+r+l)%n-r-l,w=Math.abs(d+l)<Math.abs(p+l)?d:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(n){var r=this._map,l=r.options,h=!l.inertia||this._times.length<2;if(r.fire("dragend",n),h)r.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,w=l.easeLinearity,C=d.multiplyBy(w/p),x=C.distanceTo([0,0]),P=Math.min(l.inertiaMaxSpeed,x),H=C.multiplyBy(P/x),G=P/(l.inertiaDeceleration*w),mt=H.multiplyBy(-G/2).round();!mt.x&&!mt.y?r.fire("moveend"):(mt=r._limitOffset(mt,r.options.maxBounds),W(function(){r.panBy(mt,{duration:G,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});ft.addInitHook("addHandler","dragging",hh),ft.mergeOptions({keyboard:!0,keyboardPanDelta:80});var uh=Ve.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),ht(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ht(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,r=document.documentElement,l=n.scrollTop||r.scrollTop,h=n.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(h,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var r=this._panKeys={},l=this.keyCodes,h,d;for(h=0,d=l.left.length;h<d;h++)r[l.left[h]]=[-1*n,0];for(h=0,d=l.right.length;h<d;h++)r[l.right[h]]=[n,0];for(h=0,d=l.down.length;h<d;h++)r[l.down[h]]=[0,n];for(h=0,d=l.up.length;h<d;h++)r[l.up[h]]=[0,-1*n]},_setZoomDelta:function(n){var r=this._zoomKeys={},l=this.keyCodes,h,d;for(h=0,d=l.zoomIn.length;h<d;h++)r[l.zoomIn[h]]=n;for(h=0,d=l.zoomOut.length;h<d;h++)r[l.zoomOut[h]]=-n},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ht(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var r=n.keyCode,l=this._map,h;if(r in this._panKeys)(!l._panAnim||!l._panAnim._inProgress)&&(h=this._panKeys[r],n.shiftKey&&(h=lt(h).multiplyBy(3)),l.panBy(h),l.options.maxBounds&&l.panInsideBounds(l.options.maxBounds));else if(r in this._zoomKeys)l.setZoom(l.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;on(n)}}});ft.addInitHook("addHandler","keyboard",uh),ft.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dh=Ve.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ht(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var r=Bc(n),l=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var h=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),h),on(n)},_performZoom:function(){var n=this._map,r=n.getZoom(),l=this._map.options.zoomSnap||0;n._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,p=l?Math.ceil(d/l)*l:d,w=n._limitZoom(r+(this._delta>0?p:-p))-r;this._delta=0,this._startTime=null,w&&(n.options.scrollWheelZoom==="center"?n.setZoom(r+w):n.setZoomAround(this._lastMousePos,r+w))}});ft.addInitHook("addHandler","scrollWheelZoom",dh),ft.mergeOptions({tap:!0,tapTolerance:15});var fh=Ve.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ht(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(!!n.touches){if(Ee(n),this._fireClick=!0,n.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var r=n.touches[0],l=r.target;this._startPos=this._newPos=new U(r.clientX,r.clientY),l.tagName&&l.tagName.toLowerCase()==="a"&&it(l,"leaflet-active"),this._holdTimeout=setTimeout(c(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",r))},this),1e3),this._simulateEvent("mousedown",r),ht(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(n){if(clearTimeout(this._holdTimeout),Ht(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&n&&n.changedTouches){var r=n.changedTouches[0],l=r.target;l&&l.tagName&&l.tagName.toLowerCase()==="a"&&Ft(l,"leaflet-active"),this._simulateEvent("mouseup",r),this._isTapValid()&&this._simulateEvent("click",r)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(n){var r=n.touches[0];this._newPos=new U(r.clientX,r.clientY),this._simulateEvent("mousemove",r)},_simulateEvent:function(n,r){var l=document.createEvent("MouseEvents");l._simulated=!0,r.target._simulatedClick=!0,l.initMouseEvent(n,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(l)}});Ze&&(!Ue||_t)&&ft.addInitHook("addHandler","tap",fh),ft.mergeOptions({touchZoom:Ze&&!V,bounceAtZoomLimits:!0});var _h=Ve.extend({addHooks:function(){it(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ft(this._map._container,"leaflet-touch-zoom"),Ht(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var r=this._map;if(!(!n.touches||n.touches.length!==2||r._animatingZoom||this._zooming)){var l=r.mouseEventToContainerPoint(n.touches[0]),h=r.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(l.add(h)._divideBy(2))),this._startDist=l.distanceTo(h),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend",this._onTouchEnd,this),Ee(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var r=this._map,l=r.mouseEventToContainerPoint(n.touches[0]),h=r.mouseEventToContainerPoint(n.touches[1]),d=l.distanceTo(h)/this._startDist;if(this._zoom=r.getScaleZoom(d,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&d<1||this._zoom>r.getMaxZoom()&&d>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var p=l._add(h)._divideBy(2)._subtract(this._centerPoint);if(d===1&&p.x===0&&p.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var w=c(r._move,r,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=W(w,this,!0),Ee(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Ht(document,"touchmove",this._onTouchMove,this),Ht(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ft.addInitHook("addHandler","touchZoom",_h),ft.BoxZoom=lh,ft.DoubleClickZoom=ch,ft.Drag=hh,ft.Keyboard=uh,ft.ScrollWheelZoom=dh,ft.Tap=fh,ft.TouchZoom=_h,i.version=s,i.Control=Me,i.control=ps,i.Browser=B_,i.Evented=xt,i.Mixin=np,i.Util=K,i.Class=qt,i.Handler=Ve,i.extend=o,i.bind=c,i.stamp=f,i.setOptions=D,i.DomEvent=Y_,i.DomUtil=G_,i.PosAnimation=Fc,i.Draggable=Vn,i.LineUtil=ap,i.PolyUtil=lp,i.Point=U,i.point=lt,i.Bounds=wt,i.bounds=Qt,i.Transformation=Un,i.transformation=nn,i.Projection=cp,i.LatLng=bt,i.latLng=Rt,i.LatLngBounds=Ot,i.latLngBounds=Wt,i.CRS=jt,i.GeoJSON=cn,i.geoJSON=Xc,i.geoJson=wp,i.Layer=Ne,i.LayerGroup=Ti,i.layerGroup=dp,i.FeatureGroup=Pi,i.featureGroup=fp,i.ImageOverlay=br,i.imageOverlay=bp,i.VideoOverlay=Jc,i.videoOverlay=Cp,i.SVGOverlay=th,i.svgOverlay=xp,i.DivOverlay=hn,i.Popup=Li,i.popup=Ep,i.Tooltip=Ai,i.tooltip=Tp,i.Icon=Ii,i.icon=_p,i.DivIcon=eh,i.divIcon=Pp,i.Marker=mr,i.marker=pp,i.TileLayer=Mi,i.tileLayer=nh,i.GridLayer=vs,i.gridLayer=Ip,i.SVG=ws,i.svg=oh,i.Renderer=qe,i.Canvas=sh,i.canvas=rh,i.Path=En,i.CircleMarker=gr,i.circleMarker=mp,i.Circle=_a,i.circle=gp,i.Polyline=ln,i.polyline=vp,i.Polygon=Si,i.polygon=yp,i.Rectangle=ah,i.rectangle=Lp,i.Map=ft,i.map=Q_;var Ap=window.L;i.noConflict=function(){return window.L=Ap,this},window.L=i})})(gl,gl.exports);var _e=gl.exports;const Zx={class:"row me-auto"},$x=F("div",{class:"col-8 mt-1 ps-1"},[F("div",{id:"map"})],-1),Vx={key:0,class:"col-4 ps-0 pe-2"},qx=F("div",{class:"row offset-3 my-1 ps-0 badge"},"Adding SanBau Data",-1),jx={class:"row align-items-center mb-1"},Gx=F("div",{class:"col-3 ps-2"},"Nickname",-1),Kx={class:"row align-items-center mb-1"},Yx=F("div",{class:"col-3 ps-2"},"Plate",-1),Qx=F("option",{value:"human"},"Human",-1),Xx=F("option",{value:"car"},"Car",-1),Jx=F("option",{value:"motor"},"Motorcycle",-1),tE=F("option",{value:"truck"},"Truck",-1),eE=[Qx,Xx,Jx,tE],nE={class:"row align-items-center mb-1"},iE=F("div",{class:"col-3 ps-2"},"Date/Time",-1),sE={class:"row align-items-center mb-1"},rE=F("div",{class:"col-3 ps-2"},"Behavior",-1),oE={class:"row align-items-center mb-1"},aE=F("div",{class:"col-3 ps-2"},"Address",-1),lE={class:"row align-items-center mb-1"},cE=F("div",{class:"col-3 ps-2"},"Lat, Lng",-1),hE=F("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-geo-alt",viewBox:"0 0 16 16"},[F("path",{d:"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"}),F("path",{d:"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})],-1),uE=[hE],dE={class:"row align-items-center mb-1"},fE=F("div",{class:"col-3 ps-2"},"appendix",-1),_E={class:"row align-items-center"},pE=F("div",{class:"col-3 ps-2"},"News",-1),mE={key:1,class:"col-4 px-1 my-1"},gE={class:"search_list row"},vE={key:0,class:"fs-1 text-center"},yE={key:1,class:"table table-hover table-sm"},wE=F("thead",null,[F("tr",null,[F("th",{class:"col-3"},"Plate"),F("th",{class:"col-4"},"Nickname"),F("th",{class:"col"},"Date/Time")])],-1),bE=["onClick"],CE={setup(e){const i=ef({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=v_(i);R_(i,{provider:new Ho("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let o,a,c,u,f,_=_e.marker(),g=_e.marker(),m=_e.layerGroup(),v=Re({type:"car"}),T=7,A=Re([]);function D(){let W,M={nickname:v.value.nickname,plate:v.value.plate,type:v.value.type,date:v.value.date,time:v.value.time,behavior:v.value.behavior,address:v.value.address,latlng:v.value.latlng,appendix:v.value.appendix,news:v.value.news};if(!(M.nickname==null||M.plate==null||M.date==null||M.time==null||M.behavior==null||M.latlng==null)&&!(M.plate!=null&&M.type=="human")){for(let K in M)M[K]==null&&(M[K]="");Di(Ie(s,"/map/count")).then(K=>{try{W=K.val()+1}catch{W=1}m_(Ie(s,`/map/${W}`),{nickname:M.nickname,plate:M.plate,type:M.type,behavior:M.behavior,address:M.address,date:M.date,time:M.time,latlng:M.latlng,appendix:M.appendix,news:M.news}),_l(Ie(s,"/map/"),{count:W})}),Mt()}}function $(){navigator.geolocation.getCurrentPosition(W=>{a=W.coords.latitude,c=W.coords.longitude}),o.setView([a,c],10),o.removeLayer(g),v.value.latlng=`${a.toFixed(T)}, ${c.toFixed(T)}`,g=_e.marker([a,c]).addTo(o).bindPopup("you're here").openPopup(),X()}function nt(){window.open("https://imgur.com/upload")}function Mt(){v.value=[],v.value.type="car",o.removeLayer(_)}async function q(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(async W=>{a=W.coords.latitude,c=W.coords.longitude,o=_e.map("map",{center:[a,c],zoom:10,attributionControl:!0,zoomControl:!0}),_e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(o),g=_e.marker([a,c]).addTo(o).bindPopup("you're here").openPopup(),await X(),o.on("click",tt),o.on("moveend",X)})}async function X(){o.removeLayer(m),f=await o.getCenter(),m=_e.layerGroup().addTo(o),await Nt()}function tt(W){u=W,Yt(),v.value.latlng=`${W.latlng.lat.toFixed(T)}, ${W.latlng.lng.toFixed(T)}`}function Yt(){let W=v.value.type;o.removeLayer(_),_=_e.marker(u.latlng,{icon:ut(W)}).addTo(o).bindPopup("SamBao is here").openPopup()}function ut(W){return _e.icon({iconUrl:`./pic/${W}.png`,iconSize:[40,40],popupAnchor:[0,-15]})}async function Nt(){let W=await Di(Ie(s,"/map"));W=Object.keys(W.val()).length;let M=[];for(let K=1;K<W;K++){let qt=await Di(Ie(s,`/map/${K}`));M.push(qt.val())}M.forEach(K=>{_e.latLng(K.latlng.split(",")).distanceTo(f)/1e3<=50&&_e.marker(K.latlng.split(","),{icon:ut(K.type)}).addTo(m).bindPopup(It(K))})}es(async()=>{await q()});function It(W){let M='<div class="row row-cols-2">';return W.nickname!=""&&(M+=`<div class="col-4">Nickname</div><div class="col">${W.nickname}</div>`),W.plate!=""&&(M+=`<div class="col-4">Plate</div><div class="col">${W.plate}</div>`),GC.date!=""&&(M+=`<div  class="col-4">Date</div><div class="col">${W.date}</div>`),W.time!=""&&(M+=`<div class="col-4">Time</div><div class="col">${W.time}</div>`),W.behavior!=""&&(M+=`<div class="col-4">Behavior</div><div class="col">${W.behavior}</div>`),W.address!=""&&(M+=`<div class="col-4">Address</div><div class="col">${W.address}</div>`),W.appendix!=""&&(M+=`<div class="col-4">Imgur</div><div class="col"><a class="text-warning fw-bold" href=${W.appendix} target="_blank">Imgur Link</a></div>`),W.news!=""&&(M+=`<div class="col-4">News</div><div class="col"><a class="text-warning fw-bold" href=${W.news} target="_blank">News Link</a></div>`),M+="</div>",M}function re(W){let M=W.latlng.split(",");o.setView(M,10),X(),_e.popup({offset:_e.point(0,-15)}).setLatLng(M).setContent(It(W)).openOn(o)}return Dr(()=>kn.value,async W=>{if(W!=""){A.value=[];let M=Fu(Ie(s,"/map"),Bu("plate"),Du(kn.value)),K=await Di(M),qt=Fu(Ie(s,"/map"),Bu("nickname"),Du(kn.value)),Hn=await Di(qt);K.forEach(dt=>{dt.val()!=null&&A.value.push(dt.val())}),Hn.forEach(dt=>{dt.val()!=null&&A.value.push(dt.val())}),console.log(A.value)}}),(W,M)=>pe((oe(),he("div",Zx,[$x,et(Qe).show_search==!1?(oe(),he("div",Vx,[qx,F("div",jx,[Gx,pe(F("input",{class:"col rounded border py-2 bg-dark text-light border-secondary",type:"text",placeholder:"C300\u54E5/\u796D\u592E\u4E42/\u99AC\u7DAD\u62C9/\u97D3\u7E3D\u6A5F","onUpdate:modelValue":M[0]||(M[0]=K=>et(v).nickname=K),maxlength:"20"},null,512),[[Pe,et(v).nickname]])]),F("div",Kx,[Yx,pe(F("input",{class:"col rounded border py-2 bg-dark border-secondary text-light me-1 text-uppercase",type:"text",placeholder:"ABC-1234","onUpdate:modelValue":M[1]||(M[1]=K=>et(v).plate=K)},null,512),[[Pe,et(v).plate]]),pe(F("select",{class:"col-4 py-2 rounded border-secondary border bg-dark text-light","onUpdate:modelValue":M[2]||(M[2]=K=>et(v).type=K),onChange:Yt},eE,544),[[dv,et(v).type]])]),F("div",nE,[iE,pe(F("input",{class:"col border rounded py-2 me-1 bg-dark text-light border-secondary","onUpdate:modelValue":M[3]||(M[3]=K=>et(v).date=K),type:"date"},null,512),[[Pe,et(v).date]]),pe(F("input",{class:"border-secondary col-4 border rounded py-2 bg-dark text-light","onUpdate:modelValue":M[4]||(M[4]=K=>et(v).time=K),type:"time"},null,512),[[Pe,et(v).time]])]),F("div",sE,[rE,pe(F("textarea",{class:"col py-2 border rounded bg-dark text-light border-secondary",type:"text",placeholder:"How SanBau?",maxlength:"100","onUpdate:modelValue":M[5]||(M[5]=K=>et(v).behavior=K)},null,512),[[Pe,et(v).behavior]])]),F("div",oE,[aE,pe(F("textarea",{class:"col py-2 border rounded bg-dark text-light border-secondary",type:"text",placeholder:"Where? (option)",maxlength:"100","onUpdate:modelValue":M[6]||(M[6]=K=>et(v).address=K)},null,512),[[Pe,et(v).address]])]),F("div",lE,[cE,pe(F("input",{class:"col border rounded bg-dark text-light py-2 border-secondary",type:"text",placeholder:"Location","onUpdate:modelValue":M[7]||(M[7]=K=>et(v).latlng=K),maxlength:"30"},null,512),[[Pe,et(v).latlng]]),F("div",{class:"badge col-2 text-warning",title:"get currten latlng",type:"button",onClick:$},uE)]),F("div",dE,[fE,pe(F("input",{class:"col border border-secondary rounded py-2 bg-dark text-secondary",type:"url",placeholder:"Imgur Url (option)","onUpdate:modelValue":M[8]||(M[8]=K=>et(v).link=K)},null,512),[[Pe,et(v).link]]),F("figure",{class:"figure col-2 my-0 py-0 text-center"},[F("img",{class:"img-fluid",onClick:nt,type:"button",title:"link to imgur",src:"https://s.imgur.com/images/favicon.png"})])]),F("div",_E,[pE,pe(F("input",{class:"col border border-secondary rounded py-2 bg-dark text-secondary",type:"url",placeholder:"News Link (option)","onUpdate:modelValue":M[9]||(M[9]=K=>et(v).news=K)},null,512),[[Pe,et(v).news]])]),F("div",{class:"row mt-1 justify-content-center"},[F("div",{class:"col-3 badge fs-6 border border-secondary text-success me-1 ms-1 py-1",type:"button",onClick:D},"Add"),F("div",{class:"col-3 badge fs-6 border border-secondary text-danger py-1",type:"button",onClick:Mt}," Clear")])])):_n("",!0),et(Qe).show_search==!0?(oe(),he("div",mE,[F("div",gE,[et(A).length==0?(oe(),he("div",vE," ~no data~ ")):_n("",!0),et(A).length!=0?(oe(),he("table",yE,[wE,F("tbody",null,[(oe(!0),he(Se,null,Wd(et(A),K=>(oe(),he("tr",{onClick:qt=>re(K)},[F("td",null,Ln(K.plate),1),F("td",null,Ln(K.nickname),1),F("td",null,Ln(K.date)+"-"+Ln(K.time),1)],8,bE))),256))])])):_n("",!0)])])):_n("",!0)],512)),[[fv,et(Qe).show_map==!0]])}};const xE={key:0,class:"container-fluid px-3 hate"},EE=Mg('<div class="fs-1 my-1"> Author: <span class="text-warning">OrzOGC</span></div><div class="fs-1 my-1">\u6D3B\u7684\u7CBE\u5F69,\u4FEE\u7684\u75DB\u5FEB,Fix On RoaD</div><div class="fs-1 my-1 mx-1">\u9055\u898F\u9B54\u4EBA\u90FD\u53BB\u6B7B\u4E00\u6B7B\u5566\u5E79</div><div class="fs-1 my-1 mx-2">\u81C9\u76AE\u90FD\u6BD4\u6211\u963F\u5B24\u7684\u8173\u5E95\u76AE\u9084\u539A\u5566\u5E79</div><div class="fs-1 my-1 mx-3">\u4E09\u5BF6\u90FD\u4ED6\u5ABD\u7684\u53BB\u5403\u5C4E\u5566\u5E79</div><div class="fs-1 my-1 mx-4">\u9F9C\u4ED4\u958B\u90A3\u9EBC\u6162\u9084\u4E0D\u6EFE\u53BB\u9A0E\u52C1\u6230\u5566\u5E79</div><div class="fs-1 my-2 mx-5">\u4ED6\u5ABD\u7684\u5357\u90E8\u9109\u4E0B\u5F70\u5316\u8C93\u5974\u5C31\u662F\u64CD\u4F60\u5A18\u7684\u6C92\u6C34\u6E96\u5566\u5E79</div>',7),TE={setup(e){let t=Re(["","","",""]);function i(o){t.value[o]==""?t.value[o]="fuck-top":t.value[o]=""}function s(){setTimeout(async()=>{if(Qe.value.show_about==!0){let o=Math.round(Math.random()*3);i(o)}s()},Math.round(Math.random()*1e4))}return es(async()=>{s()}),(o,a)=>et(Qe).show_about==!0?(oe(),he("div",xE,[EE,F("div",{class:Ke(["text-black lh-1 fuck fuck-1",et(t)[0]])},"\u5E79",2),F("div",{class:Ke(["text-black lh-1 fuck fuck-2",et(t)[1]])},"\u6041",2),F("div",{class:Ke(["text-black lh-1 fuck fuck-3",et(t)[2]])},"\u5A18",2),F("div",{class:Ke(["text-black lh-1 fuck fuck-4",et(t)[3]])},"\u5566",2)])):_n("",!0)}};const PE={key:0,class:"txt"},IE={key:0,class:"bg-dark border border-secondary input"},SE={class:"row w-100 h-75 mx-auto mt-3"},kE={class:"col-9"},LE={class:"form-floating"},AE={for:"input",class:"text-light"},ME={class:"row my-2 mx-2 align-items-center"},NE=F("div",{class:"col-2"},"Author",-1),RE={class:"row h-100"},OE=["onClick"],DE={key:0,class:"zero text-light h-75 mt-2 overflow-auto text-break text-wrap txt lh-sm"},BE={key:1,class:"zero text-light d-flex align-self-center justify-content-end fw-light small"},FE={setup(e){const i=ef({apiKey:"AIzaSyAEvJzElQdmOL_8buY2qFP2A95inwU0Aug",authDomain:"cyber-butchers.firebaseapp.com",databaseURL:"https://cyber-butchers-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cyber-butchers",storageBucket:"cyber-butchers.appspot.com",messagingSenderId:"904143225733",appId:"1:904143225733:web:3d16dd6d240892a5a5baec",measurementId:"G-QBBG1SGW3K"}),s=v_(i);R_(i,{provider:new Ho("6LcBNv4dAAAAAIvtoqY-KvLMdO1rTdPFhM2uxlYW")});let o=24,a=Re(""),c=Re(""),u=Re(""),f=Re({}),_=Re(0);es(()=>{D()});function g(q,X){_.value=1,c.value="message",a.value=q,u.value=X}function m(){_.value==0?_.value=1:_.value=0}function v(){let q=Math.ceil(Math.random()*360),X=Math.ceil(Math.random()*75)+25,tt=Math.ceil(Math.random()*25)+5;return`background-color:hsla(${q},${X}%,${tt}%)`}function T(q){$C(Ie(s,`/msg/${q}`),X=>{let tt=X.val();try{f.value[q]={msg:tt.msg,date:tt.date,bg:tt.bg,nic:tt.nic}}catch{f.value[q]={msg:"",date:"",bg:v(),nic:""}}})}function A(){let q=`author: OrzOGC
	non-professional developer
	senior mechanical designer
	senior part-time gofer
	and road rage monster`;a.value=q,c.value="about",u.value="OrzOGC"}function D(){nt();for(let q=1;q<=o;q++)T(q)}function $(){let q=a.value,X,tt=u.value;tt==null&&(tt=""),q==""&&(c.value="Oops!"),q!=""&&Di(Ie(s,"/msg/flag")).then(Yt=>{let ut=Yt.val();ut>=o?X=1:X=ut+1;let Nt={day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};m_(Ie(s,`/msg/${X}`),{msg:q,date:new Date().toLocaleString("en-US",Nt),bg:v(),nic:tt}),_l(Ie(s,"/msg/"),{flag:X}),D(),_.value=0})}function nt(){a.value="",c.value="Write some messages",u.value=""}function Mt(){for(let q=1;q<=o;q++)_l(Ie(s,`/msg/${q}`),{bg:v()});nt()}return(q,X)=>et(Qe).show_msg==!0?(oe(),he("div",PE,[F("div",{class:"bg-dark fab text-warning fs-1 lh-1 fw-bolder text-center",type:"button",onClick:m},"+"),et(_)==1?(oe(),he("div",IE,[F("div",{type:"button",class:"position-absolute top-0 end-0 btn-close btn-close-white",onClick:m}),F("div",SE,[F("div",kE,[F("div",LE,[pe(F("textarea",{id:"input",class:"zero text-light border-secondary bg-dark h-100 lh-base form-control txt","onUpdate:modelValue":X[0]||(X[0]=tt=>$t(a)?a.value=tt:a=tt)},Ln(et(a)),513),[[Pe,et(a)]]),F("label",AE,Ln(et(c)),1)])]),F("div",{class:"col ps-0 me-3 flex-column d-flex"},[F("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-center text-success",onClick:$},"Post"),F("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-danger text-center",onClick:nt},"Clear"),F("div",{type:"button",class:"border btn-block border-secondary rounded my-2 text-warning text-center",onClick:Mt},"Reset"),F("div",{type:"button",class:"border btn-block border-secondary text-center rounded my-2 text-info",onClick:A},"About")])]),F("div",ME,[NE,pe(F("input",{class:"col-5 py-2 bg-dark rounded border border-secondary text-light px-2",type:"text",placeholder:"\u516B\u5366\u5C71\u4E0B\u75E3\u4E5D",maxlength:"50","onUpdate:modelValue":X[1]||(X[1]=tt=>$t(u)?u.value=tt:u=tt)},null,512),[[Pe,et(u)]])])])):_n("",!0),F("div",RE,[(oe(!0),he(Se,null,Wd(et(f),tt=>(oe(),he("div",{class:"col-2 h-25",style:fo(tt.bg),onClick:Yt=>g(tt.msg,tt.nic)},[tt.msg!=""?(oe(),he("div",DE,Ln(tt.msg),1)):_n("",!0),tt.date!=""?(oe(),he("div",BE,Ln(tt.date),1)):_n("",!0)],12,OE))),256))])])):_n("",!0)}};Eo(wv).mount("#navbar");Eo(CE).mount("#map-frame");Eo(TE).mount("#about");Eo(FE).mount("#msg");
